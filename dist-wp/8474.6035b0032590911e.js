"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[8474],{88474:(I,m,r)=>{r.r(m),r.d(m,{default:()=>ht});var y=r(10467),s=r(8189),f=(r(21152),r(92165)),v=(r(79122),r(70176),r(92089),r(9826),r(15317),r(38582),r(96128),r(13318),r(85718),r(36156)),R=r(39693),g=r(56492),D=r(45272),o=r(85211),W=r(3248),L=r(35150),Q=(r(40707),r(76576)),U=r(6434),V=r(95478),$=r(5922),H=r(55098),K=r(19284),Y=r(89962),X=r(93327),B=r(28067),w=r(55861);let h=class extends H.A{constructor(){var t;super(...arguments),t=this,this.type="geojson",this.refresh=(0,g.sg)(function(){var e=(0,y.A)(function*(i){yield t.load();const{extent:l,timeExtent:d}=yield t._connection.invoke("refresh",i);return t.sourceJSON.extent=l,d&&(t.sourceJSON.timeInfo.timeExtent=[d.start,d.end]),{dataChanged:!0,updates:{extent:t.sourceJSON.extent,timeInfo:t.sourceJSON.timeInfo}}});return function(i){return e.apply(this,arguments)}}())}load(t){return this.addResolvingPromise(this._startWorker(null!=t?t.signal:null)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,e)).then(i=>X.A.fromJSON(i))}queryFeaturesJSON(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,e))}queryFeatureCount(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,e))}queryObjectIds(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,e))}queryExtent(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,e)).then(i=>({count:i.count,extent:B.A.fromJSON(i.extent)}))}querySnapping(t,e={}){return this.load(e).then(()=>this._connection.invoke("querySnapping",t,e))}_applyEdits(t){if(!this._connection)throw new $.A("geojson-layer-source:edit-failure","Memory source not loaded");const e=this.layer.objectIdField,i=[],l=[],d=[];if(t.addFeatures)for(const u of t.addFeatures)i.push(this._serializeFeature(u));if(t.deleteFeatures)for(const u of t.deleteFeatures)"objectId"in u&&null!=u.objectId?l.push(u.objectId):"attributes"in u&&null!=u.attributes[e]&&l.push(u.attributes[e]);if(t.updateFeatures)for(const u of t.updateFeatures)d.push(this._serializeFeature(u));return this._connection.invoke("applyEdits",{adds:i,updates:d,deletes:l}).then(({extent:u,timeExtent:O,featureEditResults:A})=>(this.sourceJSON.extent=u,O&&(this.sourceJSON.timeInfo.timeExtent=[O.start,O.end]),this._createEditsResult(A)))}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const e=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:e?new $.A("geojson-layer-source:edit-failure",e.description,{code:e.code}):null}}_serializeFeature(t){const{attributes:e}=t,i=this._geometryForSerialization(t);return i?{geometry:i.toJSON(),attributes:e}:{attributes:e}}_geometryForSerialization(t){const{geometry:e}=t;return null==e?null:"mesh"===e.type||"extent"===e.type?w.A.fromExtent(e.extent):e}_startWorker(t){var e=this;return(0,y.A)(function*(){e._connection=yield(0,K.ho)("GeoJSONSourceWorker",{strategy:(0,W.A)("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:e});const{fields:i,spatialReference:l,hasZ:d,geometryType:u,objectIdField:O,url:A,timeInfo:b,customParameters:mt}=e.layer,vt="defaults"===e.layer.originOf("spatialReference"),ft={url:A,customParameters:mt,fields:i&&i.map(E=>E.toJSON()),geometryType:U.g.toJSON(u),hasZ:d,objectIdField:O,timeInfo:b?b.toJSON():null,spatialReference:vt?null:l&&l.toJSON()},S=yield e._connection.invoke("load",ft,{signal:t});for(const E of S.warnings)L.A.getLogger(e.layer).warn("#load()",`$${E.message} (title: '${e.layer.title||"no title"}', id: '${e.layer.id??"no id"}')`,{warning:E});S.featureErrors.length&&L.A.getLogger(e.layer).warn("#load()",`Encountered ${S.featureErrors.length} validation errors while loading features. (title: '${e.layer.title||"no title"}', id: '${e.layer.id??"no id"}')`,{errors:S.featureErrors}),e.sourceJSON=S.layerDefinition,e.capabilities=(0,Y.f)(e.sourceJSON.hasZ,!0)})()}};(0,s._)([(0,o.MZ)()],h.prototype,"capabilities",void 0),(0,s._)([(0,o.MZ)()],h.prototype,"type",void 0),(0,s._)([(0,o.MZ)({constructOnly:!0})],h.prototype,"layer",void 0),(0,s._)([(0,o.MZ)()],h.prototype,"sourceJSON",void 0),h=(0,s._)([(0,Q.$)("esri.layers.graphics.sources.GeoJSONSource")],h);var q=r(93410),k=r(23e3),_=r(31446),tt=r(25263),et=r(17049),rt=r(43124),st=r(85551),ot=r(1151),nt=r(33036),it=r(84311),c=r(22329),at=r(69741),lt=r(29141),ut=r(3404),x=r(86300),pt=r(20329),dt=r(73975),F=r(87086),yt=r(41843),ct=r(22639),G=r(32034);const z=(0,ut.p)();let n=class extends((0,rt.f)((0,k.d)((0,tt.J)((0,_.F)((0,q.dM)((0,it.e)((0,nt.j)((0,ot.J)((0,et.q)((0,st.A)((0,R.P)(V.A)))))))))))){constructor(t){super(t),this.copyright=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new h({layer:this}),this.spatialReference=G.A.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson"}destroy(){this.source?.destroy()}load(t){const e=this.loadFromPortal({supportedTypes:["GeoJson"],supportsData:!1},t).catch(g.QP).then(()=>this.source.load(t)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),(0,x.yp)(this.renderer,this.fieldsIndex),(0,x.sv)(this.timeInfo,this.fieldsIndex)});return this.addResolvingPromise(e),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&null==this.geometryType}get parsedUrl(){return this.url?(0,D.An)(this.url):null}set renderer(t){(0,x.yp)(t,this.fieldsIndex),this._set("renderer",t)}set url(t){if(!t)return void this._set("url",t);const e=(0,D.An)(t);this._set("url",e.path),e.query&&(this.customParameters={...this.customParameters,...e.query})}applyEdits(t,e){var i=this;return(0,y.A)(function*(){const{applyEdits:l}=yield r.e(3828).then(r.bind(r,13828));yield i.load();const d=yield l(i,i.source,t,e);return i.read({extent:i.source.sourceJSON.extent,timeInfo:i.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),d})()}on(t,e){return super.on(t,e)}createPopupTemplate(t){return(0,yt.tn)(this,t)}createQuery(){const t=new F.A,e=this.capabilities?.data;t.returnGeometry=!0,e&&e.supportsZ&&(t.returnZ=!0),t.outFields=["*"],t.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:l}=this;return t.timeExtent=null!=i&&null!=l?l.offset(-i.value,i.unit):l||null,t}getFieldDomain(t,e){return this.getField(t)?.domain}getField(t){return this.fieldsIndex.get(t)}queryFeatures(t,e){return this.load().then(()=>this.source.queryFeatures(F.A.from(t)||this.createQuery(),e)).then(i=>{if(i?.features)for(const l of i.features)l.layer=l.sourceLayer=this;return i})}queryObjectIds(t,e){return this.load().then(()=>this.source.queryObjectIds(F.A.from(t)||this.createQuery(),e))}queryFeatureCount(t,e){return this.load().then(()=>this.source.queryFeatureCount(F.A.from(t)||this.createQuery(),e))}queryExtent(t,e){return this.load().then(()=>this.source.queryExtent(F.A.from(t)||this.createQuery(),e))}hasDataChanged(){var t=this;return(0,y.A)(function*(){try{const{dataChanged:e,updates:i}=yield t.source.refresh(t.customParameters);return null!=i&&t.read(i,{origin:"service",url:t.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1})()}};(0,s._)([(0,o.MZ)({readOnly:!0,json:{read:!1,write:!1}})],n.prototype,"capabilities",null),(0,s._)([(0,o.MZ)({type:String})],n.prototype,"copyright",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],n.prototype,"createQueryVersion",null),(0,s._)([(0,o.MZ)((0,ct.P6)("dateFieldsTimeReference"))],n.prototype,"dateFieldsTimeZone",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],n.prototype,"defaultPopupTemplate",null),(0,s._)([(0,o.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],n.prototype,"definitionExpression",void 0),(0,s._)([(0,o.MZ)({type:String})],n.prototype,"displayField",void 0),(0,s._)([(0,o.MZ)({type:Boolean})],n.prototype,"editingEnabled",void 0),(0,s._)([(0,o.MZ)(c.Yj)],n.prototype,"elevationInfo",void 0),(0,s._)([(0,o.MZ)({type:[lt.A],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],n.prototype,"fields",void 0),(0,s._)([(0,o.MZ)(z.fieldsIndex)],n.prototype,"fieldsIndex",void 0),(0,s._)([(0,o.MZ)({type:B.A,json:{name:"extent"}})],n.prototype,"fullExtent",void 0),(0,s._)([(0,o.MZ)({type:["point","polygon","polyline","multipoint"],json:{read:{reader:U.g.read}}})],n.prototype,"geometryType",void 0),(0,s._)([(0,o.MZ)({type:Boolean})],n.prototype,"hasZ",void 0),(0,s._)([(0,o.MZ)(c.id)],n.prototype,"id",void 0),(0,s._)([(0,o.MZ)({type:Boolean,readOnly:!0})],n.prototype,"isTable",null),(0,s._)([(0,o.MZ)(c.kF)],n.prototype,"labelsVisible",void 0),(0,s._)([(0,o.MZ)({type:[pt.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:dt.w},write:!0}})],n.prototype,"labelingInfo",void 0),(0,s._)([(0,o.MZ)(c.fV)],n.prototype,"legendEnabled",void 0),(0,s._)([(0,o.MZ)({type:["show","hide"]})],n.prototype,"listMode",void 0),(0,s._)([(0,o.MZ)({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],n.prototype,"objectIdField",void 0),(0,s._)([(0,o.MZ)(c.ke)],n.prototype,"opacity",void 0),(0,s._)([(0,o.MZ)({type:["GeoJSON"]})],n.prototype,"operationalLayerType",void 0),(0,s._)([(0,o.MZ)(z.outFields)],n.prototype,"outFields",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],n.prototype,"parsedUrl",null),(0,s._)([(0,o.MZ)(c.M6)],n.prototype,"popupEnabled",void 0),(0,s._)([(0,o.MZ)({type:f.A,json:{name:"popupInfo",write:!0}})],n.prototype,"popupTemplate",void 0),(0,s._)([(0,o.MZ)({types:v.H,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:v.X}}}})],n.prototype,"renderer",null),(0,s._)([(0,o.MZ)(c.PY)],n.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,o.MZ)({readOnly:!0})],n.prototype,"source",void 0),(0,s._)([(0,o.MZ)({type:G.A})],n.prototype,"spatialReference",void 0),(0,s._)([(0,o.MZ)({type:[at.A]})],n.prototype,"templates",void 0),(0,s._)([(0,o.MZ)()],n.prototype,"title",void 0),(0,s._)([(0,o.MZ)({json:{read:!1},readOnly:!0})],n.prototype,"type",void 0),(0,s._)([(0,o.MZ)(c.OZ)],n.prototype,"url",null),n=(0,s._)([(0,Q.$)("esri.layers.GeoJSONLayer")],n);const ht=n},78200:(I,m,r)=>{r.d(m,{F:()=>y});const y={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},89962:(I,m,r)=>{r.d(m,{F0:()=>P,Vx:()=>J,e2:()=>N,f:()=>T});var y=r(3248),s=r(77806),Z=r(78200),f=r(48254);function P(a){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?f.Cb:"esriGeometryPolyline"===a?f.yM:f.WR}}}const j=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let C=1;function J(a,p){if((0,y.A)("esri-csp-restrictions"))return()=>({[p]:null,...a});try{let v=`this${M(p)} = null;`;for(const g in a)v+=`this${M(g)} = ${JSON.stringify(a[g])};`;const R=new Function(`\n      return class AttributesClass$${C++} {\n        constructor() {\n          ${v};\n        }\n      }\n    `)();return()=>new R}catch{return()=>({[p]:null,...a})}}function M(a){return j.test(a)?`.${a}`:`["${a}"]`}function N(a={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,s.o8)(a)}}]}function T(a,p){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:a},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:p,supportsDelete:p,supportsEditing:p,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:p,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:Z.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:p,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}}}]);