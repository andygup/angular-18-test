"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[401],{94268:(Oe,ne,E)=>{E.d(ne,{a:()=>L,b:()=>pe,c:()=>Fe,f:()=>_e,g:()=>ie,j:()=>Ue,n:()=>et}),E(3248),E(35150);var Y=E(69287),ee=E(92771),P=E(28714),H=E(25866),$=E(53781),re=E(89141),q=E(85952),Me=E(41510),se=E(55703),Pe=E(99608),Ee=E(19741);const V=Fe();function Fe(){return(0,re.vt)()}const N=$.e,G=$.e;function L(F,Z){return(0,$.c)(Z,F)}function pe(F){return F[3]}function ie(F){return F}function _e(F,Z,z,te){return(0,re.fA)(F,Z,z,te)}function J(F,Z,z){if(null==Z||!Q(F,Z,K))return!1;let{t0:te,t1:ce}=K;if((te<0||ce<te&&ce>0)&&(te=ce),te<0)return!1;if(z){const{origin:fe,direction:Ie}=Z;z[0]=fe[0]+Ie[0]*te,z[1]=fe[1]+Ie[1]*te,z[2]=fe[2]+Ie[2]*te}return!0}const K={t0:0,t1:0};function Q(F,Z,z){const{origin:te,direction:ce}=Z,fe=Ce;fe[0]=te[0]-F[0],fe[1]=te[1]-F[1],fe[2]=te[2]-F[2];const Ie=ce[0]*ce[0]+ce[1]*ce[1]+ce[2]*ce[2];if(0===Ie)return!1;const Le=2*(ce[0]*fe[0]+ce[1]*fe[1]+ce[2]*fe[2]),Be=Le*Le-4*Ie*(fe[0]*fe[0]+fe[1]*fe[1]+fe[2]*fe[2]-F[3]*F[3]);if(Be<0)return!1;const Ke=Math.sqrt(Be);return z.t0=(-Le-Ke)/(2*Ie),z.t1=(-Le+Ke)/(2*Ie),!0}const Ce=(0,H.vt)();function Ue(F,Z){return J(F,Z,null)}function Ae(F,Z,z){const te=Ee.rq.get(),ce=Ee.Rc.get();(0,P.b)(te,Z.origin,Z.direction);const fe=pe(F);(0,P.b)(z,te,Z.origin),(0,P.j)(z,z,1/(0,P.l)(z)*fe);const Ie=Je(F,Z.origin),Le=(0,Pe.g7)(Z.origin,z);return(0,ee.$0)(ce,Le+Ie,te),(0,P.h)(z,z,ce),z}function Ne(F,Z,z){const te=(0,P.f)(Ee.rq.get(),Z,F),ce=(0,P.j)(Ee.rq.get(),te,F[3]/(0,P.l)(te));return(0,P.g)(z,ce,F)}function Je(F,Z){const z=(0,P.f)(Ee.rq.get(),Z,F),te=(0,P.l)(z),ce=pe(F),fe=ce+Math.abs(ce-te);return(0,Y.XM)(ce/fe)}const Ve=(0,H.vt)();function ze(F,Z,z,te){const ce=(0,P.f)(Ve,Z,F);switch(z){case Me._.X:{const fe=(0,Y.jU)(ce,Ve)[2];return(0,P.s)(te,-Math.sin(fe),Math.cos(fe),0)}case Me._.Y:{const fe=(0,Y.jU)(ce,Ve),Ie=fe[1],Le=fe[2],Be=Math.sin(Ie);return(0,P.s)(te,-Be*Math.cos(Le),-Be*Math.sin(Le),Math.cos(Ie))}case Me._.Z:return(0,P.n)(te,ce);default:return}}function qe(F,Z){const z=(0,P.f)(Xe,Z,F);return(0,P.l)(z)-F[3]}function et(F,Z){const z=(0,P.a)(F,Z),te=pe(F);return z<=te*te}const Xe=(0,H.vt)(),je=Fe();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:V,altitudeAt:qe,angleToSilhouette:Je,axisAt:ze,clear:function B(F){F[0]=F[1]=F[2]=F[3]=0},closestPoint:function Se(F,Z,z){return J(F,Z,z)?z:((0,se.oC)(Z,F,z),Ne(F,z,z))},closestPointOnSilhouette:Ae,containsPoint:et,copy:L,create:Fe,distanceToSilhouette:function dt(F,Z){const z=(0,P.f)(Ee.rq.get(),Z,F),te=(0,P.q)(z);return Math.sqrt(Math.abs(te-F[3]*F[3]))},elevate:function U(F,Z,z){return F!==z&&(z[0]=F[0],z[1]=F[1],z[2]=F[2]),z[3]=F[3]+Z,z},equals:G,exactEquals:N,fromCenterAndRadius:function ae(F,Z){return(0,re.fA)(F[0],F[1],F[2],Z)},fromRadius:function le(F,Z){return F[0]=F[1]=F[2]=0,F[3]=Z,F},fromValues:_e,getCenter:ie,getRadius:pe,intersectLine:function k(F,Z,z){const te=(0,se.Cr)(Z,z);if(!Q(F,te,K))return[];const{origin:ce,direction:fe}=te,{t0:Ie,t1:Le}=K,Be=Ke=>{const Ye=(0,H.vt)();return(0,P.u)(Ye,ce,fe,Ke),Ne(F,Ye,Ye)};return Math.abs(Ie-Le)<(0,q.FD)()?[Be(Ie)]:[Be(Ie),Be(Le)]},intersectRay:J,intersectRayClosestSilhouette:function ye(F,Z,z){if(J(F,Z,z))return z;const te=Ae(F,Z,Ee.rq.get());return(0,P.g)(z,Z.origin,(0,P.j)(Ee.rq.get(),Z.direction,(0,P.r)(Z.origin,te)/(0,P.l)(Z.direction))),z},intersectsRay:Ue,projectPoint:Ne,setAltitudeAt:function ut(F,Z,z,te){const ce=qe(F,Z),fe=ze(F,Z,Me._.Z,Xe),Ie=(0,P.j)(Xe,fe,z-ce);return(0,P.g)(te,Z,Ie)},setExtent:function O(F,Z,z){return F!==z&&L(F,z),z},tmpSphere:je,union:function ft(F,Z,z=(0,re.vt)()){const te=(0,P.r)(F,Z),ce=F[3],fe=Z[3];return te+fe<ce?((0,$.c)(z,F),z):te+ce<fe?((0,$.c)(z,Z),z):((0,P.o)(z,F,Z,(te+fe-ce)/(2*te)),z[3]=(te+ce+fe)/2,z)},wrap:function oe(F){return F}},Symbol.toStringTag,{value:"Module"}))},86468:(Oe,ne,E)=>{E.d(ne,{T:()=>Y,U:()=>j});var D=E(69287);function j(re,q,Me=0){const se=(0,D.qE)(re,0,H);for(let Pe=0;Pe<4;Pe++)q[Me+Pe]=Math.floor(256*$(se*ee[Pe]))}function Y(re,q=0){let Me=0;for(let se=0;se<4;se++)Me+=re[q+se]*P[se];return Me}const ee=[1,256,65536,16777216],P=[1/256,1/65536,1/16777216,1/4294967296],H=Y(new Uint8ClampedArray([255,255,255,255]));function $(re){return re-Math.floor(re)}},55703:(Oe,ne,E)=>{E.d(ne,{Cr:()=>se,LV:()=>q,fA:()=>Pe,oC:()=>V,vt:()=>H}),E(89952);var j=E(84149),Y=E(28714),ee=E(25866);function H(L){return L?$((0,ee.o8)(L.origin),(0,ee.o8)(L.direction)):$((0,ee.vt)(),(0,ee.vt)())}function $(L,ae){return{origin:L,direction:ae}}function q(L,ae){const oe=N.get();return oe.origin=L,oe.direction=ae,oe}function se(L,ae,oe=H()){return(0,Y.c)(oe.origin,L),(0,Y.f)(oe.direction,ae,L),oe}function Pe(L,ae,oe=H()){return(0,Y.c)(oe.origin,L),(0,Y.c)(oe.direction,ae),oe}function V(L,ae,oe){const B=(0,Y.m)(L.direction,(0,Y.f)(oe,ae,L.origin));return(0,Y.g)(oe,L.origin,(0,Y.j)(oe,L.direction,B)),oe}E(19741);const N=new j.I(()=>H());(0,ee.vt)()},70787:(Oe,ne,E)=>{E.d(ne,{MA:()=>se,m0:()=>B,wH:()=>N});var D=E(5922),j=E(77806),Y=E(35150),ee=E(46835),P=E(40972);const H=()=>Y.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function $(U,O,J){let k="",K=0;for(;K<J;){const Q=U[O+K];if(Q<128)k+=String.fromCharCode(Q),K++;else if(Q>=192&&Q<224){if(K+1>=J)throw new D.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");k+=String.fromCharCode((31&Q)<<6|63&U[O+K+1]),K+=2}else if(Q>=224&&Q<240){if(K+2>=J)throw new D.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");k+=String.fromCharCode((15&Q)<<12|(63&U[O+K+1])<<6|63&U[O+K+2]),K+=3}else{if(!(Q>=240&&Q<248))throw new D.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(K+3>=J)throw new D.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const Ce=(7&Q)<<18|(63&U[O+K+1])<<12|(63&U[O+K+2])<<6|63&U[O+K+3];k+=Ce>=65536?String.fromCharCode(55296+(Ce-65536>>10),56320+(1023&Ce)):String.fromCharCode(Ce),K+=4}}}return k}function re(U,O){const J={byteOffset:0,byteCount:0,fields:Object.create(null)};let k=0;for(let K=0;K<O.length;K++){const Q=O[K],Ce=Q.valueType||Q.type;J.fields[Q.property]=(0,pe[Ce])(U,k),k+=le[Ce].BYTES_PER_ELEMENT}return J.byteCount=k,J}function Me(U,O,J){const k=[];let K,Q,Ce=0;for(Q=0;Q<U;Q+=1){if(K=O[Q],K>0){if(k.push($(J,Ce,K-1)),0!==J[Ce+K-1])throw new D.A("string-array-error","Invalid string array: missing null termination.")}else k.push(null);Ce+=K}return k}function se(U,O){return new le[O.valueType](U,O.byteOffset,O.count*O.valuesPerElement)}function V(U,O,J){if(O!==U&&H().error(`Invalid ${J} buffer size\n expected: ${U}, actual: ${O})`),O<U)throw new D.A("buffer-too-small","Binary buffer is too small",{expectedSize:U,actualSize:O})}function N(U,O){const J=re(U,O&&O.header);let k=J.byteCount;const K={isDraco:!1,header:J,byteOffset:J.byteCount,byteCount:0,vertexAttributes:{}},Q=J.fields,Ce=null!=Q.vertexCount?Q.vertexCount:Q.count;for(const Ae of O.ordering){if(!O.vertexAttributes[Ae])continue;const Se={...O.vertexAttributes[Ae],byteOffset:k,count:Ce};K.vertexAttributes[oe[Ae]||"_"+Ae]=Se,k+=_e(Se.valueType)*Se.valuesPerElement*Ce}const Ue=Q.faceCount;if(O.faces&&Ue){K.faces={};for(const Ae of O.ordering){if(!O.faces[Ae])continue;const Se={...O.faces[Ae],byteOffset:k,count:Ue};K.faces[Ae]=Se,k+=_e(Se.valueType)*Se.valuesPerElement*Ue}}const ye=Q.featureCount;if(O.featureAttributes&&O.featureAttributeOrder&&ye){K.featureAttributes={};for(const Ae of O.featureAttributeOrder){if(!O.featureAttributes[Ae])continue;const Se={...O.featureAttributes[Ae],byteOffset:k,count:ye};K.featureAttributes[Ae]=Se,k+=("UInt64"===Se.valueType?8:_e(Se.valueType))*Se.valuesPerElement*ye}}return V(k,U.byteLength,"geometry"),K.byteCount=k-K.byteOffset,K}const oe={position:P.r.POSITION,normal:P.r.NORMAL,color:P.r.COLOR,uv0:P.r.UV0,region:P.r.UVREGION};function B(U,O,J){if("lepcc-rgb"===U.encoding)return(0,ee.mb)(O);if("lepcc-intensity"===U.encoding)return(0,ee.Ax)(O);if(null!=U.encoding&&""!==U.encoding)throw new D.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");U["attributeByteCounts "]&&!U.attributeByteCounts&&(H().warn("Warning: Trailing space in 'attributeByteCounts '."),U.attributeByteCounts=U["attributeByteCounts "]),"ObjectIds"===U.ordering[0]&&U.hasOwnProperty("objectIds")&&(H().warn("Warning: Case error in objectIds"),U.ordering[0]="objectIds");const k=function Ee(U,O,J){const k=null!=O.header?re(U,O.header):{byteOffset:0,byteCount:0,fields:{count:J}},K={header:k,byteOffset:k.byteCount,byteCount:0,entries:Object.create(null)};let Q=k.byteCount;for(let Ce=0;Ce<O.ordering.length;Ce++){const Ue=O.ordering[Ce],ye=(0,j.o8)(O[Ue]);if(ye.count=k.fields.count??0,"String"===ye.valueType){if(ye.byteOffset=Q,ye.byteCount=k.fields[Ue+"ByteCount"],"UTF-8"!==ye.encoding)throw new D.A("unsupported-encoding","Unsupported String encoding.",{encoding:ye.encoding});if(ye.timeEncoding&&"ECMA_ISO8601"!==ye.timeEncoding)throw new D.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:ye.timeEncoding})}else{if(!ie(ye.valueType))throw new D.A("unsupported-value-type","Unsupported binary valueType",{valueType:ye.valueType});{const Ae=_e(ye.valueType);Q+=Q%Ae!=0?Ae-Q%Ae:0,ye.byteOffset=Q,ye.byteCount=Ae*ye.valuesPerElement*ye.count}}Q+=ye.byteCount??0,K.entries[Ue]=ye}return K.byteCount=Q-K.byteOffset,K}(O,U,J);V(k.byteOffset+k.byteCount,O.byteLength,"attribute");const K=k.entries.attributeValues||k.entries.objectIds;if(K){if("String"===K.valueType){const Q=k.entries.attributeByteCounts,Ce=se(O,Q),Ue=function Pe(U,O){return new Uint8Array(U,O.byteOffset,O.byteCount)}(O,K);return K.timeEncoding?function q(U,O,J){return Me(U,O,J).map(k=>{const K=k?Date.parse(k):null;return K&&!Number.isNaN(K)?K:null})}(Q.count,Ce,Ue):Me(Q.count,Ce,Ue)}return se(O,K)}throw new D.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const le={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},pe={Float32:(U,O)=>new DataView(U,0).getFloat32(O,!0),Float64:(U,O)=>new DataView(U,0).getFloat64(O,!0),UInt8:(U,O)=>new DataView(U,0).getUint8(O),Int8:(U,O)=>new DataView(U,0).getInt8(O),UInt16:(U,O)=>new DataView(U,0).getUint16(O,!0),Int16:(U,O)=>new DataView(U,0).getInt16(O,!0),UInt32:(U,O)=>new DataView(U,0).getUint32(O,!0),Int32:(U,O)=>new DataView(U,0).getInt32(O,!0)};function ie(U){return le.hasOwnProperty(U)}function _e(U){return ie(U)?le[U].BYTES_PER_ELEMENT:0}},10401:(Oe,ne,E)=>{E.d(ne,{Q7:()=>Kt,s1:()=>_t});var D=E(10467),Y=(E(21152),E(89563)),$=(E(89952),E(5922),E(3248),E(79139)),q=(E(92771),E(62789)),se=(E(28714),E(25866));E(11817),E(65580),E(32034);E(16590);var le=E(51995),_e=(E(94268),E(87086),E(70787));E(87477),E(37605),E(68677);var ye,h,je,He,mt,Ue=E(89141);(h=ye||(ye={}))[h.INVISIBLE=0]="INVISIBLE",h[h.TRANSPARENT=1]="TRANSPARENT",h[h.OPAQUE=2]="OPAQUE",E(69690),E(86468),E(61079),E(74567),E(35955),E(35589),E(20951),E(93093),E(91784),E(40972),function(h){h[h.Uniform=0]="Uniform",h[h.Varying=1]="Varying",h[h.COUNT=2]="COUNT"}(je||(je={})),E(34416),E(28825),E(41030),E(88791),E(65840),E(14705),E(33724),E(57887),function(h){h[h.Solid=0]="Solid",h[h.Sketch=1]="Sketch",h[h.Mixed=2]="Mixed",h[h.COUNT=3]="COUNT"}(He||(He={})),function(h){h[h.REGULAR=0]="REGULAR",h[h.SILHOUETTE=1]="SILHOUETTE"}(mt||(mt={}));const Et={color:(0,Ue.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:ye.OPAQUE,hasSlicePlane:!1};(0,Ue.fA)(0,0,0,.2),E(10136);var We,wt=E(19641);function _t(h,_,T,A,W,X,de,ue){return rt.apply(this,arguments)}function rt(){return rt=(0,D.A)(function*(h,_,T,A,W,X,de,ue){const he=[];for(const ge of _)ge&&W.includes(ge.name)&&he.push({url:`${h}/nodes/${T}/attributes/${ge.key}/0`,storageInfo:ge});const me=yield Promise.allSettled(he.map(ge=>(0,Y.A)(ge.url,{responseType:"array-buffer",query:{...de,token:X},signal:ue?.signal}).then(we=>(0,_e.m0)(ge.storageInfo,we.data)))),be=[];for(const ge of A){const we={};for(let De=0;De<me.length;De++){const ve=me[De];"fulfilled"===ve.status&&(we[he[De].storageInfo.name]=St(ve.value,ge))}be.push(we)}return be}),rt.apply(this,arguments)}(0,le.vt)(),function(h){h[h.OUTSIDE=0]="OUTSIDE",h[h.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",h[h.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",h[h.INSIDE=3]="INSIDE"}(We||(We={}));const Pt=-32768,Dt=-(2**31);function St(h,_){if(!h)return null;const T=h[_];return(0,$.IY)(h)?T===Pt?null:T:(0,$._G)(h)?T===Dt?null:T:T!=T?null:T}function Kt(h){null!=h&&(h[3]=-1)}!function ht(h){return{...Et,...h,type:He.Solid}}({color:[0,0,0,0],opacity:0}),(0,se.vt)(),(0,se.vt)(),(0,se.vt)(),(0,se.vt)(),(0,se.vt)(),(0,se.vt)(),(0,se.vt)(),(0,se.vt)(),(0,le.vt)(),(0,le.vt)(),new wt.ab,(0,se.vt)(),new Array(72),(0,q.vt)()},46835:(Oe,ne,E)=>{E.d(ne,{Ax:()=>Fe,Me:()=>$,mb:()=>Pe});var D=E(5922);const j=!0,Y={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function ee(N,G,L){return{identifier:String.fromCharCode.apply(null,new Uint8Array(N,L+Y.identifierOffset,Y.identifierLength)),version:G.getUint16(L+Y.versionOffset,j),checksum:G.getUint32(L+Y.checksumOffset,j)}}const P={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function $(N){const G=new DataView(N,0);let L=0;const{identifier:ae,version:oe}=ee(N,G,L);if(L+=Y.byteCount,"LEPCC     "!==ae)throw new D.A("lepcc-decode-error","Bad identifier");if(oe>1)throw new D.A("lepcc-decode-error","Unknown version");const B=function H(N,G){return{sizeLo:N.getUint32(G+P.sizeLo,j),sizeHi:N.getUint32(G+P.sizeHi,j),minX:N.getFloat64(G+P.minX,j),minY:N.getFloat64(G+P.minY,j),minZ:N.getFloat64(G+P.minZ,j),maxX:N.getFloat64(G+P.maxX,j),maxY:N.getFloat64(G+P.maxY,j),maxZ:N.getFloat64(G+P.maxZ,j),errorX:N.getFloat64(G+P.errorX,j),errorY:N.getFloat64(G+P.errorY,j),errorZ:N.getFloat64(G+P.errorZ,j),count:N.getUint32(G+P.count,j),reserved:N.getUint32(G+P.reserved,j)}}(G,L);if(L+=P.byteCount,B.sizeHi*2**32+B.sizeLo!==N.byteLength)throw new D.A("lepcc-decode-error","Bad size");const le=new Float64Array(3*B.count),pe=[],ie=[],_e=[],U=[];if(L=re(N,L,pe),L=re(N,L,ie),L=re(N,L,_e),L=re(N,L,U),L!==N.byteLength)throw new D.A("lepcc-decode-error","Bad length");let O=0,J=0;for(let k=0;k<pe.length;k++){J+=pe[k];let K=0;for(let Q=0;Q<ie[k];Q++){K+=_e[O];const Ce=U[O];le[3*O]=Math.min(B.maxX,B.minX+2*B.errorX*K),le[3*O+1]=Math.min(B.maxY,B.minY+2*B.errorY*J),le[3*O+2]=Math.min(B.maxZ,B.minZ+2*B.errorZ*Ce),O++}}return{errorX:B.errorX,errorY:B.errorY,errorZ:B.errorZ,result:le}}function re(N,G,L){const ae=[];G=q(N,G,ae);const oe=[];for(let B=0;B<ae.length;B++){oe.length=0,G=q(N,G,oe);for(let le=0;le<oe.length;le++)L.push(oe[le]+ae[B])}return G}function q(N,G,L){const ae=new DataView(N,G),oe=ae.getUint8(0),B=31&oe,le=!!(32&oe),pe=(192&oe)>>6;let ie=0;if(0===pe)ie=ae.getUint32(1,j),G+=5;else if(1===pe)ie=ae.getUint16(1,j),G+=3;else{if(2!==pe)throw new D.A("lepcc-decode-error","Bad count type");ie=ae.getUint8(1),G+=2}if(le)throw new D.A("lepcc-decode-error","LUT not implemented");const _e=Math.ceil(ie*B/8),U=new Uint8Array(N,G,_e);let O=0,J=0,k=0;const K=-1>>>32-B;for(let Q=0;Q<ie;Q++){for(;J<B;)O|=U[k]<<J,J+=8,k+=1;L[Q]=O&K,O>>>=B,J-=B,J+B>32&&(O|=U[k-1]>>8-J)}return G+k}const Me={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function Pe(N){const G=new DataView(N,0);let L=0;const{identifier:ae,version:oe}=ee(N,G,L);if(L+=Y.byteCount,"ClusterRGB"!==ae)throw new D.A("lepcc-decode-error","Bad identifier");if(oe>1)throw new D.A("lepcc-decode-error","Unknown version");const B=function se(N,G){return{sizeLo:N.getUint32(G+Me.sizeLo,j),sizeHi:N.getUint32(G+Me.sizeHi,j),count:N.getUint32(G+Me.count,j),colorMapCount:N.getUint16(G+Me.colorMapCount,j),lookupMethod:N.getUint8(G+Me.lookupMethod),compressionMethod:N.getUint8(G+Me.compressionMethod)}}(G,L);if(L+=Me.byteCount,B.sizeHi*2**32+B.sizeLo!==N.byteLength)throw new D.A("lepcc-decode-error","Bad size");if((2===B.lookupMethod||1===B.lookupMethod)&&0===B.compressionMethod){if(3*B.colorMapCount+B.count+L!==N.byteLength||B.colorMapCount>256)throw new D.A("lepcc-decode-error","Bad count");const le=new Uint8Array(N,L,3*B.colorMapCount),pe=new Uint8Array(N,L+3*B.colorMapCount,B.count),ie=new Uint8Array(3*B.count);for(let _e=0;_e<B.count;_e++){const U=pe[_e];ie[3*_e]=le[3*U],ie[3*_e+1]=le[3*U+1],ie[3*_e+2]=le[3*U+2]}return ie}if(0===B.lookupMethod&&0===B.compressionMethod){if(3*B.count+L!==N.byteLength||0!==B.colorMapCount)throw new D.A("lepcc-decode-error","Bad count");return new Uint8Array(N,L).slice()}if(B.lookupMethod<=2&&1===B.compressionMethod){if(L+3!==N.byteLength||1!==B.colorMapCount)throw new D.A("lepcc-decode-error","Bad count");const le=G.getUint8(L),pe=G.getUint8(L+1),ie=G.getUint8(L+2),_e=new Uint8Array(3*B.count);for(let U=0;U<B.count;U++)_e[3*U]=le,_e[3*U+1]=pe,_e[3*U+2]=ie;return _e}throw new D.A("lepcc-decode-error","Bad method "+B.lookupMethod+","+B.compressionMethod)}const Ee={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function Fe(N){const G=new DataView(N,0);let L=0;const{identifier:ae,version:oe}=ee(N,G,L);if(L+=Y.byteCount,"Intensity "!==ae)throw new D.A("lepcc-decode-error","Bad identifier");if(oe>1)throw new D.A("lepcc-decode-error","Unknown version");const B=function V(N,G){return{sizeLo:N.getUint32(G+Ee.sizeLo,j),sizeHi:N.getUint32(G+Ee.sizeHi,j),count:N.getUint32(G+Ee.count,j),scaleFactor:N.getUint16(G+Ee.scaleFactor,j),bitsPerPoint:N.getUint8(G+Ee.bitsPerPoint),reserved:N.getUint8(G+Ee.reserved)}}(G,L);if(L+=Ee.byteCount,B.sizeHi*2**32+B.sizeLo!==N.byteLength)throw new D.A("lepcc-decode-error","Bad size");const le=new Uint16Array(B.count);if(8===B.bitsPerPoint){if(B.count+L!==N.byteLength)throw new D.A("lepcc-decode-error","Bad size");const pe=new Uint8Array(N,L,B.count);for(let ie=0;ie<B.count;ie++)le[ie]=pe[ie]*B.scaleFactor}else if(16===B.bitsPerPoint){if(2*B.count+L!==N.byteLength)throw new D.A("lepcc-decode-error","Bad size");const pe=new Uint16Array(N,L,B.count);for(let ie=0;ie<B.count;ie++)le[ie]=pe[ie]*B.scaleFactor}else{const pe=[];if(q(N,L,pe)!==N.byteLength)throw new D.A("lepcc-decode-error","Bad size");for(let ie=0;ie<B.count;ie++)le[ie]=pe[ie]*B.scaleFactor}return le}},10136:(Oe,ne,E)=>{var j,q;E.d(ne,{k5:()=>j}),E(69287),(q=j||(j={}))[q.Multiply=1]="Multiply",q[q.Ignore=2]="Ignore",q[q.Replace=3]="Replace",q[q.Tint=4]="Tint"},61079:(Oe,ne,E)=>{E.d(ne,{A:()=>Y});var D=E(10136),j=E(93093);function Y(ee){ee.vertex.code.add(j.H`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${j.H.int(D.k5.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${j.H.int(D.k5.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${j.H.int(D.k5.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${j.H.int(D.k5.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}},74567:(Oe,ne,E)=>{var D,V;function Y(V){return V===D.Shadow||V===D.ShadowHighlight||V===D.ShadowExcludeHighlight||V===D.ViewshedShadow}function ee(V){return function Pe(V){return function se(V){return function $(V){return V===D.Color}(V)||function P(V){return V===D.Highlight||V===D.ObjectAndLayerIdColor}(V)}(V)||function Ee(V){return V===D.Depth}(V)}(V)||V===D.Normal}E.d(ne,{PJ:()=>Y,V:()=>D,XY:()=>ee}),(V=D||(D={}))[V.Color=0]="Color",V[V.Depth=1]="Depth",V[V.Normal=2]="Normal",V[V.Shadow=3]="Shadow",V[V.ShadowHighlight=4]="ShadowHighlight",V[V.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",V[V.ViewshedShadow=6]="ViewshedShadow",V[V.Highlight=7]="Highlight",V[V.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",V[V.COUNT=9]="COUNT"},34416:(Oe,ne,E)=>{E.d(ne,{W:()=>P,Y:()=>ee});var P,H,D=E(69690),j=E(93093),Y=E(40972);function ee(H,$){switch($.normalType){case P.Compressed:H.attributes.add(Y.r.NORMALCOMPRESSED,"vec2"),H.vertex.code.add(j.H`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case P.Attribute:H.attributes.add(Y.r.NORMAL,"vec3"),H.vertex.code.add(j.H`vec3 normalModel() {
return normal;
}`);break;case P.ScreenDerivative:H.fragment.code.add(j.H`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:(0,D.Xb)($.normalType);case P.COUNT:case P.Ground:}}(H=P||(P={}))[H.Attribute=0]="Attribute",H[H.Compressed=1]="Compressed",H[H.Ground=2]="Ground",H[H.ScreenDerivative=3]="ScreenDerivative",H[H.COUNT=4]="COUNT"},28825:(Oe,ne,E)=>{E.d(ne,{u:()=>j});var D=E(93093);function j({code:Y},ee){Y.add(ee.doublePrecisionRequiresObfuscation?D.H`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`:D.H`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}},35955:(Oe,ne,E)=>{E(93093)},41030:(Oe,ne,E)=>{E.d(ne,{W:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"vec3",j.c.Draw,($,re,q,Me)=>$.setUniform3fv(P,H(re,q,Me)))}}},88791:(Oe,ne,E)=>{E.d(ne,{t:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"vec3",j.c.Pass,($,re,q)=>$.setUniform3fv(P,H(re,q)))}}},65840:(Oe,ne,E)=>{E.d(ne,{m:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"float",j.c.Pass,($,re,q)=>$.setUniform1f(P,H(re,q)))}}},14705:(Oe,ne,E)=>{E.d(ne,{h:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"mat3",j.c.Draw,($,re,q)=>$.setUniformMatrix3fv(P,H(re,q)))}}},33724:(Oe,ne,E)=>{E.d(ne,{k:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"mat3",j.c.Pass,($,re,q)=>$.setUniformMatrix3fv(P,H(re,q)))}}},57887:(Oe,ne,E)=>{E.d(ne,{X:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"mat4",j.c.Pass,($,re,q)=>$.setUniformMatrix4fv(P,H(re,q)))}}},91784:(Oe,ne,E)=>{E.d(ne,{o:()=>Y});var D=E(35589),j=E(20951);class Y extends D.n{constructor(P,H){super(P,"sampler2D",j.c.Draw,($,re,q)=>$.bindTexture(P,H(re,q)))}}},35589:(Oe,ne,E)=>{E.d(ne,{n:()=>j});var D=E(20951);class j{constructor(ee,P,H,$,re=null){if(this.name=ee,this.type=P,this.arraySize=re,this.bind={[D.c.Pass]:null,[D.c.Draw]:null},$)switch(H){case D.c.Pass:this.bind[D.c.Pass]=$;break;case D.c.Draw:this.bind[D.c.Draw]=$}}equals(ee){return this.type===ee.type&&this.name===ee.name&&this.arraySize===ee.arraySize}}},93093:(Oe,ne,E)=>{E.d(ne,{H:()=>Y,Y:()=>j});const j=class D{};function Y(ee,...P){let H="";for(let $=0;$<P.length;$++)H+=ee[$]+P[$];return H+=ee[ee.length-1],H}var ee;(ee=Y||(Y={})).int=function P($){return Math.round($).toString()},ee.float=function H($){return $.toPrecision(8)}},20951:(Oe,ne,E)=>{var D,j;E.d(ne,{c:()=>D}),(j=D||(D={}))[j.Pass=0]="Pass",j[j.Draw=1]="Draw"}}]);