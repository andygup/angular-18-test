"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[2076],{31555:(Y,j,e)=>{e.d(j,{A:()=>l});var n=e(8189),u=e(98877),v=e(89952),L=e(90660),p=e(3046),c=e(71065),E=e(85211),M=(e(3248),e(35150),e(76576));let x=0,A=class extends((0,c.Te)((0,L.O)((0,p.sA)(u.A)))){constructor(s){super(s),this.id=`${Date.now().toString(16)}-analysis-${x++}`,this.title=null}get parent(){return this._get("parent")}set parent(s){const y=this.parent;if(null!=y)switch(y.type){case"line-of-sight":case"dimension":y.releaseAnalysis(this);break;case"2d":case"3d":y.analyses.includes(this)&&y.analyses.remove(this)}this._set("parent",s)}get isEditable(){return this.requiredPropertiesForEditing.every(v.Ru)}};(0,n._)([(0,E.MZ)({type:String,constructOnly:!0,clonable:!1})],A.prototype,"id",void 0),(0,n._)([(0,E.MZ)({type:String})],A.prototype,"title",void 0),(0,n._)([(0,E.MZ)({clonable:!1,value:null})],A.prototype,"parent",null),(0,n._)([(0,E.MZ)({readOnly:!0})],A.prototype,"isEditable",null),A=(0,n._)([(0,M.$)("esri.analysis.Analysis")],A);const l=A},42970:(Y,j,e)=>{e.d(j,{A:()=>n});class n{constructor(v=[]){this._elements=v}length(){return this._elements.length}get(v){return this._elements[v]}toArray(){return this.slice()}slice(v=0,L=this.length()){const p=[];for(let c=v;c<L;c++)p.push(this.get(c));return p}}},58405:(Y,j,e)=>{e.d(j,{B:()=>v,R:()=>u});var n=e(33568);class u extends n.R{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let p=this.width(),c=this.height(),E=p,D=c,f=E/Math.abs(p),M=D/Math.abs(c);if((0,n.k)(E)&&(0,n.k)(D)){let x=Math.min(E,D)/2,A=(0,n.l)(this.get("cornerRadiusTL",8),x),l=(0,n.l)(this.get("cornerRadiusTR",8),x),s=(0,n.l)(this.get("cornerRadiusBR",8),x),y=(0,n.l)(this.get("cornerRadiusBL",8),x),d=Math.min(Math.abs(E/2),Math.abs(D/2));A=(0,n.f)(A,0,d),l=(0,n.f)(l,0,d),s=(0,n.f)(s,0,d),y=(0,n.f)(y,0,d);const i=this._display;i.moveTo(A*f,0),i.lineTo(E-l*f,0),l>0&&i.arcTo(E,0,E,l*M,l),i.lineTo(E,D-s*M),s>0&&i.arcTo(E,D,E-s*f,D,s),i.lineTo(y*f,D),y>0&&i.arcTo(0,D,0,D-y*M,y),i.lineTo(0,A*M),A>0&&i.arcTo(0,0,A*f,0,A),i.closePath()}}}Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.R.classNames.concat([u.className])});class v extends n.g{_afterNew(){this._settings.themeTags=(0,n.m)(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",u.new(this._root,{themeTags:(0,n.m)(this._settings.themeTags,["background"])})),this.setPrivate("trustBounds",!0)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const p=this._prevSettings.icon,c=this.get("icon");c!==p&&(this._disposeProperty("icon"),p&&p.dispose(),c&&this.children.push(c),this._prevSettings.icon=c)}if(this.isDirty("label")){const p=this._prevSettings.label,c=this.get("label");c!==p&&(this._disposeProperty("label"),p&&p.dispose(),c&&this.children.push(c),this._prevSettings.label=c)}}}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.g.classNames.concat([v.className])})},54626:(Y,j,e)=>{e.d(j,{T:()=>v});var n=e(33568);class u extends n.e{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let p=this.width(),c=this.height();if(p>0&&c>0){let E=this.get("cornerRadius",8);E=(0,n.f)(E,0,Math.min(p/2,c/2));let D=this.get("pointerX",0),f=this.get("pointerY",0),M=this.get("pointerBaseWidth",15)/2,x=0,A=0,l=0,s=(D-x)*(c-A)-(f-A)*(p-x),y=(D-l)*(0-c)-(f-c)*(p-l);const d=this._display;if(d.moveTo(E,0),s>0&&y>0){let i=Math.round((0,n.f)(D,E+M,p-M-E));f=(0,n.f)(f,-1/0,0),d.lineTo(i-M,0),d.lineTo(D,f),d.lineTo(i+M,0)}if(d.lineTo(p-E,0),d.arcTo(p,0,p,E,E),s>0&&y<0){let i=Math.round((0,n.f)(f,E+M,c-M-E));D=(0,n.f)(D,p,1/0),d.lineTo(p,E),d.lineTo(p,Math.max(i-M,E)),d.lineTo(D,f),d.lineTo(p,i+M)}if(d.lineTo(p,c-E),d.arcTo(p,c,p-E,c,E),s<0&&y<0){let i=Math.round((0,n.f)(D,E+M,p-M-E));f=(0,n.f)(f,c,1/0),d.lineTo(p-E,c),d.lineTo(i+M,c),d.lineTo(D,f),d.lineTo(i-M,c)}if(d.lineTo(E,c),d.arcTo(0,c,0,c-E,E),s<0&&y>0){let i=Math.round((0,n.f)(f,E+M,c-E-M));D=(0,n.f)(D,-1/0,0),d.lineTo(0,c-E),d.lineTo(0,i+M),d.lineTo(D,f),d.lineTo(0,Math.max(i-M,E))}d.lineTo(0,E),d.arcTo(0,0,E,0,E),d.closePath()}}}}Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.e.classNames.concat([u.className])});class v extends n.g{constructor(p,c,E,D=[]){super(p,c,E,D),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=(0,n.m)(this._settings.themeTags,["tooltip"]),super._afterNew(),this._setDefaultFn("background",()=>u.new(this._root,{})).set("themeTags",["tooltip","background"]),this._label=this.children.push(n.L.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",p=>{p&&(this._disposers.push((0,n.h)(p,"pointerover",c=>{this._htmlContentHovered=!0})),this._disposers.push((0,n.h)(p,"pointerout",c=>{this._htmlContentHovered=!1})))})),this.on("visible",p=>{this._handleReaderAnnouncement()}),this.label.events.on("dataitemchanged",p=>{this._handleReaderAnnouncement()}),this._root._tooltips.push(this)}_handleReaderAnnouncement(){this.get("readerAnnounce")&&this.isVisibleDeep()&&this._root.readerAlert(this.label.getAccessibleText())}get label(){return this._label}dispose(){super.dispose(),(0,n.r)(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML")),null!=this.get("labelAriaLabel")&&this.label.set("ariaLabel",this.get("labelAriaLabel"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const p=this.get("background");this._keepHoverDp=new n.M([p.events.on("pointerover",c=>{let E=this.get("tooltipTarget");E&&(E.parent&&E.parent.getPrivate("tooltipTarget")==E&&(E=E.parent),E.hover())}),p.events.on("pointerout",c=>{let E=this.get("tooltipTarget");E&&(E.parent&&E.parent.getPrivate("tooltipTarget")==E&&(E=E.parent),this._htmlContentHovered||E.unhover())})]),this.label.onPrivate("htmlElement",c=>{this._keepHoverDp&&c&&this._keepHoverDp.disposers.push((0,n.h)(c,"pointerleave",E=>{const D=this.root._renderer.getEvent(E);p.events.dispatch("pointerout",{type:"pointerout",originalEvent:D.event,point:D.point,simulated:!1,target:p})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let p=this.get("tooltipTarget");const c=this.get("background");let E,D;p&&c&&(E=p.get("fill"),D=p.get("stroke"),null==E&&(E=D),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=E&&c.set("fill",E),this._fillDp=p.on("fill",f=>{null!=f&&(c.set("fill",f),this._updateTextColor(f))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=E&&c.set("stroke",E),this._strokeDp=p.on("fill",f=>{null!=f&&c.set("stroke",f)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=E&&this.label.set("fill",E),this._labelDp=p.on("fill",f=>{null!=f&&this.label.set("fill",f)}),this._disposers.push(this._labelDp))),this._updateTextColor(E)}_updateTextColor(p){this.get("autoTextColor")&&(null==p&&(p=this.get("background").get("fill")),null==p&&(p=this._root.interfaceColors.get("background")),p instanceof n.C&&this.label.set("fill",n.C.alternative(p,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(p){super._setDataItem(p),this.label._setDataItem(p)}_updateBackground(){super.updateBackground();const p=this._root.container;if(p){let c=.5,E=.5,D=this.get("centerX");D instanceof n.P&&(c=D.value);let f=this.get("centerY");f instanceof n.P&&(E=f.value);let M=p.width(),x=p.height(),A=this.parent,l=0,s=0;if(A){l=A.x(),s=A.y();const m=A.get("layerMargin");m&&(l+=m.left||0,s+=m.top||0,M+=(m.left||0)+(m.right||0),x+=(m.top||0)+(m.bottom||0))}const y=this.get("bounds",{left:-l,top:-s,right:M-l,bottom:x-s});this._updateBounds();let d=this.width(),i=this.height();0===d&&(d=this._w),0===i&&(i=this._h);let t=this.get("pointTo",{x:M/2,y:x/2}),a=t.x,_=t.y,h=this.get("pointerOrientation"),O=this.get("background"),g=0,S=0,b=0;O instanceof u&&(g=O.get("pointerLength",0),S=O.get("strokeWidth",0)/2,b=S,O.set("width",d),O.set("height",i));let R=0,I=0,C=y.right-y.left,w=y.bottom-y.top;"horizontal"==h||"left"==h||"right"==h?(S=0,"horizontal"==h?a>y.left+C/2?(a-=d*(1-c)+g,b*=-1):a+=d*c+g:"left"==h?a+=d*(1-c)+g:(a-=d*c+g,b*=-1)):(b=0,"vertical"==h?_>y.top+i/2+g?_-=i*(1-E)+g:(_+=i*E+g,S*=-1):"down"==h?_-=i*(1-E)+g:(_+=i*E+g,S*=-1)),a=(0,n.f)(a,y.left+d*c,y.left+C-d*(1-c))+b,_=(0,n.f)(_,y.top+i*E,y.top+w-i*(1-E))-S,R=t.x-a+d*c+b,I=t.y-_+i*E-S,this._fx=a,this._fy=_;const o=this.get("animationDuration",0);if(o>0&&this.get("visible")&&this.get("opacity")>.1){const m=this.get("animationEasing");this.animate({key:"x",to:a,duration:o,easing:m}),this.animate({key:"y",to:_,duration:o,easing:m})}else this.set("x",a),this.set("y",_);O instanceof u&&(O.set("pointerX",R),O.set("pointerY",I)),d>0&&(this._w=d),i>0&&(this._h=i)}}}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.g.classNames.concat([v.className])})},92713:(Y,j,e)=>{e.d(j,{A:()=>C,B:()=>w,C:()=>o,D:()=>m,E:()=>T,F:()=>P,G:()=>U,H:()=>K,I:()=>G,J:()=>J,K:()=>H,L:()=>V,M:()=>F,N:()=>$,a:()=>p,b:()=>c,c:()=>L,d:()=>E,e:()=>v,f:()=>D,g:()=>ee,h:()=>f,i:()=>M,j:()=>l,k:()=>d,l:()=>t,m:()=>a,n:()=>_,o:()=>s,p:()=>h,q:()=>g,r:()=>y,s:()=>i,t:()=>x,u:()=>O,v:()=>S,w:()=>A,x:()=>b,y:()=>R,z:()=>I});var n=e(53930),u=e(79915);function v(B){return n.G.extendedSpatialReferenceInfo(B)}function L(B,N,z){return n.G.clip(u.g,B,N,z)}function p(B,N,z){return n.G.cut(u.g,B,N,z)}function c(B,N,z){return n.G.contains(u.g,B,N,z)}function E(B,N,z){return n.G.crosses(u.g,B,N,z)}function D(B,N,z,X){return n.G.distance(u.g,B,N,z,X)}function f(B,N,z){return n.G.equals(u.g,B,N,z)}function M(B,N,z){return n.G.intersects(u.g,B,N,z)}function x(B,N,z){return n.G.touches(u.g,B,N,z)}function A(B,N,z){return n.G.within(u.g,B,N,z)}function l(B,N,z){return n.G.disjoint(u.g,B,N,z)}function s(B,N,z){return n.G.overlaps(u.g,B,N,z)}function y(B,N,z,X){return n.G.relate(u.g,B,N,z,X)}function d(B,N){return n.G.isSimple(u.g,B,N)}function i(B,N){return n.G.simplify(u.g,B,N)}function t(B,N,z=!1){return n.G.convexHull(u.g,B,N,z)}function a(B,N,z){return n.G.difference(u.g,B,N,z)}function _(B,N,z){return n.G.symmetricDifference(u.g,B,N,z)}function h(B,N,z){return n.G.intersect(u.g,B,N,z)}function O(B,N,z=null){return n.G.union(u.g,B,N,z)}function g(B,N,z,X,oe,ie,se){return n.G.offset(u.g,B,N,z,X,oe,ie,se)}function S(B,N,z,X,oe=!1){return n.G.buffer(u.g,B,N,z,X,oe)}function b(B,N,z,X,oe,ie,se){return n.G.geodesicBuffer(u.g,B,N,z,X,oe,ie,se)}function R(B,N,z,X=!0){return n.G.nearestCoordinate(u.g,B,N,z,X)}function I(B,N,z){return n.G.nearestVertex(u.g,B,N,z)}function C(B,N,z,X,oe){return n.G.nearestVertices(u.g,B,N,z,X,oe)}function w(B,N,z,X){if(null==N||null==X)throw new Error("Illegal Argument Exception");const oe=n.G.rotate(N,z,X);return oe.spatialReference=B,oe}function o(B,N,z){if(null==N||null==z)throw new Error("Illegal Argument Exception");const X=n.G.flipHorizontal(N,z);return X.spatialReference=B,X}function m(B,N,z){if(null==N||null==z)throw new Error("Illegal Argument Exception");const X=n.G.flipVertical(N,z);return X.spatialReference=B,X}function T(B,N,z,X,oe){return n.G.generalize(u.g,B,N,z,X,oe)}function P(B,N,z,X){return n.G.densify(u.g,B,N,z,X)}function U(B,N,z,X,oe=0){return n.G.geodesicDensify(u.g,B,N,z,X,oe)}function K(B,N,z){return n.G.planarArea(u.g,B,N,z)}function G(B,N,z){return n.G.planarLength(u.g,B,N,z)}function J(B,N,z,X){return n.G.geodesicArea(u.g,B,N,z,X)}function H(B,N,z,X){return n.G.geodesicLength(u.g,B,N,z,X)}function V(B,N,z){return null==N||null==z?[]:n.G.intersectLinesToPoints(u.g,B,N,z)}function F(B,N){n.G.changeDefaultSpatialReferenceTolerance(B,N)}function $(B){n.G.clearDefaultSpatialReferenceTolerance(B)}const ee=Object.freeze(Object.defineProperty({__proto__:null,buffer:S,changeDefaultSpatialReferenceTolerance:F,clearDefaultSpatialReferenceTolerance:$,clip:L,contains:c,convexHull:t,crosses:E,cut:p,densify:P,difference:a,disjoint:l,distance:D,equals:f,extendedSpatialReferenceInfo:v,flipHorizontal:o,flipVertical:m,generalize:T,geodesicArea:J,geodesicBuffer:b,geodesicDensify:U,geodesicLength:H,intersect:h,intersectLinesToPoints:V,intersects:M,isSimple:d,nearestCoordinate:R,nearestVertex:I,nearestVertices:C,offset:g,overlaps:s,planarArea:K,planarLength:G,relate:y,rotate:w,simplify:i,symmetricDifference:_,touches:x,union:O,within:A},Symbol.toStringTag,{value:"Module"}))},63583:(Y,j,e)=>{var n,u;e.d(j,{u:()=>n}),(u=n||(n={}))[u.KILOBYTES=1024]="KILOBYTES",u[u.MEGABYTES=1048576]="MEGABYTES",u[u.GIGABYTES=1073741824]="GIGABYTES"},25968:(Y,j,e)=>{e.d(j,{P:()=>x});var n=e(5922),u=e(55144),v=e(99305),L=e(45272),p=e(43085),c=e(2716),E=e(26514),D=e(85211),f=e(20368),M=e(88135);function x(h){const O=h?.origins??[void 0];return(g,S)=>{const b=function A(h,O,g){if("resource"===h?.type)return function l(h,O,g){const S=(0,c.z4)(O,g);return{type:String,read:(b,R,I)=>{const C=(0,M.r)(b,R,I);return S.type===String?C:"function"==typeof S.type?new S.type({url:C}):void 0},write:{writer(b,R,I,C){if(!C?.resources)return"string"==typeof b?void(R[I]=(0,M.t)(b,C)):void(R[I]=b.write({},C));const w=function a(h){return null==h?null:"string"==typeof h?h:h.url}(b),o=(0,M.t)(w,{...C,verifyItemRelativeUrls:C?.verifyItemRelativeUrls?{writtenUrls:C.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},M.M.NO),m=S.type!==String&&(!(0,v.H)(this)||C?.origin&&this.originIdOf(g)>(0,E.aB)(C.origin)),T={object:this,propertyName:g,value:b,targetUrl:o,dest:R,targetPropertyName:I,context:C,params:h};C?.portalItem&&o&&!(0,L.oP)(o)?m&&h?.contentAddressed?s(T):m?function y(h){const{context:O,targetUrl:g,params:S,value:b,dest:R,targetPropertyName:I}=h;if(!O.portalItem)return;const C=O.portalItem.resourceFromPath(g),w=t(b,g,O),o=(0,f.n)(w),m=(0,L.Zo)(C.path),T=S?.compress??!1;o===m?(O.resources&&i({...h,resource:C,content:w,compress:T,updates:O.resources.toUpdate}),R[I]=g):s(h)}(T):function d({context:h,targetUrl:O,dest:g,targetPropertyName:S}){h.portalItem&&h.resources&&(h.resources.toKeep.push({resource:h.portalItem.resourceFromPath(O),compress:!1}),g[S]=O)}(T):C?.portalItem&&(null==o||null!=(0,M.i)(o)||(0,L.w8)(o)||m)?s(T):R[I]=o}}}}(h,O,g);switch(h?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:S,write:b}=M.b;return{read:S,write:b}}}}(h,g,S);for(const R of O){const I=(0,D.rM)(g,R,S);for(const C in b)I[C]=b[C]}}}function s(h){const{targetUrl:O,params:g,value:S,context:b,dest:R,targetPropertyName:I}=h;if(!b.portalItem)return;const C=(0,M.p)(O),w=t(S,O,b);if(g?.contentAddressed&&"json"!==w.type)return void b.messages?.push(new n.A("persistable:contentAddressingUnsupported",`Property "${I}" is trying to serializing a resource with content of type ${w.type} with content addressing. Content addressing is only supported for json resources.`,{content:w}));const o=g?.contentAddressed&&"json"===w.type?(0,u.d)(w.jsonString):C?.filename??(0,p.lk)(),m=(0,L.fj)(g?.prefix??C?.prefix,o),T=`${m}.${(0,f.n)(w)}`;if(g?.contentAddressed&&b.resources&&"json"===w.type){const K=b.resources.toKeep.find(({resource:G})=>G.path===T)??b.resources.toAdd.find(({resource:G})=>G.path===T);if(K)return void(R[I]=K.resource.itemRelativeUrl)}const P=b.portalItem.resourceFromPath(T);(0,L.w8)(O)&&b.resources&&b.resources.pendingOperations.push((0,L.tk)(O).then(K=>{P.path=`${m}.${(0,f.n)({type:"blob",blob:K})}`,R[I]=P.itemRelativeUrl}).catch(()=>{}));const U=g?.compress??!1;b.resources&&i({...h,resource:P,content:w,compress:U,updates:b.resources.toAdd}),R[I]=P.itemRelativeUrl}function i({object:h,propertyName:O,updates:g,resource:S,content:b,compress:R}){g.push({resource:S,content:b,compress:R,finish:C=>{!function _(h,O,g){"string"==typeof h[O]?h[O]=g.url:h[O].url=g.url}(h,O,C)}})}function t(h,O,g){return"string"==typeof h?{type:"url",url:O}:{type:"json",jsonString:JSON.stringify(h.toJSON(g))}}},7201:(Y,j,e)=>{function n(D){return D=D||globalThis.location.hostname,E.some(f=>null!=D?.match(f))}function u(D,f){return D&&(f=f||globalThis.location.hostname)?null!=f.match(v)||null!=f.match(p)?D.replace("static.arcgis.com","staticdev.arcgis.com"):null!=f.match(L)||null!=f.match(c)?D.replace("static.arcgis.com","staticqa.arcgis.com"):D:D}e.d(j,{EM:()=>u,b5:()=>n});const v=/^devext\.arcgis\.com$/,L=/^qaext\.arcgis\.com$/,p=/^[\w-]*\.mapsdevext\.arcgis\.com$/,c=/^[\w-]*\.mapsqa\.arcgis\.com$/,E=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,v,L,/^jsapps\.esri\.com$/,p,c]},85775:(Y,j,e)=>{e.d(j,{B:()=>M,GP:()=>p,qg:()=>x});var n=e(1119),u=e(88996);const v={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function L(d=(0,u.JK)()){let i=(d=d.toLowerCase())in v;if(!i){const h=d.split("-");h.length>1&&h[0]in v&&(d=h[0],i=!0),i||(d="en")}const[t,a,_="#,##0.###"]=v[d];return{decimal:t,group:a,pattern:_}}function p(d,i){const t=L((i={...i}).locale);i.customs=t;const a=i.pattern||t.pattern;return isNaN(d)||Math.abs(d)===1/0?null:function E(d,i,t){const a=(t=t||{}).customs.group,_=t.customs.decimal,h=i.split(";"),O=h[0];if((i=h[d<0?1:0]||"-"+O).includes("%"))d*=100;else if(i.includes("\u2030"))d*=1e3;else{if(i.includes("\xa4"))throw new Error("currency notation not supported");if(i.includes("E"))throw new Error("exponential notation not supported")}const g=c,S=O.match(g);if(!S)throw new Error("unable to find a number expression in pattern: "+i);return!1===t.fractional&&(t.places=0),i.replace(g,function D(d,i,t){!0===(t=t||{}).places&&(t.places=0),t.places===1/0&&(t.places=6);const a=i.split("."),_="string"==typeof t.places&&t.places.indexOf(",");let h=t.places;_?h=t.places.substring(_+1):+h>=0||(h=(a[1]||[]).length),t.round<0||(d=Number(d.toFixed(Number(h))));const O=String(Math.abs(d)).split("."),g=O[1]||"";if(a[1]||t.places){_&&(t.places=t.places.substring(0,_));const o=void 0!==t.places?t.places:a[1]&&a[1].lastIndexOf("0")+1;+o>g.length&&(O[1]=g.padEnd(Number(o),"0")),+h<g.length&&(O[1]=g.substr(0,Number(h)))}else O[1]&&O.pop();const S=a[0].replace(",","");let b=S.indexOf("0");-1!==b&&(b=S.length-b,b>O[0].length&&(O[0]=O[0].padStart(b,"0")),S.includes("#")||(O[0]=O[0].substr(O[0].length-b)));let R,I,C=a[0].lastIndexOf(",");if(-1!==C){R=a[0].length-C-1;const o=a[0].substr(0,C);C=o.lastIndexOf(","),-1!==C&&(I=o.length-C-1)}const w=[];for(let o=O[0];o;){const m=o.length-R;w.push(m>0?o.substr(m):o),o=m>0?o.slice(0,m):"",I&&(R=I,I=void 0)}return O[0]=w.reverse().join(t.group||","),O.join(t.decimal||".")}(d,S[0],{decimal:_,group:a,places:t.places,round:t.round}))}(d,a,i)}const c=/[#0,]*[#0](?:\.0*#*)?/;function M(d){const i=L((d=d||{}).locale),t=d.pattern||i.pattern,a=i.group,_=i.decimal;let h=1;if(t.includes("%"))h/=100;else if(t.includes("\u2030"))h/=1e3;else if(t.includes("\xa4"))throw new Error("currency notation not supported");const O=t.split(";");return 1===O.length&&O.push("-"+O[0]),{regexp:s(O,S=>(S="(?:"+(0,n.Cj)(S,".")+")").replace(c,b=>{const R={signed:!1,separator:d.strict?a:[a,""],fractional:d.fractional,decimal:_,exponent:!1},I=b.split(".");let C=d.places;1===I.length&&1!==h&&(I[1]="###"),1===I.length||0===C?R.fractional=!1:(void 0===C&&(C=d.pattern?I[1].lastIndexOf("0")+1:1/0),C&&null==d.fractional&&(R.fractional=!0),!d.places&&+C<I[1].length&&(C+=","+I[1].length),R.places=C);const w=I[0].split(",");return w.length>1&&(R.groupSize=w.pop().length,w.length>1&&(R.groupSize2=w.pop().length)),"("+function A(d){"places"in(d=d||{})||(d.places=1/0),"string"!=typeof d.decimal&&(d.decimal="."),"fractional"in d&&!String(d.places).startsWith("0")||(d.fractional=[!0,!1]),"exponent"in d||(d.exponent=[!0,!1]),"eSigned"in d||(d.eSigned=[!0,!1]);const i=l(d),t=s(d.fractional,_=>{let h="";return _&&0!==d.places&&(h="\\"+d.decimal,d.places===1/0?h="(?:"+h+"\\d+)?":h+="\\d{"+d.places+"}"),h},!0);let a=i+t;return t&&(a="(?:(?:"+a+")|(?:"+t+"))"),a+s(d.exponent,_=>_?"([eE]"+l({signed:d.eSigned})+")":"")}(R)+")"}),!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:_,factor:h}}function x(d,i){const t=M(i),a=new RegExp("^"+t.regexp+"$").exec(d);if(!a)return NaN;let _=a[1];if(!a[1]){if(!a[2])return NaN;_=a[2],t.factor*=-1}return _=_.replaceAll(new RegExp("["+t.group+"\\s\\xa0]","g"),"").replace(t.decimal,"."),Number(_)*t.factor}function l(d){return"signed"in(d=d||{})||(d.signed=[!0,!1]),"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="",s(d.signed,i=>i?"[-+]":"",!0)+s(d.separator,i=>{if(!i)return"(?:\\d+)";" "===(i=(0,n.Cj)(i))?i="\\s":"\xa0"===i&&(i="\\s\\xa0");const t=d.groupSize,a=d.groupSize2;if(a){const _="(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+i+"]\\d{"+a+"})*["+i+"]\\d{"+t+"})";return t-a>0?"(?:"+_+"|(?:0|[1-9]\\d{0,"+(t-1)+"}))":_}return"(?:0|[1-9]\\d{0,"+(t-1)+"}(?:["+i+"]\\d{"+t+"})*)"},!0)}const s=(d,i,t)=>{if(!Array.isArray(d))return i(d);const a=[];for(let _=0;_<d.length;_++)a.push(i(d[_]));return y(a.join("|"),!!t)},y=(d,i)=>"("+(i?"?:":"")+d+")"},10249:(Y,j,e)=>{e.d(j,{O:()=>x,W:()=>M});var n=e(31610),u=e(32954),v=e(83953),L=e(28714);const c=(0,e(25866).vt)(),E=(0,u.vt)(),D=(0,u.vt)(),f=(0,u.vt)();function M(l,s,y){return(0,L.s)(c,s[0],s[1],1),(0,L.t)(c,c,(0,n.mg)(E,y)),0===c[2]?(0,v.hZ)(l,c[0],c[1]):(0,v.hZ)(l,c[0]/c[2],c[1]/c[2])}function x(l,s,y){return A(D,s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]),A(f,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]),(0,n.lw)(l,(0,n.KC)(D,D),f),0!==l[8]&&(l[0]/=l[8],l[1]/=l[8],l[2]/=l[8],l[3]/=l[8],l[4]/=l[8],l[5]/=l[8],l[6]/=l[8],l[7]/=l[8],l[8]/=l[8]),l}function A(l,s,y,d,i,t,a,_,h){(0,n.hZ)(l,s,d,t,y,i,a,1,1,1),(0,L.s)(c,_,h,1),(0,n.KC)(E,l);const[O,g,S]=(0,L.t)(c,c,(0,n.mg)(E,E));return(0,n.hZ)(E,O,0,0,0,g,0,0,0,S),(0,n.lw)(l,E,l)}},94542:(Y,j,e)=>{e.d(j,{B:()=>c});var n=e(89952),u=e(17715),v=e(35150),L=e(56492),p=e(19284);class c{constructor(D,f,M,x,A={}){this._mainMethod=f,this._transferLists=M,this._listeners=[],this._promise=(0,p.ho)(D,{...A,schedule:x}).then(l=>{if(void 0===this._thread){this._thread=l,this._promise=null,A.hasInitialize&&this.broadcast({},"initialize");for(const s of this._listeners)this._connectListener(s)}else l.close()}),this._promise.catch(l=>v.A.getLogger("esri.core.workers.WorkerHandle").error(`Failed to initialize ${D} worker: ${l}`))}on(D,f){const M={removed:!1,eventName:D,callback:f,threadHandle:null};return this._listeners.push(M),this._connectListener(M),(0,u.hA)(()=>{M.removed=!0,(0,n.TF)(this._listeners,M),this._thread&&null!=M.threadHandle&&M.threadHandle.remove()})}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(D,f){return this.invokeMethod(this._mainMethod,D,f)}invokeMethod(D,f,M){if(this._thread){const x=this._transferLists[D],A=x?x(f):[];return this._thread.invoke(D,f,{transferList:A,signal:M})}return this._promise?this._promise.then(()=>((0,L.Te)(M),this.invokeMethod(D,f,M))):Promise.reject(null)}broadcast(D,f){return this._thread?Promise.all(this._thread.broadcast(f,D)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast(D,f)):Promise.reject()}get promise(){return this._promise}_connectListener(D){this._thread&&this._thread.on(D.eventName,D.callback).then(f=>{D.removed||(D.threadHandle=f)})}}},93723:(Y,j,e)=>{e.r(j),e.d(j,{hydratedAdapter:()=>c});var n=e(28067),u=e(21870),v=e(1749),L=e(55861),p=e(93615);const c={convertToGEGeometry:function E(l,s){if(null==s)return null;let y="cache"in s?s.cache._geVersion:void 0;return null==y&&(y=l.convertJSONToGeometry(s),"cache"in s&&(s.cache._geVersion=y)),y},exportPoint:function D(l,s,y){const d=l.hasZ(s),i=l.hasM(s),t=new v.A({x:l.getPointX(s),y:l.getPointY(s),spatialReference:y});return d&&(t.z=l.getPointZ(s)),i&&(t.m=l.getPointM(s)),t.cache._geVersion=s,t},exportPolygon:function f(l,s,y){const d=new L.A({rings:l.exportPaths(s),hasZ:l.hasZ(s),hasM:l.hasM(s),spatialReference:y});return d.cache._geVersion=s,d},exportPolyline:function M(l,s,y){const d=new p.A({paths:l.exportPaths(s),hasZ:l.hasZ(s),hasM:l.hasM(s),spatialReference:y});return d.cache._geVersion=s,d},exportMultipoint:function x(l,s,y){const d=new u.A({hasZ:l.hasZ(s),hasM:l.hasM(s),points:l.exportPoints(s),spatialReference:y});return d.cache._geVersion=s,d},exportExtent:function A(l,s,y){const d=l.hasZ(s),i=l.hasM(s),t=new n.A({xmin:l.getXMin(s),ymin:l.getYMin(s),xmax:l.getXMax(s),ymax:l.getYMax(s),spatialReference:y});if(d){const a=l.getZExtent(s);t.zmin=a.vmin,t.zmax=a.vmax}if(i){const a=l.getMExtent(s);t.mmin=a.vmin,t.mmax=a.vmax}return t.cache._geVersion=s,t}}},27815:(Y,j,e)=>{e.r(j),e.d(j,{buffer:()=>v.v,changeDefaultSpatialReferenceTolerance:()=>v.M,clearDefaultSpatialReferenceTolerance:()=>v.N,clip:()=>v.c,contains:()=>v.b,convexHull:()=>v.l,crosses:()=>v.d,cut:()=>v.a,densify:()=>v.F,difference:()=>v.m,disjoint:()=>v.j,distance:()=>v.f,equals:()=>v.h,extendedSpatialReferenceInfo:()=>v.e,flipHorizontal:()=>v.C,flipVertical:()=>v.D,generalize:()=>v.E,geodesicArea:()=>v.J,geodesicBuffer:()=>v.x,geodesicDensify:()=>v.G,geodesicLength:()=>v.K,intersect:()=>v.p,intersectLinesToPoints:()=>v.L,intersects:()=>v.i,isSimple:()=>v.k,nearestCoordinate:()=>v.y,nearestVertex:()=>v.z,nearestVertices:()=>v.A,offset:()=>v.q,overlaps:()=>v.o,planarArea:()=>v.H,planarLength:()=>v.I,relate:()=>v.r,rotate:()=>v.B,simplify:()=>v.s,symmetricDifference:()=>v.n,touches:()=>v.t,union:()=>v.u,within:()=>v.w}),e(53930),e(79915);var v=e(92713)},98739:(Y,j,e)=>{e.r(j),e.d(j,{default:()=>c});var n=e(10467),u=e(3248),v=e(3567),L=e(38352),p=e(12738);class c{createIndex(l,s){var y=this;return(0,n.A)(function*(){const d=new Array;if(!l.vertexAttributes?.position)return new v.w;const i=function f(A){const{vertexAttributes:{position:l},vertexSpace:s,spatialReference:y,transform:d}=A,i=(0,p.UR)({vertexAttributes:{position:l},vertexSpace:s,spatialReference:y,transform:d},new L.A,{allowBufferReuse:!0})?.position;return i?!A.components||A.components.some(t=>!t.faces)?{position:i.buffer}:{position:i.buffer,components:A.components.map(t=>t.faces)}:null}(l),t=null!=s?yield s.invoke("createIndexThread",i,{transferList:d}):y.createIndexThread(i).result;return M().fromJSON(t)})()}createIndexThread(l){const s=M();if(!l)return{result:s.toJSON()};const y=new Float64Array(l.position);return l.components?function D(A,l,s){let y=0;for(const t of s)y+=t.length/3;const d=new Array(y);let i=0;for(const t of s)for(let a=0;a<t.length;a+=3)d[i++]=x(l,3*t[a],3*t[a+1],3*t[a+2]);return A.load(d),{result:A.toJSON()}}(s,y,l.components.map(d=>new Uint32Array(d))):function E(A,l){const s=new Array(l.length/9);let y=0;for(let d=0;d<l.length;d+=9)s[y++]=x(l,d,d+3,d+6);return A.load(s),{result:A.toJSON()}}(s,y)}}function M(){return new v.w(9,(0,u.A)("esri-csp-restrictions")?A=>A:[".minX",".minY",".maxX",".maxY"])}function x(A,l,s,y){return{minX:Math.min(A[l],A[s],A[y]),maxX:Math.max(A[l],A[s],A[y]),minY:Math.min(A[l+1],A[s+1],A[y+1]),maxY:Math.max(A[l+1],A[s+1],A[y+1]),p0:[A[l],A[l+1],A[l+2]],p1:[A[s],A[s+1],A[s+2]],p2:[A[y],A[y+1],A[y+2]]}}},87567:(Y,j,e)=>{e.d(j,{NH:()=>c,ip:()=>E,sU:()=>x,vG:()=>A});var n=e(10467),v=(e(3248),e(5922)),L=e(56492),p=e(45272);function c(l){const s=M(l);return null!=s?s.toDataURL():""}function E(l,s){return D.apply(this,arguments)}function D(){return(D=(0,n.A)(function*(l,s){const y=M(l);if(null==y)throw new v.A("imageToArrayBuffer","Unsupported image type");const d=function f(l){if(!(l instanceof HTMLImageElement))return"image/png";const s=l.src;if((0,p.DB)(s)){const y=(0,p.r$)(s);return"image/jpeg"===y?.mediaType?y.mediaType:"image/png"}return/\.png$/i.test(s)?"image/png":/\.(jpg|jpeg)$/i.test(s)?"image/jpeg":"image/png"}(l),i=yield new Promise(a=>y.toBlob(a,d));if((0,L.Te)(s),!i)throw new v.A("imageToArrayBuffer","Failed to encode image");const t=yield i.arrayBuffer();return(0,L.Te)(s),{data:t,type:d}})).apply(this,arguments)}function M(l){if(l instanceof HTMLCanvasElement)return l;if(l instanceof HTMLVideoElement)return null;const s=document.createElement("canvas");s.width=l.width,s.height=l.height;const y=s.getContext("2d");return l instanceof HTMLImageElement?y.drawImage(l,0,0,l.width,l.height):l instanceof ImageData&&y.putImageData(l,0,0),s}function x(l){const s=[],y=new Uint8Array(l);for(let d=0;d<y.length;d++)s.push(String.fromCharCode(y[d]));return"data:application/octet-stream;base64,"+btoa(s.join(""))}function A(l){if(l.byteLength<8)return!1;const s=new Uint8Array(l);return 137===s[0]&&80===s[1]&&78===s[2]&&71===s[3]&&13===s[4]&&10===s[5]&&26===s[6]&&10===s[7]}},36819:(Y,j,e)=>{e.d(j,{A:()=>s});var n=e(8189),u=e(85211),c=(e(3248),e(35150),e(40707),e(76576)),E=e(88494),D=e(95478),f=e(93410),M=e(33036),x=e(27641),A=e(88485);let l=class extends((0,f.dM)((0,M.j)(D.A))){constructor(y){super(y),this.elevationInfo=null,this.graphics=new x.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(y){return this.graphics.add(y),this}addMany(y){return this.graphics.addMany(y),this}removeAll(){return this.graphics.removeAll(),this}remove(y){this.graphics.remove(y)}removeMany(y){this.graphics.removeMany(y)}on(y,d){return super.on(y,d)}graphicChanged(y){this.emit("graphic-update",y)}};(0,n._)([(0,u.MZ)({type:A.A})],l.prototype,"elevationInfo",void 0),(0,n._)([(0,u.MZ)((0,E.C)(x.Y,"graphics"))],l.prototype,"graphics",void 0),(0,n._)([(0,u.MZ)({type:["show","hide"]})],l.prototype,"listMode",void 0),(0,n._)([(0,u.MZ)()],l.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],l.prototype,"type",void 0),(0,n._)([(0,u.MZ)({constructOnly:!0})],l.prototype,"internal",void 0),l=(0,n._)([(0,c.$)("esri.layers.GraphicsLayer")],l);const s=l},48600:(Y,j,e)=>{var n,u,v,L,p,c,E,D,f,M,x,A,l,s,y,t;e.d(j,{Pl:()=>d,Qg:()=>y,vE:()=>i}),(t=n||(n={})).U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet",function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"}(u||(u={})),function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.NotSet="NotSet"}(v||(v={})),function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.NotSet="NotSet"}(L||(L={})),function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"}(p||(p={})),function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"}(c||(c={})),function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"}(E||(E={})),function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"}(D||(D={})),function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"}(f||(f={})),function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"}(M||(M={})),function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"}(x||(x={})),function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"}(A||(A={})),function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"}(l||(l={})),function(t){t.Pbr="Pbr",t.Unlit="Unlit"}(s||(s={})),function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"}(y||(y={}));const d=-1,i=-2},75090:(Y,j,e)=>{e.r(j),e.d(j,{default:()=>m});var w,n=e(10467),u=e(8189),L=(e(21152),e(89563)),p=e(5922),c=e(39693),E=e(1119),D=e(45272),f=e(85211),l=(e(3248),e(35150),e(40707),e(17221)),s=e(76576),y=e(50305),d=e(95478),i=e(93410),t=e(17049),a=e(85551),_=e(1151),h=e(33036),O=e(63014),g=e(29598),S=e(11333),b=e(5079),R=e(28067),I=e(32034),C=e(1749);let o=w=class extends((0,i.dM)((0,_.J)((0,h.j)((0,t.q)((0,a.A)((0,c.P)(d.A))))))){constructor(...T){super(...T),this.copyright="",this.fullExtent=new R.A(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,I.A.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=I.A.WebMercator,this.subDomains=null,this.tileInfo=new S.A({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new C.A({x:-20037508.342787,y:20037508.342787,spatialReference:I.A.WebMercator}),spatialReference:I.A.WebMercator,lods:[new g.A({level:0,scale:591657527.591555,resolution:156543.033928}),new g.A({level:1,scale:295828763.795777,resolution:78271.5169639999}),new g.A({level:2,scale:147914381.897889,resolution:39135.7584820001}),new g.A({level:3,scale:73957190.948944,resolution:19567.8792409999}),new g.A({level:4,scale:36978595.474472,resolution:9783.93962049996}),new g.A({level:5,scale:18489297.737236,resolution:4891.96981024998}),new g.A({level:6,scale:9244648.868618,resolution:2445.98490512499}),new g.A({level:7,scale:4622324.434309,resolution:1222.99245256249}),new g.A({level:8,scale:2311162.217155,resolution:611.49622628138}),new g.A({level:9,scale:1155581.108577,resolution:305.748113140558}),new g.A({level:10,scale:577790.554289,resolution:152.874056570411}),new g.A({level:11,scale:288895.277144,resolution:76.4370282850732}),new g.A({level:12,scale:144447.638572,resolution:38.2185141425366}),new g.A({level:13,scale:72223.819286,resolution:19.1092570712683}),new g.A({level:14,scale:36111.909643,resolution:9.55462853563415}),new g.A({level:15,scale:18055.954822,resolution:4.77731426794937}),new g.A({level:16,scale:9027.977411,resolution:2.38865713397468}),new g.A({level:17,scale:4513.988705,resolution:1.19432856685505}),new g.A({level:18,scale:2256.994353,resolution:.597164283559817}),new g.A({level:19,scale:1128.497176,resolution:.298582141647617}),new g.A({level:20,scale:564.248588,resolution:.14929107082380833}),new g.A({level:21,scale:282.124294,resolution:.07464553541190416}),new g.A({level:22,scale:141.062147,resolution:.03732276770595208}),new g.A({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(T,P){return"string"==typeof T?{urlTemplate:T,...P}:T}load(T){const P=this.loadFromPortal({supportedTypes:["WMTS"]},T).then(()=>{let U="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const K=new D.s0(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&K.authority?.includes("{subDomain}")&&(U="is missing 'subDomains' property")}else U="spatialReference must match tileInfo.spatialReference";else U="is missing the required 'urlTemplate' property value";if(U)throw new p.A("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${U}`)});return this.addResolvingPromise(P),Promise.resolve(this)}get levelValues(){const T=[];if(!this.tileInfo)return null;for(const P of this.tileInfo.lods)T[P.level]=P.levelValue||P.level;return T}readSpatialReference(T,P){return T||I.A.fromJSON(P.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const T=[],{urlTemplate:P,subDomains:U}=this,K=new D.s0(P),G=K.scheme?K.scheme+"://":"//",J=G+K.authority+"/",H=K.authority;if(H?.includes("{subDomain}")){if(U&&U.length>0&&H.split(".").length>1)for(const V of U)T.push(G+H.replaceAll(/\{subDomain\}/gi,V)+"/")}else T.push(J);return T.map(D.Il)}get urlPath(){if(!this.urlTemplate)return null;const T=this.urlTemplate,P=new D.s0(T);return T.substring(((P.scheme?P.scheme+"://":"//")+P.authority+"/").length)}readUrlTemplate(T,P){return T||P.templateUrl}writeUrlTemplate(T,P){(0,D.BQ)(T)&&(T="https:"+T),T&&(T=T.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),T=(0,D.S8)(T)),P.templateUrl=T}fetchTile(T,P,U,K={}){const{signal:G}=K,J=this.getTileUrl(T,P,U),H={responseType:"image",signal:G,query:{...this.refreshParameters}};return(0,L.A)(J,H).then(V=>V.data)}fetchImageBitmapTile(T,P,U,K={}){var G=this;return(0,n.A)(function*(){const{signal:J}=K;if(G.fetchTile!==w.prototype.fetchTile){const $=yield G.fetchTile(T,P,U,K);return(0,O.C)($,T,P,U,J)}const H=G.getTileUrl(T,P,U),V={responseType:"blob",signal:J,query:{...G.refreshParameters}},{data:F}=yield(0,L.A)(H,V);return(0,O.C)(F,T,P,U,J)})()}getTileUrl(T,P,U){const{levelValues:K,tileServers:G,urlPath:J}=this;if(!K||!G||!J)return"";const H=K[T];return G[P%G.length]+(0,E.HC)(J,{level:H,z:H,col:U,x:U,row:P,y:P})}};(0,u._)([(0,f.MZ)({type:String,value:"",json:{write:!0}})],o.prototype,"copyright",void 0),(0,u._)([(0,f.MZ)({type:R.A,json:{write:!0},nonNullable:!0})],o.prototype,"fullExtent",void 0),(0,u._)([(0,f.MZ)({readOnly:!0,json:{read:!1,write:!1}})],o.prototype,"legendEnabled",void 0),(0,u._)([(0,f.MZ)({type:["show","hide"]})],o.prototype,"listMode",void 0),(0,u._)([(0,f.MZ)({json:{read:!0,write:!0}})],o.prototype,"blendMode",void 0),(0,u._)([(0,f.MZ)()],o.prototype,"levelValues",null),(0,u._)([(0,f.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],o.prototype,"isReference",void 0),(0,u._)([(0,f.MZ)({type:["WebTiledLayer"],value:"WebTiledLayer"})],o.prototype,"operationalLayerType",void 0),(0,u._)([(0,f.MZ)({readOnly:!0,json:{read:!1,write:!1}})],o.prototype,"popupEnabled",void 0),(0,u._)([(0,f.MZ)({type:I.A})],o.prototype,"spatialReference",void 0),(0,u._)([(0,l.w)("spatialReference",["spatialReference","fullExtent.spatialReference"])],o.prototype,"readSpatialReference",null),(0,u._)([(0,f.MZ)({type:[String],json:{write:!0}})],o.prototype,"subDomains",void 0),(0,u._)([(0,f.MZ)({type:S.A,json:{write:!0}})],o.prototype,"tileInfo",void 0),(0,u._)([(0,f.MZ)({readOnly:!0})],o.prototype,"tileServers",null),(0,u._)([(0,f.MZ)({json:{read:!1}})],o.prototype,"type",void 0),(0,u._)([(0,f.MZ)()],o.prototype,"urlPath",null),(0,u._)([(0,f.MZ)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],o.prototype,"urlTemplate",void 0),(0,u._)([(0,l.w)("urlTemplate",["urlTemplate","templateUrl"])],o.prototype,"readUrlTemplate",null),(0,u._)([(0,y.K)("urlTemplate",{templateUrl:{type:String}})],o.prototype,"writeUrlTemplate",null),(0,u._)([(0,f.MZ)({type:b.x,json:{write:!0}})],o.prototype,"wmtsInfo",void 0),o=w=(0,u._)([(0,s.$)("esri.layers.WebTileLayer")],o);const m=o},18056:(Y,j,e)=>{e.d(j,{H:()=>u,L:()=>n});const n=1;function u(v,L){let p=0;for(const c of L){const E=c.attributes?.[v];"number"==typeof E&&isFinite(E)&&(p=Math.max(p,E))}return p}},69809:(Y,j,e)=>{e.r(j),e.d(j,{createConnection:()=>w});var n=e(10467),u=e(8189),L=(e(21152),e(89563)),p=e(5922),c=e(35150),E=e(56492),D=e(45272),x=(e(3248),e(40707),e(76576)),A=e(85211),l=e(23743),s=e(42425);let y=class extends s.A.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new p.A("stream-connection",this.errorString):null}onFeature(o){this.emit("data-received",o)}onMessage(o){this.emit("message-received",o)}};(0,u._)([(0,A.MZ)({readOnly:!0})],y.prototype,"connectionError",null),y=(0,u._)([(0,x.$)("esri.layers.support.StreamConnection")],y);const d=y;var i,o;(o=i||(i={}))[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSING=2]="CLOSING",o[o.CLOSED=3]="CLOSED";let t=class extends d{constructor(o){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:m,spatialReference:T,sourceSpatialReference:P}=o;this._config=o,this._featureZScaler=(0,l.N)(m,P,T),this._open()}normalizeCtorArgs(){return{}}_open(){var o=this;return(0,n.A)(function*(){yield o._tryCreateWebSocket(),o.destroyed||(yield o._handshake())})()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case i.CONNECTING:case i.OPEN:return"connected";case i.CLOSING:case i.CLOSED:return"disconnected"}}sendMessageToSocket(o){null!=this._websocket?this._websocket.send(JSON.stringify(o)):this._outstandingMessages.push(o)}sendMessageToClient(o){this._onMessage(o)}updateCustomParameters(o){this._config.customParameters=o,null!=this._websocket&&this._websocket.close()}_tryCreateWebSocket(o=this._config.source.path,m=1e3,T=0){var P=this;return(0,n.A)(function*(){try{if(P.destroyed)return;const U=(0,D.a6)(o,P._config.customParameters??{});P._websocket=yield P._createWebSocket(U),P.notifyChange("connectionStatus")}catch(U){const K=m/1e3;return P._config.maxReconnectionAttempts&&T>=P._config.maxReconnectionAttempts?(c.A.getLogger(P).error(new p.A("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void P.destroy()):(c.A.getLogger(P).error(new p.A("websocket-connection",`Failed to connect. Attempting to reconnect in ${K}s`,U)),yield(0,E.Pl)(m),P._tryCreateWebSocket(o,Math.min(1.5*m,1e3*P._config.maxReconnectionInterval),T+1))}})()}_setWebSocketJSONParseHandler(o){o.onmessage=m=>{try{const T=JSON.parse(m.data);this._onMessage(T)}catch(T){return void c.A.getLogger(this).error(new p.A("websocket-connection","Failed to parse message, invalid JSON",{error:T}))}}}_createWebSocket(o){return new Promise((m,T)=>{const P=new WebSocket(o);P.onopen=()=>{if(P.onopen=null,this.destroyed)return P.onclose=null,void P.close();P.onclose=U=>this._onClose(U),P.onerror=U=>this._onError(U),this._setWebSocketJSONParseHandler(P),m(P)},P.onclose=U=>{P.onopen=P.onclose=null,T(U)}})}_handshake(o=1e4){var m=this;return(0,n.A)(function*(){const T=m._websocket;if(null==T)return;const P=(0,E.Tw)(),U=T.onmessage,{filter:K,outFields:G,spatialReference:J}=m._config;return P.timeout(o),T.onmessage=H=>{let V=null;try{V=JSON.parse(H.data)}catch{}V&&"object"==typeof V||(c.A.getLogger(m).error(new p.A("websocket-connection","Protocol violation. Handshake failed - malformed message",H.data)),P.reject(),m.destroy()),V.spatialReference?.wkid!==J?.wkid&&(c.A.getLogger(m).error(new p.A("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${J.wkid}`,H.data)),P.reject(),m.destroy()),"json"!==V.format&&(c.A.getLogger(m).error(new p.A("websocket-connection","Protocol violation. Handshake failed - format is not set",H.data)),P.reject(),m.destroy()),K&&V.filter!==K&&c.A.getLogger(m).error(new p.A("websocket-connection","Tried to set filter, but server doesn't support it")),G&&V.outFields!==G&&c.A.getLogger(m).error(new p.A("websocket-connection","Tried to set outFields, but server doesn't support it")),T.onmessage=U;for(const F of m._outstandingMessages)T.send(JSON.stringify(F));m._outstandingMessages=[],P.resolve()},T.send(JSON.stringify({filter:K,outFields:G,format:"json",spatialReference:{wkid:J.wkid}})),P.promise})()}_onMessage(o){if(this.onMessage(o),"type"in o)switch(o.type){case"features":case"featureResult":for(const m of o.features)null!=this._featureZScaler&&this._featureZScaler(m.geometry),this.onFeature(m)}}_onError(o){const m="Encountered an error over WebSocket connection";this._set("errorString",m),c.A.getLogger(this).error("websocket-connection",m)}_onClose(o){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==o.code&&c.A.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${o.code}`),this.destroyed||this._open()}};(0,u._)([(0,A.MZ)()],t.prototype,"connectionStatus",null),(0,u._)([(0,A.MZ)()],t.prototype,"errorString",void 0),t=(0,u._)([(0,x.$)("esri.layers.graphics.sources.connections.WebSocketConnection")],t);var a=e(1277),_=e(87086),h=e(61320),O=e(32034);const S={maxQueryDepth:5,maxRecordCountFactor:3};let b=class extends t{constructor(o){super({...S,...o}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var o=this;return(0,n.A)(function*(){const m=yield o._fetchServiceDefinition(o._config.source);m.timeInfo.trackIdField||c.A.getLogger(o).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const T=o._fetchWebSocketUrl(m.streamUrls,o._config.spatialReference);o._buddyServicesQuery||(o._buddyServicesQuery=o._queryBuddyServices()),yield o._buddyServicesQuery,yield o._tryCreateWebSocket(T);const{filter:P,outFields:U}=o._config;o.destroyed||o._setFilter(P,U)})()}_onMessage(o){if("attributes"in o){let m;try{m=this._enrich(o),null!=this._featureZScaler&&this._featureZScaler(m.geometry)}catch(T){return void c.A.getLogger(this).error(new p.A("geoevent-connection","Failed to parse message",T))}this.onFeature(m)}else this.onMessage(o)}_fetchServiceDefinition(o){var m=this;return(0,n.A)(function*(){const T={f:"json",...m._config.customParameters},P=(0,L.A)(o.path,{query:T,responseType:"json"}),U=(yield P).data;return m._serviceDefinition=U,U})()}_fetchWebSocketUrl(o,m){const T=o[0],{urls:P,token:U}=T,K=this._inferWebSocketBaseUrl(P);return(0,D.a6)(`${K}/subscribe`,{outSR:""+m.wkid,token:U})}_inferWebSocketBaseUrl(o){if(1===o.length)return o[0];for(const m of o)if(m.includes("wss"))return m;return c.A.getLogger(this).error(new p.A("geoevent-connection","Unable to infer WebSocket url",o)),null}_setFilter(o,m){var T=this;return(0,n.A)(function*(){const P=T._websocket;if(null==P||null==o&&null==m)return;const U=JSON.stringify({filter:T._serializeFilter(o,m)});let K=!1;const G=(0,E.Tw)();return P.onmessage=V=>{const F=JSON.parse(V.data);F.filter&&(F.error&&(c.A.getLogger(T).error(new p.A("geoevent-connection","Failed to set service filter",F.error)),T._set("errorString",`Could not set service filter - ${F.error}`),G.reject(F.error)),T._setWebSocketJSONParseHandler(P),K=!0,G.resolve())},P.send(U),setTimeout(()=>{K||(T.destroyed||T._websocket!==P||c.A.getLogger(T).error(new p.A("geoevent-connection","Server timed out when setting filter")),G.reject())},1e4),G.promise})()}_serializeFilter(o,m){const T={};if(null==o&&null==m)return T;if(o?.geometry)try{const P=(0,h.rS)(o.geometry);if("extent"!==P.type)throw new p.A(`Expected extent but found type ${P.type}`);T.geometry=JSON.stringify(P.shiftCentralMeridian())}catch(P){c.A.getLogger(this).error(new p.A("geoevent-connection","Encountered an error when setting connection geometryDefinition",P))}return o?.where&&"1 = 1"!==o.where&&"1=1"!==o.where&&(T.where=o.where),null!=m&&(T.outFields=m.join(",")),T}_enrich(o){if(!this._relatedFeatures)return o;const P=this._relatedFeatures.get(o.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!P)return c.A.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",o),o;const{attributes:U,geometry:K}=P;for(const G in U)o.attributes[G]=U[G];return K&&(o.geometry=K),o.geometry||o.centroid||c.A.getLogger(this).error(new p.A("geoevent-connection","Found malformed feature - no geometry found",o)),o}_queryBuddyServices(){var o=this;return(0,n.A)(function*(){try{const{relatedFeatures:m,keepLatestArchive:T}=o._serviceDefinition,P=o._queryRelatedFeatures(m),U=o._queryArchive(T);yield P;const K=yield U;if(!K)return;for(const G of K.features)o.onFeature(o._enrich(G))}catch(m){c.A.getLogger(o).error(new p.A("geoevent-connection","Encountered an error when querying buddy services",{error:m}))}})()}_queryRelatedFeatures(o){var m=this;return(0,n.A)(function*(){if(!o)return;const T=yield m._queryBuddy(o.featuresUrl);m._addRelatedFeatures(T)})()}_queryArchive(o){var m=this;return(0,n.A)(function*(){if(o)return m._queryBuddy(o.featuresUrl)})()}_queryBuddy(o){var m=this;return(0,n.A)(function*(){const T=new((yield Promise.resolve().then(e.bind(e,35940))).default)({url:o}),{capabilities:P}=yield T.load(),U=P.query.supportsMaxRecordCountFactor,K=P.query.supportsPagination,G=P.query.supportsCentroid,J=m._config.maxRecordCountFactor,H=T.capabilities.query.maxRecordCount,V=U?H*J:H,F=new _.A;if(F.outFields=m._config.outFields??["*"],F.where=m._config.filter?.where??"1=1",F.returnGeometry=!0,F.returnExceededLimitFeatures=!0,F.outSpatialReference=O.A.fromJSON(m._config.spatialReference),G&&(F.returnCentroid=!0),U&&(F.maxRecordCountFactor=J),K)return F.num=V,T.destroy(),m._queryPages(o,F);const $=yield(0,a.eW)(o,F,m._config.sourceSpatialReference);return T.destroy(),$.data})()}_queryPages(o,m,T=[],P=0){var U=this;return(0,n.A)(function*(){m.start=null!=m.num?P*m.num:null;const{data:K}=yield(0,a.eW)(o,m,U._config.sourceSpatialReference);return K.exceededTransferLimit&&P<(U._config.maxQueryDepth??0)?(K.features.forEach(G=>T.push(G)),U._queryPages(o,m,T,P+1)):(T.forEach(G=>K.features.push(G)),K)})()}_addRelatedFeatures(o){const m=new Map,T=o.features,P=this._serviceDefinition.relatedFeatures.joinField;for(const U of T)m.set(U.attributes[P],U);this._relatedFeatures=m}};b=(0,u._)([(0,x.$)("esri.layers.graphics.sources.connections.GeoEventConnection")],b);const R=b;let I=class extends d{constructor(o){super({}),this.connectionStatus="connected",this.errorString=null;const{geometryType:m,spatialReference:T,sourceSpatialReference:P}=o;this._featureZScaler=(0,l.N)(m,P,T)}normalizeCtorArgs(){return{}}updateCustomParameters(o){}sendMessageToSocket(o){}sendMessageToClient(o){if("type"in o)switch(o.type){case"features":case"featureResult":for(const m of o.features)null!=this._featureZScaler&&this._featureZScaler(m.geometry),this.onFeature(m)}this.onMessage(o)}};function C(o,m){if(null==o&&null==m)return null;const T={};return null!=m&&(T.geometry=m),null!=o&&(T.where=o),T}function w(o,m,T,P,U,K,G,J,H){const V={source:o,sourceSpatialReference:m,spatialReference:T,geometryType:P,filter:C(U,K),maxReconnectionAttempts:G,maxReconnectionInterval:J,customParameters:H};return o?o.path.startsWith("wss://")||o.path.startsWith("ws://")?new t(V):new R(V):new I(V)}(0,u._)([(0,A.MZ)()],I.prototype,"connectionStatus",void 0),(0,u._)([(0,A.MZ)()],I.prototype,"errorString",void 0),I=(0,u._)([(0,x.$)("esri.layers.support.ClientSideConnection")],I)},63758:(Y,j,e)=>{e.d(j,{$1:()=>E,H2:()=>x,MT:()=>A,VP:()=>l,WF:()=>D,Wt:()=>L,XQ:()=>s,hK:()=>M,nS:()=>f,uh:()=>p,xY:()=>c});var n=e(5922);const u="upload-assets",v=()=>new Error;class L extends n.A{constructor(){super(`${u}:unsupported`,"Layer does not support asset uploads.",v())}}class p extends n.A{constructor(){super(`${u}:no-glb-support`,"Layer does not support glb.",v())}}class c extends n.A{constructor(){super(`${u}:no-supported-source`,"No supported external source found",v())}}class E extends n.A{constructor(){super(`${u}:not-base-64`,"Expected gltf data in base64 format after conversion.",v())}}class D extends n.A{constructor(){super(`${u}:unable-to-prepare-options`,"Unable to prepare uploadAsset request options.",v())}}class f extends n.A{constructor(d,i){super(`${u}:bad-response`,`Bad response. Uploaded ${d} items and received ${i} results.`,v())}}class M extends n.A{constructor(d,i){super(`${u}-layer:upload-failed`,`Failed to upload mesh file ${d}. Error code: ${i?.code??"-1"}. Error message: ${i?.messages??"unknown"}`,v())}}class x extends n.A{constructor(d){super(`${u}-layer:unsupported-format`,`The service allowed us to upload an asset of FormatID ${d}, but it does not list it in its supported formats.`,v())}}class A extends n.A{constructor(){super(`${u}:convert3D-failed`,"convert3D failed.")}}class l extends n.A{constructor(){super("invalid-input:no-model","No supported model found")}}class s extends n.A{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},73474:(Y,j,e)=>{e.d(j,{f:()=>l});var n=e(8189),v=(e(21152),e(85211)),E=(e(3248),e(35150),e(40707),e(17221)),D=e(76576),f=e(11333),M=e(56773),x=e(77677),A=e(32034);const l=s=>{let y=class extends s{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(d,i){return null!=i.minLOD&&null!=i.maxLOD?d:0}readMaxScale(d,i){return null!=i.minLOD&&null!=i.maxLOD?d:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(d,i,t){const a=i.capabilities?.includes("Tilemap");let{minLOD:_,maxLOD:h,minScale:O,maxScale:g}=i;if(null==_&&null==h&&0!==O&&0!==g){const S=b=>Math.round(1e4*b)/1e4;O=S(O||i.tileInfo.lods[0].scale),g=S(g||i.tileInfo.lods[i.tileInfo.lods.length-1].scale);for(const b of i.tileInfo.lods){const R=S(b.scale);_=R>=O?b.level:_,h=R>=g?b.level:h}}if(a)return new x.d({layer:this,minLOD:_,maxLOD:h});if(i.tileInfo){const S=new f.A;return S.read(i.tileInfo,t),new M.A(S,_,h)}return null}};return(0,n._)([(0,v.MZ)({json:{read:{source:"copyrightText"}}})],y.prototype,"copyright",void 0),(0,n._)([(0,v.MZ)()],y.prototype,"minScale",void 0),(0,n._)([(0,E.w)("service","minScale")],y.prototype,"readMinScale",null),(0,n._)([(0,v.MZ)()],y.prototype,"maxScale",void 0),(0,n._)([(0,E.w)("service","maxScale")],y.prototype,"readMaxScale",null),(0,n._)([(0,v.MZ)({type:A.A})],y.prototype,"spatialReference",void 0),(0,n._)([(0,v.MZ)({readOnly:!0})],y.prototype,"supportsBlankTile",null),(0,n._)([(0,v.MZ)({type:f.A})],y.prototype,"tileInfo",void 0),(0,n._)([(0,v.MZ)()],y.prototype,"tilemapCache",void 0),(0,n._)([(0,E.w)("service","tilemapCache",["capabilities","tileInfo"])],y.prototype,"readTilemapCache",null),(0,n._)([(0,v.MZ)()],y.prototype,"version",void 0),y=(0,n._)([(0,D.$)("esri.layers.mixins.ArcGISCachedService")],y),y}},32282:(Y,j,e)=>{e.d(j,{m:()=>u});const n=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function u(v){return null!=v&&n.some(([L,p])=>v>=L&&v<=p)}},90639:(Y,j,e)=>{e.r(j),e.d(j,{save:()=>de,saveAll:()=>ye,saveAllAs:()=>ve,saveAs:()=>ge});var n=e(10467),u=e(89952),v=e(5922),L=e(23506),p=e(17994),c=e(68438),E=e(23154),D=e(58443),f=e(64833),M=e(69927);const x="Feature Service",A="feature-layer-utils",l=`${A}-save`,s=`${A}-save-as`,y=`${A}-saveall`,d=`${A}-saveall-as`;function i(W){return{isValid:(0,D.W_)(W)&&("feature"!==W.type||!W.dynamicDataSource),errorMessage:"Feature layer should be a layer or table in a map or feature service"}}function t(W){const Z=[],k=[];for(const{layer:Q,layerJSON:re}of W)Q.isTable?k.push(re):Z.push(re);return{layers:Z,tables:k}}function a(W){return t([W])}function _(W,Z){return h.apply(this,arguments)}function h(){return(h=(0,n.A)(function*(W,Z){return/\/\d+\/?$/.test(W.url)?a(Z[0]):O(Z,W)})).apply(this,arguments)}function O(W,Z){return g.apply(this,arguments)}function g(){return g=(0,n.A)(function*(W,Z){if(W.reverse(),!Z)return t(W);const k=yield function S(W,Z){return b.apply(this,arguments)}(Z,W);for(const Q of W)H(Q.layer,Q.layerJSON,k);return function C(W,Z){const k=[],Q=[];for(const{layer:re}of Z){const{isTable:te,layerId:q}=re;te?Q.push(q):k.push(q)}w(W.layers,k),w(W.tables,Q)}(k,W),k}),g.apply(this,arguments)}function b(){return b=(0,n.A)(function*(W,Z){let k=yield W.fetchData("json");if(function R(W){return!!(W&&Array.isArray(W.layers)&&Array.isArray(W.tables))}(k))return k;k||={},function I(W){W.layers||=[],W.tables||=[]}(k);const{layer:{url:Q,customParameters:re,apiKey:te}}=Z[0];return yield function m(W,Z,k){return T.apply(this,arguments)}(k,{url:Q??"",customParameters:re,apiKey:te},Z.map(q=>q.layer.layerId)),k}),b.apply(this,arguments)}function w(W,Z){if(W.length<2)return;const k=[];for(const{id:Q}of W)k.push(Q);(0,u.aI)(k.sort(o),Z.slice().sort(o))&&W.sort((Q,re)=>{const te=Z.indexOf(Q.id),q=Z.indexOf(re.id);return te<q?-1:te>q?1:0})}function o(W,Z){return W<Z?-1:W>Z?1:0}function T(){return T=(0,n.A)(function*(W,Z,k){const{url:Q,customParameters:re,apiKey:te}=Z,{serviceJSON:q,layersJSON:ne}=yield(0,E.Q)(Q,{customParameters:re,apiKey:te}),ae=P(W.layers,q.layers,k),ce=P(W.tables,q.tables,k);W.layers=ae.itemResources,W.tables=ce.itemResources;const _e=[...ae.added,...ce.added],Ee=ne?[...ne.layers,...ne.tables]:[];yield function U(W,Z,k,Q){return K.apply(this,arguments)}(W,_e,Q,Ee)}),T.apply(this,arguments)}function P(W,Z,k){const Q=(0,u.iv)(W,Z,(te,q)=>te.id===q.id);W=W.filter(te=>!Q.removed.some(q=>q.id===te.id));const re=Q.added;return re.forEach(({id:te})=>{W.push({id:te})}),{itemResources:W,added:re.filter(({id:te})=>!k.includes(te))}}function K(){return K=(0,n.A)(function*(W,Z,k,Q){const re=yield function G(W){return J.apply(this,arguments)}(Z),te=Z.map(({id:q,type:ne})=>new(re.get(ne))({url:k,layerId:q,sourceJSON:Q.find(({id:ae})=>ae===q)}));yield Promise.allSettled(te.map(q=>q.load())),te.forEach(q=>{const{layerId:ne,loaded:ae,defaultPopupTemplate:ce}=q;if(!ae||null==ce)return;const _e={id:ne,popupInfo:ce.toJSON()};"ArcGISFeatureLayer"!==q.operationalLayerType&&(_e.layerType=q.operationalLayerType),H(q,_e,W)})}),K.apply(this,arguments)}function J(){return(J=(0,n.A)(function*(W){const Z=[];W.forEach(({type:re})=>{const te=(0,E.K)(re);Z.push((0,f.S[te])())});const k=yield Promise.all(Z),Q=new Map;return W.forEach(({type:re},te)=>{Q.set(re,k[te])}),Q})).apply(this,arguments)}function H(W,Z,k){!function V(W,Z){const k=W.findIndex(({id:Q})=>Q===Z.id);-1===k?W.push(Z):W[k]=Z}(W.isTable?k.tables:k.layers,Z)}function F(W,Z){if(!W.length)throw new v.A(`${Z}:missing-parameters`,"'layers' array should contain at least one feature layer")}function ee(W,Z){const k=W.map(Q=>Q.layerId);if(new Set(k).size!==k.length)throw new v.A(`${Z}:invalid-parameters`,"'layers' array should contain only one instance each of layer or table in a feature service")}function N(){return(N=(0,n.A)(function*(W){F(W,y),yield Promise.all(W.map(Z=>Z.load()));for(const Z of W)(0,p.Y)(Z,y,i),(0,p.eP)({layer:Z,itemType:x,errorNamePrefix:y});(function $(W,Z){const k=W.map(Q=>Q.portalItem.id);if(new Set(k).size>1)throw new v.A(`${Z}:invalid-parameters`,"All layers in the 'layers' array should be loaded from the same portal item")})(W,y),ee(W,y)})).apply(this,arguments)}function z(W,Z){return X.apply(this,arguments)}function X(){return(X=(0,n.A)(function*(W,Z){const{url:k,layerId:Q,title:re,fullExtent:te,isTable:q}=W,ne=(0,c.qg)(k);Z.url=("FeatureServer"===ne?.serverType?k:`${k}/${Q}`)??null,Z.title||=re,Z.extent=null,q||null==te||(Z.extent=yield(0,M.sQ)(te)),(0,M.OM)(Z,M.mm.METADATA),(0,M.OM)(Z,M.mm.MULTI_LAYER),(0,M.LG)(Z,M.mm.SINGLE_LAYER),q&&(0,M.LG)(Z,M.mm.TABLE)})).apply(this,arguments)}function se(){return(se=(0,n.A)(function*(W){F(W,d),yield Promise.all(W.map(Z=>Z.load()));for(const Z of W)(0,p.Y)(Z,d,i);(function oe(W,Z){for(const te of W){const q=te.parsedUrl.path,ne=(0,c.qg)(q);if(!ne?.url.path)throw new v.A(`${Z}:invalid-parameters`,(0,p.Gy)(te,`has unsupported url pattern: ${q}`),{layer:te});const ce=ne?.serverType;if("FeatureServer"!==ce&&"MapServer"!==ce)throw new v.A(`${Z}:invalid-parameters`,(0,p.Gy)(te,`has unsupported server type: ${ce}`),{layer:te});if("MapServer"===ce&&W.length>1)throw new v.A(`${Z}:invalid-parameters`,"Only one layer or table in a map service can be saved")}const k=(0,c.qg)(W[0].parsedUrl.path),Q=k?.url.path;if(!W.every(te=>(0,c.qg)(te.parsedUrl.path)?.url.path===Q))throw new v.A(`${Z}:invalid-parameters`,"'layers' array should only contain layers or tables that belong to the same feature service")})(W,d),ee(W,d)})).apply(this,arguments)}function le(){return(le=(0,n.A)(function*(W,Z){let k=0,Q=0;for(const{isTable:q}of Z)q?Q++:k++;const re=Z[0].parsedUrl.path,te=(0,c.qg)(re);if(W.url="FeatureServer"===te?.serverType?te.url.path:re,W.title||=te.title,W.extent=null,k>0){const q=Z.map(ne=>ne.fullExtent).filter(u.Ru).reduce((ne,ae)=>ne.clone().union(ae));q&&(W.extent=yield(0,M.sQ)(q))}(0,M.OM)(W,M.mm.METADATA),(0,M.Sm)(W,M.mm.MULTI_LAYER,Z.length>1),(0,M.Sm)(W,M.mm.SINGLE_LAYER,1===Z.length),(0,M.Sm)(W,M.mm.TABLE,Q>0&&0===k),(0,p.Y9)(W)})).apply(this,arguments)}function de(W,Z){return pe.apply(this,arguments)}function pe(){return(pe=(0,n.A)(function*(W,Z){return(0,p.UN)({layer:W,itemType:x,validateLayer:i,createItemData:(k,Q)=>_(Q,[k]),errorNamePrefix:l},Z)})).apply(this,arguments)}function ye(W,Z){return he.apply(this,arguments)}function he(){return he=(0,n.A)(function*(W,Z){yield function B(W){return N.apply(this,arguments)}(W);const k=W[0].portalItem,Q=(0,p._U)(k),re=yield Promise.all(W.map(q=>(0,p.CJ)(q,Q,Z))),te=yield _(k,W.map((q,ne)=>({layer:q,layerJSON:re[ne]})));return(0,p.Y9)(k),yield k.update({data:te}),yield Promise.all(W.slice(1).map(q=>q.portalItem.reload())),(0,L.v)(Q),k.clone()}),he.apply(this,arguments)}function ge(W,Z,k){return me.apply(this,arguments)}function me(){return(me=(0,n.A)(function*(W,Z,k){return(0,p.Uh)({layer:W,itemType:x,validateLayer:i,createItemData:(Q,re)=>Promise.resolve(a(Q)),errorNamePrefix:s,newItem:Z,setItemProperties:z},k)})).apply(this,arguments)}function ve(W,Z,k){return fe.apply(this,arguments)}function fe(){return fe=(0,n.A)(function*(W,Z,k){yield function ie(W){return se.apply(this,arguments)}(W);const Q=(0,p.Y0)({itemType:x,errorNamePrefix:d,newItem:Z}),re=(0,p._U)(Q),te=yield Promise.all(W.map(ne=>(0,p.CJ)(ne,re,k))),q=yield O(W.map((ne,ae)=>({layer:ne,layerJSON:te[ae]})));yield function ue(W,Z){return le.apply(this,arguments)}(Q,W),yield(0,p.B5)(Q,q,k);for(const ne of W)ne.portalItem=Q.clone();return(0,L.v)(re),Q}),fe.apply(this,arguments)}},17994:(Y,j,e)=>{e.d(j,{B5:()=>O,CJ:()=>a,Gy:()=>l,UN:()=>S,Uh:()=>R,Y:()=>M,Y0:()=>i,Y9:()=>h,_U:()=>t,eP:()=>d});var n=e(10467),u=e(5922),v=e(23506),L=e(73874),p=e(46577),c=e(15764),E=e(69927),D=e(96904),f=e(95945);function M(C,w,o){const m=o(C);if(!m.isValid)throw new u.A(`${w}:invalid-parameters`,m.errorMessage,{layer:C})}function x(C){return A.apply(this,arguments)}function A(){return(A=(0,n.A)(function*(C){const{layer:w,errorNamePrefix:o,validateLayer:m}=C;yield w.load(),M(w,o,m)})).apply(this,arguments)}function l(C,w){return`Layer (title: ${C.title}, id: ${C.id}) of type '${C.declaredClass}' ${w}`}function s(C){const{item:w,errorNamePrefix:o,layer:m,validateItem:T}=C;if((0,D.X)(w),function y(C){const{item:w,itemType:o,additionalItemType:m,errorNamePrefix:T,layer:P}=C,U=[o];if(m&&U.push(m),!U.includes(w.type)){const K=U.map(G=>`'${G}'`).join(", ");throw new u.A(`${T}:portal-item-wrong-type`,`Portal item type should be one of: "${K}"`,{item:w,layer:P})}}(C),T){const P=T(w);if(!P.isValid)throw new u.A(`${o}:invalid-parameters`,P.errorMessage,{layer:m})}}function d(C){const{layer:w,errorNamePrefix:o}=C,{portalItem:m}=w;if(!m)throw new u.A(`${o}:portal-item-not-set`,l(w,"requires the portalItem property to be set"));if(!m.loaded)throw new u.A(`${o}:portal-item-not-loaded`,l(w,"cannot be saved to a portal item that does not exist or is inaccessible"));s({...C,item:m})}function i(C){const{newItem:w,itemType:o}=C;let m=p.default.from(w);return m.id&&(m=m.clone(),m.id=null),m.type??=o,m.portal??=L.A.getDefault(),s({...C,item:m}),m}function t(C){return(0,c.m)(C,"portal-item")}function a(C,w,o){return _.apply(this,arguments)}function _(){return(_=(0,n.A)(function*(C,w,o){"beforeSave"in C&&"function"==typeof C.beforeSave&&(yield C.beforeSave());const m=C.write({},w);return yield Promise.all(w.resources?.pendingOperations??[]),(0,f.c)(w,{errorName:"layer-write:unsupported"},o),m})).apply(this,arguments)}function h(C){(0,E.LG)(C,E.mm.JSAPI),C.typeKeywords&&(C.typeKeywords=C.typeKeywords.filter((w,o,m)=>m.indexOf(w)===o))}function O(C,w,o){return g.apply(this,arguments)}function g(){return(g=(0,n.A)(function*(C,w,o){const m=C.portal;yield m.signIn(),yield m.user?.addItem({item:C,data:w,folder:o?.folder})})).apply(this,arguments)}function S(C,w){return b.apply(this,arguments)}function b(){return(b=(0,n.A)(function*(C,w){const{layer:o,createItemData:m,createJSONContext:T,setItemProperties:P,saveResources:U,supplementalUnsupportedErrors:K}=C;yield x(C),d(C);const G=o.portalItem,J=T?T(G):t(G),H=yield a(o,J,{...w,supplementalUnsupportedErrors:K}),V=yield m({layer:o,layerJSON:H},G);return yield P?.(o,G),h(G),yield G.update({data:V}),(0,v.v)(J),yield U?.(G,J),G})).apply(this,arguments)}function R(C,w){return I.apply(this,arguments)}function I(){return(I=(0,n.A)(function*(C,w){const{layer:o,createItemData:m,createJSONContext:T,setItemProperties:P,saveResources:U,supplementalUnsupportedErrors:K}=C;yield x(C);const G=i(C),J=T?T(G):t(G),H=yield a(o,J,{...w,supplementalUnsupportedErrors:K}),V=yield m({layer:o,layerJSON:H},G);return yield P(o,G),h(G),yield O(G,V,w),o.portalItem=G,(0,v.v)(J),yield U?.(G,J),G})).apply(this,arguments)}},20260:(Y,j,e)=>{e.d(j,{bZ:()=>M,hX:()=>A}),e(21152),e(3248);var v=e(17715),L=e(35150),p=e(82663),c=e(51995),E=e(55039),D=e(1749);const f=()=>L.A.getLogger("esri.layers.support.ElevationSampler");class M{queryElevation(_){return function l(a,_){const h=s(a,_.spatialReference);if(!h)return null;switch(a.type){case"point":!function y(a,_,h){a.z=h.elevationAt(_.x,_.y)}(a,h,_);break;case"polyline":!function d(a,_,h){t.spatialReference=_.spatialReference;const O=a.hasM&&!a.hasZ;for(let g=0;g<a.paths.length;g++){const S=a.paths[g],b=_.paths[g];for(let R=0;R<S.length;R++){const I=S[R],C=b[R];t.x=C[0],t.y=C[1],O&&(I[3]=I[2]),I[2]=h.elevationAt(t.x,t.y)}}a.hasZ=!0}(a,h,_);break;case"multipoint":!function i(a,_,h){t.spatialReference=_.spatialReference;const O=a.hasM&&!a.hasZ;for(let g=0;g<a.points.length;g++){const S=a.points[g],b=_.points[g];t.x=b[0],t.y=b[1],O&&(S[3]=S[2]),S[2]=h.elevationAt(t.x,t.y)}a.hasZ=!0}(a,h,_)}return a}(_.clone(),this)}on(){return(0,v.hA)()}projectIfRequired(_,h){return s(_,h)}}class x extends M{get spatialReference(){return this.extent.spatialReference}constructor(_,h,O){super(),this.tile=_,this.noDataValue=O;const g=_.tile.extent;this.extent=(0,c.w1)(g,h.spatialReference),this.extent.zmin=_.zmin,this.extent.zmax=_.zmax,this._aaExtent=g;const S=(0,p.GA)(h.spatialReference),b=h.lodAt(_.tile.level).resolution*S;this.demResolution={min:b,max:b}}contains(_){const h=this.projectIfRequired(_,this.spatialReference);return null!=h&&this.containsAt(h.x,h.y)}containsAt(_,h){return(0,c.Rj)(this._aaExtent,_,h)}elevationAt(_,h){if(!this.containsAt(_,h)){const O=this.extent,g=`${O.xmin}, ${O.ymin}, ${O.xmax}, ${O.ymax}`;return f().warn("#elevationAt()",`Point used to sample elevation (${_}, ${h}) is outside of the sampler extent (${g})`),this.noDataValue}return this.tile.sample(_,h)??this.noDataValue}}class A extends M{get spatialReference(){return this.extent.spatialReference}constructor(_,h,O){let g;super(),"number"==typeof h?(this.noDataValue=h,g=null):(g=h,this.noDataValue=O),this.samplers=g?_.map(b=>new x(b,g,this.noDataValue)):_;const S=this.samplers[0];if(S){this.extent=S.extent.clone();const{min:b,max:R}=S.demResolution;this.demResolution={min:b,max:R};for(let I=1;I<this.samplers.length;I++){const C=this.samplers[I];this.extent.union(C.extent),this.demResolution.min=Math.min(this.demResolution.min,C.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,C.demResolution.max)}}else this.extent=(0,c.w1)((0,c.vt)(),g.spatialReference),this.demResolution={min:0,max:0}}elevationAt(_,h){let O,g=!1;for(const S of this.samplers)if(S.containsAt(_,h)&&(g=!0,O=S.elevationAt(_,h),O!==S.noDataValue))return O;return O??(g||f().warn("#elevationAt()",`Point used to sample elevation (${_}, ${h}) is outside of the sampler`),this.noDataValue)}}function s(a,_){if(null==a)return null;const h=a.spatialReference;if(h.equals(_))return a;const O=(0,E.Cv)(a,_);return O||f().error(`Cannot project geometry spatial reference (wkid:${h.wkid}) to elevation sampler spatial reference (wkid:${_.wkid})`),O}const t=new D.A},76974:(Y,j,e)=>{e.d(j,{g:()=>l});var n=e(8189),u=e(98877),v=e(63484),L=e(85211),D=(e(3248),e(35150),e(40707),e(76576)),f=e(40856),M=e(14916),x=e(87293);const A={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let l=class extends u.A{constructor(s){super(s),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const s=this.visibleSublayers.map(y=>{const d=(0,M.f)(this.floors,y);return y.toExportImageJSON(d)});return s.length?JSON.stringify(s):null}get hasDynamicLayers(){return this.layer&&(0,x.Sk)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(s){this._get("layer")!==s&&(this._set("layer",s),this.removeHandles("layer"),s&&this.addHandles([s.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),s.on("sublayer-update",y=>this.notifyChange(A[y.propertyName]))],"layer"))}get layers(){const s=this.visibleSublayers;return s?s.length?"show:"+s.map(y=>y.id).join(","):"show:-1":null}get layerDefs(){const s=!!this.floors?.length,y=this.visibleSublayers.filter(d=>null!=d.definitionExpression||s&&null!=d.floorInfo);return y.length?JSON.stringify(y.reduce((d,i)=>{const t=(0,M.f)(this.floors,i),a=(0,v.m)(t,i.definitionExpression);return null!=a&&(d[i.id]=a),d},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const s=this.layer;return s&&(s.commitProperty("dpi"),s.commitProperty("imageFormat"),s.commitProperty("imageTransparency"),s.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const s=[];if(!this.layer)return s;const y=this.layer.sublayers,d=this.scale,i=a=>{a.visible&&(0===d||(0,f.zx)(d,a.minScale,a.maxScale))&&(a.sublayers?a.sublayers.forEach(i):s.unshift(a))};y&&y.forEach(i);const t=this._get("visibleSublayers");return!t||t.length!==s.length||t.some((a,_)=>s[_]!==a)?s:t}toJSON(){const s=this.layer;let y={dpi:s.dpi,format:s.imageFormat,transparent:s.imageTransparency,gdbVersion:s.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?y.dynamicLayers=this.dynamicLayers:y={...y,layers:this.layers,layerDefs:this.layerDefs},y}};(0,n._)([(0,L.MZ)({readOnly:!0})],l.prototype,"dynamicLayers",null),(0,n._)([(0,L.MZ)()],l.prototype,"floors",void 0),(0,n._)([(0,L.MZ)({readOnly:!0})],l.prototype,"hasDynamicLayers",null),(0,n._)([(0,L.MZ)()],l.prototype,"layer",null),(0,n._)([(0,L.MZ)({readOnly:!0})],l.prototype,"layers",null),(0,n._)([(0,L.MZ)({readOnly:!0})],l.prototype,"layerDefs",null),(0,n._)([(0,L.MZ)({type:Number})],l.prototype,"scale",void 0),(0,n._)([(0,L.MZ)({readOnly:!0})],l.prototype,"version",null),(0,n._)([(0,L.MZ)({readOnly:!0})],l.prototype,"visibleSublayers",null),l=(0,n._)([(0,D.$)("esri.layers.support.ExportImageParameters")],l)},2277:(Y,j,e)=>{e.d(j,{r:()=>f});var n=e(8189),u=e(98877),v=e(85211),E=(e(3248),e(35150),e(40707),e(76576));const D={visible:"visibleSublayers"};let f=class extends u.A{constructor(M){super(M),this.scale=0}set layer(M){this._get("layer")!==M&&(this._set("layer",M),this.removeHandles("layer"),M&&this.addHandles([M.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),M.on("wms-sublayer-update",x=>this.notifyChange(D[x.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:M})=>M).map(({name:M})=>M).join()}get version(){this.commitProperty("layers");const M=this.layer;return M&&M.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:M,scale:x}=this,A=M?.sublayers,l=[],s=y=>{const{minScale:d,maxScale:i,sublayers:t,visible:a}=y;a&&(0===x||(0===d||x<=d)&&(0===i||x>=i))&&(t?t.forEach(s):l.push(y))};return A?.forEach(s),l}toJSON(){const{layer:M,layers:x}=this,{imageFormat:A,imageTransparency:l,version:s}=M;return{format:A,request:"GetMap",service:"WMS",styles:"",transparent:l?"TRUE":"FALSE",version:s,layers:x}}};(0,n._)([(0,v.MZ)()],f.prototype,"layer",null),(0,n._)([(0,v.MZ)({readOnly:!0})],f.prototype,"layers",null),(0,n._)([(0,v.MZ)({type:Number})],f.prototype,"scale",void 0),(0,n._)([(0,v.MZ)({readOnly:!0})],f.prototype,"version",null),(0,n._)([(0,v.MZ)({readOnly:!0})],f.prototype,"visibleSublayers",null),f=(0,n._)([(0,E.$)("esri.layers.support.ExportWMSImageParameters")],f)},28:(Y,j,e)=>{e.d(j,{_:()=>A});var n=e(8189),u=e(98877),v=e(85211),E=(e(3248),e(35150),e(40707),e(76576)),D=e(55861),f=e(11817),M=e(51995),x=e(15584);let A=class extends u.A{constructor(l){super(l)}get bounds(){const l=this.coords;return null==l?.extent?null:(0,M.VY)(l.extent)}get coords(){const l=this.element.georeference?.coords;return(0,f.projectOrLoad)(l,this.spatialReference).geometry}get normalizedCoords(){return D.A.fromJSON((0,x.jZ)(this.coords))}get normalizedBounds(){const l=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=l?(0,M.VY)(l):null}};(0,n._)([(0,v.MZ)()],A.prototype,"spatialReference",void 0),(0,n._)([(0,v.MZ)()],A.prototype,"element",void 0),(0,n._)([(0,v.MZ)()],A.prototype,"bounds",null),(0,n._)([(0,v.MZ)()],A.prototype,"coords",null),(0,n._)([(0,v.MZ)()],A.prototype,"normalizedCoords",null),(0,n._)([(0,v.MZ)()],A.prototype,"normalizedBounds",null),A=(0,n._)([(0,E.$)("esri.layers.support.MediaElementView")],A)},43470:(Y,j,e)=>{e.d(j,{A:()=>M});var n=e(8189),u=e(90660),v=e(71065),L=e(85211),D=(e(3248),e(35150),e(40707),e(76576));let f=class extends((0,u.O)(v.oY)){constructor(x){super(x),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,n._)([(0,L.MZ)({type:Boolean})],f.prototype,"frameCenter",void 0),(0,n._)([(0,L.MZ)({type:Boolean})],f.prototype,"frameOutline",void 0),(0,n._)([(0,L.MZ)({type:Boolean})],f.prototype,"lineOfSight",void 0),(0,n._)([(0,L.MZ)({type:Boolean})],f.prototype,"sensorLocation",void 0),(0,n._)([(0,L.MZ)({type:Boolean})],f.prototype,"sensorTrail",void 0),f=(0,n._)([(0,D.$)("esri.layers.support.TelemetryDisplay")],f);const M=f},56773:(Y,j,e)=>{e.d(j,{A:()=>L});var n=e(10467),u=e(5922),v=e(56492);class L{constructor(c,E=0,D=c.lods[c.lods.length-1].level){this.tileInfo=c,this.minLOD=E,this.maxLOD=D,c.lodAt(E)||(this.minLOD=c.lods[0].level),c.lodAt(D)||(this.maxLOD=c.lods[c.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(c,E,D){const f=this.tileInfo?.lodAt(c);return!f||c<this.minLOD||c>this.maxLOD?"unavailable":f.cols&&f.rows?D>=f.cols[0]&&D<=f.cols[1]&&E>=f.rows[0]&&E<=f.rows[1]?"unknown":"unavailable":"unknown"}fetchAvailability(c,E,D,f){var M=this;return(0,n.A)(function*(){yield(0,v.NO)(f);const x=M.getAvailability(c,E,D);if("unavailable"===x)throw new u.A("tile-map:tile-unavailable","Tile is not available",{level:c,row:E,col:D});return x})()}fetchAvailabilityUpsample(c,E,D,f,M){var x=this;return(0,n.A)(function*(){yield(0,v.NO)(M),f.level=c,f.row=E,f.col=D;const A=x.tileInfo;return A.updateTileInfo(f),x.fetchAvailability(c,E,D,M).catch(l=>{if((0,v.zf)(l))throw l;if(A.upsampleTile(f))return x.fetchAvailabilityUpsample(f.level,f.row,f.col,f,M);throw l})})()}}},77677:(Y,j,e)=>{e.d(j,{d:()=>w});var C,n=e(10467),u=e(8189),v=e(89563),L=e(98877),p=e(63583),c=e(5922),E=e(17715),f=(e(3248),e(33087)),M=e(12438),x=e(56492),A=e(48900),l=e(3804),s=e(45272),y=e(85211),t=(e(35150),e(40707),e(76576)),a=e(25858),_=e(77806),h=e(79139);class S{constructor(m){!function I(o){if(!o?.location)throw new c.A("tilemap:missing-location","Location missing from tilemap response");if(!1===o.valid)throw new c.A("tilemap:invalid","Tilemap response was marked as invalid");if(!o.data)throw new c.A("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(o.data))throw new c.A("tilemap:data-mismatch","Data must be an array of numbers");if(o.data.length!==o.location.width*o.location.height)throw new c.A("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}(m);const{location:T,data:P}=m;this.location=Object.freeze((0,_.o8)(T));let G=!0,J=!0;const V=function O(o,m=!1){return o<=h.y9?m?new Array(o).fill(0):new Array(o):new Uint32Array(o)}(Math.ceil(this.location.width*this.location.height/32));let F=0;for(let $=0;$<P.length;$++){const ee=$%32;P[$]?(J=!1,V[F]|=1<<ee):G=!1,31===ee&&++F}J?(this._availability="unavailable",this.byteSize=40):G?(this._availability="available",this.byteSize=40):(this._availability=V,this.byteSize=40+(0,h.Ek)(V))}getAvailability(m,T){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const P=(m-this.location.top)*this.location.width+(T-this.location.left),K=P>>5,G=this._availability;return K<0||K>G.length?"unknown":G[K]&1<<P%32?"available":"unavailable"}static fromDefinition(m,T){const P=m.service.request||v.A,{row:U,col:K,width:G,height:J}=m,H={query:{f:"json"}};return T=T?{...H,...T}:H,P(function R(o){let m;if(o.service.tileServers?.length){const P=o.service.tileServers;m=`${P&&P.length?P[o.row%P.length]:o.service.url}/tilemap/${o.level}/${o.row}/${o.col}/${o.width}/${o.height}`}else m=`${o.service.url}/tilemap/${o.level}/${o.row}/${o.col}/${o.width}/${o.height}`;const T=o.service.query;return T&&(m=`${m}?${T}`),m}(m),T).then(V=>V.data).catch(V=>{if(422===V?.details?.httpStatus)return{location:{top:U,left:K,width:G,height:J},valid:!0,data:new Array(G*J).fill(0)};throw V}).then(V=>{if(V.location&&(V.location.top!==U||V.location.left!==K||V.location.width!==G||V.location.height!==J))throw new c.A("tilemap:location-mismatch","Tilemap response for different location than requested",{response:V,definition:{top:U,left:K,width:G,height:J}});return S.fromJSON(V)})}static fromJSON(m){return Object.freeze(new S(m))}}function b(o){return`${o.level}/${o.row}/${o.col}/${o.width}/${o.height}`}let w=C=class extends L.A{constructor(o){super(o),this._pendingTilemapRequests={},this.request=v.A,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new f.q(2*p.u.MEGABYTES),this.addHandles((0,A.wB)(()=>{const{layer:o}=this;return[o?.parsedUrl,o?.tileServers,o?.apiKey,o?.customParameters]},()=>this._initializeTilemapDefinition(),A.Vh))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(o,m,T){if(!this.layer.tileInfo.lodAt(o)||o<this.effectiveMinLOD||o>this.effectiveMaxLOD)return"unavailable";const P=this._tilemapFromCache(o,m,T,this._tmpTilemapDefinition);return P?P.getAvailability(m,T):"unknown"}fetchAvailability(o,m,T,P){return!this.layer.tileInfo.lodAt(o)||o<this.effectiveMinLOD||o>this.effectiveMaxLOD?Promise.reject(new c.A("tile-map:tile-unavailable","Tile is not available",{level:o,row:m,col:T})):this._fetchTilemap(o,m,T,P).catch(U=>U).then(U=>{if(U instanceof S){const K=U.getAvailability(m,T);if("unavailable"===K)throw new c.A("tile-map:tile-unavailable","Tile is not available",{level:o,row:m,col:T});return K}if((0,x.zf)(U))throw U;return"unknown"})}fetchAvailabilityUpsample(o,m,T,P,U){P.level=o,P.row=m,P.col=T;const K=this.layer.tileInfo;K.updateTileInfo(P);const G=this.fetchAvailability(o,m,T,U).catch(J=>{if((0,x.zf)(J))throw J;if(K.upsampleTile(P))return this.fetchAvailabilityUpsample(P.level,P.row,P.col,P,U);throw J});return this._fetchAvailabilityUpsamplePrefetch(P.id,o,m,T,U,G),G}_fetchAvailabilityUpsamplePrefetch(o,m,T,P,U,K){var G=this;return(0,n.A)(function*(){if(!G._prefetchingEnabled||null==o)return;const J=`prefetch-${o}`;if(G.hasHandles(J))return;const H=new AbortController;K.then(()=>H.abort(),()=>H.abort());let V=!1;const F=(0,E.hA)(()=>{V||(V=!0,H.abort())});if(G.addHandles(F,J),yield(0,l.md)(10,H.signal).catch(()=>{}),V||(V=!0,G.removeHandles(J)),(0,x.G4)(H))return;const $=new a.U(o,m,T,P),ee={...U,signal:H.signal},B=G.layer.tileInfo;for(let N=0;C._prefetches.length<C._maxPrefetch&&B.upsampleTile($);++N){const z=G.fetchAvailability($.level,$.row,$.col,ee);C._prefetches.push(z);const X=()=>{C._prefetches.removeUnordered(z)};z.then(X,X)}})()}_fetchTilemap(o,m,T,P){if(!this.layer.tileInfo.lodAt(o)||o<this.effectiveMinLOD||o>this.effectiveMaxLOD)return Promise.reject(new c.A("tilemap-cache:level-unavailable",`Level ${o} is unavailable in the service`));const U=this._tmpTilemapDefinition,K=this._tilemapFromCache(o,m,T,U);if(K)return Promise.resolve(K);const G=P?.signal;return P={...P,signal:null},new Promise((J,H)=>{(0,x.u7)(G,()=>H((0,x.NK)()));const V=b(U);let F=this._pendingTilemapRequests[V];if(!F){F=S.fromDefinition(U,P).then(ee=>(this._tilemapCache.put(V,ee,ee.byteSize),ee));const $=()=>{delete this._pendingTilemapRequests[V]};this._pendingTilemapRequests[V]=F,F.then($,$)}F.then(J,H)})}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:o,apiKey:m,customParameters:T}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:o.path,query:(0,s.x0)({...o.query,...T,token:m??o.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(o,m,T,P){P.level=o,P.row=m-m%this.size,P.col=T-T%this.size;const U=b(P);return this._tilemapCache.get(U)}get test(){}};w._maxPrefetch=4,w._prefetches=new M.A({initialSize:C._maxPrefetch}),(0,u._)([(0,y.MZ)({constructOnly:!0})],w.prototype,"layer",void 0),(0,u._)([(0,y.MZ)({constructOnly:!0})],w.prototype,"minLOD",void 0),(0,u._)([(0,y.MZ)({constructOnly:!0})],w.prototype,"maxLOD",void 0),(0,u._)([(0,y.MZ)({constructOnly:!0})],w.prototype,"request",void 0),(0,u._)([(0,y.MZ)({constructOnly:!0})],w.prototype,"size",void 0),w=C=(0,u._)([(0,t.$)("esri.layers.support.TilemapCache")],w)},5079:(Y,j,e)=>{e.d(j,{x:()=>f});var D,n=e(8189),u=e(71065),v=e(77806),L=e(85211),E=(e(3248),e(35150),e(76576));let f=D=class extends u.oY{constructor(M){super(M)}clone(){return new D({customLayerParameters:(0,v.o8)(this.customLayerParameters),customParameters:(0,v.o8)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,n._)([(0,L.MZ)({json:{type:Object,write:!0}})],f.prototype,"customLayerParameters",void 0),(0,n._)([(0,L.MZ)({json:{type:Object,write:!0}})],f.prototype,"customParameters",void 0),(0,n._)([(0,L.MZ)({type:String,json:{write:!0}})],f.prototype,"layerIdentifier",void 0),(0,n._)([(0,L.MZ)({type:String,json:{write:!0}})],f.prototype,"tileMatrixSet",void 0),(0,n._)([(0,L.MZ)({type:String,json:{write:!0}})],f.prototype,"url",void 0),f=D=(0,n._)([(0,E.$)("esri.layers.support.WMTSLayerInfo")],f)},70264:(Y,j,e)=>{e.d(j,{Jy:()=>d,Ox:()=>y,Qm:()=>O,Sp:()=>_,_4:()=>s});var n=e(10467),u=e(23098),v=e(77469),L=e(92165),p=e(89563),c=e(77806),E=e(45272),D=e(32034),f=e(2296),M=e(83065),x=e(85718),A=e(93327);const l={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function s(g){const S=g.folders||[],b=S.slice(),R=new Map,I=new Map,C=new Map,w=new Map,o=new Map,m={esriGeometryPoint:I,esriGeometryPolyline:C,esriGeometryPolygon:w};(g.featureCollection?.layers||[]).forEach(P=>{const U=(0,c.o8)(P);U.featureSet.features=[];const K=P.featureSet.geometryType;R.set(K,U);const G=P.layerDefinition.objectIdField;"esriGeometryPoint"===K?i(I,G,P.featureSet.features):"esriGeometryPolyline"===K?i(C,G,P.featureSet.features):"esriGeometryPolygon"===K&&i(w,G,P.featureSet.features)}),g.groundOverlays&&g.groundOverlays.forEach(P=>{o.set(P.id,P)}),S.forEach(P=>{P.networkLinkIds.forEach(U=>{const K=function a(g,S,b){const R=function t(g,S){let b;return S.some(R=>R.id===g&&(b=R,!0)),b}(g,b);return R&&(R.parentFolderId=S,R.networkLink=R),R}(U,P.id,g.networkLinks);K&&b.push(K)})}),b.forEach(P=>{if(P.featureInfos){P.points=(0,c.o8)(R.get("esriGeometryPoint")),P.polylines=(0,c.o8)(R.get("esriGeometryPolyline")),P.polygons=(0,c.o8)(R.get("esriGeometryPolygon")),P.mapImages=[];for(const U of P.featureInfos)switch(U.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const K=m[U.type].get(U.id);K&&P[l[U.type]]?.featureSet.features.push(K);break}case"GroundOverlay":{const K=o.get(U.id);K&&P.mapImages.push(K);break}}P.fullExtent=O([P])}});const T=O(b);return{folders:S,sublayers:b,extent:T}}function y(g,S,b,R){const I=v.id?.findCredential(g);return g=(0,E.a6)(g,{token:I?.token}),(0,p.A)(u.A.kmlServiceUrl,{query:{url:g,model:"simple",folders:"",refresh:0!==b||void 0,outSR:JSON.stringify(S)},responseType:"json",signal:R})}function d(g,S,b=null,R=[]){const I=[],C={},w=S.sublayers,o=new Set(S.folders.map(m=>m.id));return w.forEach(m=>{const T=new g;if(b?T.read(m,b):T.read(m),R.length&&o.has(T.id)&&(T.visible=R.includes(T.id)),C[m.id]=T,null!=m.parentFolderId&&-1!==m.parentFolderId){const P=C[m.parentFolderId];P.sublayers||(P.sublayers=[]),P.sublayers?.unshift(T)}else I.unshift(T)}),I}function i(g,S,b){b.forEach(R=>{g.set(R.attributes[S],R)})}function _(g){return h.apply(this,arguments)}function h(){return(h=(0,n.A)(function*(g){const S=A.A.fromJSON(g.featureSet).features,R=(0,x.r)(g.layerDefinition.drawingInfo.renderer),I=L.A.fromJSON(g.popupInfo),C=[];for(const w of S){const o=yield R.getSymbolAsync(w);w.symbol=o,w.popupTemplate=I,w.visible=!0,C.push(w)}return C})).apply(this,arguments)}function O(g){const S=(0,f.vt)(f.qv),b=(0,f.vt)(f.qv);for(const R of g){if(R.polygons?.featureSet?.features)for(const I of R.polygons.featureSet.features)(0,M.LJ)(S,I.geometry),(0,f.RF)(b,S);if(R.polylines?.featureSet?.features)for(const I of R.polylines.featureSet.features)(0,M.LJ)(S,I.geometry),(0,f.RF)(b,S);if(R.points?.featureSet?.features)for(const I of R.points.featureSet.features)(0,M.LJ)(S,I.geometry),(0,f.RF)(b,S);if(R.mapImages)for(const I of R.mapImages)(0,M.LJ)(S,I.extent),(0,f.RF)(b,S)}return(0,f.aI)(b,f.qv)?void 0:{xmin:b[0],ymin:b[1],zmin:b[2],xmax:b[3],ymax:b[4],zmax:b[5],spatialReference:D.A.WGS84}}},66323:(Y,j,e)=>{e.r(j),e.d(j,{populateGroupLayer:()=>U,populateOperationalLayers:()=>l});var n=e(10467),u=e(31178),L=(e(3248),e(61597)),p=e(64833),c=e(46577);function M(F,$){return!(!F.layerType||"ArcGISFeatureLayer"!==F.layerType)&&F.featureCollectionType===$}var x=e(15565),A=e(8691);function l(F,$,ee){return s.apply(this,arguments)}function s(){return s=(0,n.A)(function*(F,$,ee){if(!$)return;const B=$.map(z=>function b(F,$){return R.apply(this,arguments)}(z,ee)),N=yield Promise.allSettled(B);for(const z of N)"rejected"===z.status||z.value&&F.add(z.value)}),s.apply(this,arguments)}const y={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",Voxel:"VoxelLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},d={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},i={ArcGISFeatureLayer:"FeatureLayer"},t={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},a={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},_={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"UnsupportedLayer"},h={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},O={...a,LinkChartLayer:"LinkChartLayer"},g={..._},S={...h};function R(){return R=(0,n.A)(function*(F,$){return function I(F,$,ee){return C.apply(this,arguments)}(yield function w(F,$){return o.apply(this,arguments)}(F,$),F,$)}),R.apply(this,arguments)}function C(){return C=(0,n.A)(function*(F,$,ee){const B=new F;return B.read($,ee.context),"group"===B.type&&("GroupLayer"===$.layerType?yield U(B,$,ee):T($)?function G(F,$,ee){$.itemId&&(F.portalItem=new c.default({id:$.itemId,portal:ee?.portal}),F.when(()=>{const B=N=>{const z=N.layerId;V(N,F,$,z,ee);const X=$.featureCollection?.layers?.[z];X&&N.read(X,ee)};F.layers?.forEach(B),F.tables?.forEach(B)}))}(B,$,ee.context):m($)&&(yield function J(F,$,ee){return H.apply(this,arguments)}(B,$,ee.context))),yield(0,A.L)(B,ee.context),B}),C.apply(this,arguments)}function o(){return(o=(0,n.A)(function*(F,$){const ee=$.context,B=function P(F){let $;switch(F.origin){case"web-scene":switch(F.layerContainerType){case"basemap":$=t;break;case"ground":$=d;break;case"tables":$=i;break;default:$=y}break;case"link-chart":switch(F.layerContainerType){case"basemap":$=S;break;case"tables":$=g;break;default:$=O}break;default:switch(F.layerContainerType){case"basemap":$=h;break;case"tables":$=_;break;default:$=a}}return $}(ee);let N=F.layerType||F.type;!N&&$?.defaultLayerType&&(N=$.defaultLayerType);const z=B[N];let X=z?p.S[z]:p.S.UnknownLayer;if(T(F)){const oe=ee?.portal;if(F.itemId){const ie=new c.default({id:F.itemId,portal:oe});yield ie.load();const se=(yield(0,x.selectLayerClassPath)(ie,new L.v)).className||"UnknownLayer";X=p.S[se]}}else"ArcGISFeatureLayer"===N?function E(F){return M(F,"notes")}(F)||function D(F){return M(F,"markup")}(F)?X=p.S.MapNotesLayer:function f(F){return M(F,"route")}(F)?X=p.S.RouteLayer:m(F)&&(X=p.S.GroupLayer):F.wmtsInfo?.url&&F.wmtsInfo.layerIdentifier?X=p.S.WMTSLayer:"WFS"===N&&"2.0.0"!==F.wfsInfo?.version&&(X=p.S.UnsupportedLayer);return X()})).apply(this,arguments)}function m(F){return"ArcGISFeatureLayer"===F.layerType&&!T(F)&&(F.featureCollection?.layers?.length??0)>1}function T(F){return"Feature Collection"===F.type}function U(F,$,ee){return K.apply(this,arguments)}function K(){return(K=(0,n.A)(function*(F,$,ee){const B=new u.A,N=l(B,Array.isArray($.layers)?$.layers:[],ee);try{try{if(yield N,"group"===F.type)return F.layers.addMany(B),F}catch(z){F.destroy();for(const X of B)X.destroy();throw z}}catch(z){throw z}})).apply(this,arguments)}function H(){return(H=(0,n.A)(function*(F,$,ee){const B=p.S.FeatureLayer,N=yield B(),z=$.featureCollection,X=z?.showLegend,oe=z?.layers?.map((ie,se)=>{const ue=new N;ue.read(ie,ee);const le={...ee,ignoreDefaults:!0};return V(ue,F,$,se,le),null!=X&&ue.read({showLegend:X},le),ue});F.layers.addMany(oe??[])})).apply(this,arguments)}function V(F,$,ee,B,N){F.read({id:`${$.id}-sublayer-${B}`,visibility:ee.visibleLayers?.includes(B)??!0},N)}},62619:(Y,j,e)=>{e.d(j,{jX:()=>x,zo:()=>s,gd:()=>A,ph:()=>E,no:()=>l,kz:()=>D,ht:()=>f,yo:()=>d}),e(21152);var v=e(40018),L=e(1749);const p=new Map,c=new class u{constructor(t=15e3,a=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,a)}decreaseRefCount(t,a){const _=t+"/"+a,h=this._cachedBlocks;if(h.has(_)){const O=h.get(_);return O.refCount--,O.refCount<=0&&(h.delete(_),O.controller&&O.controller.abort()),O.refCount}return 0}getBlock(t,a){const _=t+"/"+a,h=this._cachedBlocks;if(h.has(_)){const O=h.get(_);return O.ts=Date.now(),O.refCount++,h.delete(_),h.set(_,O),O.block}return null}putBlock(t,a,_,h){const O=this._cachedBlocks,g=t+"/"+a;if(O.has(g)){const S=O.get(g);S.ts=Date.now(),S.refCount++}else O.set(g,{block:_,ts:Date.now(),refCount:1,controller:h});this._trim(),this._updateTimer()}deleteBlock(t,a){const _=this._cachedBlocks,h=t+"/"+a;_.has(h)&&_.delete(h)}updateMaxSize(t){this._size=t,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const t=this._cachedBlocks;this._timer=setInterval(()=>{const a=Array.from(t),_=Date.now();for(let h=0;h<a.length&&a[h][1].ts<=_-this._duration;h++)t.delete(a[h][0]);0===t.size&&this._clearTimer()},this._interval)}_trim(){const t=this._cachedBlocks;if(-1===this._size||this._size>=t.size)return;const a=Array.from(t);for(let _=0;_<a.length-this._size;_++)t.delete(a[_][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function E(i,t){return null==t?i:`${i}?sliceId=${t}`}function D(i,t){const a={extent:null,rasterInfo:t,cache:new Map},_=p.get(i);return _?(_.push(a),_.length-1):(p.set(i,[a]),0)}function f(i,t){const a=p.get(i);a&&(a[t]=null,a.some(_=>null!=_)||p.delete(i))}function x(i,t,a){const _=p.get(i);if(!_)return null==t?c.decreaseRefCount(i,a):0;if(null==t||null==_[t])return c.decreaseRefCount(i,a);const h=_[t]?.cache,O=h?.get(a);if(h&&O){if(O.refCount--,0===O.refCount){h.delete(a);for(let g=0;g<_.length;g++)_[g]?.cache.delete(a);O.controller&&O.controller.abort()}return O.refCount}return 0}function A(i,t,a){const _=p.get(i);if(!_)return null==t?c.getBlock(i,a):null;if(null==t||null==_[t]){for(let O=0;O<_.length;O++){const g=_[O]?.cache.get(a);if(g)return g.refCount++,g.block}return c.getBlock(i,a)}const h=_[t]?.cache.get(a);if(h)return h.refCount++,h.block;for(let O=0;O<_.length;O++){if(O===t||!_[O])continue;const g=_[O]?.cache,S=g?.get(a);if(g&&S)return S.refCount++,g.set(a,S),S.block}return null}function l(i,t,a,_,h=null){const O=p.get(i);if(!O)return void(null==t&&c.putBlock(i,a,_,h));if(null==t||null==O[t])return void c.putBlock(i,a,_,h);const g={refCount:1,block:_,isResolved:!1,isRejected:!1,controller:h};_.then(()=>g.isResolved=!0).catch(()=>g.isRejected=!0),O[t]?.cache.set(a,g)}function s(i,t,a){const _=p.get(i);_?null!=t&&null!=_[t]?_[t]?.cache.delete(a):c.deleteBlock(i,a):null==t&&c.deleteBlock(i,a)}function d(i,t,a,_,h,O,g=null){const S=function y(i,t){const a=p.get(i);return a?a[t]??null:null}(i,t);if(!S)return;const b=S.extent,{cache:R,rasterInfo:I}=S;if(b&&b.xmin===a.xmin&&b.xmax===a.xmax&&b.ymin===a.ymin&&b.ymax===a.ymax)return;_=_??0;const C=a.clone().normalize(),{spatialReference:w,transform:o}=I,m=new Set;for(let T=0;T<C.length;T++){const P=C[T];if(P.xmax-P.xmin<=_||P.ymax-P.ymin<=_)continue;let U=(0,v._l)(P,w,g);null!=o&&(U=o.inverseTransform(U));const K=new L.A({x:_,y:_,spatialReference:P.spatialReference});if(null==h&&!(h=(0,v.Wo)(K,w,P,g)))return;const{pyramidLevel:G,pyramidResolution:J,excessiveReading:H}=(0,v.t$)(h,I,O||"closest");if(H)return;const{storageInfo:V}=I,{origin:F}=V,$={x:Math.max(0,Math.floor((U.xmin-F.x)/J.x)),y:Math.max(0,Math.floor((F.y-U.ymax)/J.y))},ee=Math.ceil((U.xmax-U.xmin)/J.x-.1),B=Math.ceil((U.ymax-U.ymin)/J.y-.1),N=G>0?V.pyramidBlockWidth:V.blockWidth,z=G>0?V.pyramidBlockHeight:V.blockHeight,X=1,oe=Math.max(0,Math.floor($.x/N)-X),ie=Math.max(0,Math.floor($.y/z)-X),se=Math.floor(($.x+ee-1)/N)+X,ue=Math.floor(($.y+B-1)/z)+X;for(let le=ie;le<=ue;le++)for(let de=oe;de<=se;de++)m.add(`${G}/${le}/${de}`)}R.forEach((T,P)=>{if(!m.has(P)){const U=R.get(P);(null==U||U.isResolved||U.isRejected)&&R.delete(P)}}),S.extent={xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}},62200:(Y,j,e)=>{e.d(j,{a:()=>u,h:()=>v});var n=e(90261);function u(){return new Promise(p=>e.e(9748).then(e.bind(e,29748)).then(c=>c.l).then(({default:c})=>{const E=c({locateFile:L,onRuntimeInitialized:()=>p(E)})})).catch(p=>{throw p})}function v(){return new Promise(p=>e.e(215).then(e.bind(e,50215)).then(c=>c.l).then(({default:c})=>{const E=c({locateFile:L,onRuntimeInitialized:()=>p(E)})})).catch(p=>{throw p})}function L(p){return(0,n.s)(`esri/libs/lyr3d/${p}`)}},20368:(Y,j,e)=>{e.d(j,{n:()=>u});var n=e(45272);function u(f){return p[function v(f){return"json"===f.type?"application/json":"blob"===f.type?f.blob.type:function L(f){const M=(0,n.Zo)(f);return D[M]||c}(f.url)}(f)]||E}const p={},c="text/plain",E=p[c],D={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const f in D)p[D[f]]=f},49873:(Y,j,e)=>{e.d(j,{A:()=>t});var l,n=e(8189),u=e(77806),v=e(85211),c=(e(3248),e(35150),e(15463)),E=e(76576),D=e(63115),f=e(26768),M=e(68677),x=e(71065),A=e(55739);let s=l=class extends x.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new l({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,u.o8)(this.color)})}};(0,n._)([(0,v.MZ)({type:String,json:{write:!0}})],s.prototype,"description",void 0),(0,n._)([(0,v.MZ)({type:String,json:{write:!0}})],s.prototype,"label",void 0),(0,n._)([(0,v.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],s.prototype,"minValue",void 0),(0,n._)([(0,v.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],s.prototype,"maxValue",void 0),(0,n._)([(0,v.MZ)({type:M.A,json:{type:[A.jz],write:!0}})],s.prototype,"color",void 0),s=l=(0,n._)([(0,E.$)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],s);const y=s;var d;let i=d=class extends D.A{constructor(a){super(a),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new d({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,u.o8)(this.colorClassBreakInfos),legendOptions:(0,u.o8)(this.legendOptions)})}};(0,n._)([(0,c.e)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],i.prototype,"type",void 0),(0,n._)([(0,v.MZ)({json:{write:!0},type:String})],i.prototype,"field",void 0),(0,n._)([(0,v.MZ)({type:f.q,json:{write:!0}})],i.prototype,"legendOptions",void 0),(0,n._)([(0,v.MZ)({type:D.A.fieldTransformTypeKebabDict.apiValues,json:{type:D.A.fieldTransformTypeKebabDict.jsonValues,read:D.A.fieldTransformTypeKebabDict.read,write:D.A.fieldTransformTypeKebabDict.write}})],i.prototype,"fieldTransformType",void 0),(0,n._)([(0,v.MZ)({type:[y],json:{write:!0}})],i.prototype,"colorClassBreakInfos",void 0),i=d=(0,n._)([(0,E.$)("esri.renderers.PointCloudClassBreaksRenderer")],i);const t=i},63115:(Y,j,e)=>{e.d(j,{A:()=>R});var M,n=e(8189),u=e(49976),v=e(71065),L=e(77806),p=e(85211),D=(e(3248),e(35150),e(76576));e(40707);let x=M=class extends v.oY{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new M({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,n._)([(0,p.MZ)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,n._)([(0,p.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"minValue",void 0),(0,n._)([(0,p.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],x.prototype,"maxValue",void 0),x=M=(0,n._)([(0,D.$)("esri.renderers.support.pointCloud.ColorModulation")],x);const A=x,l=new u.J({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let s=class extends v.oY{};(0,n._)([(0,p.MZ)({type:l.apiValues,readOnly:!0,nonNullable:!0,json:{type:l.jsonValues,read:!1,write:l.write}})],s.prototype,"type",void 0),s=(0,n._)([(0,D.$)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],s);const y=s;var i,d=e(15463);let t=i=class extends y{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new i({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,n._)([(0,d.e)({pointCloudFixedSizeAlgorithm:"fixed-size"})],t.prototype,"type",void 0),(0,n._)([(0,p.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"size",void 0),(0,n._)([(0,p.MZ)({type:Boolean,json:{write:!0}})],t.prototype,"useRealWorldSymbolSizes",void 0),t=i=(0,n._)([(0,D.$)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],t);const a=t;var _;let h=_=class extends y{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new _({scaleFactor:this.scaleFactor})}};(0,n._)([(0,d.e)({pointCloudSplatAlgorithm:"splat"})],h.prototype,"type",void 0),(0,n._)([(0,p.MZ)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],h.prototype,"scaleFactor",void 0),h=_=(0,n._)([(0,D.$)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],h);const g={key:"type",base:y,typeMap:{"fixed-size":a,splat:h}},S=(0,u.O)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let b=class extends v.oY{constructor(I){super(I),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,L.o8)(this.pointSizeAlgorithm),colorModulation:(0,L.o8)(this.colorModulation),pointsPerInch:(0,L.o8)(this.pointsPerInch)}}};(0,n._)([(0,p.MZ)({type:S.apiValues,readOnly:!0,nonNullable:!0,json:{type:S.jsonValues,read:!1,write:S.write}})],b.prototype,"type",void 0),(0,n._)([(0,p.MZ)({types:g,json:{write:!0}})],b.prototype,"pointSizeAlgorithm",void 0),(0,n._)([(0,p.MZ)({type:A,json:{write:!0}})],b.prototype,"colorModulation",void 0),(0,n._)([(0,p.MZ)({json:{write:!0},nonNullable:!0,type:Number})],b.prototype,"pointsPerInch",void 0),b=(0,n._)([(0,D.$)("esri.renderers.PointCloudRenderer")],b),(b||(b={})).fieldTransformTypeKebabDict=new u.J({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const R=b},87862:(Y,j,e)=>{e.d(j,{A:()=>l});var x,n=e(8189),u=e(77806),v=e(85211),c=(e(3248),e(35150),e(15463)),E=e(76576),D=e(63115),f=e(26768),M=e(5236);let A=x=class extends D.A{constructor(s){super(s),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new x({...this.cloneProperties(),field:(0,u.o8)(this.field),fieldTransformType:(0,u.o8)(this.fieldTransformType),stops:(0,u.o8)(this.stops),legendOptions:(0,u.o8)(this.legendOptions)})}};(0,n._)([(0,c.e)({pointCloudStretchRenderer:"point-cloud-stretch"})],A.prototype,"type",void 0),(0,n._)([(0,v.MZ)({json:{write:!0},type:String})],A.prototype,"field",void 0),(0,n._)([(0,v.MZ)({type:f.q,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,n._)([(0,v.MZ)({type:D.A.fieldTransformTypeKebabDict.apiValues,json:{type:D.A.fieldTransformTypeKebabDict.jsonValues,read:D.A.fieldTransformTypeKebabDict.read,write:D.A.fieldTransformTypeKebabDict.write}})],A.prototype,"fieldTransformType",void 0),(0,n._)([(0,v.MZ)({type:[M.A],json:{write:!0}})],A.prototype,"stops",void 0),A=x=(0,n._)([(0,E.$)("esri.renderers.PointCloudStretchRenderer")],A);const l=A},87701:(Y,j,e)=>{e.d(j,{A:()=>t});var l,n=e(8189),u=e(77806),v=e(85211),c=(e(3248),e(35150),e(15463)),E=e(76576),D=e(63115),f=e(26768),M=e(68677),x=e(71065),A=e(55739);let s=l=class extends x.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new l({description:this.description,label:this.label,values:(0,u.o8)(this.values),color:(0,u.o8)(this.color)})}};(0,n._)([(0,v.MZ)({type:String,json:{write:!0}})],s.prototype,"description",void 0),(0,n._)([(0,v.MZ)({type:String,json:{write:!0}})],s.prototype,"label",void 0),(0,n._)([(0,v.MZ)({type:[String],json:{write:!0}})],s.prototype,"values",void 0),(0,n._)([(0,v.MZ)({type:M.A,json:{type:[A.jz],write:!0}})],s.prototype,"color",void 0),s=l=(0,n._)([(0,E.$)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],s);const y=s;var d;let i=d=class extends D.A{constructor(a){super(a),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new d({...this.cloneProperties(),field:(0,u.o8)(this.field),fieldTransformType:(0,u.o8)(this.fieldTransformType),colorUniqueValueInfos:(0,u.o8)(this.colorUniqueValueInfos),legendOptions:(0,u.o8)(this.legendOptions)})}};(0,n._)([(0,c.e)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],i.prototype,"type",void 0),(0,n._)([(0,v.MZ)({json:{write:!0},type:String})],i.prototype,"field",void 0),(0,n._)([(0,v.MZ)({type:D.A.fieldTransformTypeKebabDict.apiValues,json:{type:D.A.fieldTransformTypeKebabDict.jsonValues,read:D.A.fieldTransformTypeKebabDict.read,write:D.A.fieldTransformTypeKebabDict.write}})],i.prototype,"fieldTransformType",void 0),(0,n._)([(0,v.MZ)({type:[y],json:{write:!0}})],i.prototype,"colorUniqueValueInfos",void 0),(0,n._)([(0,v.MZ)({type:f.q,json:{write:!0}})],i.prototype,"legendOptions",void 0),i=d=(0,n._)([(0,E.$)("esri.renderers.PointCloudUniqueValueRenderer")],i);const t=i},56386:(Y,j,e)=>{e.d(j,{A:()=>y});var n=e(8189),v=(e(21152),e(71065)),L=e(85211),D=(e(3248),e(35150),e(40707),e(17221)),f=e(76576),M=e(50305),x=e(96073),A=e(92323),l=e(93615);let s=class extends v.oY{constructor(d){super(d),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(d,i){return new A.A({globalId:i.fromGlobalId,networkSourceId:i.fromNetworkSourceId,terminalId:i.fromTerminalId})}writeFromNetworkElement(d,i){d&&(i.fromGlobalId=d.globalId,i.fromNetworkSourceId=d.networkSourceId,i.fromTerminalId=d.terminalId)}readToNetworkElement(d,i){return new A.A({globalId:i.toGlobalId,networkSourceId:i.toNetworkSourceId,terminalId:i.toTerminalId})}writeToNetworkElement(d,i){d&&(i.toGlobalId=d.globalId,i.toNetworkSourceId=d.networkSourceId,i.toTerminalId=d.terminalId)}};(0,n._)([(0,L.MZ)({type:String,json:{write:!0}})],s.prototype,"globalId",void 0),(0,n._)([(0,L.MZ)({type:x.XZ.apiValues,json:{type:x.XZ.jsonValues,read:x.XZ.read,write:x.XZ.write}})],s.prototype,"associationType",void 0),(0,n._)([(0,L.MZ)({type:A.A,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],s.prototype,"fromNetworkElement",void 0),(0,n._)([(0,D.w)("fromNetworkElement")],s.prototype,"readFromNetworkElement",null),(0,n._)([(0,M.K)("fromNetworkElement")],s.prototype,"writeFromNetworkElement",null),(0,n._)([(0,L.MZ)({type:A.A,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],s.prototype,"toNetworkElement",void 0),(0,n._)([(0,D.w)("toNetworkElement")],s.prototype,"readToNetworkElement",null),(0,n._)([(0,M.K)("toNetworkElement")],s.prototype,"writeToNetworkElement",null),(0,n._)([(0,L.MZ)({type:l.A,json:{write:!0}})],s.prototype,"geometry",void 0),(0,n._)([(0,L.MZ)({type:String,json:{write:!0}})],s.prototype,"errorMessage",void 0),(0,n._)([(0,L.MZ)({type:Number,json:{write:!0}})],s.prototype,"percentAlong",void 0),(0,n._)([(0,L.MZ)({type:Number,json:{write:!0}})],s.prototype,"errorCode",void 0),(0,n._)([(0,L.MZ)({type:Boolean,json:{write:!0}})],s.prototype,"isContentVisible",void 0),(0,n._)([(0,L.MZ)({type:Number,json:{write:!0}})],s.prototype,"status",void 0),s=(0,n._)([(0,f.$)("esri.rest.networks.support.Association")],s);const y=s},45797:(Y,j,e)=>{e.d(j,{$K:()=>y,KW:()=>l,Yb:()=>x,xs:()=>i});var n=e(10467),u=e(89563),v=e(45272),L=e(61320),p=e(77098),c=e(58701),E=e(1832),D=e(98789);const f="Layer does not support extent calculation.";function M(a,_){const h=a.geometry,O=a.toJSON(),g=O;if(null!=h&&(g.geometry=JSON.stringify(h),g.geometryType=(0,L.$B)(h),g.inSR=(0,c.YX)(h.spatialReference)),O.topFilter?.groupByFields&&(g.topFilter.groupByFields=O.topFilter.groupByFields.join(",")),O.topFilter?.orderByFields&&(g.topFilter.orderByFields=O.topFilter.orderByFields.join(",")),O.topFilter&&(g.topFilter=JSON.stringify(g.topFilter)),O.objectIds&&(g.objectIds=O.objectIds.join(",")),O.orderByFields&&(g.orderByFields=O.orderByFields.join(",")),O.outFields&&!(_?.returnCountOnly||_?.returnExtentOnly||_?.returnIdsOnly)?g.outFields=O.outFields.includes("*")?"*":O.outFields.join(","):delete g.outFields,O.outSR?g.outSR=(0,c.YX)(O.outSR):h&&O.returnGeometry&&(g.outSR=g.inSR),O.returnGeometry&&delete O.returnGeometry,O.timeExtent){const S=O.timeExtent,{start:b,end:R}=S;null==b&&null==R||(g.time=b===R?b:`${b??"null"},${R??"null"}`),delete O.timeExtent}return g}function x(a,_,h,O){return A.apply(this,arguments)}function A(){return(A=(0,n.A)(function*(a,_,h,O){const g=yield t(a,_,"json",O);return(0,D.q)(_,h,g.data),g})).apply(this,arguments)}function l(a,_,h){return s.apply(this,arguments)}function s(){return(s=(0,n.A)(function*(a,_,h){return null!=_.timeExtent&&_.timeExtent.isEmpty?{data:{objectIds:[]}}:t(a,_,"json",h,{returnIdsOnly:!0})})).apply(this,arguments)}function y(a,_,h){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(function*(a,_,h){return null!=_.timeExtent&&_.timeExtent.isEmpty?{data:{count:0,extent:null}}:t(a,_,"json",h,{returnExtentOnly:!0,returnCountOnly:!0}).then(O=>{const g=O.data;if(g.hasOwnProperty("extent"))return O;if(g.features)throw new Error(f);if(g.hasOwnProperty("count"))throw new Error(f);return O})})).apply(this,arguments)}function i(a,_,h){return null!=_.timeExtent&&_.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):t(a,_,"json",h,{returnIdsOnly:!0,returnCountOnly:!0})}function t(a,_,h,O={},g={}){const S="string"==typeof a?(0,v.An)(a):a,b=_.geometry?[_.geometry]:[];return O.responseType="json",(0,p.el)(b,null,O).then(R=>{const I=R?.[0];null!=I&&((_=_.clone()).geometry=I);const C=(0,E.z)({...S.query,f:h,...g,...M(_,g)});return(0,u.A)((0,v.fj)(S.path,"queryTopFeatures"),{...O,query:{...C,...O.query}})})}},96797:(Y,j,e)=>{e.d(j,{D:()=>v});var n=e(10467),u=e(89563);function v(p,c){return L.apply(this,arguments)}function L(){return(L=(0,n.A)(function*(p,c){const{data:E}=yield(0,u.A)(p,{responseType:"image",...c});return E})).apply(this,arguments)}},73747:(Y,j,e)=>{e.d(j,{A:()=>L});var n=e(10467),u=e(98894),v=e(48116);class L{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(c){return this._resourceMap.get(c)??null}fetchResource(c,E){var D=this;return(0,n.A)(function*(){const f=D._resourceMap.get(c);if(f)return{width:f.width,height:f.height};let M=D._inFlightResourceMap.get(c);return M?M.then(x=>({width:x.width,height:x.height})):(M=(0,v.M5)(c,E),D._inFlightResourceMap.set(c,M),M.then(x=>(D._inFlightResourceMap.delete(c),D._resourceMap.set(c,x),{width:x.width,height:x.height}),()=>({width:0,height:0})))})()}deleteResource(c){this._inFlightResourceMap.delete(c),this._resourceMap.delete(c)}loadFont(c){return(0,u.Al)(c)}}},28685:(Y,j,e)=>{e.d(j,{c:()=>p,k:()=>c});var n=e(86468),u=e(69287),v=e(84289);const L=E=>"vertical"===E||"horizontal"===E||"cross"===E||"esriSFSCross"===E||"esriSFSVertical"===E||"esriSFSHorizontal"===E;function p(E,D,f){const M=D.style,x=(0,u.yR)(Math.ceil(f)),A=L(M)?8*x:16*x,l=2*x;E.width=A,E.height=A;const s=E.getContext("2d");s.strokeStyle="#FFFFFF",s.lineWidth=x,s.beginPath(),"vertical"!==M&&"cross"!==M&&"esriSFSCross"!==M&&"esriSFSVertical"!==M||(s.moveTo(A/2,-l),s.lineTo(A/2,A+l)),"horizontal"!==M&&"cross"!==M&&"esriSFSCross"!==M&&"esriSFSHorizontal"!==M||(s.moveTo(-l,A/2),s.lineTo(A+l,A/2)),"backward-diagonal"!==M&&"diagonal-cross"!==M&&"esriSFSDiagonalCross"!==M&&"esriSFSBackwardDiagonal"!==M||(s.moveTo(-l,-l),s.lineTo(A+l,A+l),s.moveTo(A-l,-l),s.lineTo(A+l,l),s.moveTo(-l,A-l),s.lineTo(l,A+l)),"forward-diagonal"!==M&&"diagonal-cross"!==M&&"esriSFSForwardDiagonal"!==M&&"esriSFSDiagonalCross"!==M||(s.moveTo(A+l,-l),s.lineTo(-l,A+l),s.moveTo(l,-l),s.lineTo(-l,l),s.moveTo(A+l,A-l),s.lineTo(A-l,A+l)),s.stroke();const y=s.getImageData(0,0,E.width,E.height),d=new Uint8Array(y.data);let i;for(let t=0;t<d.length;t+=4)i=d[t+3]/255,d[t]=d[t]*i,d[t+1]=d[t+1]*i,d[t+2]=d[t+2]*i;return[d,E.width,E.height,x]}function c(E,D){const f="Butt"===D,M="Square"===D,x=!f&&!M;E.length%2==1&&(E=[...E,...E]);const A=v.$,l=2*A;let s=0;for(const S of E)s+=S;const y=Math.round(s*A),d=new Float32Array(y*l),i=.5*A;let t=0,a=0,_=.5,h=!0;for(const S of E){for(t=a,a+=S*A;_<=a;){let b=.5;for(;b<l;){const R=(b-.5)*y+_-.5,I=x?(b-A)*(b-A):Math.abs(b-A);d[R]=h?f?Math.max(Math.max(t+i-_,I),Math.max(_-a+i,I)):I:x?Math.min((_-t)*(_-t)+I,(_-a)*(_-a)+I):M?Math.min(Math.max(_-t,I),Math.max(a-_,I)):Math.min(Math.max(_-t+i,I),Math.max(a+i-_,I)),b++}_++}h=!h}const O=d.length,g=new Uint8Array(4*O);for(let S=0;S<O;++S){const b=(x?Math.sqrt(d[S]):d[S])/A;(0,n.U)(b,g,4*S)}return[g,y,l]}},58964:(Y,j,e)=>{e.r(j),e.d(j,{fetchSymbolFromStyle:()=>l,getStyleItemFromStyle:()=>A,resolveWebStyleSymbol:()=>x});var n=e(47280),u=e(7201),v=e(5922),L=e(45272),p=e(73874),c=e(88135),E=e(80841),D=e(7295),f=e(90288),M=e(76124);function x(y,d,i,t){const a=y.name;return null==a?Promise.reject(new v.A("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):y.styleName&&"Esri2DPointSymbolsStyle"===y.styleName?function s(y,d,i){const t=f.jg.replaceAll(/\{SymbolName\}/gi,y),a=null!=d.portal?d.portal:p.A.getDefault();return(0,f.yA)(t,i).then(_=>{const h=(0,f.bo)(_.data);return(0,E.rS)(h,{portal:a,url:(0,L.An)((0,L.nM)(t)),origin:"portal-item"})})}(a,d,t):(0,f.cF)(y,d,t).then(_=>l(_,a,d,i,f.o5,t))}function A(y,d){return d.items.find(i=>i.name===y)}function l(y,d,i,t,a,_){const h=null!=i?.portal?i.portal:p.A.getDefault(),O={portal:h,url:(0,L.An)(y.baseUrl),origin:"portal-item"},g=A(d,y.data);if(!g)return Promise.reject(new v.A("symbolstyleutils:symbol-name-not-found",`The symbol name '${d}' could not be found`,{symbolName:d}));let S=(0,c.f)(a(g,t),O),b=g.thumbnail?.href??null;const R=g.thumbnail?.imageData;(0,u.b5)()&&(S=(0,u.EM)(S)??"",b=(0,u.EM)(b));const I={portal:h,url:(0,L.An)((0,L.nM)(S)),origin:"portal-item"};return(0,f.yA)(S,_).then(C=>{const w="cimRef"===t?(0,f.bo)(C.data):C.data,o=(0,E.rS)(w,I);if(o&&(0,n.wk)(o)){if(b){const m=(0,c.f)(b,O);o.thumbnail=new M.V({url:m})}else R&&(o.thumbnail=new M.V({url:`data:image/png;base64,${R}`}));y.styleUrl?o.styleOrigin=new D.A({portal:i.portal,styleUrl:y.styleUrl,name:d}):y.styleName&&(o.styleOrigin=new D.A({portal:i.portal,styleName:y.styleName,name:d}))}return o})}},72663:(Y,j,e)=>{e.d(j,{l:()=>L});var n=e(12173),u=e(69473),v=e(54382);class L extends v.A{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(c){super.beforeRender(c),this._manageFade()}prepareRenderPasses(c){const E=c.registerRenderPass({name:"bitmap",brushes:[n.d.bitmap],target:()=>this.children,drawPhase:u.S5.MAP});return[...super.prepareRenderPasses(c),E]}_manageFade(){this.children.reduce((c,E)=>c+(E.inFadeTransition?1:0),0)>=2?(this.children.forEach(c=>c.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(c=>c.blendFunction="standard"),this._hasCrossfade=!1)}}},20788:(Y,j,e)=>{e.d(j,{A:()=>v});var u,L,n=e(91766);(L=u||(u={}))[L.moveTo=1]="moveTo",L[L.lineTo=2]="lineTo",L[L.close=7]="close";class v{constructor(p,c,E=0){this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=E;const D=c.keys,f=c.values,M=p.asUnsafe();for(;M.next();)switch(M.tag()){case 1:this.id=M.getUInt64();break;case 2:{const x=M.getMessage().asUnsafe(),A=this.values;for(;!x.empty();){const l=x.getUInt32(),s=x.getUInt32();A[D[l]]=f[s]}x.release();break}case 3:this.type=M.getUInt32();break;case 4:this._pbfGeometry=M.getMessage();break;default:M.skip()}}getGeometry(p){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const c=this._pbfGeometry.asUnsafe();let E,D;this._pbfGeometry=null,p?p.reset(this.type):E=[];let f,M=u.moveTo,x=0,A=0,l=0;for(;!c.empty();){if(0===x){const s=c.getUInt32();M=7&s,x=s>>3}switch(x--,M){case u.moveTo:A+=c.getSInt32(),l+=c.getSInt32(),p?p.moveTo(A,l):E&&(D&&E.push(D),D=[],D.push(new n.bR(A,l)));break;case u.lineTo:A+=c.getSInt32(),l+=c.getSInt32(),p?p.lineTo(A,l):D&&D.push(new n.bR(A,l));break;case u.close:p?p.close():D&&!D[0].equals(A,l)&&D.push(D[0].clone());break;default:throw c.release(),new Error("Invalid path operation")}}return p?f=p.result():E&&(D&&E.push(D),f=E),c.release(),this._geometry=f,f}}},97944:(Y,j,e)=>{e.d(j,{A:()=>n});class n{constructor(v){this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=v.clone();const L=v.asUnsafe();for(;L.next();)switch(L.tag()){case 1:this.name=L.getString();break;case 3:this.keys.push(L.getString());break;case 4:this.values.push(L.processMessage(n._parseValue));break;case 5:this.extent=L.getUInt32();break;default:L.skip()}}getData(){return this._pbfLayer}static _parseValue(v){for(;v.next();)switch(v.tag()){case 1:return v.getString();case 2:return v.getFloat();case 3:return v.getDouble();case 4:return v.getInt64();case 5:return v.getUInt64();case 6:return v.getSInt64();case 7:return v.getBool();default:v.skip()}return null}}},9096:(Y,j,e)=>{e.d(j,{A:()=>x});var n=e(31610),u=e(12273),v=e(88532),L=e(12225),p=e(77098),c=e(58701),E=e(6126),D=e(12173),f=e(69473),M=e(54382);class x extends M.A{constructor(){super(...arguments),this._viewStateId=-1,this._dvsMat3=(0,u.vt)()}get dvsMat3(){return this._dvsMat3}beforeRender(l){this._updateMatrices(l),this._updateOverlays(l,this.children);for(const s of this.children)s.beforeRender(l)}prepareRenderPasses(l){const s=l.registerRenderPass({name:"overlay",brushes:[D.d.overlay],target:()=>this.children,drawPhase:f.S5.MAP});return[...super.prepareRenderPasses(l),s]}_updateMatrices(l){const{state:s}=l,{id:y,size:d,pixelRatio:i,resolution:t,rotation:a,viewpoint:_,displayMat3:h}=s;if(this._viewStateId===y)return;const O=Math.PI/180*a,g=i*d[0],S=i*d[1];this._localOrigin=_.targetGeometry.clone();const{x:b,y:R}=this._localOrigin,I=(0,p.mT)(b,s.spatialReference);this._localOrigin.x=I,this._localOrigin.y=R;const C=t*g,w=t*S,o=(0,n.D_)(this._dvsMat3);(0,n.lw)(o,o,h),(0,n.Tl)(o,o,(0,v.fA)(g/2,S/2)),(0,n.hs)(o,o,(0,L.fA)(g/C,-S/w,1)),(0,n.e$)(o,o,-O),this._viewStateId=y}_updateOverlays(l,s){const{state:y}=l,{rotation:d,spatialReference:i,worldScreenWidth:t,size:a,viewpoint:_}=y,h=this._localOrigin;let O,g=0;const S=(0,c.Vp)(i);if(S&&i.isWrappable){const b=a[0],R=a[1],I=180/Math.PI*d,C=Math.abs(Math.cos(I)),w=Math.abs(Math.sin(I)),o=Math.round(b*C+R*w),[m,T]=S.valid,P=(0,E.FT)(i),{x:U,y:K}=_.targetGeometry,J=[0,0];y.toScreen(J,[U,K]);const H=[0,0];let V;V=o>t?.5*t:.5*o;const F=Math.floor((U+.5*P)/P),$=m+F*P,ee=T+F*P,B=[J[0]+V,0];y.toMap(H,B),H[0]>ee&&(g=P),B[0]=J[0]-V,y.toMap(H,B),H[0]<$&&(g=-P),O={worldWidth:P,xBounds:[m,T]}}for(const b of s)b.updateDrawCoords(h,g,i,O)}}},70418:(Y,j,e)=>{e.d(j,{ZH:()=>l});var n=e(17715),u=e(82595),L=(e(87567),e(65374)),p=e(78698);function M(t,a){const{width:_,height:h,getFrame:O}=t,g=t.frameDurations.slice(),S=g.pop();return g.push((0,u.l5)(S+a)),{frameCount:t.frameCount,duration:t.duration+a,frameDurations:g,getFrame:O,width:_,height:h}}class x{constructor(a,_,h,O){this._animation=a,this._repeatType=h,this._onFrameData=O,this._direction=1,this._currentFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let g=0;for(;_>g;)g+=this.timeToFrame,this.nextFrame();const S=this._animation.getFrame(this._currentFrame);this._onFrameData(S)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case L.fu.None:this._currentFrame-=this._direction;break;case L.fu.Loop:this._currentFrame=0;break;case L.fu.Oscillate:this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case L.fu.None:this._currentFrame-=this._direction;break;case L.fu.Loop:this._currentFrame=this._animation.frameDurations.length-1;break;case L.fu.Oscillate:this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame];const a=this._animation.getFrame(this._currentFrame);this._onFrameData(a)}}function l(t,a,_,h){const O=null==a.playAnimation||a.playAnimation,g=function A(t,a,_,h){let O,{repeatType:g}=a;if(null==g&&(g=L.fu.Loop),!0===a.reverseAnimation&&(t=function E(t){const{width:a,height:_}=t,h=t.frameDurations.reverse();return{frameCount:t.frameCount,duration:t.duration,frameDurations:h,getFrame:g=>t.getFrame(t.frameDurations.length-1-g),width:a,height:_}}(t)),null!=a.duration&&(t=function D(t,a){const{width:_,height:h,getFrame:O}=t,g=a/t.duration,S=t.frameDurations.map(b=>(0,u.l5)(b*g));return{frameCount:t.frameCount,duration:t.duration,frameDurations:S,getFrame:O,width:_,height:h}}(t,(0,u.l5)(1e3*a.duration))),null!=a.repeatDelay){const S=1e3*a.repeatDelay;g===L.fu.Loop?t=M(t,(0,u.l5)(S)):g===L.fu.Oscillate&&(t=function f(t,a){const{width:_,height:h,getFrame:O}=t,g=t.frameDurations.slice(),S=g.shift();return g.unshift((0,u.l5)(S+a)),{frameCount:t.frameCount,duration:t.duration+a,frameDurations:g,getFrame:O,width:_,height:h}}(M(t,(0,u.l5)(S/2)),(0,u.l5)(S/2)))}if(null!=a.startTimeOffset)O=(0,u.l5)(1e3*a.startTimeOffset);else if(null!=a.randomizeStartTime){const R=(0,p.J)(_,null!=a.randomizeStartSeed?a.randomizeStartSeed:82749913);O=(0,u.l5)(R*function c(t){return(0,u.l5)(t.frameDurations.reduce((a,_)=>a+_,0))}(t))}else O=(0,u.l5)(0);return new x(t,O,g,h)}(t,a,_,h);let S,b=g.timeToFrame;return function R(){S=O?setTimeout(()=>{g.nextFrame(),b=g.timeToFrame,R()},b):void 0}(),(0,n.hA)(()=>O&&clearTimeout(S))}},68418:(Y,j,e)=>{e.d(j,{A:()=>b});var n=e(10467),u=e(8189),v=e(98877),p=(e(3248),e(56492)),c=e(85211),f=(e(35150),e(40707),e(76576)),M=e(51995),x=e(58701),A=e(11333);const l=Math.PI/180;var i=e(76582),t=e(54290),a=e(74847);const _=(0,M.vt)(),h=[0,0],O=new a.A(0,0,0,0);let S=class extends v.A{constructor(R){var I;super(R),I=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,p.sg)(function(){var C=(0,n.A)(function*(w,o){if((0,p.Te)(o),!w.stationary||I.destroyed)return;const m=w.state,T=(0,x.Vp)(m.spatialReference),P=I.hidpi?w.pixelRatio:1,U=I.imageNormalizationSupported&&m.worldScreenWidth&&m.worldScreenWidth<m.size[0],K=I.imageMaxWidth??0,G=I.imageMaxHeight??0;U?(h[0]=m.worldScreenWidth,h[1]=m.size[1]):I.imageRotationSupported?(h[0]=m.size[0],h[1]=m.size[1]):function y(R,I){const C=function s(R){return R*l}(I.rotation),w=Math.abs(Math.cos(C)),o=Math.abs(Math.sin(C)),[m,T]=I.size;return R[0]=Math.round(T*o+m*w),R[1]=Math.round(T*w+m*o),R}(h,m);const J=Math.floor(h[0]*P)>K||Math.floor(h[1]*P)>G,V=!I.imageNormalizationSupported&&T&&(m.extent.xmin<T.valid[0]||m.extent.xmax>T.valid[1]),F=!J&&!V,$=I.imageRotationSupported?m.rotation:0,ee=I.container.children.slice();if(F)I._imagePromise=I._singleExport(m,h,U?m.paddedViewState.center:m.center,m.resolution,$,P,o);else{let B=Math.min(K,G);V&&(B=Math.min(m.worldScreenWidth,B)),I._imagePromise=I._tiledExport(m,B,P,o)}try{const B=(yield I._imagePromise)??[];(0,p.Te)(o);const N=[];if(I._imagePromise=null,I.destroyed)return;I.bitmaps=B;for(const z of ee)B.includes(z)||N.push(z.fadeOut().then(()=>{z.remove(),z.destroy()}));for(const z of B)N.push(z.fadeIn());yield Promise.all(N)}catch(B){I._imagePromise=null,(0,p.QP)(B)}});return function(w,o){return C.apply(this,arguments)}}(),5e3),this.updateExports=(0,p.sg)(function(){var C=(0,n.A)(function*(w){const o=[];for(const m of I.container.children){if(!m.visible||!m.stage)return;o.push(w(m).then(()=>{m.invalidateTexture(),m.requestRender()}))}I._imagePromise=(0,p.Lx)(o).then(()=>I._imagePromise=null),yield I._imagePromise});return function(w){return C.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(R=>R.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(R,I,C,w,o,m){var T=this;return(0,n.A)(function*(){const P=yield T.fetchSource(R,Math.floor(I*o),Math.floor(C*o),{rotation:w,pixelRatio:o,signal:m});(0,p.Te)(m);const U=new i.mb(null,!0);return U.x=R.xmin,U.y=R.ymax,U.resolution=R.width/I,U.rotation=w,U.pixelRatio=o,U.opacity=0,T.container.addChild(U),yield U.setSourceAsync(P,m),(0,p.Te)(m),U})()}_singleExport(R,I,C,w,o,m,T){var P=this;return(0,n.A)(function*(){!function d(R,I,C,w){const[o,m]=I,[T,P]=w,U=.5*C;R[0]=o-U*T,R[1]=m-U*P,R[2]=o+U*T,R[3]=m+U*P}(_,C,w,I);const U=(0,M.w1)(_,R.spatialReference);return[yield P._export(U,I[0],I[1],o,m,T)]})()}_tiledExport(R,I,C,w){const o=A.A.create({size:I,spatialReference:R.spatialReference,scales:[R.scale]}),m=new t.A(o),T=m.getTileCoverage(R);if(!T)return null;const P=[];return T.forEach((U,K,G,J)=>{O.set(U,K,G,0),m.getTileBounds(_,O);const H=(0,M.w1)(_,R.spatialReference);P.push(this._export(H,I,I,0,C,w).then(V=>(0!==J&&(O.set(U,K,G,J),m.getTileBounds(_,O),V.x=_[0],V.y=_[3]),V)))}),Promise.all(P)}};(0,u._)([(0,c.MZ)()],S.prototype,"_imagePromise",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"bitmaps",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"container",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"fetchSource",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"hidpi",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"imageMaxWidth",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"imageMaxHeight",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"imageRotationSupported",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"imageNormalizationSupported",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"requestUpdate",void 0),(0,u._)([(0,c.MZ)()],S.prototype,"updating",null),S=(0,u._)([(0,f.$)("esri.views.2d.layers.support.ExportStrategy")],S);const b=S},31071:(Y,j,e)=>{e.d(j,{EO:()=>s,OI:()=>A,Pp:()=>f,Qg:()=>M,VC:()=>x,b4:()=>p,hB:()=>y,hE:()=>E,kc:()=>c,xV:()=>D,z:()=>l});var n=e(45475),u=e(50915),v=e(26136),L=e(4931);function p(i,t,a="nearest",_=!1){const h=!(_&&"u8"===t.pixelType),O=h?u.ld.FLOAT:u.ld.UNSIGNED_BYTE,g=null==t.pixels||0===t.pixels.length?null:h?t.getAsRGBAFloat():t.getAsRGBA(),S=i.capabilities.textureFloatLinear,b=new L.R;return b.width=t.width,b.height=t.height,b.internalFormat=h?u.H0.RGBA32F:u.Ab.RGBA,b.samplingMode=!S||"bilinear"!==a&&"cubic"!==a?u.Cj.NEAREST:u.Cj.LINEAR,b.dataType=O,b.wrapMode=u.pF.CLAMP_TO_EDGE,new v.g(i,b,g)}function c(i,t){const{spacing:a,offsets:_,coefficients:h,size:[O,g]}=t,S=a[0]>1,b=new L.R;b.width=S?4*O:O,b.height=g,b.internalFormat=u.H0.RGBA32F,b.dataType=u.ld.FLOAT,b.samplingMode=u.Cj.NEAREST,b.wrapMode=u.pF.CLAMP_TO_EDGE;const R=new Float32Array(S?O*g*16:2*_.length);if(S&&null!=h)for(let I=0,C=0;I<h.length;I++)R[C++]=h[I],I%3==2&&(R[C++]=1);else for(let I=0;I<g;I++)for(let C=0;C<O;C++){const w=4*(I*O+C),o=2*(C*g+I);R[w]=_[o],R[w+1]=_[o+1],R[w+3]=-1===_[o]?0:1}return new v.g(i,b,R)}function E(i,t){const a=new L.R;return a.internalFormat=u.Ab.RGBA,a.width=t.length/4,a.height=1,a.samplingMode=u.Cj.NEAREST,a.wrapMode=u.pF.CLAMP_TO_EDGE,new v.g(i,a,t)}function D(i,t,a,_=1,h=!0){return{u_flipY:h,u_applyTransform:!!i,u_opacity:_,u_transformSpacing:i?i.spacing:n.uY,u_transformGridSize:i?i.size:n.uY,u_targetImageSize:t,u_srcImageSize:a}}function f(i,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:i?i.length/4-1:0}}function M(i,t){return{u_scale:i,u_offset:t}}function x(i){return{u_bandCount:i.bandCount,u_minOutput:i.outMin,u_maxOutput:i.outMax,u_minCutOff:i.minCutOff,u_maxCutOff:i.maxCutOff,u_factor:i.factor,u_useGamma:i.useGamma,u_gamma:i.gamma,u_gammaCorrection:i.gammaCorrection}}function A(i){return{u_hillshadeType:i.hillshadeType,u_sinZcosAs:i.sinZcosAs,u_sinZsinAs:i.sinZsinAs,u_cosZs:i.cosZs,u_weights:i.weights,u_factor:i.factor,u_minValue:i.minValue,u_maxValue:i.maxValue}}function l(i,t){const a=i.gl,_=t.glName,h=new Map;if(null==_)return h;const O=a.getProgramParameter(_,a.ACTIVE_UNIFORMS);let g;for(let S=0;S<O;S++)g=a.getActiveUniform(_,S),g&&h.set(g.name,{location:a.getUniformLocation(_,g.name),info:g});return h}function s(i,t,a){Object.keys(a).forEach(_=>{const h=t.get(_)||t.get(_+"[0]");h&&function d(i,t,a,_){if(null===_||null==a)return!1;const{info:h}=_;switch(h.type){case u.xV.FLOAT:h.size>1?i.setUniform1fv(t,a):i.setUniform1f(t,a);break;case u.xV.FLOAT_VEC2:i.setUniform2fv(t,a);break;case u.xV.FLOAT_VEC3:i.setUniform3fv(t,a);break;case u.xV.FLOAT_VEC4:i.setUniform4fv(t,a);break;case u.xV.FLOAT_MAT3:i.setUniformMatrix3fv(t,a);break;case u.xV.FLOAT_MAT4:i.setUniformMatrix4fv(t,a);break;case u.xV.INT:h.size>1?i.setUniform1iv(t,a):i.setUniform1i(t,a);break;case u.xV.BOOL:i.setUniform1i(t,a?1:0);break;case u.xV.INT_VEC2:case u.xV.BOOL_VEC2:i.setUniform2iv(t,a);break;case u.xV.INT_VEC3:case u.xV.BOOL_VEC3:i.setUniform3iv(t,a);break;case u.xV.INT_VEC4:case u.xV.BOOL_VEC4:i.setUniform4iv(t,a);break;default:return!1}}(i,_,a[_],h)})}function y(i,t,a,_){a.length===_.length&&(_.some(h=>null==h)||a.some(h=>null==h)||a.forEach((h,O)=>{t.setUniform1i(h,O),i.bindTexture(_[O],O)}))}},35274:(Y,j,e)=>{e.d(j,{C:()=>n,I:()=>L,M:()=>v,S:()=>u,a:()=>p});const n={wrapper:"wrapper",wrapperBordered:"wrapper--bordered",container:"container",indent:"indent",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",contentBottom:"content-bottom",actionsEnd:"actions-end",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",openContainer:"open-container",dragContainer:"drag-container"},u={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},v=0,L={selectedMultiple:"check-square-f",selectedSingle:"bullet-point-large",unselectedMultiple:"square",unselectedSingle:"bullet-point-large",closedLTR:"chevron-right",closedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},p="data-test-active"},69182:(Y,j,e)=>{e.d(j,{T:()=>A,d:()=>l});var n=e(10467),u=e(58560),v=e(40789),L=e(51594),p=e(9089),c=e(82887),E=e(32597),D=e(96700);const f_contentCell="content-cell",f_numberCell="number-cell",f_footerCell="footer-cell",f_selectionCell="selection-cell",f_selectedCell="selected-cell",f_lastCell="last-cell",f_staticCell="static-cell",A=(0,u.w$)(class extends u.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.updateScreenReaderContentsText=()=>{this.contentsText=this.el.textContent},this.onContainerBlur=()=>{this.focused=!1},this.onContainerFocus=()=>{this.focused=!0},this.alignment="start",this.colSpan=void 0,this.rowSpan=void 0,this.disabled=void 0,this.interactionMode="interactive",this.lastCell=void 0,this.numberCell=void 0,this.parentRowIsSelected=void 0,this.parentRowAlignment="start",this.parentRowPositionLocalized=void 0,this.parentRowType=void 0,this.positionInRow=void 0,this.readCellContentsToAT=void 0,this.scale="m",this.selectionCell=void 0,this.messages=void 0,this.messageOverrides=void 0,this.contentsText="",this.defaultMessages=void 0,this.focused=!1,this.selectionText="",this.effectiveLocale=""}onSelectedChange(){this.updateScreenReaderSelectionText()}onMessagesChange(){}effectiveLocaleChange(){(0,L.u)(this,this.effectiveLocale)}componentWillLoad(){var y=this;return(0,n.A)(function*(){(0,v.s)(y),yield(0,L.s)(y),y.updateScreenReaderContentsText(),y.updateScreenReaderSelectionText()})()}componentDidLoad(){(0,v.a)(this)}connectedCallback(){(0,c.c)(this),(0,L.c)(this),(0,p.c)(this)}componentDidRender(){(0,p.u)(this)}disconnectedCallback(){(0,c.d)(this),(0,L.d)(this),(0,p.d)(this)}setFocus(){var y=this;return(0,n.A)(function*(){yield(0,v.c)(y),y.containerEl.focus()})()}updateScreenReaderSelectionText(){this.selectionText=this.parentRowIsSelected?`${this.messages?.row} ${this.parentRowPositionLocalized} ${this.messages?.selected} ${this.messages?.keyboardDeselect}`:`${this.messages?.row} ${this.parentRowPositionLocalized} ${this.messages?.unselected} ${this.messages?.keyboardSelect}`}render(){const y=(0,E.a)(this.el),d=this.disabled||"static"===this.interactionMode&&(!this.selectionCell||this.selectionCell&&"foot"===this.parentRowType);return(0,u.h)(u.xr,{key:"2c8bd5fb8909c57b46499b5fe8a525cdc46bb3c6"},(0,u.h)(p.I,{key:"1a7e4d12f5304274f9085e0f0db4b12ba41d51ed",disabled:this.disabled},(0,u.h)("td",{key:"9a5868a78f21da3c9c0d6be7ecefd28c5e40e5c5","aria-disabled":this.disabled,class:{[f_footerCell]:"foot"===this.parentRowType,[f_contentCell]:!this.numberCell&&!this.selectionCell,[f_numberCell]:this.numberCell,[f_selectionCell]:this.selectionCell,[f_selectedCell]:this.parentRowIsSelected,[f_lastCell]:this.lastCell&&(!this.rowSpan||this.colSpan&&!!this.rowSpan),[D.C.rtl]:"rtl"===y,[f_staticCell]:d,[this.parentRowAlignment]:"start"===this.parentRowAlignment||"end"===this.parentRowAlignment},colSpan:this.colSpan,onBlur:this.onContainerBlur,onFocus:this.onContainerFocus,role:"interactive"===this.interactionMode?"gridcell":"cell",rowSpan:this.rowSpan,tabIndex:d?-1:0,ref:i=>this.containerEl=i},(this.selectionCell||this.readCellContentsToAT)&&(0,u.h)("span",{key:"09fb148bff0939488862db0f995643ecd96a0e73","aria-hidden":!0,"aria-live":this.focused?"polite":"off",class:"assistive-text"},this.selectionCell&&this.selectionText,this.readCellContentsToAT&&!this.selectionCell&&this.contentsText),(0,u.h)("slot",{key:"0d74a3e77c1655682e59b38054defa9ebfff8714",onSlotchange:this.updateScreenReaderContentsText}))))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{parentRowIsSelected:["onSelectedChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{--calcite-internal-table-cell-background:var(--calcite-table-cell-background, transparent);display:contents}:host([alignment=center]) td:not(.selection-cell):not(.number-cell){text-align:center}:host([alignment=end]) td:not(.selection-cell):not(.number-cell){text-align:end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}td{white-space:normal;text-align:start;vertical-align:middle;color:var(--calcite-color-text-1);background:var(--calcite-internal-table-cell-background);font-size:var(--calcite-internal-table-cell-font-size);border-inline-end:1px solid var(--calcite-color-border-3);padding:var(--calcite-internal-table-cell-padding)}td:not(.static-cell){outline-color:transparent}td:not(.static-cell):focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}td.start.content-cell{vertical-align:top}td.end.content-cell{vertical-align:bottom}td.last-cell{border-inline-end:0}.number-cell{background-color:var(--calcite-color-foreground-2)}.footer-cell{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);border-block-start:1px solid var(--calcite-color-border-3)}.number-cell,.selection-cell{text-align:center;border-inline-end:1px solid var(--calcite-color-border-3);inline-size:2rem;min-inline-size:2rem}.selection-cell{color:var(--calcite-color-text-3);inset-inline-start:2rem}.selection-cell:not(.footer-cell){cursor:pointer}.selected-cell:not(.number-cell):not(.footer-cell){--calcite-internal-table-cell-background:var(--calcite-color-foreground-current)}.selection-cell.selected-cell{box-shadow:inset 0.25rem 0 0 0 var(--calcite-color-brand);color:var(--calcite-color-brand)}.selection-cell.selected-cell calcite-icon{color:var(--calcite-color-brand)}.calcite--rtl.selection-cell.selected-cell{box-shadow:inset -0.25rem 0 0 0 var(--calcite-color-brand)}.selection-cell{vertical-align:middle}.selection-cell ::slotted(calcite-icon){pointer-events:none;margin-block-start:0.25rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}"}},[1,"calcite-table-cell",{alignment:[513],colSpan:[514,"col-span"],rowSpan:[514,"row-span"],disabled:[4],interactionMode:[1,"interaction-mode"],lastCell:[4,"last-cell"],numberCell:[4,"number-cell"],parentRowIsSelected:[4,"parent-row-is-selected"],parentRowAlignment:[1,"parent-row-alignment"],parentRowPositionLocalized:[1,"parent-row-position-localized"],parentRowType:[1,"parent-row-type"],positionInRow:[2,"position-in-row"],readCellContentsToAT:[4,"read-cell-contents-to-a-t"],scale:[1],selectionCell:[4,"selection-cell"],messages:[1040],messageOverrides:[1040],contentsText:[32],defaultMessages:[32],focused:[32],selectionText:[32],effectiveLocale:[32],setFocus:[64]},void 0,{parentRowIsSelected:["onSelectedChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function l(){typeof customElements>"u"||["calcite-table-cell"].forEach(y=>{"calcite-table-cell"===y&&(customElements.get(y)||customElements.define(y,A))})}l()},11079:(Y,j,e)=>{e.d(j,{a:()=>D,b:()=>p,g:()=>c,u:()=>E});var n=e(58560);const u="calcite-list",v="calcite-list-item-group",L="calcite-list-item";function p(f){return Array.from(f.assignedElements({flatten:!0}).filter(M=>M.matches(u)))}function c(f){const M=f.assignedElements({flatten:!0}),x=M.filter(s=>s?.matches(v)).map(s=>Array.from(s.querySelectorAll(L))).reduce((s,y)=>[...s,...y],[]),A=M.filter(s=>s?.matches(L));return[...M.filter(s=>s?.matches(u)).map(s=>Array.from(s.querySelectorAll(L))).reduce((s,y)=>[...s,...y],[]),...x,...A]}function E(f){f.forEach(M=>{M.setPosition=f.indexOf(M)+1,M.setSize=f.length})}function D(f,M=!1){return n.L2.isBrowser?document.evaluate(M?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",f,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}},27106:(Y,j,e)=>{function n(u,v){this.v=u,this.k=v}e.d(j,{A:()=>n})},19495:(Y,j,e)=>{function n(v){var L,p,c,E=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,c=Symbol.iterator);E--;){if(p&&null!=(L=v[p]))return L.call(v);if(c&&null!=(L=v[c]))return new u(L.call(v));p="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function u(v){function L(p){if(Object(p)!==p)return Promise.reject(new TypeError(p+" is not an object."));var c=p.done;return Promise.resolve(p.value).then(function(E){return{value:E,done:c}})}return(u=function(c){this.s=c,this.n=c.next}).prototype={s:null,n:null,next:function(){return L(this.n.apply(this.s,arguments))},return:function(c){var E=this.s.return;return void 0===E?Promise.resolve({value:c,done:!0}):L(E.apply(this.s,arguments))},throw:function(c){var E=this.s.return;return void 0===E?Promise.reject(c):L(E.apply(this.s,arguments))}},new u(v)}e.d(j,{A:()=>n})},56218:(Y,j,e)=>{e.d(j,{A:()=>u});var n=e(27106);function u(v){return new n.A(v,0)}},56698:(Y,j,e)=>{e.d(j,{A:()=>v});var n=e(27106);function u(L){var p,c;function E(f,M){try{var x=L[f](M),A=x.value,l=A instanceof n.A;Promise.resolve(l?A.v:A).then(function(s){if(l){var y="return"===f?"return":"next";if(!A.k||s.done)return E(y,s);s=L[y](s).value}D(x.done?"return":"normal",s)},function(s){E("throw",s)})}catch(s){D("throw",s)}}function D(f,M){switch(f){case"return":p.resolve({value:M,done:!0});break;case"throw":p.reject(M);break;default:p.resolve({value:M,done:!1})}(p=p.next)?E(p.key,p.arg):c=null}this._invoke=function(f,M){return new Promise(function(x,A){var l={key:f,arg:M,resolve:x,reject:A,next:null};c?c=c.next=l:(p=c=l,E(f,M))})},"function"!=typeof L.return&&(this.return=void 0)}function v(L){return function(){return new u(L.apply(this,arguments))}}u.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},u.prototype.next=function(L){return this._invoke("next",L)},u.prototype.throw=function(L){return this._invoke("throw",L)},u.prototype.return=function(L){return this._invoke("return",L)}}}]);