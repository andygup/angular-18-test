"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[3032,429],{10442:(ot,Z,l)=>{function w(t,s,e){H(t.typedBuffer,s.typedBuffer,e,t.typedBufferStride,s.typedBufferStride)}function H(t,s,e,p=3,T=p){if(t.length/p!==Math.ceil(s.length/T))return t;const v=t.length/p,M=e[0],W=e[1],N=e[2],Y=e[4],J=e[5],nt=e[6],Q=e[8],q=e[9],tt=e[10],h=e[12],n=e[13],_=e[14];let r=0,m=0;for(let c=0;c<v;c++){const A=s[r],x=s[r+1],I=s[r+2];t[m]=M*A+Y*x+Q*I+h,t[m+1]=W*A+J*x+q*I+n,t[m+2]=N*A+nt*x+tt*I+_,r+=T,m+=p}return t}function V(t,s,e){O(t.typedBuffer,s.typedBuffer,e,t.typedBufferStride,s.typedBufferStride)}function O(t,s,e,p=3,T=p){if(t.length/p!==Math.ceil(s.length/T))return;const v=t.length/p,M=e[0],W=e[1],N=e[2],Y=e[3],J=e[4],nt=e[5],Q=e[6],q=e[7],tt=e[8];let h=0,n=0;for(let _=0;_<v;_++){const r=s[h],m=s[h+1],c=s[h+2];t[n]=M*r+Y*m+Q*c,t[n+1]=W*r+J*m+q*c,t[n+2]=N*r+nt*m+tt*c,h+=T,n+=p}}function u(t,s,e){L(t.typedBuffer,s.typedBuffer,e,t.typedBufferStride,s.typedBufferStride)}function L(t,s,e,p=3,T=p){const v=Math.min(t.length/p,s.length/T);let M=0,W=0;for(let N=0;N<v;N++)t[W]=e*s[M],t[W+1]=e*s[M+1],t[W+2]=e*s[M+2],M+=T,W+=p;return t}function j(t,s,e,p=3,T=p){const v=t.length/p;if(v!==Math.ceil(s.length/T))return t;let M=0,W=0;for(let N=0;N<v;N++)t[W]=s[M]+e[0],t[W+1]=s[M+1]+e[1],t[W+2]=s[M+2]+e[2],M+=T,W+=p;return t}function R(t,s){U(t.typedBuffer,s.typedBuffer,t.typedBufferStride,s.typedBufferStride)}function U(t,s,e=3,p=e){const T=Math.min(t.length/e,s.length/p);let v=0,M=0;for(let W=0;W<T;W++){const N=s[v],Y=s[v+1],J=s[v+2],nt=N*N+Y*Y+J*J;if(nt>0){const Q=1/Math.sqrt(nt);t[M]=Q*N,t[M+1]=Q*Y,t[M+2]=Q*J}v+=p,M+=e}}l.d(Z,{a:()=>H,b:()=>j,c:()=>V,d:()=>w,e:()=>R,f:()=>u,n:()=>U,s:()=>L,t:()=>O}),l(3248),l(35150),Object.freeze(Object.defineProperty({__proto__:null,normalize:U,normalizeView:R,scale:L,scaleView:u,shiftRight:function E(t,s,e){const p=Math.min(t.count,s.count),T=t.typedBuffer,v=t.typedBufferStride,M=s.typedBuffer,W=s.typedBufferStride;let N=0,Y=0;for(let J=0;J<p;J++)T[Y]=M[N]>>e,T[Y+1]=M[N+1]>>e,T[Y+2]=M[N+2]>>e,N+=W,Y+=v},transformMat3:O,transformMat3View:V,transformMat4:H,transformMat4View:w,translate:j},Symbol.toStringTag,{value:"Module"}))},17559:(ot,Z,l)=>{l.d(Z,{a:()=>O,b:()=>j,n:()=>L,s:()=>R,t:()=>u}),l(3248);var G=l(35150);function O(E,y,t){u(E.typedBuffer,y.typedBuffer,t,E.typedBufferStride,y.typedBufferStride)}function u(E,y,t,s=4,e=s){if(E.length/s!=y.length/e)return;const p=E.length/s,T=t[0],v=t[1],M=t[2],W=t[3],N=t[4],Y=t[5],J=t[6],nt=t[7],Q=t[8];let q=0,tt=0;for(let h=0;h<p;h++){const n=y[q],_=y[q+1],r=y[q+2],m=y[q+3];E[tt]=T*n+W*_+J*r,E[tt+1]=v*n+N*_+nt*r,E[tt+2]=M*n+Y*_+Q*r,E[tt+3]=m,q+=e,tt+=s}}function L(E,y){const t=Math.min(E.count,y.count),s=E.typedBuffer,e=E.typedBufferStride,p=y.typedBuffer,T=y.typedBufferStride;for(let v=0;v<t;v++){const M=v*e,W=v*T,N=p[W],Y=p[W+1],J=p[W+2],nt=N*N+Y*Y+J*J;if(nt>0){const Q=1/Math.sqrt(nt);s[M]=Q*N,s[M+1]=Q*Y,s[M+2]=Q*J}}}function j(E,y,t){R(E.typedBuffer,y,t,E.typedBufferStride)}function R(E,y,t,s=4){const e=Math.min(E.length/s,y.count),p=y.typedBuffer,T=y.typedBufferStride;let v=0,M=0;for(let W=0;W<e;W++)E[M]=t*p[v],E[M+1]=t*p[v+1],E[M+2]=t*p[v+2],E[M+3]=t*p[v+3],v+=T,M+=s}Object.freeze(Object.defineProperty({__proto__:null,normalize:L,scale:R,scaleView:j,transformMat3:u,transformMat3View:O,transformMat4:function V(E,y,t,s=4,e=s){if(E.length/s!=y.length/e)return void G.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const p=E.length/s,T=t[0],v=t[1],M=t[2],W=t[3],N=t[4],Y=t[5],J=t[6],nt=t[7],Q=t[8],q=t[9],tt=t[10],h=t[11],n=t[12],_=t[13],r=t[14],m=t[15];let c=0,A=0;for(let x=0;x<p;x++){const I=y[c],b=y[c+1],S=y[c+2],a=y[c+3];E[A]=T*I+N*b+Q*S+n*a,E[A+1]=v*I+Y*b+q*S+_*a,E[A+2]=M*I+J*b+tt*S+r*a,E[A+3]=W*I+nt*b+h*S+m*a,c+=e,A+=s}},transformMat4View:function H(E,y,t){if(E.count!==y.count)return;const s=E.count,e=t[0],p=t[1],T=t[2],v=t[3],M=t[4],W=t[5],N=t[6],Y=t[7],J=t[8],nt=t[9],Q=t[10],q=t[11],tt=t[12],h=t[13],n=t[14],_=t[15],r=E.typedBuffer,m=E.typedBufferStride,c=y.typedBuffer,A=y.typedBufferStride;for(let x=0;x<s;x++){const I=x*m,b=x*A,S=c[b],a=c[b+1],f=c[b+2],P=c[b+3];r[I]=e*S+M*a+J*f+tt*P,r[I+1]=p*S+W*a+nt*f+h*P,r[I+2]=T*S+N*a+Q*f+n*P,r[I+3]=v*S+Y*a+q*f+_*P}}},Symbol.toStringTag,{value:"Module"}))},32954:(ot,Z,l)=>{function F(){return[1,0,0,0,1,0,0,0,1]}function w(u,L,j,R,U,E,y,t,s){return[u,L,j,R,U,E,y,t,s]}l.d(Z,{fA:()=>w,vt:()=>F,zK:()=>V});const V=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:V,clone:function G(u){return[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8]]},create:F,createView:function H(u,L){return new Float64Array(u,L,9)},fromValues:w},Symbol.toStringTag,{value:"Module"}))},62789:(ot,Z,l)=>{function F(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function G(u){return[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]]}l.d(Z,{o8:()=>G,vt:()=>F,zK:()=>V});const V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:V,clone:G,create:F,createView:function H(u,L){return new Float64Array(u,L,16)},fromValues:function w(u,L,j,R,U,E,y,t,s,e,p,T,v,M,W,N){return[u,L,j,R,U,E,y,t,s,e,p,T,v,M,W,N]}},Symbol.toStringTag,{value:"Module"}))},3567:(ot,Z,l)=>{l.d(Z,{w:()=>V});var F=l(89952),w=(l(3248),l(12438)),H=l(17694);class V{constructor(n=9,_){this._compareMinX=E,this._compareMinY=y,this._toBBox=r=>r,this._maxEntries=Math.max(4,n||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),_&&("function"==typeof _?this._toBBox=_:this._initFormat(_)),this.clear()}destroy(){this.clear(),W.prune(),N.prune(),Y.prune(),J.prune()}all(n){u(this._data,n)}search(n,_){let r=this._data;const m=this._toBBox;if(v(n,r))for(W.clear();r;){for(let c=0,A=r.children.length;c<A;c++){const x=r.children[c],I=r.leaf?m(x):x;v(n,I)&&(r.leaf?_(x):T(n,I)?u(x,_):W.push(x))}r=W.pop()}}collides(n){let _=this._data;const r=this._toBBox;if(!v(n,_))return!1;for(W.clear();_;){for(let m=0,c=_.children.length;m<c;m++){const A=_.children[m],x=_.leaf?r(A):A;if(v(n,x)){if(_.leaf||T(n,x))return!0;W.push(A)}}_=W.pop()}return!1}load(n){if(!n.length)return this;if(n.length<this._minEntries){for(let r=0,m=n.length;r<m;r++)this.insert(n[r]);return this}let _=this._build(n.slice(0,n.length),0,n.length-1,0);if(this._data.children.length)if(this._data.height===_.height)this._splitRoot(this._data,_);else{if(this._data.height<_.height){const r=this._data;this._data=_,_=r}this._insert(_,this._data.height-_.height-1,!0)}else this._data=_;return this}insert(n){return n&&this._insert(n,this._data.height-1),this}clear(){return this._data=new q([]),this}remove(n){if(!n)return this;let _,r=this._data,m=null,c=0,A=!1;const x=this._toBBox(n);for(Y.clear(),J.clear();r||Y.length>0;){if(r||(r=Y.pop(),m=Y.data[Y.length-1],c=J.pop()??0,A=!0),r.leaf&&(_=(0,F.qh)(r.children,n,r.children.length,r.indexHint),-1!==_))return r.children.splice(_,1),Y.push(r),this._condense(Y),this;A||r.leaf||!T(r,x)?m?(c++,r=m.children[c],A=!1):r=null:(Y.push(r),J.push(c),c=0,m=r,r=r.children[0])}return this}toJSON(){return this._data}fromJSON(n){return this._data=n,this}_build(n,_,r,m){const c=r-_+1;let A=this._maxEntries;if(c<=A){const S=new q(n.slice(_,r+1));return j(S,this._toBBox),S}m||(m=Math.ceil(Math.log(c)/Math.log(A)),A=Math.ceil(c/A**(m-1)));const x=new tt([]);x.height=m;const I=Math.ceil(c/A),b=I*Math.ceil(Math.sqrt(A));M(n,_,r,b,this._compareMinX);for(let S=_;S<=r;S+=b){const a=Math.min(S+b-1,r);M(n,S,a,I,this._compareMinY);for(let f=S;f<=a;f+=I){const P=Math.min(f+I-1,a);x.children.push(this._build(n,f,P,m-1))}}return j(x,this._toBBox),x}_insert(n,_,r){const c=r?n:(0,this._toBBox)(n);Y.clear();const A=function O(h,n,_,r){for(;r.push(n),!0!==n.leaf&&r.length-1!==_;){let m,c=1/0,A=1/0;for(let x=0,I=n.children.length;x<I;x++){const b=n.children[x],S=t(b),a=e(h,b)-S;a<A?(A=a,c=S<c?S:c,m=b):a===A&&S<c&&(c=S,m=b)}n=m||n.children[0]}return n}(c,this._data,_,Y);for(A.children.push(n),U(A,c);_>=0&&Y.data[_].children.length>this._maxEntries;)this._split(Y,_),_--;!function L(h,n,_){for(let r=_;r>=0;r--)U(n.data[r],h)}(c,Y,_)}_split(n,_){const r=n.data[_],m=r.children.length,c=this._minEntries;this._chooseSplitAxis(r,c,m);const A=this._chooseSplitIndex(r,c,m);if(!A)return;const x=r.children.splice(A,r.children.length-A),I=r.leaf?new q(x):new tt(x);I.height=r.height,j(r,this._toBBox),j(I,this._toBBox),_?n.data[_-1].children.push(I):this._splitRoot(r,I)}_splitRoot(n,_){this._data=new tt([n,_]),this._data.height=n.height+1,j(this._data,this._toBBox)}_chooseSplitIndex(n,_,r){let m,c,A;m=c=1/0;for(let x=_;x<=r-_;x++){const I=R(n,0,x,this._toBBox),b=R(n,x,r,this._toBBox),S=p(I,b),a=t(I)+t(b);S<m?(m=S,A=x,c=a<c?a:c):S===m&&a<c&&(c=a,A=x)}return A}_chooseSplitAxis(n,_,r){const m=n.leaf?this._compareMinX:E,c=n.leaf?this._compareMinY:y;this._allDistMargin(n,_,r,m)<this._allDistMargin(n,_,r,c)&&n.children.sort(m)}_allDistMargin(n,_,r,m){n.children.sort(m);const c=this._toBBox,A=R(n,0,_,c),x=R(n,r-_,r,c);let I=s(A)+s(x);for(let b=_;b<r-_;b++){const S=n.children[b];U(A,n.leaf?c(S):S),I+=s(A)}for(let b=r-_-1;b>=_;b--){const S=n.children[b];U(x,n.leaf?c(S):S),I+=s(x)}return I}_condense(n){for(let _=n.length-1;_>=0;_--){const r=n.data[_];if(0===r.children.length)if(_>0){const m=n.data[_-1],c=m.children;c.splice((0,F.qh)(c,r,c.length,m.indexHint),1)}else this.clear();else j(r,this._toBBox)}}_initFormat(n){const _=["return a"," - b",";"];this._compareMinX=new Function("a","b",_.join(n[0])),this._compareMinY=new Function("a","b",_.join(n[1])),this._toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}}function u(h,n){let _=h;for(N.clear();_;){if(!0===_.leaf)for(const r of _.children)n(r);else N.pushArray(_.children);_=N.pop()??null}}function j(h,n){R(h,0,h.children.length,n,h)}function R(h,n,_,r,m){m||(m=new q([])),m.minX=1/0,m.minY=1/0,m.maxX=-1/0,m.maxY=-1/0;for(let c,A=n;A<_;A++)c=h.children[A],U(m,h.leaf?r(c):c);return m}function U(h,n){h.minX=Math.min(h.minX,n.minX),h.minY=Math.min(h.minY,n.minY),h.maxX=Math.max(h.maxX,n.maxX),h.maxY=Math.max(h.maxY,n.maxY)}function E(h,n){return h.minX-n.minX}function y(h,n){return h.minY-n.minY}function t(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}function s(h){return h.maxX-h.minX+(h.maxY-h.minY)}function e(h,n){return(Math.max(n.maxX,h.maxX)-Math.min(n.minX,h.minX))*(Math.max(n.maxY,h.maxY)-Math.min(n.minY,h.minY))}function p(h,n){const _=Math.max(h.minX,n.minX),r=Math.max(h.minY,n.minY),m=Math.min(h.maxX,n.maxX),c=Math.min(h.maxY,n.maxY);return Math.max(0,m-_)*Math.max(0,c-r)}function T(h,n){return h.minX<=n.minX&&h.minY<=n.minY&&n.maxX<=h.maxX&&n.maxY<=h.maxY}function v(h,n){return n.minX<=h.maxX&&n.minY<=h.maxY&&n.maxX>=h.minX&&n.maxY>=h.minY}function M(h,n,_,r,m){const c=[n,_];for(;c.length;){const A=c.pop(),x=c.pop();if(A-x<=r)continue;const I=x+Math.ceil((A-x)/r/2)*r;(0,H.q)(h,I,x,A,m),c.push(x,I,I,A)}}const W=new w.A,N=new w.A,Y=new w.A,J=new w.A({deallocator:void 0});class nt{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class Q extends nt{constructor(){super(...arguments),this.height=1,this.indexHint=new F.vW}}class q extends Q{constructor(n){super(),this.children=n,this.leaf=!0}}class tt extends Q{constructor(n){super(),this.children=n,this.leaf=!1}}},37605:(ot,Z,l)=>{l.d(Z,{l:()=>L});var F=l(69287),G=l(92771),w=l(25866);function H(y,t,s){const e=Math.sin(y),p=Math.cos(y),T=Math.sin(t),v=Math.cos(t),M=s;return M[0]=-e,M[4]=-T*p,M[8]=v*p,M[12]=0,M[1]=p,M[5]=-T*e,M[9]=v*e,M[13]=0,M[2]=0,M[6]=v,M[10]=T,M[14]=0,M[3]=0,M[7]=0,M[11]=0,M[15]=1,M}var O=l(84930),u=l(58701);function L(y,t,s,e){if(null==y||null==e)return!1;const p=(0,O.Qk)(y,O.Wv),T=(0,O.Qk)(e,O.zp);if(p===T&&!j(T)&&(p!==O.rz.UNKNOWN||(0,u.aI)(y,e)))return(0,G.kN)(s,t),!0;if(j(T)){const v=O.w5[p][O.rz.LON_LAT],M=O.w5[O.rz.LON_LAT][T];return null!=v&&null!=M&&(v(t,0,U,0),M(U,0,E,0),H(R*U[0],R*U[1],s),s[12]=E[0],s[13]=E[1],s[14]=E[2],!0)}if(!(T!==O.rz.WEB_MERCATOR&&T!==O.rz.PLATE_CARREE&&T!==O.rz.WGS84&&T!==O.rz.CGCS2000||p!==O.rz.WGS84&&p!==O.rz.SPHERICAL_ECEF&&p!==O.rz.WEB_MERCATOR&&p!==O.rz.CGCS2000)){const v=O.w5[p][O.rz.LON_LAT],M=O.w5[O.rz.LON_LAT][T];return null!=v&&null!=M&&(v(t,0,U,0),M(U,0,E,0),p===O.rz.SPHERICAL_ECEF?function V(y,t,s){H(y,t,s),(0,G.mg)(s,s)}(R*U[0],R*U[1],s):(0,G.D_)(s),s[12]=E[0],s[13]=E[1],s[14]=E[2],!0)}return!1}function j(y){return y===O.rz.SPHERICAL_ECEF||y===O.rz.SPHERICAL_MARS_PCPF||y===O.rz.SPHERICAL_MOON_PCPF}const R=(0,F.kU)(1),U=(0,w.vt)(),E=(0,w.vt)()},16590:(ot,Z,l)=>{l.d(Z,{g:()=>H});var F=l(25866),G=l(11817),w=l(23234);function H(L,j,R,U){if((0,G.canProjectWithoutEngine)(L.spatialReference,R))return u[0]=L.x,u[1]=L.y,u[2]=L.z??U??0,(0,w.projectBuffer)(u,L.spatialReference,0,j,R,0,1);const E=(0,G.tryProjectWithZConversion)(L,R);return!!E&&(j[0]=E?.x,j[1]=E?.y,j[2]=E?.z??U??0,!0)}const u=(0,F.vt)()},65580:(ot,Z,l)=>{l.d(Z,{Y0:()=>u,lO:()=>L});var F=l(87477),G=l(32034),w=l(58701);const H=new G.A(F.fv),V=new G.A(F.FY),O=new G.A(F.LJ),u=new G.A(F.Ro);function L(E){const y=j.get(E);if(y)return y;let t=H;if(E)if(E===V)t=V;else if(E===O)t=O;else{const s=E.wkid,e=E.latestWkid;if(null!=s||null!=e)(0,w.tl)(s)||(0,w.tl)(e)?t=V:((0,w.ZL)(s)||(0,w.ZL)(e))&&(t=O);else{const p=E.wkt2??E.wkt;if(p){const T=p.toUpperCase();T===R?t=V:T===U&&(t=O)}}}return j.set(E,t),t}const j=new Map,R=V.wkt.toUpperCase(),U=O.wkt.toUpperCase()},23653:(ot,Z,l)=>{l.d(Z,{Ns:()=>O,jh:()=>G,l5:()=>H,s:()=>V,xm:()=>w});var F=l(79139);function G(u,L=!1){return u<=F.y9?L?new Array(u).fill(0):new Array(u):new Float64Array(u)}function w(u){return((0,F.cy)(u)?u.length:u.byteLength/8)<=F.y9?Array.from(u):new Float64Array(u)}function H(u,L,j){return Array.isArray(u)?u.slice(L,L+j):u.subarray(L,L+j)}function V(u,L){for(let j=0;j<L.length;++j)u[j]=L[j];return u}function O(u){return Array.isArray(u)?new Float64Array(u):u}},38352:(ot,Z,l)=>{l.d(Z,{A:()=>U});var F=l(8189),G=l(90660),w=l(71065),H=l(85211),L=(l(3248),l(35150),l(40707),l(15463)),j=l(76576);let R=class extends((0,G.O)(w.oY)){constructor(E){super(E),this.type="georeferenced",this.origin=null}};(0,F._)([(0,L.e)({georeferenced:"georeferenced"},{readOnly:!0})],R.prototype,"type",void 0),(0,F._)([(0,H.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],R.prototype,"origin",void 0),R=(0,F._)([(0,j.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],R);const U=R},58315:(ot,Z,l)=>{l.d(Z,{A:()=>E});var F=l(8189),G=l(90660),w=l(71065),H=l(85211),L=(l(3248),l(35150),l(40707),l(15463)),j=l(76576),R=l(25866);let U=class extends((0,G.O)(w.oY)){constructor(y){super(y),this.type="local",this.origin=(0,R.vt)()}};(0,F._)([(0,L.e)({local:"local"},{readOnly:!0})],U.prototype,"type",void 0),(0,F._)([(0,H.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],U.prototype,"origin",void 0),U=(0,F._)([(0,j.$)("esri.geometry.support.MeshLocalVertexSpace")],U);const E=U},30429:(ot,Z,l)=>{l.r(Z),l.d(Z,{VectorType:()=>r,loadProjectErrorMessage:()=>v,logProjectionError:()=>M,project:()=>x,projectFromPCPF:()=>J,projectNormalFromPCPF:()=>N,projectNormalToPCPF:()=>W,projectTangentFromPCPF:()=>_,projectTangentToPCPF:()=>n,projectToPCPF:()=>Y,transformNormal:()=>nt,transformTangent:()=>Q,transformVectorENUPlateCarree:()=>q,transformVectorWMPlateCarree:()=>tt});var F=l(69287),G=l(31610),w=l(32954),H=l(92771),V=l(62789),O=l(28714),u=l(25866),L=l(11817),j=l(65580),R=l(37605),U=l(23234),E=l(23653),y=l(47258),t=l(58701),s=l(55039),e=l(45434),p=l(10442),T=l(17559);const v="Projection may be possible after calling projection.load().";function M(i,d,g,C){i.error(`Failed to project from (wkid:${d.wkid}) to (wkid:${g.wkid}).${C?" ":""}${C}`)}function W(i,d,g,C,D){return A(m.TO_PCPF,e.xs.fromTypedArray(i),r.NORMAL,e.Xm.fromTypedArray(d),e.Xm.fromTypedArray(g),C,e.xs.fromTypedArray(D))?D:null}function N(i,d,g,C,D){return A(m.FROM_PCPF,e.xs.fromTypedArray(i),r.NORMAL,e.Xm.fromTypedArray(d),e.Xm.fromTypedArray(g),C,e.xs.fromTypedArray(D))?D:null}function Y(i,d,g){return(0,U.projectBuffer)(i,d,0,g,(0,j.lO)(d),0,i.length/3)?g:null}function J(i,d,g){return(0,U.projectBuffer)(i,(0,j.lO)(g),0,d,g,0,i.length/3)?d:null}function nt(i,d,g){return(0,G.Ge)(B,g),(0,p.t)(d,i,B),(0,F.or)(B)&&(0,p.n)(d,d),d}function Q(i,d,g){return(0,G.z0)(B,g),(0,T.t)(d,i,B),(0,F.or)(B)&&(0,p.n)(d,d,4),d}function q(i,d,g,C){const D=d===r.NORMAL;return h(i,d,g,(z,X)=>{const K=Math.cos((0,F.kU)(z));X[0]=D?K:1/K,X[1]=1},C)}function tt(i,d,g,C){const D=d===r.NORMAL;return h(i,d,g,(z,X)=>{const K=Math.cosh(-z/y.$O.radius);X[0]=1,X[1]=D?K:1/K},C)}function h(i,d,g,C,D){const z=d===r.NORMAL?3:4,X=[0,0];for(let K=0,et=1;K<i.length;K+=z,et+=3){C(g[et],X);const k=i[K]*X[0],rt=i[K+1]*X[1],$=i[K+2],st=1/Math.sqrt(k*k+rt*rt+$*$);D[K]=k*st,D[K+1]=rt*st,D[K+2]=$*st,4===z&&(D[K+3]=i[K+3])}return D}function n(i,d,g,C,D){if(!A(m.TO_PCPF,e.xs.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT),r.TANGENT,e.Xm.fromTypedArray(d),e.Xm.fromTypedArray(g),C,e.xs.fromTypedArray(D,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let z=3;z<i.length;z+=4)D[z]=i[z];return D}function _(i,d,g,C,D){if(!A(m.FROM_PCPF,e.xs.fromTypedArray(i,16),r.TANGENT,e.Xm.fromTypedArray(d),e.Xm.fromTypedArray(g),C,e.xs.fromTypedArray(D,16)))return null;for(let z=3;z<i.length;z+=4)D[z]=i[z];return D}var r,m,i;function c(i,d,g,C,D){switch((0,R.l)(C,g,P,C),i===m.FROM_PCPF&&(0,H.B8)(P,P),d){case r.NORMAL:return(0,G.Ge)(D,P);case r.TANGENT:return(0,G.z0)(D,P)}}function A(i,d,g,C,D,z,X){if(!d)return;const K=C.count,et=(0,j.lO)(z);if(function S(i){return i.isWGS84||(0,t.x1)(i)||(0,t.q8)(i)||(0,t.KQ)(i)}(z))for(let k=0;k<K;k++)D.getVec(k,a),d.getVec(k,f),(0,O.t)(f,f,c(i,g,a,et,B)),X.setVec(k,f);else for(let k=0;k<K;k++){D.getVec(k,a),d.getVec(k,f);const rt=(0,s.jg)(C.get(k,1));let $=Math.cos(rt);g===r.TANGENT!=(i===m.TO_PCPF)&&($=1/$),c(i,g,a,et,B),i===m.TO_PCPF?(B[0]*=$,B[1]*=$,B[2]*=$,B[3]*=$,B[4]*=$,B[5]*=$):(B[0]*=$,B[3]*=$,B[6]*=$,B[1]*=$,B[4]*=$,B[7]*=$),(0,O.t)(f,f,B),(0,O.n)(f,f),X.setVec(k,f)}return X}function x(i){return"local"===i.vertexSpace.type?function I({vertexSpace:i,transform:d,inSpatialReference:g,outSpatialReference:C,localMode:D,outPositions:z,positions:X}){const K=i.origin??u.uY,et=null!=i.origin?d?.localMatrix??V.zK:V.zK,k=(0,j.lO)(g),rt=C.isWebMercator&&D||!(0,L.canProjectWithoutEngine)(g,k)?g:k;(0,R.l)(g,K,P,rt),(0,H.lw)(P,P,et);const $=z??(0,E.jh)(X.length);return(0,p.a)($,X,P),(0,U.projectBuffer)($,rt,0,$,C,0,$.length/3),$}(i):function b({vertexSpace:i,transform:d,outPositions:g,positions:C,inSpatialReference:D,outSpatialReference:z}){const X=null!=i.origin?d?.localMatrix??V.zK:V.zK,K=g??(0,E.jh)(C.length);(0,H.aI)(X,V.zK)?(0,E.s)(K,C):(0,p.a)(K,C,X);const et=i.origin??u.uY;if(!(0,O.e)(et,u.uY)){const[k,rt,$]=et;for(let st=0;st<K.length;st+=3)K[st]+=k,K[st+1]+=rt,K[st+2]+=$}return(0,U.projectBuffer)(K,D,0,K,z,0,K.length/3)?K:null}(i)}(i=r||(r={}))[i.NORMAL=0]="NORMAL",i[i.TANGENT=1]="TANGENT",function(i){i[i.TO_PCPF=0]="TO_PCPF",i[i.FROM_PCPF=1]="FROM_PCPF"}(m||(m={}));const a=(0,u.vt)(),f=(0,u.vt)(),P=(0,V.vt)(),B=(0,w.vt)()},12738:(ot,Z,l)=>{l.d(Z,{UR:()=>T,p5:()=>p,xK:()=>m});var F=l(35150),G=l(69287),w=l(82663),H=l(31610),V=l(32954),O=l(92771),u=l(62789),L=l(28714),j=l(25866),R=l(65580),U=l(37605),E=l(16590),y=l(78559),t=l(10442),s=l(30429);const e=()=>F.A.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function p(a,f,{vertexSpace:P,spatialReference:B}){if("georeferenced"===P.type){const z=a;if(!(0,E.g)(f,z,B))return!1;const{origin:X}=P;return(0,L.f)(a,z,X),!0}const i=(0,R.lO)(B),d=a;if(!(0,E.g)(f,d,i))return!1;const{origin:g}=P,C=b;if(!(0,U.l)(B,g,C,i))return!1;const D=(0,O.B8)(b,C);return null!=D&&((0,L.h)(a,d,D),!0)}function T(a,f,P){const{vertexSpace:B,transform:i,vertexAttributes:d}=a,g=h(a.spatialReference,P,S.SOURCE|S.TARGET);if((0,y.yJ)(B,f)&&(!i||(0,O.t2)(i.localMatrix,u.zK))&&(0,G.Io)(g,1)){const{position:C,normal:D,tangent:z}=d,X=P?.allowBufferReuse;return{position:X?C:C.slice(),normal:X?D:D?.slice(),tangent:X?z:z?.slice()}}switch(a.vertexSpace.type){case"local":return"local"===f.type?function Y({vertexAttributes:a,spatialReference:f,transform:P},{origin:B},i,d){const g=(0,R.lO)(f);if(!(0,U.l)(f,B,c,g))return(0,s.logProjectionError)(e(),f,g),null;if(P&&(0,O.lw)(c,c,P.localMatrix),!(0,U.l)(f,i,A,g))return(0,s.logProjectionError)(e(),g,f),null;(0,O.B8)(A,A);const C=(0,O.lw)(c,A,c);return tt(C,f,d,S.SOURCE|S.TARGET),J(a,C)}(a,a.vertexSpace,f.origin,P):function M({spatialReference:a,vertexAttributes:f,transform:P},{origin:B},i,d){const g=(0,R.lO)(a);if(!(0,U.l)(a,B,c,g))return(0,s.logProjectionError)(e(),a,g),null;P&&(0,O.lw)(c,c,P.localMatrix),tt(c,a,d,S.SOURCE);const C=new Float64Array(f.position.length),D=function nt(a,f,P,B){(0,t.a)(B,a,f);const i=new Float64Array(a.length);return(0,s.projectFromPCPF)(B,i,P)?i:((0,s.logProjectionError)(e(),(0,R.lO)(P),P),null)}(f.position,c,a,C);if(!D)return null;const z=function Q(a,f,P,B,i){if(null==P)return null;const d=new Float32Array(P.length);return(0,s.transformNormal)(P,d,B),(0,s.projectNormalFromPCPF)(d,a,f,i,d)?d:((0,s.logProjectionError)(e(),(0,R.lO)(i),i),null)}(D,C,f.normal,c,a);if(f.normal&&!z)return null;const X=function q(a,f,P,B,i){if(null==P)return null;const d=new Float32Array(P.length);return(0,s.transformTangent)(P,d,B),(0,s.projectTangentFromPCPF)(d,a,f,i,d)?d:((0,s.logProjectionError)(e(),(0,R.lO)(i),i),null)}(D,C,f.tangent,c,a);if(f.tangent&&!X)return null;if(i){const K=(0,L.k)(I,i);(0,t.b)(D,D,K)}return{position:D,normal:z,tangent:X}}(a,a.vertexSpace,f.origin,P);case"georeferenced":return"local"===f.type?function W({vertexAttributes:a,spatialReference:f,transform:P},{origin:B},i,d){const g=(0,R.lO)(f);if(!(0,U.l)(f,i,c,g))return(0,s.logProjectionError)(e(),f,g),null;const C=1/h(f,d,S.TARGET);(0,O.hs)(c,c,[C,C,C]);const D=(0,O.B8)(A,c),{position:z,normal:X,tangent:K}=function N(a,f,P){if(!f)return a;if(!P){const{position:i,normal:d,tangent:g}=a;return{position:(0,t.b)(new Float64Array(i.length),i,f),tangent:g,normal:d}}const B=J(a,P.localMatrix);return(0,t.b)(B.position,B.position,f),B}(a,B,P),et=new Float64Array(z.length),k=function n(a,f,P,B){const i=(0,s.projectToPCPF)(a,f,B);if(!i)return(0,s.logProjectionError)(e(),f,(0,R.lO)(f)),null;const d=new Float64Array(i.length);return(0,t.a)(d,i,P),d}(z,f,D,et);if(!k)return null;const rt=(0,H.Ge)(x,D),$=function _(a,f,P,B,i,d){if(null==a)return null;const g=d??new Float32Array(a.length);return(0,s.projectNormalToPCPF)(a,f,P,B,g)?((0,t.t)(g,g,i),g):((0,s.logProjectionError)(e(),B,(0,R.lO)(B)),null)}(X,z,et,f,rt,X!==a.normal?X:void 0);if(!$&&X)return null;const st=function r(a,f,P,B,i,d){if(null==a)return null;const g=d??new Float32Array(a.length);return(0,s.projectTangentToPCPF)(a,f,P,B,g)?((0,t.t)(g,g,i,4),g):((0,s.logProjectionError)(e(),B,(0,R.lO)(B)),null)}(K,z,et,f,rt,K!==a.tangent?K:void 0);return!st&&K?null:{position:k,normal:$,tangent:st}}(a,a.vertexSpace,f.origin,P):function v({vertexAttributes:a,transform:f,spatialReference:P},{origin:B},i,d){const{position:g,normal:C,tangent:D}=f?J(a,f.localMatrix):a,z=new Float64Array(g.length);let X=g;if(B&&(X=(0,t.b)(z,X,B)),i){const et=(0,L.k)(I,i);X=(0,t.b)(z,X,et)}h(P,d,S.NONE);const K=d?.allowBufferReuse;return{position:X!==a.position||K?X:X.slice(),normal:C!==a.normal||K?C:C?.slice(),tangent:D!==a.tangent||K?D:D?.slice()}}(a,a.vertexSpace,f.origin,P)}}function J(a,f){const P=new Float64Array(a.position.length);(0,t.a)(P,a.position,f);const B=a.normal?new Float32Array(a.normal.length):null,i=a.tangent?new Float32Array(a.tangent.length):null;return B&&a.normal&&(0,s.transformNormal)(a.normal,B,f),i&&a.tangent&&(0,s.transformTangent)(a.tangent,i,f),{position:P,normal:B,tangent:i}}function tt(a,f,P,B){const i=h(f,P,B);1!==i&&(0,O.hs)(a,a,[i,i,i])}function h(a,f,P){const B=!!(P&S.SOURCE),i=!!(P&S.TARGET),d=f?.sourceUnit,g=f?.targetUnit;if(!d&&!g)return 1;let C=m(d,a);!B&&d&&1!==C&&(e().warn("source unit conversion not supported"),C=1);let D=1/m(g,a);return!i&&g&&1!==D&&(e().warn("target unit conversion not supported"),D=1),C*D}function m(a,f){if(null==a)return 1;const P=(0,w.KX)(f);return 1/(0,w.oU)(P,"meters",a)}const c=(0,u.vt)(),A=(0,u.vt)(),x=(0,V.vt)(),I=(0,j.vt)(),b=(0,u.vt)();var S,a;(a=S||(S={}))[a.NONE=0]="NONE",a[a.SOURCE=1]="SOURCE",a[a.TARGET=2]="TARGET"},78559:(ot,Z,l)=>{l.d(Z,{CK:()=>R,Hq:()=>j,MW:()=>U,TE:()=>E,yJ:()=>s});var F=l(23159),G=l(35150),w=l(28714),H=l(1749),V=l(38352),O=l(58315);function u(){return G.A.getLogger("esri.geometry.Mesh")}function j(e){return null!=e.origin}function R(e){return j(e.vertexSpace)}function U(e,p){if(!j(e))return null;const[T,v,M]=e.origin;return new H.A({x:T,y:v,z:M,spatialReference:p})}function E(e,p){const{x:T,y:v,z:M,spatialReference:W}=e,N=[T,v,M??0];return void 0!==p?.geographic&&((0,F.io)(u(),"option: geographic",{replacement:"use vertexSpace option instead",version:"4.29",warnOnce:!0}),p.vertexSpace&&u().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(p?.vertexSpace??function t(e){return null==e?void 0:e?"local":"georeferenced"}(p?.geographic)??function y(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(W))?new O.A({origin:N}):new V.A({origin:N})}function s(e,p){return e.type===p.type&&(e.origin===p.origin||null!=e.origin&&null!=p.origin&&(0,w.e)(e.origin,p.origin))}}}]);