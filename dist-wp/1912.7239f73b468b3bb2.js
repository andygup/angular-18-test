"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[1912],{41912:(G,x,_)=>{_.r(x),_.d(x,{default:()=>o});var L=_(10467),h=_(8189),R=_(89563),C=_(5922),j=_(35150),M=_(69287),$=_(39693),S=_(56492),A=_(85211),T=(_(3248),_(40707),_(76576)),l=_(28714),m=_(25866),U=_(87477),D=_(28067),g=_(32034),I=_(23234),Z=_(95478),F=_(94376),b=_(25936),z=_(23e3),N=_(17049),X=_(85551),K=_(33036),W=_(22329),O=_(73812);let t=class extends((0,b.b)((0,N.q)((0,X.A)((0,K.j)((0,$.P)((0,z.d)((0,F.p)(Z.A)))))))){constructor(s){super(s),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.spatialReference=new g.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new D.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0}set elevationInfo(s){this._set("elevationInfo",s),this._validateElevationInfo()}_verifyArray(s,r){if(!Array.isArray(s)||s.length<r)return!1;for(const u of s)if("number"!=typeof u)return!1;return!0}_initFullExtent(s){const r=s.root?.boundingVolume;if(!r)return;if(r.box){const a=r?.box;if(a[3]>7972671&&a[7]>7972671&&a[11]>7945940)return}const u=s.root?.transform,E=(0,m.vt)();if(r.region&&this._verifyArray(r.region,6)){const a=r.region,f=(0,M.KJ)(a[0]),c=(0,M.KJ)(a[1]),v=a[4],d=(0,M.KJ)(a[2]),i=(0,M.KJ)(a[3]);this.fullExtent=new D.A({xmin:f,ymin:c,zmin:v,xmax:d,ymax:i,zmax:a[5],spatialReference:this.spatialReference})}else if(r.sphere&&this._verifyArray(r.sphere,4)){const a=r.sphere,f=(0,m.fA)(a[0],a[1],a[2]),c=a[3]/Math.sqrt(3),v=(0,m.vt)();(0,l.f)(v,f,(0,m.fA)(c,c,c));const d=(0,m.vt)();if((0,l.g)(d,f,(0,m.fA)(c,c,c)),u&&this._verifyArray(u,16)){const P=u;(0,l.h)(E,v,P),(0,l.c)(v,E),(0,l.h)(E,d,P),(0,l.c)(d,E)}(0,I.projectBuffer)(v,U.Ro,0,v,g.A.WGS84,0,1),(0,I.projectBuffer)(d,U.Ro,0,d,g.A.WGS84,0,1);const i=(0,m.vt)(),y=(0,m.vt)();(0,l.z)(i,v,d),(0,l.D)(y,v,d),this.fullExtent=new D.A({xmin:i[0],ymin:i[1],zmin:i[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:this.spatialReference})}else if(r.box&&this._verifyArray(r.box,12)){const a=r.box,f=(0,m.fA)(a[0],a[1],a[2]),c=(0,m.fA)(a[3],a[4],a[5]),v=(0,m.fA)(a[6],a[7],a[8]),d=(0,m.fA)(a[9],a[10],a[11]),i=[];for(let p=0;p<8;++p)i.push((0,m.vt)());if((0,l.g)(i[0],f,c),(0,l.g)(i[0],i[0],v),(0,l.g)(i[0],i[0],d),(0,l.A)(i[1],f,c),(0,l.g)(i[1],i[1],v),(0,l.g)(i[1],i[1],d),(0,l.g)(i[2],f,c),(0,l.A)(i[2],i[2],v),(0,l.g)(i[2],i[2],d),(0,l.A)(i[3],f,c),(0,l.A)(i[3],i[3],v),(0,l.g)(i[3],i[3],d),(0,l.g)(i[4],f,c),(0,l.g)(i[4],i[4],v),(0,l.A)(i[4],i[4],d),(0,l.A)(i[5],f,c),(0,l.g)(i[5],i[5],v),(0,l.A)(i[5],i[5],d),(0,l.g)(i[6],f,c),(0,l.A)(i[6],i[6],v),(0,l.A)(i[6],i[6],d),(0,l.A)(i[7],f,c),(0,l.A)(i[7],i[7],v),(0,l.A)(i[7],i[7],d),u&&this._verifyArray(u,16)){const p=u;for(let B=0;B<8;++B)(0,l.h)(i[B],i[B],p)}const y=(0,m.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),P=(0,m.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let p=0;p<8;++p)(0,I.projectBuffer)(i[p],U.Ro,0,i[p],g.A.WGS84,0,1),(0,l.z)(P,P,i[p]),(0,l.D)(y,y,i[p]);this.fullExtent=new D.A({xmin:P[0],ymin:P[1],zmin:P[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:this.spatialReference})}}load(s){var r=this;return(0,L.A)(function*(){return r.addResolvingPromise(r._doLoad(s)),r})()}_doLoad(s){var r=this;return(0,L.A)(function*(){const u=null!=s?s.signal:null;try{yield r.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:E=>{if(E.typeKeywords?.includes("IntegratedMesh"))return!0;throw new C.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},s)}catch(E){(0,S.QP)(E)}r.url&&(yield(0,R.A)(r.url,{query:{f:"json",...r.customParameters,token:r.apiKey},responseType:"json",signal:u}).then(a=>{r._initFullExtent(a.data)},a=>{(0,S.QP)(a)}))})()}fetchAttributionData(){var s=this;return(0,L.A)(function*(){return s.load().then(()=>({}))})()}_validateElevationInfo(){const s=this.elevationInfo,r="Integrated mesh 3d tiles layers";(0,O.XF)(j.A.getLogger(this),(0,O.B)(r,"absolute-height",s)),(0,O.XF)(j.A.getLogger(this),(0,O.tW)(r,s))}};(0,h._)([(0,A.MZ)({type:["IntegratedMesh3DTilesLayer"]})],t.prototype,"operationalLayerType",void 0),(0,h._)([(0,A.MZ)({type:g.A})],t.prototype,"spatialReference",void 0),(0,h._)([(0,A.MZ)({type:D.A})],t.prototype,"fullExtent",void 0),(0,h._)([(0,A.MZ)(W.Yj)],t.prototype,"elevationInfo",null),(0,h._)([(0,A.MZ)({type:["show","hide"]})],t.prototype,"listMode",void 0),(0,h._)([(0,A.MZ)(W.OZ)],t.prototype,"url",void 0),(0,h._)([(0,A.MZ)({readOnly:!0})],t.prototype,"type",void 0),(0,h._)([(0,A.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),(0,h._)([(0,A.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"minScale",void 0),(0,h._)([(0,A.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"maxScale",void 0),t=(0,h._)([(0,T.$)("esri.layers.IntegratedMesh3DTilesLayer")],t);const o=t},73812:(G,x,_)=>{_.d(x,{$7:()=>z,B:()=>b,M7:()=>K,XF:()=>X,tW:()=>N,w7:()=>M}),_(82663);var h=_(82575);function M(t,o){return function C(t,o){return o?.mode?o.mode:function R(t){return t?W:O}(t).mode}(null!=t&&t.hasZ,o)}function b(t,o,s){return s&&s.mode!==o?`${t} only support ${o} elevation mode`:null}function z(t,o,s){return s?.mode===o?`${t} do not support ${o} elevation mode`:null}function N(t,o){return null!=o?.featureExpressionInfo&&"0"!==o.featureExpressionInfo.expression?`${t} do not support featureExpressionInfo`:null}function X(t,o){o&&t.warn(".elevationInfo=",o)}function K(t){return(t?.offset??0)*(0,h.Ao)(t?.unit)}const W={mode:"absolute-height",offset:0},O={mode:"on-the-ground",offset:null}}}]);