"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[5225],{28250:(Pe,ee,i)=>{function I(g){return null!=z(g)||null!=y(g)}function Z(g){return O.test(g)}function b(g){return z(g)??y(g)}function y(g){const A=new Date(g);return function G(g,A){if(Number.isNaN(g.getTime()))return!1;let u=!0;if(W&&/\d+\W*$/.test(A)){const m=A.match(/[a-zA-Z]{2,}/);if(m){let T=!1,w=0;for(;!T&&w<=m.length;)T=!S.test(m[w]),w++;u=!T}}return u}(A,g)?Number.isNaN(A.getTime())?null:A.getTime()-6e4*A.getTimezoneOffset():null}function z(g){const A=O.exec(g);if(!A?.groups)return null;const u=A.groups,m=+u.year,T=+u.month-1,w=+u.day,C=+(u.hours??"0"),v=+(u.minutes??"0"),R=+(u.seconds??"0");if(C>23||v>59||R>59)return null;const d=u.ms??"0",_=d?+d.padEnd(3,"0").substring(0,3):0;let M;return M=u.isUTC||!u.offsetSign?Date.UTC(m,T,w,C,v,R,_):6e4*("+"===u.offsetSign?-1:1)*(60*+u.offsetHours+ +u.offsetMinutes)+Date.UTC(m,T,w,C,v,R,_),Number.isNaN(M)?null:M}i.d(ee,{Br:()=>Z,Cq:()=>I,_U:()=>b});const O=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,S=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,W=!Number.isNaN(new Date("technology 10").getTime())},36761:(Pe,ee,i)=>{i.d(ee,{BM:()=>de,bd:()=>Me,sO:()=>Oe,xD:()=>S});var I=i(28250),Z=i(5922),b=i(58701),y=i(42086),z=i(13682),O=i(86300);const G={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function S(e){return G[e]}function*W(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const n of e.features)n&&(yield n)}}function*g(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const n of e.coordinates)yield*n;break;case"MultiPolygon":for(const n of e.coordinates)for(const s of n)yield*s}}function u(e){for(const n of e)if(n.length>2)return!0;return!1}function w(e){let n=0;for(let s=0;s<e.length;s++){const l=e[s],h=e[(s+1)%e.length];n+=l[0]*h[1]-h[0]*l[1]}return n<=0}function C(e){const n=e[0],s=e[e.length-1];return n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]||e.push(n),e}function v(e,n,s){switch(n.type){case"LineString":return function R(e,n,s){return Q(e,n.coordinates,s),e}(e,n,s);case"MultiLineString":return function d(e,n,s){for(const l of n.coordinates)Q(e,l,s);return e}(e,n,s);case"MultiPoint":return function _(e,n,s){return Q(e,n.coordinates,s),e}(e,n,s);case"MultiPolygon":return function M(e,n,s){for(const l of n.coordinates){x(e,l[0],s);for(let h=1;h<l.length;h++)J(e,l[h],s)}return e}(e,n,s);case"Point":return function re(e,n,s){return ae(e,n.coordinates,s),e}(e,n,s);case"Polygon":return function p(e,n,s){const l=n.coordinates;x(e,l[0],s);for(let h=1;h<l.length;h++)J(e,l[h],s);return e}(e,n,s)}}function x(e,n,s){const l=C(n);!function m(e){return!w(e)}(l)?Q(e,l,s):le(e,l,s)}function J(e,n,s){const l=C(n);!function T(e){return w(e)}(l)?Q(e,l,s):le(e,l,s)}function Q(e,n,s){for(const l of n)ae(e,l,s);e.lengths.push(n.length)}function le(e,n,s){for(let l=n.length-1;l>=0;l--)ae(e,n[l],s);e.lengths.push(n.length)}function ae(e,n,s){const[l,h,L]=n;e.coords.push(l,h),s.hasZ&&e.coords.push(L||0)}function ce(e){switch(typeof e){case"string":return(0,I.Br)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function Oe(e,n=4326){if(!e)throw new Z.A("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new Z.A("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:s}=e;if(!s)return;const l="string"==typeof s?s:"name"===s.type?s.properties.name:"EPSG"===s.type?s.properties.code:null,h=(0,b.oT)({wkid:n})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${n})$`,"i");if(!l||!h.test(l))throw new Z.A("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:s})}function de(e,n={}){const s=[],l=new Set,h=new Set;let L,oe=!1,j=null,N=!1,{geometryType:$=null}=n,fe=!1;for(const ie of W(e)){const{geometry:D,properties:k,id:t}=ie;if((!D||($||($=S(D.type)),S(D.type)===$))&&(oe||(oe=u(g(D))),N||(N=null!=t,N&&(L=typeof t,k&&(j=Object.keys(k).filter(o=>k[o]===t)))),k&&j&&N&&null!=t&&(j.length>1?j=j.filter(o=>k[o]===t):1===j.length&&(j=k[j[0]]===t?j:[])),!fe&&k)){let o=!0;for(const r in k){if(l.has(r))continue;const a=k[r];if(null==a){o=!1,h.add(r);continue}const c=ce(a);if("unknown"===c){h.add(r);continue}h.delete(r),l.add(r);const E=(0,O.rS)(r);E&&s.push({name:E,alias:r,type:c})}fe=o}}const pe=(0,O.rS)(1===j?.length&&j[0]||null)??void 0;if(pe)for(const ie of s)if(ie.name===pe&&(0,O.WA)(ie)){ie.type="esriFieldTypeOID";break}return{fields:s,geometryType:$,hasZ:oe,objectIdFieldName:pe,objectIdFieldType:L,unknownFields:Array.from(h)}}function Me(e,n){return Array.from(function*A(e,n={}){const{geometryType:s,objectIdField:l}=n;for(const h of e){const{geometry:L,properties:oe,id:j}=h;if(L&&S(L.type)!==s)continue;const N=oe||{};let $;l&&($=N[l],null==j||$||(N[l]=$=j)),yield new y.Om(L?v(new z.A,L,n):null,N,null,$??void 0)}}(W(e),n))}},89962:(Pe,ee,i)=>{i.d(ee,{F0:()=>z,Vx:()=>S,e2:()=>g,f:()=>A});var I=i(3248),Z=i(77806),b=i(78200),y=i(48254);function z(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?y.Cb:"esriGeometryPolyline"===u?y.yM:y.WR}}}const O=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let G=1;function S(u,m){if((0,I.A)("esri-csp-restrictions"))return()=>({[m]:null,...u});try{let T=`this${W(m)} = null;`;for(const C in u)T+=`this${W(C)} = ${JSON.stringify(u[C])};`;const w=new Function(`\n      return class AttributesClass$${G++} {\n        constructor() {\n          ${T};\n        }\n      }\n    `)();return()=>new w}catch{return()=>({[m]:null,...u})}}function W(u){return O.test(u)?`.${u}`:`["${u}"]`}function g(u={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,Z.o8)(u)}}]}function A(u,m){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:m,supportsDelete:m,supportsEditing:m,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:m,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:b.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:m,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},51248:(Pe,ee,i)=>{i.d(ee,{$1:()=>v,CR:()=>T,MB:()=>A,Yx:()=>G,bP:()=>W});var I=i(10467),Z=i(28250),b=i(58701),y=i(86300);class z{constructor(){this.code=null,this.description=null}}class O{constructor(_){this.error=new z,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=_}}function G(d){return new O(d)}class S{constructor(_){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=_}}function W(d){return new S(d)}const g=new Set;function A(d,_,M,re=!1){g.clear();for(const p in M){const x=d.get(p);if(!x)continue;const J=u(x,M[p]);if(g.add(x.name),x&&(re||x.editable)){const Q=(0,y.CJ)(x,J);if(Q)return G((0,y.uo)(Q,x,J));_[x.name]=J}}for(const p of d?.requiredFields??[])if(!g.has(p.name))return G(`missing required field "${p.name}"`);return null}function u(d,_){let M=_;return(0,y.WA)(d)&&"string"==typeof _?M=parseFloat(_):(0,y.yM)(d)&&null!=_&&"string"!=typeof _?M=String(_):(0,y.vE)(d)&&"string"==typeof _&&(M=(0,Z._U)(_)),(0,y.WX)(M)}let m;function T(d,_){if(!d||!(0,b.fn)(_))return d;if("rings"in d||"paths"in d){if(null==m)throw new TypeError("geometry engine not loaded");return m.simplify(_,d)}return d}function C(){return(C=(0,I.A)(function*(){return null==m&&(m=yield Promise.all([i.e(3930),i.e(2076),i.e(2296)]).then(i.bind(i,27815))),m})).apply(this,arguments)}function v(d,_){return R.apply(this,arguments)}function R(){return R=(0,I.A)(function*(d,_){!(0,b.fn)(d)||"esriGeometryPolygon"!==_&&"esriGeometryPolyline"!==_||(yield function w(){return C.apply(this,arguments)}())}),R.apply(this,arguments)}},55225:(Pe,ee,i)=>{i.d(ee,{GA:()=>Me,GL:()=>x,I:()=>h,J0:()=>n,Ki:()=>Oe,Px:()=>ae,QE:()=>re,bV:()=>Q,bW:()=>s,vJ:()=>M});var I=i(10467),b=(i(21152),i(89563)),y=i(5922),z=i(35150),O=i(45272),G=i(58701),S=i(55039),W=i(31732),g=i(61808),A=i(36761),u=i(89962),m=i(51248),T=i(73258),w=i(38965),C=i(22639),v=i(32034);const R=()=>z.A.getLogger("esri.layers.ogc.ogcFeatureUtils"),d="startindex",_=new Set([d,"offset"]),M="http://www.opengis.net/def/crs/",re=`${M}OGC/1.3/CRS84`;var p,t;function x(t,o){return J.apply(this,arguments)}function J(){return(J=(0,I.A)(function*(t,o,r={},a=5){const{links:c}=t,E=D(c,"items",p.geojson)||D(c,"http://www.opengis.net/def/rel/ogc/1.0/items",p.geojson);if(null==E)throw new y.A("ogc-feature-layer:missing-items-page","Missing items url");const{apiKey:B,customParameters:H,signal:V}=r,U=(0,O.s2)(E.href,t.landingPage.url),ne={limit:a,...H,token:B},_e=(0,O.a6)(U,ne),Te={accept:p.geojson},{data:me}=yield(0,b.A)(_e,{signal:V,headers:Te}),ye=function k(t,o,r){if(!r)return;const a=D(r,"next",p.geojson),c=(0,O.An)(a?.href)?.query;if(!c)return;const E=(0,O.An)(t).query,B=Object.keys(E??{});return Object.entries(c).filter(([U])=>!B.includes(U)).find(([U,ne])=>_.has(U.toLowerCase())&&Number.parseInt(ne,10)===o)?.[0]}(_e,a,me.links)??d;(0,A.sO)(me);const K=(0,A.BM)(me,{geometryType:o.geometryType}),te=o.fields||K.fields||[],je=null!=o.hasZ?o.hasZ:K.hasZ,X=K.geometryType,Y=o.objectIdField||K.objectIdFieldName||"OBJECTID";let P=o.timeInfo;const ge=te.find(({name:f})=>f===Y);if(ge)ge.editable=!1,ge.nullable=!1;else{if(!K.objectIdFieldType)throw new y.A("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");te.unshift({name:Y,alias:Y,type:"number"===K.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(Y!==K.objectIdFieldName){const f=te.find(({name:F})=>F===K.objectIdFieldName);f&&(f.type="esriFieldTypeInteger")}te===K.fields&&K.unknownFields.length>0&&R().warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:K.unknownFields}});for(const f of te){if(null==f.name&&(f.name=f.alias),null==f.alias&&(f.alias=f.name),"esriFieldTypeOID"!==f.type&&"esriFieldTypeGlobalID"!==f.type&&(f.editable=null==f.editable||!!f.editable,f.nullable=null==f.nullable||!!f.nullable),!f.name)throw new y.A("ogc-feature-layer:invalid-field-name","field name is missing",{field:f});if(!w.m.jsonValues.includes(f.type))throw new y.A("ogc-feature-layer:invalid-field-type",`invalid type for field "${f.name}"`,{field:f})}if(P){const f=new T.A(te);if(P.startTimeField){const F=f.get(P.startTimeField);F?(P.startTimeField=F.name,F.type="esriFieldTypeDate"):P.startTimeField=null}if(P.endTimeField){const F=f.get(P.endTimeField);F?(P.endTimeField=F.name,F.type="esriFieldTypeDate"):P.endTimeField=null}if(P.trackIdField){const F=f.get(P.trackIdField);F?P.trackIdField=F.name:(P.trackIdField=null,R().warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:P}}))}P.timeReference||={timeZoneIANA:C.n$},P.startTimeField||P.endTimeField||(R().warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:P}}),P=void 0)}return{drawingInfo:X?(0,u.F0)(X):null,extent:ie(t),geometryType:X,fields:te,hasZ:!!je,objectIdField:Y,paginationParameter:ye,timeInfo:P}})).apply(this,arguments)}function Q(t){return le.apply(this,arguments)}function le(){return(le=(0,I.A)(function*(t,o={}){const{links:r,url:a}=t,c=D(r,"data",p.json)||D(r,"http://www.opengis.net/def/rel/ogc/1.0/data",p.json);if(null==c)throw new y.A("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:E,customParameters:B,signal:H}=o,V=(0,O.s2)(c.href,a),{data:U}=yield(0,b.A)(V,{signal:H,headers:{accept:p.json},query:{...B,token:E}});for(const ne of U.collections)ne.landingPage=t;return U})).apply(this,arguments)}function ae(t){return ce.apply(this,arguments)}function ce(){return(ce=(0,I.A)(function*(t,o={}){const{links:r,url:a}=t,c=D(r,"conformance",p.json)||D(r,"http://www.opengis.net/def/rel/ogc/1.0/conformance",p.json);if(null==c)throw new y.A("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:E,customParameters:B,signal:H}=o,V=(0,O.s2)(c.href,a),{data:U}=yield(0,b.A)(V,{signal:H,headers:{accept:p.json},query:{...B,token:E}});return U})).apply(this,arguments)}function Oe(t){return de.apply(this,arguments)}function de(){return(de=(0,I.A)(function*(t,o={}){const{apiKey:r,customParameters:a,signal:c}=o,{data:E}=yield(0,b.A)(t,{signal:c,headers:{accept:p.json},query:{...a,token:r}});return E.url=t,E})).apply(this,arguments)}function Me(t){return e.apply(this,arguments)}function e(){return(e=(0,I.A)(function*(t,o={}){const{links:r,url:a}=t,c=D(r,"service-desc",p.openapi);if(null==c)return R().warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:E,customParameters:B,signal:H}=o,V=(0,O.s2)(c.href,a),{data:U}=yield(0,b.A)(V,{signal:H,headers:{accept:p.openapi},query:{...B,token:E}});return U})).apply(this,arguments)}function n(t){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(t),r=o?.groups;if(!r)return null;const{authority:a,code:c}=r;switch(a.toLowerCase()){case"ogc":switch(c.toLowerCase()){case"crs27":return v.A.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return v.A.WGS84.wkid;default:return null}case"esri":case"epsg":{const E=Number.parseInt(c,10);return Number.isNaN(E)?null:E}default:return null}}function s(t,o,r){return l.apply(this,arguments)}function l(){return(l=(0,I.A)(function*(t,o,r){const a=yield h(t,o,r);return(0,W.ZF)(a)})).apply(this,arguments)}function h(t,o,r){return L.apply(this,arguments)}function L(){return(L=(0,I.A)(function*(t,o,r){const{collection:{links:a,landingPage:{url:c}},layerDefinition:E,maxRecordCount:B,queryParameters:{apiKey:H,customParameters:V},spatialReference:U,supportedCrs:ne}=t,_e=D(a,"items",p.geojson)||D(a,"http://www.opengis.net/def/rel/ogc/1.0/items",p.geojson);if(null==_e)throw new y.A("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:Te,num:me,start:ye,timeExtent:K,where:te}=o;if(o.objectIds)throw new y.A("ogc-feature-layer:query-by-objectids-not-supported","Queries with object ids are not supported");const je=v.A.fromJSON(U),X=o.outSpatialReference??je,Y=X.isWGS84?null:j(X,ne),P=function pe(t,o){if(!function oe(t){return null!=t&&"extent"===t.type}(t))return null;const{spatialReference:r}=t;if(!r||r.isWGS84)return{bbox:N(t)};const a=j(r,o);return null!=a?{bbox:N(t),"bbox-crs":a}:r.isWebMercator?{bbox:N((0,S.Cv)(t,v.A.WGS84))}:null}(Te,ne),ge=function $(t){if(null==t)return null;const{start:o,end:r}=t;return`${null!=o?o.toISOString():".."}/${null!=r?r.toISOString():".."}`}(K),f=function fe(t){return null!=t&&t&&"1=1"!==t?t:null}(te),F=me??(null==ye?B:10),we=0===ye?void 0:ye,{fields:De,geometryType:Ae,hasZ:Ie,objectIdField:he,paginationParameter:Ce}=E,Fe=(0,O.s2)(_e.href,c),{data:be}=yield(0,b.A)(Fe,{...r,query:{...V,...P,crs:Y,datetime:ge,query:f,limit:F,[Ce]:we,token:H},headers:{accept:p.geojson}}),Ee=(0,A.bd)(be,{geometryType:Ae,hasZ:Ie,objectIdField:he}),ve=Ee.length===F&&!!D(be.links??[],"next",p.geojson),Re=new T.A(De);for(const q of Ee){const ue={};(0,m.MB)(Re,ue,q.attributes),ue[he]=q.attributes[he],q.attributes=ue}if(!Y&&X.isWebMercator)for(const q of Ee)if(null!=q.geometry&&null!=Ae){const ue=(0,W.zv)(q.geometry,Ae,Ie,!1);ue.spatialReference=v.A.WGS84,q.geometry=(0,W.Ux)((0,S.Cv)(ue,X))}for(const q of Ee)q.objectId=q.attributes[he];const Ue=Y||!Y&&X.isWebMercator?X.toJSON():G.KK,se=new g.A;return se.exceededTransferLimit=ve,se.features=Ee,se.fields=De,se.geometryType=Ae,se.hasZ=Ie,se.objectIdFieldName=he,se.spatialReference=Ue,se})).apply(this,arguments)}function j(t,o){const{isWebMercator:r,wkid:a}=t;if(!a)return null;const c=r?o[3857]??o[102100]??o[102113]??o[900913]:o[t.wkid];return c?`${M}${c}`:null}function N(t){if(null==t)return"";const{xmin:o,ymin:r,xmax:a,ymax:c}=t;return`${o},${r},${a},${c}`}function ie(t){const o=t.extent?.spatial;if(!o)return null;const r=o.bbox[0],a=4===r.length,[c,E]=r;return{xmin:c,ymin:E,xmax:a?r[2]:r[3],ymax:a?r[3]:r[4],zmin:a?void 0:r[2],zmax:a?void 0:r[5],spatialReference:v.A.WGS84.toJSON()}}function D(t,o,r){return t.find(({rel:a,type:c})=>a===o&&c===r)??t.find(({rel:a,type:c})=>a===o&&!c)}(t=p||(p={})).json="application/json",t.geojson="application/geo+json",t.openapi="application/vnd.oai.openapi+json;version=3.0"}}]);