"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[8581],{31876:(K,R,s)=>{s.d(R,{F:()=>b});var c=s(12849),_=(s(89952),s(23159),s(77806),s(35150),s(97442));function b(a,u,d){if(null==a?.timeInfo)return null;const{datesInUnknownTimezone:h=!1,timeOffset:P,useViewTime:T}=a;let x=a.timeExtent;h&&(x=function H(a){if(!a)return a;const{start:u,end:d}=a;return new c.A({start:null!=u?(0,_.S1)(u,u.getTimezoneOffset(),"minutes"):u,end:null!=d?(0,_.S1)(d,d.getTimezoneOffset(),"minutes"):d})}(x));let A=T?u&&x?u.intersection(x):u||x:x;return!A||A.isEmpty||A.isAllTime?A:(P&&(A=A.offset(-P.value,P.unit)),h&&(A=function Z(a){if(!a)return a;const{start:u,end:d}=a;return new c.A({start:null!=u?(0,_.S1)(u,-u.getTimezoneOffset(),"minutes"):u,end:null!=d?(0,_.S1)(d,-d.getTimezoneOffset(),"minutes"):d})}(A)),A.equals(d)?d:A)}s(96381)},96381:(K,R,s)=>{s.d(R,{X:()=>c});const c=Symbol("WebScene")},29459:(K,R,s)=>{s.d(R,{e:()=>H});var g,c=s(8189),L=s(31178),S=s(5605),I=s(5922),v=s(48900),_=s(85211),E=(s(3248),s(35150),s(40707),s(76576)),M=s(88766),C=s(60746),D=s(66727);let O=g=class extends D.A{constructor(b){super(b),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new g({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,c._)([(0,_.MZ)({type:[Number,String],json:{write:!0}})],O.prototype,"left",void 0),(0,c._)([(0,_.MZ)({type:[Number,String],json:{write:!0}})],O.prototype,"right",void 0),(0,c._)([(0,_.MZ)({type:[Number,String],json:{write:!0}})],O.prototype,"top",void 0),(0,c._)([(0,_.MZ)({type:[Number,String],json:{write:!0}})],O.prototype,"bottom",void 0),O=g=(0,c._)([(0,E.$)("esri.views.layers.support.ClipRect")],O);const f=O;var j=s(75644);let U=class extends D.A{constructor(b){super(b),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,c._)([(0,_.MZ)({type:[[[Number]]],json:{write:!0}})],U.prototype,"path",void 0),U=(0,c._)([(0,E.$)("esri.views.layers.support.Path")],U);const G=U;var w=s(6558);const Z=L.A.ofType({key:"type",base:null,typeMap:{rect:f,path:G,geometry:j.A}}),H=b=>{let a=class extends b{constructor(){super(...arguments),this.attached=!1,this.clips=new Z,this.highlightOptions=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){const u=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&u&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new I.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new M.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,v.wB)(()=>this.suspended,h=>{this.container&&(this.container.visible=!h)},v.pc),(0,v.wB)(()=>this.updateSuspended,h=>{this.view&&!h&&this.updateRequested&&this.view.requestUpdate()},v.pc),(0,v.wB)(()=>this.layer?.opacity??1,h=>{this.container&&(this.container.opacity=h)},v.pc),(0,v.wB)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",h=>{this.container&&(this.container.blendMode=h)},v.pc),(0,v.wB)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,h=>{this.container&&(this.container.effect=h)},v.pc),(0,v.wB)(()=>this.highlightOptions,h=>this.container.highlightOptions=h,v.pc),(0,v.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},v.pc),(0,v.wB)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:h,scaleRange:P})=>{const T=(0,w.E5)(P,h);T!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=T)},v.pc)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(h=>{h===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const u=this.view?.spatialReference;return null==u||this.supportsSpatialReference(u)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(u){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",u),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(u))):this.updateRequested=!1}hitTest(u,d){return Promise.resolve(null)}supportsSpatialReference(u){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const u=super.getSuspendInfo(),d=!this.spatialReferenceSupported;return d&&(u.spatialReferenceNotSupported=d),u}addAttachHandles(u){this.addHandles(u,"attach")}};return(0,c._)([(0,_.MZ)()],a.prototype,"attached",void 0),(0,c._)([(0,_.MZ)({type:Z,set(u){const d=(0,S.V)(u,this._get("clips"),Z);this._set("clips",d)}})],a.prototype,"clips",void 0),(0,c._)([(0,_.MZ)()],a.prototype,"container",void 0),(0,c._)([(0,_.MZ)({type:C.A})],a.prototype,"highlightOptions",void 0),(0,c._)([(0,_.MZ)()],a.prototype,"moving",void 0),(0,c._)([(0,_.MZ)({readOnly:!0})],a.prototype,"spatialReferenceSupported",null),(0,c._)([(0,_.MZ)({readOnly:!0})],a.prototype,"updateParameters",void 0),(0,c._)([(0,_.MZ)()],a.prototype,"updateRequested",void 0),(0,c._)([(0,_.MZ)()],a.prototype,"updating",null),(0,c._)([(0,_.MZ)()],a.prototype,"view",void 0),(0,c._)([(0,_.MZ)()],a.prototype,"_visibleAtCurrentScale",void 0),(0,c._)([(0,_.MZ)({readOnly:!0})],a.prototype,"visibleAtCurrentScale",null),a=(0,c._)([(0,E.$)("esri.views.2d.layers.LayerView2D")],a),a}},41474:(K,R,s)=>{s.d(R,{A:()=>O});var c=s(8189),L=s(98877),S=s(42425),I=s(3046),v=s(35150),_=s(11432),B=s(64261),m=s(85211),M=(s(3248),s(40707),s(76576)),C=s(56985),D=s(6558);let g=class extends((0,I.sA)((0,B.g)(S.A.EventedMixin(L.A)))){constructor(f){super(f),this._updatingHandles=new C.U,this.layer=null,this.parent=null}initialize(){this.when().catch(f=>{if("layerview:create-error"!==f.name){const j=this.layer&&this.layer.id||"no id",U=this.layer?.title||"no title";v.A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${U}', id: '${j}')`,f)}})}destroy(){this._updatingHandles=(0,_.pR)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(f){this._overrideIfSome("visible",f)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const f=this.view.timeExtent,j=this.layer?.visibilityTimeExtent;return!f||!j||!f.intersection(j).isEmpty}canResume(){const f=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,D.g7)(f)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const f=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(f.viewNotReady=!0),this.layer&&this.layer.loaded||(f.layerNotLoaded=!0),(0,D.g7)(this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null)&&this.visibleAtCurrentScale||(f.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(f.outsideVisibilityTimeExtent=!0),this.visible||(f.layerInvisible=!0),f}isUpdating(){return!1}};(0,c._)([(0,m.MZ)()],g.prototype,"view",void 0),(0,c._)([(0,m.MZ)()],g.prototype,"fullOpacity",null),(0,c._)([(0,m.MZ)()],g.prototype,"layer",void 0),(0,c._)([(0,m.MZ)()],g.prototype,"parent",void 0),(0,c._)([(0,m.MZ)({readOnly:!0})],g.prototype,"suspended",null),(0,c._)([(0,m.MZ)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,c._)([(0,m.MZ)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,c._)([(0,m.MZ)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,c._)([(0,m.MZ)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,c._)([(0,m.MZ)()],g.prototype,"updateSuspended",null),(0,c._)([(0,m.MZ)()],g.prototype,"visible",null),(0,c._)([(0,m.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentScale",null),(0,c._)([(0,m.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentTimeExtent",null),g=(0,c._)([(0,M.$)("esri.views.layers.LayerView")],g);const O=g},96081:(K,R,s)=>{s.d(R,{A:()=>p});var c=s(8189),L=s(35150),S=s(56492),I=s(48900),m=(s(3248),s(40707),s(5922),s(76576));const p=E=>{let M=class extends E{initialize(){this.addHandles((0,I.on)(()=>this.layer,"refresh",C=>{this.doRefresh(C.dataChanged).catch(D=>{(0,S.zf)(D)||L.A.getLogger(this).error(D)})}),"RefreshableLayerView")}};return M=(0,c._)([(0,m.$)("esri.views.layers.RefreshableLayerView")],M),M}},66727:(K,R,s)=>{s.d(R,{A:()=>p});var c=s(8189),L=s(71065),S=s(85211),B=(s(3248),s(35150),s(40707),s(76576));let m=class extends L.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,c._)([(0,S.MZ)({readOnly:!0})],m.prototype,"version",null),m=(0,c._)([(0,B.$)("esri.views.layers.support.ClipArea")],m);const p=m},75644:(K,R,s)=>{s.d(R,{A:()=>f});var D,c=s(8189),S=(s(21152),s(85211)),B=(s(3248),s(35150),s(40707),s(76576)),m=s(68643),p=s(61320),E=s(66727),M=s(28067),C=s(55861);const g={base:m.A,key:"type",typeMap:{extent:M.A,polygon:C.A}};let O=D=class extends E.A{constructor(j){super(j),this.type="geometry",this.geometry=null}clone(){return new D({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,c._)([(0,S.MZ)({types:g,json:{read:p.rS,write:!0}})],O.prototype,"geometry",void 0),O=D=(0,c._)([(0,B.$)("esri.views.layers.support.Geometry")],O);const f=O},6558:(K,R,s)=>{function c(p){return p&&"function"==typeof p.highlight}function I(p,E){if(E&&p){const{minScale:M,maxScale:C}=p;if(function v(p,E){return null!=p&&p>0||null!=E&&E>0}(M,C))return function S(p,E,M){return null==p||p>=M&&(0===E||p<=E)}(E,M,C)}return!0}function _(p){return!p?.minScale||!p.maxScale||p.minScale>=p.maxScale}s.d(R,{E5:()=>I,Of:()=>c,g7:()=>_})}}]);