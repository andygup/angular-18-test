"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[2758],{92782:(St,Et,K)=>{K.d(Et,{J:()=>Ct});var mt,G,it,W=K(93293),vt={exports:{}};mt=vt,void 0!==(it=function(){function r(dt){this.message="JPEG error: "+dt}return(r.prototype=new Error).name="JpegError",r.constructor=r,r}(),G=function(){if(!self||!self.Uint8ClampedArray)return null;var r=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dt=4017,q=799,nt=3406,H=2276,at=1567,B=3784,J=5793,Z=2896;function Y(){this.decodeTransform=null,this.colorTransform=-1}function st(c,i){for(var h,t,e=0,o=[],n=16;n>0&&!c[n-1];)n--;o.push({children:[],index:0});var y,p=o[0];for(h=0;h<n;h++){for(t=0;t<c[h];t++){for((p=o.pop()).children[p.index]=i[e];p.index>0;)p=o.pop();for(p.index++,o.push(p);o.length<=h;)o.push(y={children:[],index:0}),p.children[p.index]=y.children,p=y;e++}h+1<n&&(o.push(y={children:[],index:0}),p.children[p.index]=y.children,p=y)}return o[0].children}function Q(c,i,h){return 64*((c.blocksPerLine+1)*i+h)}function _(c,i,h,t,e,o,n,y,p){var x=h.mcusPerLine,O=i,M=0,N=0;function k(){if(N>0)return N--,M>>N&1;if(255===(M=c[i++])){var j=c[i++];if(j)throw new it("unexpected marker "+(M<<8|j).toString(16))}return N=7,M>>>7}function m(j){for(var L=j;;){if("number"==typeof(L=L[k()]))return L;if("object"!=typeof L)throw new it("invalid huffman sequence")}}function S(j){for(var L=0;j>0;)L=L<<1|k(),j--;return L}function V(j){if(1===j)return 1===k()?1:-1;var L=S(j);return L>=1<<j-1?L:L+(-1<<j)+1}var P,w=0,F=0;function g(j,L,z,et,ot){L(j,Q(j,(z/x|0)*j.v+et,z%x*j.h+ot))}var u,d,b,C,E,D,U=t.length;D=h.progressive?0===o?0===y?function v(j,L){var z=m(j.huffmanTableDC),et=0===z?0:V(z)<<p;j.blockData[L]=j.pred+=et}:function l(j,L){j.blockData[L]|=k()<<p}:0===y?function A(j,L){if(w>0)w--;else for(var z=o,et=n;z<=et;){var ot=m(j.huffmanTableAC),ht=15&ot,ft=ot>>4;if(0!==ht){var pt=r[z+=ft];j.blockData[L+pt]=V(ht)*(1<<p),z++}else{if(ft<15){w=S(ft)+(1<<ft)-1;break}z+=16}}}:function ut(j,L){for(var z,et,ot=o,ht=n,ft=0;ot<=ht;){var pt=r[ot];switch(F){case 0:if(ft=(et=m(j.huffmanTableAC))>>4,0==(z=15&et))ft<15?(w=S(ft)+(1<<ft),F=4):(ft=16,F=1);else{if(1!==z)throw new it("invalid ACn encoding");P=V(z),F=ft?2:3}continue;case 1:case 2:j.blockData[L+pt]?j.blockData[L+pt]+=k()<<p:0==--ft&&(F=2===F?3:0);break;case 3:j.blockData[L+pt]?j.blockData[L+pt]+=k()<<p:(j.blockData[L+pt]=P<<p,F=0);break;case 4:j.blockData[L+pt]&&(j.blockData[L+pt]+=k()<<p)}ot++}4===F&&0==--w&&(F=0)}:function X(j,L){var z=m(j.huffmanTableDC),et=0===z?0:V(z);j.blockData[L]=j.pred+=et;for(var ot=1;ot<64;){var ht=m(j.huffmanTableAC),ft=15&ht,pt=ht>>4;if(0!==ft){var wt=r[ot+=pt];j.blockData[L+wt]=V(ft),ot++}else{if(pt<15)break;ot+=16}}};var I,tt,lt,gt,j,z,rt=0;for(tt=1===U?t[0].blocksPerLine*t[0].blocksPerColumn:x*h.mcusPerColumn;rt<tt;){var $=e?Math.min(tt-rt,e):tt;for(d=0;d<U;d++)t[d].pred=0;if(w=0,1===U)for(u=t[0],E=0;E<$;E++)D(j=u,Q(j,(z=rt)/j.blocksPerLine|0,z%j.blocksPerLine)),rt++;else for(E=0;E<$;E++){for(d=0;d<U;d++)for(lt=(u=t[d]).h,gt=u.v,b=0;b<gt;b++)for(C=0;C<lt;C++)g(u,D,rt,b,C);rt++}N=0,(I=f(c,i))&&I.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+I.invalid),i=I.offset);var ct=I&&I.marker;if(!ct||ct<=65280)throw new it("marker was not found");if(!(ct>=65488&&ct<=65495))break;i+=2}return(I=f(c,i))&&I.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+I.invalid),i=I.offset),i-O}function R(c,i,h){var t,e,o,n,y,p,x,T,O,M,N,k,m,S,V,X,v,l=c.quantizationTable,w=c.blockData;if(!l)throw new it("missing required Quantization Table.");for(var A=0;A<64;A+=8)O=w[i+A],O*=l[A],(M=w[i+A+1])|(N=w[i+A+2])|(k=w[i+A+3])|(m=w[i+A+4])|(S=w[i+A+5])|(V=w[i+A+6])|(X=w[i+A+7])?(e=(t=(t=J*O+128>>8)+(e=J*(m*=l[A+4])+128>>8)+1>>1)-e,v=(o=N*=l[A+2])*B+(n=V*=l[A+6])*at+128>>8,o=o*at-n*B+128>>8,x=(y=(y=Z*((M*=l[A+1])-(X*=l[A+7]))+128>>8)+(x=(S*=l[A+5])<<4)+1>>1)-x,p=(T=(T=Z*(M+X)+128>>8)+(p=(k*=l[A+3])<<4)+1>>1)-p,n=(t=t+(n=v)+1>>1)-n,o=(e=e+o+1>>1)-o,v=y*H+T*nt+2048>>12,y=y*nt-T*H+2048>>12,T=v,v=p*q+x*dt+2048>>12,p=p*dt-x*q+2048>>12,x=v,h[A]=t+T,h[A+7]=t-T,h[A+1]=e+x,h[A+6]=e-x,h[A+2]=o+p,h[A+5]=o-p,h[A+3]=n+y,h[A+4]=n-y):(h[A]=v=J*O+512>>10,h[A+1]=v,h[A+2]=v,h[A+3]=v,h[A+4]=v,h[A+5]=v,h[A+6]=v,h[A+7]=v);for(var P=0;P<8;++P)O=h[P],(M=h[P+8])|(N=h[P+16])|(k=h[P+24])|(m=h[P+32])|(S=h[P+40])|(V=h[P+48])|(X=h[P+56])?(e=(t=4112+((t=J*O+2048>>12)+(e=J*m+2048>>12)+1>>1))-e,v=(o=N)*B+(n=V)*at+2048>>12,o=o*at-n*B+2048>>12,n=v,x=(y=(y=Z*(M-X)+2048>>12)+(x=S)+1>>1)-x,p=(T=(T=Z*(M+X)+2048>>12)+(p=k)+1>>1)-p,v=y*H+T*nt+2048>>12,y=y*nt-T*H+2048>>12,T=v,v=p*q+x*dt+2048>>12,p=p*dt-x*q+2048>>12,O=(O=(t=t+n+1>>1)+T)<16?0:O>=4080?255:O>>4,M=(M=(e=e+o+1>>1)+(x=v))<16?0:M>=4080?255:M>>4,N=(N=(o=e-o)+p)<16?0:N>=4080?255:N>>4,k=(k=(n=t-n)+y)<16?0:k>=4080?255:k>>4,m=(m=n-y)<16?0:m>=4080?255:m>>4,S=(S=o-p)<16?0:S>=4080?255:S>>4,V=(V=e-x)<16?0:V>=4080?255:V>>4,X=(X=t-T)<16?0:X>=4080?255:X>>4,w[i+P]=O,w[i+P+8]=M,w[i+P+16]=N,w[i+P+24]=k,w[i+P+32]=m,w[i+P+40]=S,w[i+P+48]=V,w[i+P+56]=X):(v=(v=J*O+8192>>14)<-2040?0:v>=2024?255:v+2056>>4,w[i+P]=v,w[i+P+8]=v,w[i+P+16]=v,w[i+P+24]=v,w[i+P+32]=v,w[i+P+40]=v,w[i+P+48]=v,w[i+P+56]=v)}function s(c,i){for(var h=i.blocksPerLine,t=i.blocksPerColumn,e=new Int16Array(64),o=0;o<t;o++)for(var n=0;n<h;n++)R(i,Q(i,o,n),e);return i.blockData}function f(c,i,h){function t(p){return c[p]<<8|c[p+1]}var e=c.length-1,o=h<i?h:i;if(i>=e)return null;var n=t(i);if(n>=65472&&n<=65534)return{invalid:null,marker:n,offset:i};for(var y=t(o);!(y>=65472&&y<=65534);){if(++o>=e)return null;y=t(o)}return{invalid:n.toString(16),marker:y,offset:o}}return Y.prototype={parse:function(c){function i(){var j=c[n]<<8|c[n+1];return n+=2,j}function h(){var j=i(),L=n+j-2,z=f(c,L,n);z&&z.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+z.invalid),L=z.offset);var et=c.subarray(n,L);return n+=et.length,et}function t(j){for(var L=Math.ceil(j.samplesPerLine/8/j.maxH),z=Math.ceil(j.scanLines/8/j.maxV),et=0;et<j.components.length;et++){E=j.components[et];var ot=Math.ceil(Math.ceil(j.samplesPerLine/8)*E.h/j.maxH),ht=Math.ceil(Math.ceil(j.scanLines/8)*E.v/j.maxV);E.blockData=new Int16Array(z*E.v*64*(L*E.h+1)),E.blocksPerLine=ot,E.blocksPerColumn=ht}j.mcusPerLine=L,j.mcusPerColumn=z}var e,o,n=0,y=null,p=null,x=[],T=[],O=[],M=i();if(65496!==M)throw new it("SOI not found");for(M=i();65497!==M;){var N,k,m;switch(M){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var S=h();65504===M&&74===S[0]&&70===S[1]&&73===S[2]&&70===S[3]&&0===S[4]&&(y={version:{major:S[5],minor:S[6]},densityUnits:S[7],xDensity:S[8]<<8|S[9],yDensity:S[10]<<8|S[11],thumbWidth:S[12],thumbHeight:S[13],thumbData:S.subarray(14,14+3*S[12]*S[13])}),65518===M&&65===S[0]&&100===S[1]&&111===S[2]&&98===S[3]&&101===S[4]&&(p={version:S[5]<<8|S[6],flags0:S[7]<<8|S[8],flags1:S[9]<<8|S[10],transformCode:S[11]});break;case 65499:for(var V=i()+n-2;n<V;){var X=c[n++],v=new Uint16Array(64);if(X>>4){if(X>>4!=1)throw new it("DQT - invalid table spec");for(k=0;k<64;k++)v[r[k]]=i()}else for(k=0;k<64;k++)v[r[k]]=c[n++];x[15&X]=v}break;case 65472:case 65473:case 65474:if(e)throw new it("Only single frame JPEGs supported");i(),(e={}).extended=65473===M,e.progressive=65474===M,e.precision=c[n++],e.scanLines=i(),e.samplesPerLine=i(),e.components=[],e.componentIds={};var l,w=c[n++],A=0,P=0;for(N=0;N<w;N++){l=c[n];var F=c[n+1]>>4,ut=15&c[n+1];A<F&&(A=F),P<ut&&(P=ut),m=e.components.push({h:F,v:ut,quantizationId:c[n+2],quantizationTable:null}),e.componentIds[l]=m-1,n+=3}e.maxH=A,e.maxV=P,t(e);break;case 65476:var a=i();for(N=2;N<a;){var u=c[n++],d=new Uint8Array(16),b=0;for(k=0;k<16;k++,n++)b+=d[k]=c[n];var C=new Uint8Array(b);for(k=0;k<b;k++,n++)C[k]=c[n];N+=17+b,(u>>4?T:O)[15&u]=st(d,C)}break;case 65501:i(),o=i();break;case 65498:i();var E,D=c[n++],U=[];for(N=0;N<D;N++){var I=e.componentIds[c[n++]],tt=c[n++];(E=e.components[I]).huffmanTableDC=O[tt>>4],E.huffmanTableAC=T[15&tt],U.push(E)}var lt=c[n++],gt=c[n++],rt=c[n++],$=_(c,n,e,U,o,lt,gt,rt>>4,15&rt);n+=$;break;case 65535:255!==c[n]&&n--;break;default:if(255===c[n-3]&&c[n-2]>=192&&c[n-2]<=254){n-=3;break}throw new it("unknown marker "+M.toString(16))}M=i()}for(this.width=e.samplesPerLine,this.height=e.scanLines,this.jfif=y,this.eof=n,this.adobe=p,this.components=[],N=0;N<e.components.length;N++){var ct=x[(E=e.components[N]).quantizationId];ct&&(E.quantizationTable=ct),this.components.push({output:s(0,E),scaleX:E.h/e.maxH,scaleY:E.v/e.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(c,i){var h,t,e,o,n,y,p,x,T,O,M,N=this.width/c,k=this.height/i,m=0,S=this.components.length,V=c*i*S,X=new Uint8ClampedArray(V),v=new Uint32Array(c),l=4294967288;for(p=0;p<S;p++){for(t=(h=this.components[p]).scaleX*N,e=h.scaleY*k,m=p,M=h.output,o=h.blocksPerLine+1<<3,n=0;n<c;n++)v[n]=((x=0|n*t)&l)<<3|7&x;for(y=0;y<i;y++)for(O=o*((x=0|y*e)&l)|(7&x)<<3,n=0;n<c;n++)X[m]=M[O+v[n]],m+=S}var w=this.decodeTransform;if(w)for(p=0;p<V;)for(x=0,T=0;x<S;x++,p++,T+=2)X[p]=(X[p]*w[T]>>8)+w[T+1];return X},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(c){for(var i,h,t,e=0,o=c.length;e<o;e+=3)h=c[e+1],c[e]=(i=c[e])-179.456+1.402*(t=c[e+2]),c[e+1]=i+135.459-.344*h-.714*t,c[e+2]=i-226.816+1.772*h;return c},_convertYcckToRgb:function(c){for(var i,h,t,e,o=0,n=0,y=c.length;n<y;n+=4)c[o++]=(h=c[n+1])*(-660635669420364e-19*h+.000437130475926232*(t=c[n+2])-54080610064599e-18*(i=c[n])+.00048449797120281*(e=c[n+3])-.154362151871126)-122.67195406894+t*(-.000957964378445773*t+.000817076911346625*i-.00477271405408747*e+1.53380253221734)+i*(.000961250184130688*i-.00266257332283933*e+.48357088451265)+e*(-.000336197177618394*e+.484791561490776),c[o++]=107.268039397724+h*(219927104525741e-19*h-.000640992018297945*t+.000659397001245577*i+.000426105652938837*e-.176491792462875)+t*(-.000778269941513683*t+.00130872261408275*i+.000770482631801132*e-.151051492775562)+i*(.00126935368114843*i-.00265090189010898*e+.25802910206845)+e*(-.000318913117588328*e-.213742400323665),c[o++]=h*(-.000570115196973677*h-263409051004589e-19*t+.0020741088115012*i-.00288260236853442*e+.814272968359295)-20.810012546947+t*(-153496057440975e-19*t-.000132689043961446*i+.000560833691242812*e-.195152027534049)+i*(.00174418132927582*i-.00255243321439347*e+.116935020465145)+e*(-.000343531996510555*e+.24165260232407);return c},_convertYcckToCmyk:function(c){for(var i,h,t,e=0,o=c.length;e<o;e+=4)h=c[e+1],c[e]=434.456-(i=c[e])-1.402*(t=c[e+2]),c[e+1]=119.541-i+.344*h+.714*t,c[e+2]=481.816-i-1.772*h;return c},_convertCmykToRgb:function(c){for(var i,h,t,e,o=0,n=1/255,y=0,p=c.length;y<p;y+=4)c[o++]=255+(i=c[y]*n)*(-4.387332384609988*i+54.48615194189176*(h=c[y+1]*n)+18.82290502165302*(t=c[y+2]*n)+212.25662451639585*(e=c[y+3]*n)-285.2331026137004)+h*(1.7149763477362134*h-5.6096736904047315*t-17.873870861415444*e-5.497006427196366)+t*(-2.5217340131683033*t-21.248923337353073*e+17.5119270841813)-e*(21.86122147463605*e+189.48180835922747),c[o++]=255+i*(8.841041422036149*i+60.118027045597366*h+6.871425592049007*t+31.159100130055922*e-79.2970844816548)+h*(-15.310361306967817*h+17.575251261109482*t+131.35250912493976*e-190.9453302588951)+t*(4.444339102852739*t+9.8632861493405*e-24.86741582555878)-e*(20.737325471181034*e+187.80453709719578),c[o++]=255+i*(.8842522430003296*i+8.078677503112928*h+30.89978309703729*t-.23883238689178934*e-14.183576799673286)+h*(10.49593273432072*h+63.02378494754052*t+50.606957656360734*e-112.23884253719248)+t*(.03296041114873217*t+115.60384449646641*e-193.58209356861505)-e*(22.33816807309886*e+180.12613974708367);return c},getData:function(c,i,h){if(this.numComponents>4)throw new it("Unsupported color mode");var t=this._getLinearizedBlockData(c,i);if(1===this.numComponents&&h){for(var e=t.length,o=new Uint8ClampedArray(3*e),n=0,y=0;y<e;y++){var p=t[y];o[n++]=p,o[n++]=p,o[n++]=p}return o}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(t);if(4===this.numComponents){if(this._isColorConversionNeeded())return h?this._convertYcckToRgb(t):this._convertYcckToCmyk(t);if(h)return this._convertCmykToRgb(t)}return t}},Y}())&&(mt.exports=G);const Ct=(0,W.g)(vt.exports)},97244:(St,Et,K)=>{K.d(Et,{Z:()=>Ct});var mt,yt,G,W=K(93293),vt={exports:{}};yt=vt,mt=function(){function it(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return it.prototype={ensureBuffer:function(r){var dt=this.buffer,q=dt?dt.byteLength:0;if(r<q)return dt;for(var nt=512;nt<r;)nt<<=1;for(var H=new Uint8Array(nt),at=0;at<q;++at)H[at]=dt[at];return this.buffer=H},getByte:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(r){var dt=this.pos;if(r){this.ensureBuffer(dt+r);for(var q=dt+r;!this.eof&&this.bufferLength<q;)this.readBlock();var nt=this.bufferLength;q>nt&&(q=nt)}else{for(;!this.eof;)this.readBlock();q=this.bufferLength}return this.pos=q,this.buffer.subarray(dt,q)},lookChar:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(r,dt,q){for(var nt=r+dt;this.bufferLength<=nt&&!this.eof;)this.readBlock();return new Stream(this.buffer,r,dt,q)},skip:function(r){r||(r=1),this.pos+=r},reset:function(){this.pos=0}},it}(),void 0!==(G=function(){if(!self||!self.Uint32Array)return null;var it=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),dt=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),q=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],nt=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function H(B){throw new Error(B)}function at(B){var J=0,Z=B[J++],Y=B[J++];-1!=Z&&-1!=Y||H("Invalid header in flate stream"),8!=(15&Z)&&H("Unknown compression method in flate stream"),((Z<<8)+Y)%31!=0&&H("Bad FCHECK in flate stream"),32&Y&&H("FDICT bit set in flate stream"),this.bytes=B,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,mt.call(this)}return(at.prototype=Object.create(mt.prototype)).getBits=function(B){for(var J,Z=this.codeSize,Y=this.codeBuf,st=this.bytes,Q=this.bytesPos;Z<B;)void 0===(J=st[Q++])&&H("Bad encoding in flate stream"),Y|=J<<Z,Z+=8;return J=Y&(1<<B)-1,this.codeBuf=Y>>B,this.codeSize=Z-=B,this.bytesPos=Q,J},at.prototype.getCode=function(B){for(var J=B[0],Z=B[1],Y=this.codeSize,st=this.codeBuf,Q=this.bytes,_=this.bytesPos;Y<Z;){var R;void 0===(R=Q[_++])&&H("Bad encoding in flate stream"),st|=R<<Y,Y+=8}var s=J[st&(1<<Z)-1],f=s>>16,c=65535&s;return(0==Y||Y<f||0==f)&&H("Bad encoding in flate stream"),this.codeBuf=st>>f,this.codeSize=Y-f,this.bytesPos=_,c},at.prototype.generateHuffmanTable=function(B){for(var J=B.length,Z=0,Y=0;Y<J;++Y)B[Y]>Z&&(Z=B[Y]);for(var st=1<<Z,Q=new Uint32Array(st),_=1,R=0,s=2;_<=Z;++_,R<<=1,s<<=1)for(var f=0;f<J;++f)if(B[f]==_){var c=0,i=R;for(Y=0;Y<_;++Y)c=c<<1|1&i,i>>=1;for(Y=c;Y<st;Y+=s)Q[Y]=_<<16|f;++R}return[Q,Z]},at.prototype.readBlock=function(){function B(v,l,w,A,P){for(var F=v.getBits(w)+A;F-- >0;)l[s++]=P}var J=this.getBits(3);if(1&J&&(this.eof=!0),0!=(J>>=1)){var Z,Y;if(1==J)Z=q,Y=nt;else if(2==J){for(var st=this.getBits(5)+257,Q=this.getBits(5)+1,_=this.getBits(4)+4,R=Array(it.length),s=0;s<_;)R[it[s++]]=this.getBits(3);for(var f=this.generateHuffmanTable(R),c=0,i=(s=0,st+Q),h=new Array(i);s<i;){var t=this.getCode(f);16==t?B(this,h,2,3,c):17==t?B(this,h,3,3,c=0):18==t?B(this,h,7,11,c=0):h[s++]=c=t}Z=this.generateHuffmanTable(h.slice(0,st)),Y=this.generateHuffmanTable(h.slice(st,i))}else H("Unknown block type in flate stream");for(var e=(S=this.buffer)?S.length:0,o=this.bufferLength;;){var n=this.getCode(Z);if(n<256)o+1>=e&&(e=(S=this.ensureBuffer(o+1)).length),S[o++]=n;else{if(256==n)return void(this.bufferLength=o);var y=(n=r[n-=257])>>16;y>0&&(y=this.getBits(y)),c=(65535&n)+y,n=this.getCode(Y),(y=(n=dt[n])>>16)>0&&(y=this.getBits(y));var p=(65535&n)+y;o+c>=e&&(e=(S=this.ensureBuffer(o+c)).length);for(var x=0;x<c;++x,++o)S[o]=S[o-p]}}}else{var T,O=this.bytes,M=this.bytesPos;void 0===(T=O[M++])&&H("Bad block header in flate stream");var N=T;void 0===(T=O[M++])&&H("Bad block header in flate stream"),N|=T<<8,void 0===(T=O[M++])&&H("Bad block header in flate stream");var k=T;void 0===(T=O[M++])&&H("Bad block header in flate stream"),(k|=T<<8)!=(65535&~N)&&H("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var m=this.bufferLength,S=this.ensureBuffer(m+N),V=m+N;this.bufferLength=V;for(var X=m;X<V;++X){if(void 0===(T=O[M++])){this.eof=!0;break}S[X]=T}this.bytesPos=M}},at}())&&(yt.exports=G);const Ct=(0,W.g)(vt.exports)},83179:(St,Et,K)=>{K.d(Et,{A:()=>c});var nt,W=K(8189),mt=K(71065),yt=K(77806),G=K(85211),it=(K(3248),K(35150),K(76576)),r=K(28067),dt=K(32034);function H(i){return i=Number(i),isNaN(i)?void 0:i}K(40707);let at=nt=class extends mt.oY{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new nt({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};(0,W._)([(0,G.MZ)({json:{name:"BandName",write:!0}})],at.prototype,"name",void 0),(0,W._)([(0,G.MZ)({json:{name:"WavelengthMin",read:{reader:H},write:!0}})],at.prototype,"minWavelength",void 0),(0,W._)([(0,G.MZ)({json:{name:"WavelengthMax",read:{reader:H},write:!0}})],at.prototype,"maxWavelength",void 0),(0,W._)([(0,G.MZ)({json:{name:"RadianceBias",read:{reader:H},write:!0}})],at.prototype,"radianceBias",void 0),(0,W._)([(0,G.MZ)({json:{name:"RadianceGain",read:{reader:H},write:!0}})],at.prototype,"radianceGain",void 0),(0,W._)([(0,G.MZ)({json:{name:"ReflectanceBias",read:{reader:H},write:!0}})],at.prototype,"reflectanceBias",void 0),(0,W._)([(0,G.MZ)({json:{name:"ReflectanceGain",read:{reader:H},write:!0}})],at.prototype,"reflectanceGain",void 0),(0,W._)([(0,G.MZ)({json:{name:"SolarIrradiance",read:{reader:H},write:!0}})],at.prototype,"solarIrradiance",void 0),at=nt=(0,W._)([(0,it.$)("esri.layers.support.RasterBandInfo")],at);const B=at;var Y,J=K(17221),Z=K(50305);function st(i){return i=Number(i),isNaN(i)?void 0:i}let Q=Y=class extends mt.oY{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(i){return new Date(i)}writeAcquisitionDate(i,h){h.AcquisitionDate=i.getTime()}clone(){return new Y({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};(0,W._)([(0,G.MZ)({json:{name:"AcquisitionDate",write:!0}})],Q.prototype,"acquisitionDate",void 0),(0,W._)([(0,J.w)("acquisitionDate")],Q.prototype,"readAcquisitionDate",null),(0,W._)([(0,Z.K)("acquisitionDate")],Q.prototype,"writeAcquisitionDate",null),(0,W._)([(0,G.MZ)({json:{name:"CloudCover",read:{reader:st},write:!0}})],Q.prototype,"cloudCover",void 0),(0,W._)([(0,G.MZ)({json:{name:"ProductName",write:!0}})],Q.prototype,"productName",void 0),(0,W._)([(0,G.MZ)({json:{name:"SensorName",write:!0}})],Q.prototype,"sensorName",void 0),(0,W._)([(0,G.MZ)({json:{name:"SensorAzimuth",read:{reader:st},write:!0}})],Q.prototype,"sensorAzimuth",void 0),(0,W._)([(0,G.MZ)({json:{name:"SensorElevation",read:{reader:st},write:!0}})],Q.prototype,"sensorElevation",void 0),(0,W._)([(0,G.MZ)({json:{name:"SunAzimuth",read:{reader:st},write:!0}})],Q.prototype,"sunAzimuth",void 0),(0,W._)([(0,G.MZ)({json:{name:"SunElevation",read:{reader:st},write:!0}})],Q.prototype,"sunElevation",void 0),Q=Y=(0,W._)([(0,it.$)("esri.layers.support.RasterSensorInfo")],Q);const _=Q;var s,R=K(61599);let f=s=class extends mt.oY{constructor(i){super(i),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const i=this.keyProperties.BandProperties,{bandCount:h}=this;if(!i?.length||i.length<h){const e=[];for(let o=1;o<=h;o++)e.push(new B({name:"band_"+o}));return e}const t=i.map(e=>B.fromJSON(e));for(let e=0;e<t.length;e++)t[e].name=t[e].name||"band_"+(e+1);return t}get dataType(){const i=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===i?"standard-time":i}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(i){i&&this._set("nativeExtent",i)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const i=this.nativeExtent;return{x:i.width/this.width,y:i.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return _.fromJSON(this.keyProperties)}clone(){return new s({attributeTable:(0,yt.o8)(this.attributeTable),bandCount:this.bandCount,colormap:(0,yt.o8)(this.colormap),extent:(0,yt.o8)(this.extent),format:this.format,height:this.height,width:this.width,histograms:(0,yt.o8)(this.histograms),keyProperties:(0,yt.o8)(this.keyProperties),multidimensionalInfo:(0,yt.o8)(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:(0,yt.o8)(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:(0,yt.o8)(this.spatialReference),statistics:(0,yt.o8)(this.statistics),storageInfo:(0,yt.o8)(this.storageInfo),transform:(0,yt.o8)(this.transform)})}};(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"attributeTable",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"bandCount",void 0),(0,W._)([(0,G.MZ)({readOnly:!0})],f.prototype,"bandInfos",null),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"colormap",void 0),(0,W._)([(0,G.MZ)({type:String,readOnly:!0})],f.prototype,"dataType",null),(0,W._)([(0,G.MZ)({type:r.A,json:{write:!0}})],f.prototype,"extent",void 0),(0,W._)([(0,G.MZ)({type:r.A,json:{write:!0}})],f.prototype,"nativeExtent",null),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"nativePixelSize",null),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"format",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"height",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"width",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"hasMultidimensionalTranspose",null),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"histograms",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"keyProperties",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"multidimensionalInfo",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"noDataValue",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"pixelSize",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"pixelType",void 0),(0,W._)([(0,G.MZ)()],f.prototype,"isPseudoSpatialReference",void 0),(0,W._)([(0,G.MZ)({readOnly:!0})],f.prototype,"sensorInfo",null),(0,W._)([(0,G.MZ)({type:dt.A,json:{write:!0}})],f.prototype,"spatialReference",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"statistics",void 0),(0,W._)([(0,G.MZ)({type:R.A,json:{write:!0}})],f.prototype,"storageInfo",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],f.prototype,"transform",void 0),f=s=(0,W._)([(0,it.$)("esri.layers.support.RasterInfo")],f);const c=f},61599:(St,Et,K)=>{K.d(Et,{A:()=>nt});var dt,W=K(8189),mt=K(71065),yt=K(77806),G=K(85211),it=(K(3248),K(35150),K(76576)),r=K(1749);let q=dt=class extends mt.oY{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new dt({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:(0,yt.o8)(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:(0,yt.o8)(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:(0,yt.o8)(this.tileInfo),transposeInfo:(0,yt.o8)(this.transposeInfo),blockBoundary:(0,yt.o8)(this.blockBoundary)})}};(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"blockWidth",void 0),(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"blockHeight",void 0),(0,W._)([(0,G.MZ)({type:String,json:{write:!0}})],q.prototype,"compression",void 0),(0,W._)([(0,G.MZ)({type:r.A,json:{write:!0}})],q.prototype,"origin",void 0),(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"firstPyramidLevel",void 0),(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"maximumPyramidLevel",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],q.prototype,"pyramidResolutions",void 0),(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"pyramidScalingFactor",void 0),(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"pyramidBlockWidth",void 0),(0,W._)([(0,G.MZ)({type:Number,json:{write:!0}})],q.prototype,"pyramidBlockHeight",void 0),(0,W._)([(0,G.MZ)({type:Boolean,json:{write:!0}})],q.prototype,"isVirtualTileInfo",void 0),(0,W._)([(0,G.MZ)({json:{write:!0}})],q.prototype,"tileInfo",void 0),(0,W._)([(0,G.MZ)()],q.prototype,"transposeInfo",void 0),(0,W._)([(0,G.MZ)()],q.prototype,"blockBoundary",void 0),q=dt=(0,W._)([(0,it.$)("esri.layers.support.RasterStorageInfo")],q);const nt=q},38497:(St,Et,K)=>{function W(mt,yt){let G=0,vt="",Ct=0,it=0;const r=mt.length;for(;G<r;)it=mt[G++],Ct=it>>4,Ct<8?Ct=1:15===Ct?(Ct=4,it=(7&it)<<18|(63&mt[G++])<<12|(63&mt[G++])<<6|63&mt[G++]):14===Ct?(Ct=3,it=(15&it)<<12|(63&mt[G++])<<6|63&mt[G++]):(Ct=2,it=(31&it)<<6|63&mt[G++]),(0!==it||yt)&&(vt+=String.fromCharCode(it));return vt}K.d(Et,{w:()=>W})},7957:(St,Et,K)=>{K.d(Et,{D4:()=>q,Hh:()=>G});var W=K(90261);const mt=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let yt=null;function G(){return yt||(yt=K.e(5310).then(K.bind(K,35310)).then(H=>H.l).then(({default:H})=>H({locateFile:at=>(0,W.s)(`esri/layers/support/rasterFormats/${at}`)})).then(H=>{!function r(H){const{_malloc:at,_free:B,_lerc_getBlobInfo:J,_lerc_getDataRanges:Z,_lerc_decode_4D:Y,asm:st}=H;let Q;const _=Object.values(st).find(s=>s&&"buffer"in s&&s.buffer===H.HEAPU8.buffer),R=s=>{const f=s.map(t=>function Ct(H){return 16+(H>>3<<3)}(t)),c=f.reduce((t,e)=>t+e),i=at(c);Q=new Uint8Array(_.buffer);let h=f[0];f[0]=i;for(let t=1;t<f.length;t++){const e=f[t];f[t]=f[t-1]+h,h=e}return f};vt.getBlobInfo=s=>{const i=new Uint8Array(48),h=new Uint8Array(24),[t,e,o]=R([s.length,i.length,h.length]);Q.set(s,t),Q.set(i,e),Q.set(h,o);let n=J(t,s.length,e,o,12,3);if(n)throw B(t),new Error(`lerc-getBlobInfo: error code is ${n}`);Q=new Uint8Array(_.buffer),it(Q,e,i),it(Q,o,h);const y=new Uint32Array(i.buffer),p=new Float64Array(h.buffer),[x,T,,O,M,N,k,m,S,V,X]=y,v={version:x,depthCount:V,width:O,height:M,validPixelCount:k,bandCount:N,blobSize:m,maskCount:S,dataType:T,minValue:p[0],maxValue:p[1],maxZerror:p[2],statistics:[],bandCountWithNoData:X};if(X&&V>1)return B(t),v;if(1===V&&1===N)return B(t),v.statistics.push({minValue:p[0],maxValue:p[1]}),v;const l=V*N*8,w=new Uint8Array(l),A=new Uint8Array(l);let P=t,F=0,ut=0,g=!1;if(Q.byteLength<t+2*l?(B(t),g=!0,[P,F,ut]=R([s.length,l,l]),Q.set(s,P)):[F,ut]=R([l,l]),Q.set(w,F),Q.set(A,ut),n=Z(P,s.length,V,N,F,ut),n)throw B(P),g||B(F),new Error(`lerc-getDataRanges: error code is ${n}`);Q=new Uint8Array(_.buffer),it(Q,F,w),it(Q,ut,A);const a=new Float64Array(w.buffer),u=new Float64Array(A.buffer),d=v.statistics;for(let b=0;b<N;b++)if(V>1){const C=a.slice(b*V,(b+1)*V),E=u.slice(b*V,(b+1)*V),D=Math.min.apply(null,C),U=Math.max.apply(null,E);d.push({minValue:D,maxValue:U,depthStats:{minValues:C,maxValues:E}})}else d.push({minValue:a[b],maxValue:u[b]});return B(P),g||B(F),v},vt.decode=(s,f)=>{const{maskCount:c,depthCount:i,bandCount:h,width:t,height:e,dataType:o,bandCountWithNoData:n}=f,y=mt[o],p=t*e,x=new Uint8Array(p*h),O=new Uint8Array(p*i*h*y.size),M=new Uint8Array(h),N=new Uint8Array(8*h),[k,m,S,V,X]=R([s.length,x.length,O.length,M.length,N.length]);Q.set(s,k),Q.set(x,m),Q.set(O,S),Q.set(M,V),Q.set(N,X);const v=Y(k,s.length,c,m,i,t,e,h,o,S,V,X);if(v)throw B(k),new Error(`lerc-decode: error code is ${v}`);Q=new Uint8Array(_.buffer),it(Q,S,O),it(Q,m,x);let l=null;if(n){it(Q,V,M),it(Q,X,N),l=[];const w=new Float64Array(N.buffer);for(let A=0;A<M.length;A++)l.push(M[A]?w[A]:null)}return B(k),{data:O,maskData:x,noDataValues:l}}}(H)}),yt)}const vt={getBlobInfo:null,decode:null};function it(H,at,B){B.set(H.slice(at,at+B.length))}function dt(H,at,B,J,Z){if(B<2)return H;const Y=new J(at*B);for(let st=0,Q=0;st<at;st++)for(let _=0,R=st;_<B;_++,R+=at)Y[R]=H[Q++];return Y}function q(H,at={}){const B=at.inputOffset??0,J=H instanceof Uint8Array?H.subarray(B):new Uint8Array(H,B),Z=vt.getBlobInfo(J),{data:Y,maskData:st,noDataValues:Q}=vt.decode(J,Z),{width:_,height:R,bandCount:s,depthCount:f,dataType:c,maskCount:i,statistics:h}=Z,t=mt[c],e=new t.ctor(Y.buffer),o=[],n=[],y=_*R,p=y*f;for(let k=0;k<s;k++){const m=e.subarray(k*p,(k+1)*p);if(at.returnInterleaved)o.push(m);else{const S=dt(m,y,f,t.ctor);o.push(S)}n.push(st.subarray(k*p,(k+1)*p))}const x=0===i?null:1===i?n[0]:new Uint8Array(y);if(i>1){x.set(n[0]);for(let k=1;k<n.length;k++){const m=n[k];for(let S=0;S<y;S++)x[S]=x[S]&m[S]}}const{noDataValue:T}=at;if(i>0&&null!=T&&t.range[0]<=T&&t.range[1]>=T)for(let k=0;k<s;k++){const m=o[k],S=n[k]||x;for(let V=0;V<y;V++)0===S[V]&&(m[V]=T)}const M=i===s&&s>1?n:null,{pixelType:N}=t;return{width:_,height:R,bandCount:s,pixelType:N,depthCount:f,statistics:h,pixels:o,mask:x,bandMasks:M,noDataValues:Q}}},39878:(St,Et,K)=>{function mt(){const Ct=[];for(let it=0;it<=257;it++)Ct[it]=[it];return Ct}function yt(Ct,it){for(let r=0;r<it.length;r++)Ct.push(it[r])}K.d(Et,{D:()=>vt});const G=new Set;function vt(Ct,it,r,dt=!0){const q=function W(Ct,it,r,dt=!0){if(it%4!=0||r%4!=0){const q=new ArrayBuffer(4*Math.ceil(r/4)),nt=new Uint8Array(q),H=new Uint8Array(Ct,it,r);if(dt)for(let at=0;at<nt.length;at+=4)nt[at]=H[at+3],nt[at+1]=H[at+2],nt[at+2]=H[at+1],nt[at+3]=H[at];else nt.set(H);return new Uint32Array(nt.buffer)}if(dt){const q=new Uint8Array(Ct,it,r),nt=new Uint8Array(q.length);for(let H=0;H<nt.length;H+=4)nt[H]=q[H+3],nt[H+1]=q[H+2],nt[H+2]=q[H+1],nt[H+3]=q[H];return new Uint32Array(nt.buffer)}return new Uint32Array(Ct,it,r/4)}(Ct,it,r,dt);let nt=9,H=mt(),at=32,B=H.length,J=[],Z=1,Y=q[0],st=0;const Q=q.length,_=8*(4*Q-r),R=[];for(;null!=Y;){if(at>=nt)at-=nt,st=Y>>>32-nt,Y<<=nt;else{st=Y>>>32-at,Y=q[Z++];const f=nt-at;at=32-f,st=(st<<f)+(Y>>>at),Y<<=f}if(257===st)break;if(256===st){nt=9,H=mt(),B=H.length,J=[];continue}const s=H[st];if(null==s){if(st>H.length)throw new Error("data integrity issue: code does not exist on code page");J.push(J[0]),H[B++]=J.slice(),yt(R,J)}else yt(R,s),J.push(s[0]),J.length>1&&(H[B++]=J.slice()),J=s.slice();if(G.has(B)&&nt++,0===at&&(Y=q[Z++],at=32),Z>Q||Z===Q&&at<=_)break}return new Uint8Array(R)}G.add(511),G.add(1023),G.add(2047),G.add(4095),G.add(8191)},99263:(St,Et,K)=>{K.d(Et,{D:()=>V,g:()=>S});var W=K(10467),mt=K(5922),yt=K(11432),G=K(21980),vt=K(855),Ct=K(56492),it=K(97244);class r{constructor(l){this._canvas=null,this._ctx=null,l&&(this._canvas=l.canvas,this._ctx=l.ctx||l.canvas&&l.canvas.getContext("2d"))}decode(l,w,A){if(!l||l.byteLength<10)throw new mt.A("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:P=0,height:F=0,format:ut}=w;const{applyJpegMask:g}=w;if(g&&(!P||!F))throw new mt.A("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((a,u)=>{let d=null;"jpg"===ut&&g&&(d=r._getMask(l,{width:P,height:F}));const b=new Blob([new Uint8Array(l)],{type:"image/"+ut=="jpg"?"jpeg":ut}),C=URL.createObjectURL(b),E=new Image;let D;E.src=C,E.onload=()=>{if(URL.revokeObjectURL(C),(0,Ct.G4)(A))return void u((0,Ct.NK)());P=E.width,F=E.height,this._canvas&&this._ctx?(this._canvas.width===P&&this._canvas.height===F||(this._canvas.width=P,this._canvas.height=F),this._ctx.clearRect(0,0,P,F)):(this._canvas=document.createElement("canvas"),this._canvas.width=P,this._canvas.height=F,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(E,0,0);const U=this._ctx.getImageData(0,0,P,F);let I;if(D=U.data,w.renderOnCanvas){if(d)for(I=0;I<d.length;I++)D[4*I+3]=d[I]?255:0;return this._ctx.putImageData(U,0,0),void a(null)}const tt=P*F,lt=new Uint8Array(tt),gt=new Uint8Array(tt),rt=new Uint8Array(tt);if(d)for(I=0;I<tt;I++)lt[I]=D[4*I],gt[I]=D[4*I+1],rt[I]=D[4*I+2];else for(d=new Uint8Array(tt),I=0;I<tt;I++)lt[I]=D[4*I],gt[I]=D[4*I+1],rt[I]=D[4*I+2],d[I]=D[4*I+3];a({width:P,height:F,pixels:[lt,gt,rt],mask:d,pixelType:"u8"})},E.onerror=()=>{URL.revokeObjectURL(C),u("cannot load image")}})}static _getMask(l,w){let A=null;try{const P=new Uint8Array(l),F=Math.ceil(P.length/2);let ut=0;const g=P.length-2;for(ut=F;ut<g&&(255!==P[ut]||217!==P[ut+1]);ut++);if(ut+=2,ut<P.length-1){const a=new it.Z(P.subarray(ut)).getBytes();A=new Uint8Array(w.width*w.height);let u=0;for(let d=0;d<a.length;d++)for(let b=7;b>=0;b--)A[u++]=a[d]>>b&1}}catch{}return A}}var dt=K(92782);class q{static decode(l,w=!1){const A=new Uint8Array(l),P=new dt.J;P.parse(A);const{width:F,height:ut,numComponents:g,eof:a}=P,u=P.getData(F,ut,!0),d=F*ut;let b,C=null,E=0,D=0,U=0;if(!w&&a<A.length-1)try{const I=new it.Z(A.subarray(a)).getBytes();C=new Uint8Array(d);let tt=0;for(E=0;E<I.length;E++)for(U=7;U>=0;U--)C[tt++]=I[E]>>U&1}catch{}if(1===g&&u.length===F*ut){const I=new Uint8Array(u.buffer);b=[I,I,I]}else{for(b=[],E=0;E<3;E++)b.push(new Uint8Array(d));for(U=0,D=0;D<d;D++)for(E=0;E<3;E++)b[E][D]=u[U++]}return{width:F,height:ut,pixels:b,mask:C}}}var nt=K(7957),H=K(39878),at=K(96115);const B=(v,l)=>Math.floor(v.byteLength/(l.width*l.height*J(l.pixelType))),J=v=>{let l=1;switch(v){case Uint8Array:case Int8Array:l=1;break;case Uint16Array:case Int16Array:l=2;break;case Uint32Array:case Int32Array:case Float32Array:l=4;break;case Float64Array:l=8}return l};class Y{static decode(l,w){const A=w.pixelType,P=[],F=w.width*w.height,ut=B(l,w),{bandIds:g,format:a}=w,u=g?.length||B(l,w),d=l.byteLength-l.byteLength%(F*J(A)),b=new A(l,0,F*ut);let C,E,D,U,I=null;if("bip"===a)for(C=0;C<u;C++){for(D=new A(F),U=g?g[C]:C,E=0;E<F;E++)D[E]=b[E*ut+U];P.push(D)}else if("bsq"===a)for(C=0;C<u;C++)U=g?g[C]:C,P.push(b.subarray(U*F,(U+1)*F));return d<l.byteLength-1&&(I=((v,l)=>{if(8*v.byteLength<l)return null;const w=new Uint8Array(v,0,Math.ceil(l/8)),A=new Uint8Array(l);let P=0,F=0,ut=0,g=0;for(ut=0;ut<w.length-1;ut++)for(F=w[ut],g=7;g>=0;g--)A[P++]=F>>g&1;for(g=7;P<l-1;)F=w[w.length-1],A[P++]=F>>g&1,g--;return A})(l.slice(d),F)),{pixels:P,mask:I}}}var st=K(59520),Q=K(79892),_=function(v){var P,F,ut;function g(a){var u,b,C,E,D,U,I,tt,lt,gt,rt,$;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(u=this.readUInt32(),I=function(){var ct,j;for(j=[],ct=0;ct<4;++ct)j.push(String.fromCharCode(this.data[this.pos++]));return j}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C=this.readUInt16(),b=this.readUInt16()||100,E.delay=1e3*C/b,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for("fdAT"===I&&(this.pos+=4,u-=4),a=E?.data||this.imgData,gt=0;0<=u?gt<u:gt>u;0<=u?++gt:--gt)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(tt=255-this.transparency.indexed.length)>0)for(rt=0;0<=tt?rt<tt:rt>tt;0<=tt?++rt:--rt)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":D=(lt=this.read(u)).indexOf(0),U=String.fromCharCode.apply(String,lt.slice(0,D)),this.text[U]=String.fromCharCode.apply(String,lt.slice(D+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===($=this.colorType)||6===$,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return g.load=function(a,u,d){var b;return"function"==typeof u&&(d=u),(b=new XMLHttpRequest).open("GET",a,!0),b.responseType="arraybuffer",b.onload=function(){var C;return C=new g(new Uint8Array(b.response||b.mozResponseArrayBuffer)),"function"==typeof u?.getContext&&C.render(u),"function"==typeof d?d(C):void 0},b.send(null)},g.prototype.read=function(a){var u,d;for(d=[],u=0;0<=a?u<a:u>a;0<=a?++u:--u)d.push(this.data[this.pos++]);return d},g.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},g.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},g.prototype.decodePixels=function(a){var u,d,b,C,E,D,U,I,lt,gt,rt,$,ct,j,L,z,et,ot,ht,ft,pt,wt;if(null==a&&(a=this.imgData),0===a.length)return new Uint8Array(0);for(a=(a=new it.Z(a)).getBytes(),L=(rt=this.pixelBitlength/8)*this.width,$=new Uint8Array(L*this.height),D=a.length,j=0,ct=0,d=0;ct<D;){switch(a[ct++]){case 0:for(C=ot=0;ot<L;C=ot+=1)$[d++]=a[ct++];break;case 1:for(C=ht=0;ht<L;C=ht+=1)u=a[ct++],E=C<rt?0:$[d-rt],$[d++]=(u+E)%256;break;case 2:for(C=ft=0;ft<L;C=ft+=1)u=a[ct++],b=(C-C%rt)/rt,$[d++]=((z=j&&$[(j-1)*L+b*rt+C%rt])+u)%256;break;case 3:for(C=pt=0;pt<L;C=pt+=1)u=a[ct++],b=(C-C%rt)/rt,E=C<rt?0:$[d-rt],z=j&&$[(j-1)*L+b*rt+C%rt],$[d++]=(u+Math.floor((E+z)/2))%256;break;case 4:for(C=wt=0;wt<L;C=wt+=1)u=a[ct++],b=(C-C%rt)/rt,0===j?z=et=0:(z=$[(j-1)*L+b*rt+C%rt],et=b&&$[(j-1)*L+(b-1)*rt+C%rt]),U=(E=C<rt?0:$[d-rt])+z-et,I=Math.abs(U-E),lt=Math.abs(U-z),gt=Math.abs(U-et),$[d++]=(u+(I<=lt&&I<=gt?E:lt<=gt?z:et))%256;break;default:throw new Error("Invalid filter algorithm: "+a[ct-1])}j++}return $},g.prototype.decodePalette=function(){var a,u,d,b,C,E,D,U,I;for(d=this.palette,E=this.transparency.indexed||[],C=new Uint8Array((E.length||0)+d.length),b=0,a=0,u=D=0,U=d.length;D<U;u=D+=3)C[b++]=d[u],C[b++]=d[u+1],C[b++]=d[u+2],C[b++]=null!=(I=E[a++])?I:255;return C},g.prototype.copyToImageData=function(a,u){var d,b,C,E,D,U,I,tt,lt,gt,rt;if(b=this.colors,lt=null,d=this.hasAlphaChannel,this.palette.length&&(lt=null!=(rt=this._decodedPalette)?rt:this._decodedPalette=this.decodePalette(),b=4,d=!0),tt=(C=a.data||a).length,D=lt||u,E=U=0,1===b)for(;E<tt;)I=lt?4*u[E/4]:U,gt=D[I++],C[E++]=gt,C[E++]=gt,C[E++]=gt,C[E++]=d?D[I++]:this.transparency.grayscale&&this.transparency.grayscale===gt?0:255,U=I;else for(;E<tt;)I=lt?4*u[E/4]:U,C[E++]=D[I++],C[E++]=D[I++],C[E++]=D[I++],C[E++]=d?D[I++]:this.transparency.rgb&&this.transparency.rgb[1]===D[I-3]&&this.transparency.rgb[3]===D[I-2]&&this.transparency.rgb[5]===D[I-1]?0:255,U=I},g.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a},F=v.document&&v.document.createElement("canvas"),ut=F&&F.getContext("2d"),P=function(a){var u;return ut.width=a.width,ut.height=a.height,ut.clearRect(0,0,a.width,a.height),ut.putImageData(a,0,0),(u=new Image).src=F.toDataURL(),u},g.prototype.decodeFrames=function(a){var u,d,b,C,E,D,U,I;if(this.animation){for(I=[],d=E=0,D=(U=this.animation.frames).length;E<D;d=++E)b=a.createImageData((u=U[d]).width,u.height),C=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(b,C),u.imageData=b,I.push(u.image=P(b));return I}},g.prototype.renderFrame=function(a,u){var d,b,C;return d=(b=this.animation.frames)[u],C=b[u-1],0===u&&a.clearRect(0,0,this.width,this.height),1===C?.disposeOp?a.clearRect(C.xOffset,C.yOffset,C.width,C.height):2===C?.disposeOp&&a.putImageData(C.imageData,C.xOffset,C.yOffset),0===d.blendOp&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height),a.drawImage(d.image,d.xOffset,d.yOffset)},g.prototype.animate=function(a){var u,d,b,C,E,D,U=this;return d=0,C=(D=this.animation).numFrames,b=D.frames,E=D.numPlays,(u=function(){var I,tt;if(I=d++%C,tt=b[I],U.renderFrame(a,I),C>1&&d/C<E)return U.animation._timeout=setTimeout(u,tt.delay)})()},g.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)},g.prototype.render=function(a){var u,d;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,u=a.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(d=u.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),u.putImageData(d,0,0))},g}(self);const R=new Set(["jpg","png","bmp","gif"]);function s(v,l){return f.apply(this,arguments)}function f(){return(f=(0,W.A)(function*(v,l){if(!Q.Z)throw new mt.A("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield(0,nt.Hh)();const{offset:w}=l,{width:A,height:P,pixelType:F,statistics:ut,depthCount:g,noDataValues:a,bandMasks:u,pixels:d,mask:b}=(0,nt.D4)(v,{inputOffset:w,returnInterleaved:l.returnInterleaved}),C=new G.A({width:A,height:P,pixelType:F.toLowerCase(),pixels:d,mask:b,statistics:ut.map(({minValue:E,maxValue:D})=>new vt.z(E,D)),bandMasks:u,depthCount:g,noDataValues:a});return ut?.length||C.updateStatistics(),C})).apply(this,arguments)}function c(v,l){return i.apply(this,arguments)}function i(){return(i=(0,W.A)(function*(v,l){const w=yield(0,st.D4)(v,{...l,noDataValue:null});(0,yt.Lw)(w);const A=new G.A({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,bandMasks:w.bandMasks,statistics:null});return A.updateStatistics(),A})).apply(this,arguments)}function t(){return(t=(0,W.A)(function*(v,l){const w=yield(0,st.s$)(v,l.customOptions),A=new G.A({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,statistics:null});return A.updateStatistics(),A})).apply(this,arguments)}function e(v,l){const w=l.pixelType||"u8",A=G.A.getPixelArrayConstructor(w),P="u8"===w?v:new A(v.buffer),F=[],ut=l.planes||1;if(1===ut)F.push(P);else for(let a=0;a<ut;a++){const u=(l.width||1)*(l.height||v.length),d=new A(u);for(let b=0;b<u;b++)d[b]=P[b*ut+a];F.push(d)}const g=new G.A({width:l.width||1,height:l.height||v.length,pixels:F,pixelType:w,statistics:null});return g.updateStatistics(),g}function o(v,l){return e(new it.Z(new Uint8Array(v)).getBytes(),l)}function n(v,l){return e((0,H.D)(v,l.offset,l.eof,!l.isInputBigEndian),l)}function p(v,l){const w=q.decode(v,l.hasNoZlibMask??void 0),A=new G.A({width:w.width,height:w.height,pixels:w.pixels,pixelType:"u8",mask:w.mask,statistics:null});return A.updateStatistics(),A}function x(v,l){const w=new Uint8Array(v),A=new _(w),{width:P,height:F}=l,ut=P*F,g=A.decode();let a,u=0,d=0;const b=new Uint8Array(ut);for(u=0;u<ut;u++)b[u]=g[4*u+3];const C=new G.A({width:P,height:F,pixels:[],pixelType:"u8",mask:b,statistics:[]});for(u=0;u<3;u++){for(a=new Uint8Array(ut),d=0;d<ut;d++)a[d]=g[4*d+u];C.addData({pixels:a})}return C.updateStatistics(),C}function O(){return(O=(0,W.A)(function*(v,l,w,A){const P=new r,F={applyJpegMask:!1,format:l,...w},ut=yield P.decode(v,F,A),g=new G.A(ut);return g.updateStatistics(),g})).apply(this,arguments)}function M(v){if(null==v)throw new mt.A("rasterCodec:decode","parameter encodeddata is required.");const l=new Uint8Array(v,0,10);let w="";return 255===l[0]&&216===l[1]?w="jpg":137===l[0]&&80===l[1]&&78===l[2]&&71===l[3]?w="png":67===l[0]&&110===l[1]&&116===l[2]&&90===l[3]&&73===l[4]&&109===l[5]&&97===l[6]&&103===l[7]&&101===l[8]&&32===l[9]?w="lerc":76===l[0]&&101===l[1]&&114===l[2]&&99===l[3]&&50===l[4]&&32===l[5]?w="lerc2":73===l[0]&&73===l[1]&&42===l[2]&&0===l[3]||77===l[0]&&77===l[1]&&0===l[2]&&42===l[3]||73===l[0]&&73===l[1]&&43===l[2]&&0===l[3]||77===l[0]&&77===l[1]&&0===l[2]&&43===l[3]?w="tiff":71===l[0]&&73===l[1]&&70===l[2]?w="gif":66===l[0]&&77===l[1]?w="bmp":String.fromCharCode.apply(null,l).toLowerCase().includes("error")&&(w="error"),w}function S(v){let l=M(v);return"lerc2"===l?l="lerc":"error"===l&&(l=""),l}function V(v){return X.apply(this,arguments)}function X(){return X=(0,W.A)(function*(v,l={},w){if(null==v)throw new mt.A("rasterCodec:decode","missing encodeddata parameter.");let A=l.format?.toLowerCase();if(!("bsq"!==A&&"bip"!==A||null!=l.width&&null!=l.height))throw new mt.A("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===A&&l.customOptions)return function h(v,l){return t.apply(this,arguments)}(v,l);if((!A||"bsq"!==A&&"bip"!==A&&"deflate"!==A&&"lzw"!==A)&&(A=M(v)),l.useCanvas&&R.has(A))return function T(v,l,w,A){return O.apply(this,arguments)}(v,A,l,w);const P=function N(v){let l=null;switch(v){case"lerc":case"lerc2":l=s;break;case"jpg":l=p;break;case"png":l=x;break;case"bsq":case"bip":l=(w,A)=>function y(v,l,w){const{pixelTypeCtor:A}=function k(v){let l=null,w=null;switch(v?v.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":w=255,l=Uint8Array;break;case"u16":w=w||65535,l=Uint16Array;break;case"u32":w=w||2**32-1,l=Uint32Array;break;case"s8":w=w||-128,l=Int8Array;break;case"s16":w=w||-32768,l=Int16Array;break;case"s32":w=w||0-2**31,l=Int32Array;break;default:l=Float32Array}return{pixelTypeCtor:l,noDataValue:w}}(l.pixelType),P=(0,Y.decode)(v,{width:l.width,height:l.height,pixelType:A,format:w}),F=new G.A({width:l.width,height:l.height,pixels:P.pixels,pixelType:l.pixelType,mask:P.mask,statistics:null});return F.updateStatistics(),F}(w,A,v);break;case"tiff":l=c;break;case"deflate":l=o;break;case"lzw":l=n;break;case"error":l=()=>{throw new mt.A("rasterCodec:decode","input data contains error")};break;default:l=()=>{throw new mt.A("rasterCodec:decode","unsupported raster format")}}return l}(A);let F;l.isPoint&&(null!=(l={...l}).width&&l.width++,null!=l.height&&l.height++);const{offsets:ut}=l;if(ut&&ut.length>1){const g=ut.map((d,b)=>P(v.slice(d,ut[b+1]),l)),a=yield Promise.all(g);F=a[0],F.pixels=a.map(d=>d.pixels[0]);const u=a.map(d=>d.mask);a.some(d=>null!=d)&&(u.forEach((d,b)=>{null==d&&(u[b]=new Uint8Array(F.width*F.height).fill(255))}),F.bandMasks=u,F.mask=G.A.combineBandMasks(u)),F.updateStatistics()}else F=yield P(v,{...l,offset:ut?.[0]??l.offset});return"jpg"!==A&&null!=l.noDataValue&&1===F.depthCount&&(0,at.Sp)(F,l.noDataValue,{customFloatTolerance:l.tolerance}),l.isPoint&&function m(v,l=1){if(!v)return;const{pixels:w,width:A,height:P,mask:F}=v;if(!w||0===w.length)return;const ut=w.length,g=A-1,a=P-1,u=[];let d,b,C,E,D,U,I=null;const tt=G.A.getPixelArrayConstructor(v.pixelType);if(0===l){for(d=0;d<ut;d++){for(D=w[d],U=new tt(g*a),b=0;b<a;b++)for(E=b*A,C=0;C<g;C++)U[b*g+C]=D[E+C];u.push(U)}if(null!=F)for(I=new Uint8Array(g*a),b=0;b<a;b++)for(E=b*A,C=0;C<g;C++)I[b*g+C]=F[E+C]}else{for(d=0;d<ut;d++){for(D=w[d],U=new tt(g*a),b=0;b<a;b++)for(E=b*A,C=0;C<g;C++)U[b*g+C]=(D[E+C]+D[E+C+1]+D[E+A+C]+D[E+A+C+1])/4;u.push(U)}if(F)for(I=new Uint8Array(g*a),b=0;b<a;b++)for(E=b*A,C=0;C<g;C++)I[b*g+C]=Math.min.apply(null,[F[E+C],F[E+C+1],F[E+A+C],F[E+A+C+1]])}v.width=g,v.height=a,v.mask=I,v.pixels=u}(F),F}),X.apply(this,arguments)}},59520:(St,Et,K)=>{K.d(Et,{Cr:()=>x,D4:()=>F,JM:()=>v,XO:()=>O,r9:()=>N,s$:()=>A,uT:()=>X,uc:()=>T,zS:()=>M});var W=K(10467),yt=(K(3248),K(38497)),G=K(92782),vt=K(7957),Ct=K(39878),it=K(96115),r=K(77835),dt=K(79892),q=K(97244);const nt=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],H=4294967296,at=new Set([1,5,6,7,8,34712,34887]);function B(g,a){let u="unknown";return 3===g?u=64===a?"f64":"f32":1===g?1===a?u="u1":2===a?u="u2":4===a?u="u4":a<=8?u="u8":a<=16?u="u16":a<=32&&(u="u32"):2===g&&(a<=8?u="s8":a<=16?u="s16":a<=32&&(u="s32")),u}function J(g){let a=null;switch(g?g.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":a=Uint8Array;break;case"u16":a=Uint16Array;break;case"u32":a=Uint32Array;break;case"s8":a=Int8Array;break;case"s16":a=Int16Array;break;case"s32":a=Int32Array;break;case"f64":a=Float64Array;break;default:a=Float32Array}return a}function Z(g,a){return{x:a[0]*g.x+a[1]*g.y+a[2],y:a[3]*g.x+a[4]*g.y+a[5]}}function Y(g,a){return g.get(a)?.values}function st(g,a){return g.get(a)?.values}function Q(g,a){return g.get(a)?.values?.[0]}function _(g,a){return g.get(a)?.values?.[0]}function R(g,a,u,d=0,b=r.A.tiffTags,C=4){const E=8===C,D=E?m(new DataView(g,u,8),0,a):new DataView(g,u,2).getUint16(0,a),U=4+2*C,I=E?8:2,tt=I+D*U;if(u+tt>g.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:tt};const lt=u+tt+4<=g.byteLength?V(new DataView(g,u+tt,8===C?8:4),0,a,8===C):null,gt=u+I,rt=new Map;let $,ct,j,L,z,et=0,ot=0;for(let ht=0;ht<D;ht++){ct=new DataView(g,gt+U*ht,U),j=ct.getUint16(0,a),z=ct.getUint16(2,a),L=r.A.getTagName(j,b);const ft=[];2===C?(et=ct.getUint16(4,a),ot=ct.getUint16(6,a)):4===C?(et=ct.getUint32(4,a),ot=ct.getUint32(8,a)):8===C&&(et=V(ct,4,a,!0),ot=V(ct,12,a,!0),ft.push(ct.getUint32(12,a)),ft.push(ct.getUint32(16,a))),$={id:j,type:z,valueCount:et,valueOffset:ot,valueOffsets:ft,values:null},x(g,a,$,d,!1,C),rt.set(L,$)}return{success:!0,ifd:rt,nextIFD:lt,requiredBufferSize:tt}}const s=(g,a)=>(0,vt.D4)(g,{inputOffset:a}).pixels[0];function f(g,a){if(1!==a&&2!==a&&4!==a)return g;const u=new Uint8Array(g),d=8/a,b=new Uint8Array(g.byteLength*d);let C=0;const E=2**a-1;for(let D=0;D<u.length;D++){const U=u[D];for(let I=0;I<d;I++)b[C++]=U<<a*I>>>8-a&E}return b.buffer}function c(g,a,u){const d=new G.J;d.parse(g),d.colorTransform=6===u?-1:0;const b=d.getData(d.width,d.height,1!==a&&4!==a);return new Uint8Array(b.buffer)}function i(g){const a=new q.Z(g).getBytes(),u=new ArrayBuffer(a.length),d=new Uint8Array(u);return d.set(a),d}function h(g,a,u,d,b){return t.apply(this,arguments)}function t(){return(t=(0,W.A)(function*(g,a,u,d,b){const C=dt.Z===a,E=_(u,"BITSPERSAMPLE"),D=_(u,"SAMPLESPERPIXEL")??1,U=_(u,"PHOTOMETRICINTERPRETATION"),I=_(u,"SAMPLEFORMAT")??1,tt=B(I,E),lt=_(u,"COMPRESSION")??1,gt=J(tt);let rt,$,ct;if(34887===lt)return yield(0,vt.Hh)(),s(g,d);if(1===lt)rt=g.slice(d,d+b),$=new Uint8Array(rt);else if(8===lt||32946===lt)$=new Uint8Array(g,d,b),$=i($),rt=$.buffer;else if(6===lt)$=new Uint8Array(g,d,b),$=c($,D,U),rt=$.buffer;else if(7===lt){const et=u.get("JPEGTABLES").values,ot=et.length-2;$=new Uint8Array(ot+b-2);for(let ft=0;ft<ot;ft++)$[ft]=et[ft];const ht=new Uint8Array(g,d+2,b-2);for(let ft=0;ft<ht.length;ft++)$[ot+ft]=ht[ft];$=c($,D,U),rt=$.buffer}else{if(5!==lt)throw new Error("tiff-decode: unsupport compression "+lt);$=(0,Ct.D)(g,d,b,a),rt=$.buffer}if(rt=f(rt,E),"u8"===tt||"s8"===tt||C)ct=new gt(rt);else{rt=new ArrayBuffer($.length);const et=new Uint8Array(rt);switch(tt){case"u16":case"s16":for(let ot=0;ot<$.length;ot+=2)et[ot]=$[ot+1],et[ot+1]=$[ot];break;case"u32":case"s32":case"f32":for(let ot=0;ot<$.length;ot+=4)et[ot]=$[ot+3],et[ot+1]=$[ot+2],et[ot+2]=$[ot+1],et[ot+3]=$[ot]}ct=new gt(rt)}const j=_(u,"PREDICTOR")??1,L=_(u,"TILEWIDTH"),z=_(u,"TILELENGTH");if(j>1&&(5===lt||8===lt||32946===lt)&&L&&z){const et=O(u),ot=new gt(ct.length);ot.set(ct),ct=function w(g,a,u,d,b){const C=d?4:1,E=u*C*b;d&&(g=new Uint8Array(g.buffer));for(let I=0;I<a;I++){const tt=I*E;for(let lt=b;lt<E;lt++)g[tt+lt]+=g[tt+lt-b]}if(!d)return g;const D=new Uint8Array(g.length),U=u*b;for(let I=0;I<a;I++){const tt=I*E;for(let lt=0;lt<U;lt++)for(let gt=0;gt<C;gt++)D[tt+lt*C+gt]=g[tt+lt+(C-gt-1)*U]}return new Float32Array(D.buffer)}(ot,z,L,3===I&&3===j,et?1:D)}return ct})).apply(this,arguments)}function o(){return(o=(0,W.A)(function*(g,a,u){const d=st(u,"TILEOFFSETS");if(void 0===d)return null;const b=st(u,"TILEBYTECOUNTS"),{width:C,height:E,pixelType:D,tileWidth:U,tileHeight:I}=T([u]),tt=O(u,a),lt=_(u,"SAMPLESPERPIXEL")||a.planes,gt=C*E,rt=_(u,"BITSPERSAMPLE"),$=34887===(_(u,"COMPRESSION")??1),ct=J(D),j=[];for(let Ot=0;Ot<lt;Ot++)j.push(new ct(gt));let L,z,et,ot,ht,ft,pt,wt,bt,At,It,Pt,xt;const kt=Math.ceil(C/U),Mt=new Uint8Array(gt).fill(255);let Rt=!1;if(rt%8==0)if($&&tt&&lt>1){const Ot=Math.round(d.length/lt);for(L=0;L<Ot;L++){ft=Math.floor(L/kt)*I,pt=L%kt*U,wt=ft*C+pt;for(let Dt=0;Dt<lt;Dt++){const Ut=L*lt+Dt;for(0===b[Ut]?(et=null,Rt=!0):et=yield h(g,a.littleEndian,u,d[Ut],b[Ut]),At=0,bt=wt,Pt=Math.min(U,C-pt),It=Math.min(I,E-ft),xt=j[Dt],ot=0;ot<It;ot++)for(bt=wt+ot*C,At=ot*U,ht=0;ht<Pt;ht++,bt++,At++)et?xt[bt]=et[At]:Mt[bt]=0}}}else for(L=0;L<d.length;L++)for(ft=Math.floor(L/kt)*I,pt=L%kt*U,wt=ft*C+pt,0===b[L]?(et=null,Rt=!0):et=yield h(g,a.littleEndian,u,d[L],b[L]),At=0,bt=wt,Pt=Math.min(U,C-pt),It=Math.min(I,E-ft),z=0;z<lt;z++)if(xt=j[z],tt||$)for(ot=0;ot<It;ot++)for(bt=wt+ot*C,At=U*I*z+ot*U,ht=0;ht<Pt;ht++,bt++,At++)et?xt[bt]=et[At]:Mt[bt]=0;else for(ot=0;ot<It;ot++)for(bt=wt+ot*C,At=ot*U*lt+z,ht=0;ht<Pt;ht++,bt++,At+=lt)et?xt[bt]=et[At]:Mt[bt]=0;return{width:C,height:E,pixelType:D,pixels:j,mask:Rt?Mt:void 0}})).apply(this,arguments)}const n=(g,a,u)=>{const d=dt.Z===a.littleEndian,b=st(u,"STRIPOFFSETS");if(void 0===b)return null;const{width:C,height:E,pixelType:D}=T([u]),U=_(u,"SAMPLESPERPIXEL")||a.planes,I=_(u,"PHOTOMETRICINTERPRETATION"),tt=C*E,lt=_(u,"BITSPERSAMPLE"),gt=J(D),rt=new gt(tt*U),$=st(u,"STRIPBYTECOUNTS"),ct=_(u,"ROWSPERSTRIP"),j=_(u,"COMPRESSION")??1;let L,z,et,ot,ht,ft,pt,wt,bt;if(lt%8==0)for(L=0;L<b.length;L++){if(ht=L*(ct*C)*U,"u8"===D||"s8"===D||d)8===j||32946===j?(pt=new Uint8Array(g,b[L],$[L]),pt=i(pt),ft=pt.buffer):6===j?(pt=new Uint8Array(g,b[L],$[L]),pt=c(pt,U,I),ft=pt.buffer):5===j?(pt=(0,Ct.D)(g,b[L],$[L],a.littleEndian),ft=pt.buffer):ft=g.slice(b[L],b[L]+$[L]),ft=f(ft,lt),ot=new gt(ft);else{switch(6===j||8===j||32946===j?(pt=new Uint8Array(g,b[L],$[L]),wt=i(pt),ft=wt.buffer):(ft=new ArrayBuffer($[L]),pt=new Uint8Array(g,b[L],$[L]),wt=new Uint8Array(ft)),D){case"u16":case"s16":for(et=0;et<pt.length;et+=2)wt[et]=pt[et+1],wt[et+1]=pt[et];break;case"u32":case"s32":case"f32":for(et=0;et<pt.length;et+=4)wt[et]=pt[et+3],wt[et+1]=pt[et+2],wt[et+2]=pt[et+1],wt[et+3]=pt[et]}ft=f(ft,lt),ot=new gt(ft)}rt.set(ot,ht)}const At=[];if(1===U)At.push(rt);else for(L=0;L<U;L++){for(bt=new gt(tt),z=0;z<tt;z++)bt[z]=rt[z*U+L];At.push(bt)}return{width:C,height:E,pixelType:D,pixels:At}},y=(g,a,u)=>{if(!(g&&g.length>0&&a&&u))return null;let d,b,C;const E=g[0].length,D=g.length,U=new Uint8Array(E);for(let I=0;I<D;I++)if(d=g[I],b=a[I],C=u[I],0===I)for(let tt=0;tt<E;tt++)U[tt]=d[tt]<b||d[tt]>C?0:1;else for(let tt=0;tt<E;tt++)U[tt]&&(U[tt]=d[tt]<b||d[tt]>C?0:1);return U},p=g=>{if(!g)return null;const a=g.match(/<Item(.*?)Item>/gi);if(!a||0===a.length)return null;const u=new Map;let d,b,C,E,D;for(let L=0;L<a.length;L++)d=a[L],b=d.slice(6,d.indexOf(">")),E=d.indexOf("sample="),E>-1&&(D=d.slice(E+8,d.indexOf('"',E+8))),E=d.indexOf("name="),E>-1&&(b=d.slice(E+6,d.indexOf('"',E+6))),b&&(C=d.slice(d.indexOf(">")+1,d.indexOf("</Item>")).trim(),null!=D?u.has(b)?u.get(b)[D]=C:u.set(b,[C]):u.set(b,C)),D=null;const U=u.get("STATISTICS_MINIMUM"),I=u.get("STATISTICS_MAXIMUM"),tt=u.get("STATISTICS_MEAN"),lt=u.get("STATISTICS_STDDEV");let gt=null;if(U&&I){gt=[];for(let L=0;L<U.length;L++)gt.push({min:parseFloat(U[L]),max:parseFloat(I[L]),avg:tt&&parseFloat(tt[L]),stddev:lt&&parseFloat(lt[L])})}const rt=u.get("BandName"),$=u.get("WavelengthMin"),ct=u.get("WavelengthMax");let j=null;if(rt){j=[];for(let L=0;L<rt.length;L++)j.push({BandName:rt[L],WavelengthMin:$&&parseFloat($[L]),WavelengthMax:ct&&parseFloat(ct[L])})}return{statistics:gt,bandProperties:j,dataType:u.get("DataType"),rawMetadata:u}};function x(g,a,u,d=0,b=!1,C=4){if(u.values)return!0;const E=u.type,D=u.valueCount;let U=u.valueOffset,I=[];const tt=nt[E],lt=8*tt,gt=D*tt,rt=D*nt[E]*8;let $,ct;const j=8===C?64:32,L=u.valueOffsets;if(rt>j&&gt>(b?g.byteLength:g?g.byteLength-U+d:0))return u.offlineOffsetSize=[U,gt],u.values=null,!1;if(rt<=j){if(!a)if(j<=32)U>>>=32-rt;else{const z=L?.length?L[0]:U>>>0,et=L?.length?L[1]:Math.round((U-z)/H);rt<=32?(U=z>>>32-rt,L[0]=U):(U=z*2**(32-rt)+(et>>>32-rt),L[0]=z,L[1]=et>>>32-rt)}if(1===D&&lt===j)I=[U];else if(64===j){const z=L?.length?L[0]:U>>>0,et=L?.length?L[1]:Math.round((U-z)/H);let ot=z,ht=32;for(ct=1;ct<=D;ct++){const ft=32-lt*ct%32;if(ht<lt){const pt=ot<<ft>>>32-ht;ot=et,I.push(pt+(et<<32-ht>>>32-ht)*2**(lt-ht)),ht-=32-(lt-ht)}else I.push(ot<<ft>>>32-lt),ht-=lt;0===ht&&(ht=32,ot=et)}}else for(ct=1;ct<=D;ct++)I.push(U<<32-lt*ct>>>32-lt)}else{U-=d,b&&(U=0);for(let z=U;z<U+gt;z+=tt){switch(E){case 1:case 2:case 7:$=new DataView(g,z,1).getUint8(0);break;case 3:$=new DataView(g,z,2).getUint16(0,a);break;case 4:case 13:$=new DataView(g,z,4).getUint32(0,a);break;case 5:$=new DataView(g,z,4).getUint32(0,a)/new DataView(g,z+4,4).getUint32(0,a);break;case 6:$=new DataView(g,z,1).getInt8(0);break;case 8:$=new DataView(g,z,2).getInt16(0,a);break;case 9:$=new DataView(g,z,4).getInt32(0,a);break;case 10:$=new DataView(g,z,4).getInt32(0,a)/new DataView(g,z+4,4).getInt32(0,a);break;case 11:$=new DataView(g,z,4).getFloat32(0,a);break;case 12:$=new DataView(g,z,8).getFloat64(0,a);break;case 16:case 18:$=m(new DataView(g,z,8),0,a);break;case 17:$=S(new DataView(g,z,8),0,a);break;default:$=null}I.push($)}}if(2===E){let z="";const et=I;for(I=[],ct=0;ct<et.length;ct++)0===et[ct]&&""!==z?(I.push(z),z=""):z+=String.fromCharCode(et[ct]);""===z&&0!==I.length||I.push(z)}return u.values=I,!0}function T(g){const a=g[0],u=_(a,"TILEWIDTH"),d=_(a,"TILELENGTH"),b=_(a,"IMAGEWIDTH"),C=_(a,"IMAGELENGTH"),E=_(a,"BITSPERSAMPLE"),D=_(a,"SAMPLESPERPIXEL"),U=_(a,"SAMPLEFORMAT")??1,I=B(U,E),tt=O(a),lt=Y(a,"GDAL_NODATA");let gt=null;lt?.length&&(gt=lt.map(Tt=>parseFloat(Tt)),gt.some(Tt=>isNaN(Tt))&&(gt=null));const rt=_(a,"COMPRESSION")??1;let $;switch(rt){case 1:$="NONE";break;case 2:case 3:case 4:case 32771:$="CCITT";break;case 5:$="LZW";break;case 6:case 7:$="JPEG";break;case 32773:$="PACKBITS";break;case 8:case 32946:$="DEFLATE";break;case 34712:$="JPEG2000";break;case 34887:$="LERC";break;default:$=String(rt)}let ct=!0,j="";at.has(rt)||(ct=!1,j+="unsupported tag compression "+rt),U>3&&(ct=!1,j+="unsupported tag sampleFormat "+U),1!==E&&2!==E&&4!==E&&E%8!=0&&(ct=!1,j+="unsupported tag bitsPerSample "+E);const L=Q(a,"GEOASCIIPARAMS");let z;if(L){const Tt=L.split("|").find(Lt=>Lt.includes("ESRI PE String = ")),_t=Tt?Tt.replace("ESRI PE String = ",""):"";z=_t.startsWith("COMPD_CS")||_t.startsWith("PROJCS")||_t.startsWith("GEOGCS")?{wkid:null,wkt:_t}:null}const et=st(a,"GEOTIEPOINTS"),ot=st(a,"GEOPIXELSCALE"),ht=st(a,"GEOTRANSMATRIX"),ft=a.has("GEOKEYDIRECTORY")?a.get("GEOKEYDIRECTORY").data:null;let pt,wt,bt=!1,At=!1;if(ft){bt=2===_(ft,"GTRasterTypeGeoKey");const Tt=_(ft,"GTModelTypeGeoKey");if(2===Tt){const _t=_(ft,"GeographicTypeGeoKey");_t>=1024&&_t<=32766&&(z={wkid:_t}),z||32767!==_t||(At=!0,z={wkid:4326})}else if(1===Tt){const _t=_(ft,"ProjectedCSTypeGeoKey");_t>=1024&&_t<=32766&&(z={wkid:_t})}}if(ot&&et&&et.length>=6?(pt=[ot[0],0,et[3]-et[0]*ot[0],0,-Math.abs(ot[1]),et[4]-et[1]*ot[1]],bt&&(pt[2]-=.5*pt[0]+.5*pt[1],pt[5]-=.5*pt[3]+.5*pt[4])):ht&&16===ht.length&&(pt=bt?[ht[0],ht[1],ht[3]-.5*ht[0],ht[4],ht[5],ht[7]-.5*ht[5]]:[ht[0],ht[1],ht[3],ht[4],ht[5],ht[7]]),pt){const Tt=[{x:0,y:C},{x:0,y:0},{x:b,y:C},{x:b,y:0}];let _t,Lt=Number.POSITIVE_INFINITY,Bt=Number.POSITIVE_INFINITY,Gt=Number.NEGATIVE_INFINITY,Nt=Number.NEGATIVE_INFINITY;for(let Ft=0;Ft<Tt.length;Ft++)_t=Z(Tt[Ft],pt),Lt=_t.x>Lt?Lt:_t.x,Gt=_t.x<Gt?Gt:_t.x,Bt=_t.y>Bt?Bt:_t.y,Nt=_t.y<Nt?Nt:_t.y;wt={xmin:Lt,xmax:Gt,ymin:Bt,ymax:Nt,spatialReference:z}}else wt={xmin:-.5,ymin:.5-C,xmax:b-.5,ymax:.5,spatialReference:z};At&&(wt.xmax-wt.xmin>400||Math.max(Math.abs(wt.xmin),Math.abs(wt.xmax))>361)&&(z=null,wt.spatialReference=null);const It=M(g);let Pt,xt,kt,Mt,Rt;if(It.length>0){kt=Math.round(Math.log(b/_(It[0],"IMAGEWIDTH"))/Math.LN2);const Tt=It[It.length-1];Mt=It.length,Pt=_(Tt,"TILEWIDTH"),xt=_(Tt,"TILELENGTH")}Pt=null!=Mt&&Mt>0?Pt||u:null,xt=null!=Mt&&Mt>0?xt||d:null,u&&(Rt=[{maxCol:Math.ceil(b/u)-1,maxRow:Math.ceil(C/d)-1,minRow:0,minCol:0}],It.forEach(Tt=>{Rt.push({maxCol:Math.ceil(_(Tt,"IMAGEWIDTH")/_(Tt,"TILEWIDTH"))-1,maxRow:Math.ceil(_(Tt,"IMAGELENGTH")/_(Tt,"TILELENGTH"))-1,minRow:0,minCol:0})}));const Ot=Q(g[0],"GDAL_METADATA"),Dt=p(Ot);j+=" "+l({width:b,height:C,tileWidth:u,tileHeight:d,planes:D,ifds:g});const Ut=N(g).length===It.length+1,jt=It?.length?It.map(Tt=>({x:b/_(Tt,"IMAGEWIDTH"),y:C/_(Tt,"IMAGELENGTH")})):void 0;return{width:b,height:C,tileWidth:u,tileHeight:d,planes:D,isBSQ:tt,pixelType:I,compression:$,noData:gt,hasMaskBand:Ut,isSupported:ct,pyramidResolutions:jt,message:j,extent:wt,isPseudoGeographic:At,affine:ot?null:pt,firstPyramidLevel:kt,maximumPyramidLevel:Mt,pyramidBlockWidth:Pt,pyramidBlockHeight:xt,tileBoundary:Rt,metadata:Dt}}function O(g,a){const u=Y(g,"PLANARCONFIGURATION");return u?2===u[0]:!!a&&a.isBSQ}function M(g){return g.filter(a=>1===_(a,"NEWSUBFILETYPE"))}function N(g){return g.filter(a=>{const u=!(4&~(_(a,"NEWSUBFILETYPE")??0)),d=4===_(a,"PHOTOMETRICINTERPRETATION");return u&&d})}function m(g,a,u){const d=g.getUint32(a,u),b=g.getUint32(a+4,u);return u?b*H+d:d*H+b}function S(g,a,u){let d=u?g.getInt32(a,u):g.getUint32(a,u),b=u?g.getUint32(a+4,u):g.getInt32(a+4,u);const C=(u?d:b)>=0?1:-1;return u?d*=C:b*=C,C*(u?b*H+d:d*H+b)}function V(g,a,u,d){return d?m(g,a,u):g.getUint32(a,u)}function X(g){const a=new DataView(g,0,16),u=a.getUint16(0,!1);let d=null;if(18761===u)d=!0;else{if(19789!==u)throw new Error("unexpected endianess byte");d=!1}const b=a.getUint16(2,d);if(42!==b&&43!==b)throw new Error("unexpected tiff identifier");let C=4;const E=43===b;if(E){const D=a.getUint16(C,d);if(C+=2,8!==D)throw new Error("unsupported bigtiff version");if(0!==a.getUint16(C,d))throw new Error("unsupported bigtiff version");C+=2}return{littleEndian:d,isBigTiff:E,firstIFDPos:V(a,C,d,E)}}function v(g,a,u,d=0,b=r.A.tiffTags,C=4){const E=R(g,a,u,d,b,C);let D;const U=E.ifd;if(U){if(r.A.ifdTags.forEach((I,tt)=>{U.has(tt)&&(D=U.get(tt),D.data=R(g,a,D.valueOffset-d,d,I).ifd)}),U.has("GEOKEYDIRECTORY")){D=U.get("GEOKEYDIRECTORY");const I=D.values;if(I&&I.length>4){const tt=I[0]+"."+I[1]+"."+I[2];D.data=R(g,a,D.valueOffset+6-d,d,r.A.geoKeys,2).ifd,D.data&&D.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[tt]})}}if(U.has("XMP")){D=U.get("XMP");const I=D.values;"number"==typeof I[0]&&7===D.type&&(D.values=[(0,yt.w)(new Uint8Array(I))])}}return E}function l(g){const{width:a,height:u,tileHeight:d,tileWidth:b}=g,C=g.planes,E=b?b*d:a*u,D=_(g.ifds[0],"BITSPERSAMPLE");let U="";return E*C>2**30/(D>8?D/8:1)&&(U=b?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),U}function A(g,a){return P.apply(this,arguments)}function P(){return(P=(0,W.A)(function*(g,a){const{headerInfo:u,ifd:d,offsets:b,sizes:C}=a,E=[];for(let bt=0;bt<b.length;bt++){const At=yield h(g,u.littleEndian,d,b[bt],C[bt]||g.byteLength);E.push(At)}const D=O(d,u),U=_(d,"BITSPERSAMPLE"),I=B(_(d,"SAMPLEFORMAT")??1,U),tt=_(d,"SAMPLESPERPIXEL")||u.planes,lt=J(I),gt=_(d,"TILEWIDTH"),rt=_(d,"TILELENGTH"),$=_(d,"COMPRESSION")??1,ct=gt*rt;let j;const L=[];let z=E[0];const et=34887===$;for(let bt=0;bt<tt;bt++){if(j=new lt(ct),E.length===tt)z=E[bt],z.length===ct&&(j=z);else if(z.length)if(D||et)j=z.length===ct?z:z.slice(ct*bt,ct*(bt+1));else for(let At=0;At<ct;At++)j[At]=z[At*tt+bt];L.push(j)}const ot=u.noData?u.noData[0]:a.noDataValue,ht=u.metadata?u.metadata.statistics:null,ft=ht?ht.map(bt=>bt.min):null,pt=ht?ht.map(bt=>bt.max):null,wt={pixelType:I,width:gt,height:rt,pixels:L,noDataValue:ot};return null!=ot?(0,it.Sp)(wt,ot):ft&&pt&&a.applyMinMaxConstraint&&(wt.mask=y(L,ft,pt)),wt})).apply(this,arguments)}function F(g){return ut.apply(this,arguments)}function ut(){return ut=(0,W.A)(function*(g,a={}){const u=a.pyramidLevel||0,d=a.headerInfo||function k(g){const{littleEndian:a,isBigTiff:u,firstIFDPos:d}=X(g);let b=d;const C=[];do{const E=v(g,a,b,0,r.A.tiffTags,u?8:4);if(!E.success)break;C.push(E.ifd),b=E.nextIFD}while(b>0);return{...T(C),littleEndian:a,isBigTiff:u,ifds:C,pyramidIFDs:M(C),maskIFDs:N(C)}}(g),{ifds:b,noData:C}=d;if(0===b.length)throw new Error("no valid image file directory");const E=l(d);if(E)throw E;let D=null;const U=-1===u?b[b.length-1]:b[u],I=C??a.noDataValue;return D=d.tileWidth?yield function e(g,a,u){return o.apply(this,arguments)}(g,d,U):n(g,d,U),D&&(null!=I&&(0,it.Sp)(D,I),D)}),ut.apply(this,arguments)}},77835:(St,Et,K)=>{K.d(Et,{A:()=>it});const W=(()=>{const r=[];return r[254]="NEWSUBFILETYPE",r[255]="SUBFILETYPE",r[256]="IMAGEWIDTH",r[257]="IMAGELENGTH",r[258]="BITSPERSAMPLE",r[259]="COMPRESSION",r[262]="PHOTOMETRICINTERPRETATION",r[263]="THRESHHOLDING",r[264]="CELLWIDTH",r[265]="CELLLENGTH",r[266]="FILLORDER",r[269]="DOCUMENTNAME",r[270]="IMAGEDESCRIPTION",r[271]="MAKE",r[272]="MODEL",r[273]="STRIPOFFSETS",r[274]="ORIENTATION",r[277]="SAMPLESPERPIXEL",r[278]="ROWSPERSTRIP",r[279]="STRIPBYTECOUNTS",r[280]="MINSAMPLEVALUE",r[281]="MAXSAMPLEVALUE",r[282]="XRESOLUTION",r[283]="YRESOLUTION",r[284]="PLANARCONFIGURATION",r[285]="PAGENAME",r[286]="XPOSITION",r[287]="YPOSITION",r[288]="FREEOFFSETS",r[289]="FREEBYTECOUNTS",r[290]="GRAYRESPONSEUNIT",r[291]="GRAYRESPONSECURVE",r[292]="T4OPTIONS",r[293]="T6OPTIONS",r[296]="RESOLUTIONUNIT",r[297]="PAGENUMBER",r[300]="COLORRESPONSEUNIT",r[301]="TRANSFERFUNCTION",r[305]="SOFTWARE",r[306]="DATETIME",r[315]="ARTIST",r[316]="HOSTCOMPUTER",r[317]="PREDICTOR",r[318]="WHITEPOINT",r[319]="PRIMARYCHROMATICITIES",r[320]="COLORMAP",r[321]="HALFTONEHINTS",r[322]="TILEWIDTH",r[323]="TILELENGTH",r[324]="TILEOFFSETS",r[325]="TILEBYTECOUNTS",r[326]="BADFAXLINES",r[327]="CLEANFAXDATA",r[328]="CONSECUTIVEBADFAXLINES",r[330]="SUBIFD",r[332]="INKSET",r[333]="INKNAMES",r[334]="NUMBEROFINKS",r[336]="DOTRANGE",r[337]="TARGETPRINTER",r[338]="EXTRASAMPLES",r[339]="SAMPLEFORMAT",r[340]="SMINSAMPLEVALUE",r[341]="SMAXSAMPLEVALUE",r[342]="TRANSFERRANGE",r[347]="JPEGTABLES",r[512]="JPEGPROC",r[513]="JPEGIFOFFSET",r[514]="JPEGIFBYTECOUNT",r[515]="JPEGRESTARTINTERVAL",r[517]="JPEGLOSSLESSPREDICTORS",r[518]="JPEGPOINTTRANSFORM",r[519]="JPEGQTABLES",r[520]="JPEGDCTABLES",r[521]="JPEGACTABLES",r[529]="YCBCRCOEFFICIENTS",r[530]="YCBCRSUBSAMPLING",r[531]="YCBCRPOSITIONING",r[532]="REFERENCEBLACKWHITE",r[700]="XMP",r[33550]="GEOPIXELSCALE",r[33922]="GEOTIEPOINTS",r[33432]="COPYRIGHT",r[42112]="GDAL_METADATA",r[42113]="GDAL_NODATA",r[50844]="RPCCOEFFICIENT",r[34264]="GEOTRANSMATRIX",r[34735]="GEOKEYDIRECTORY",r[34736]="GEODOUBLEPARAMS",r[34737]="GEOASCIIPARAMS",r[34665]="EXIFIFD",r[34853]="GPSIFD",r[40965]="INTEROPERABILITYIFD",r})(),mt=(()=>{const r=W.slice();return r[36864]="ExifVersion",r[40960]="FlashpixVersion",r[40961]="ColorSpace",r[42240]="Gamma",r[37121]="ComponentsConfiguration",r[37122]="CompressedBitsPerPixel",r[40962]="PixelXDimension",r[40963]="PixelYDimension",r[37500]="MakerNote",r[37510]="UserComment",r[40964]="RelatedSoundFile",r[36867]="DateTimeOriginal",r[36868]="DateTimeDigitized",r[36880]="OffsetTime",r[36881]="OffsetTimeOriginal",r[36882]="OffsetTimeDigitized",r[37520]="SubSecTime",r[37521]="SubSecTimeOriginal",r[37522]="SubSecTimeDigitized",r[37888]="Temperature",r[37889]="Humidity",r[37890]="Pressure",r[37891]="WaterDepth",r[37892]="Acceleration",r[37893]="CameraElevationAngle",r[42016]="ImageUniqueID",r[42032]="CameraOwnerName",r[42033]="BodySerialNumber",r[42034]="LensSpecification",r[42035]="LensMake",r[42036]="LensModel",r[42037]="LensSerialNumber",r[33434]="ExposureTime",r[33437]="FNumber",r[34850]="ExposureProgram",r[34852]="SpectralSensitivity",r[34855]="PhotographicSensitivity",r[34856]="OECF",r[34864]="SensitivityType",r[34865]="StandardOutputSensitivity",r[34866]="RecommendedExposureIndex",r[34867]="ISOSpeed",r[34868]="ISOSpeedLatitudeyyy",r[34869]="ISOSpeedLatitudezzz",r[37377]="ShutterSpeedValue",r[37378]="ApertureValue",r[37379]="BrightnessValue",r[37380]="ExposureBiasValue",r[37381]="MaxApertureValue",r[37382]="SubjectDistance",r[37383]="MeteringMode",r[37384]="LightSource",r[37385]="Flash",r[37386]="FocalLength",r[37396]="SubjectArea",r[41483]="FlashEnergy",r[41484]="SpatialFrequencyResponse",r[41486]="FocalPlaneXResolution",r[41487]="FocalPlaneYResolution",r[41488]="FocalPlaneResolutionUnit",r[41492]="SubjectLocation",r[41493]="ExposureIndex",r[41495]="SensingMethod",r[41728]="FileSource",r[41729]="SceneType",r[41730]="CFAPattern",r[41985]="CustomRendered",r[41986]="ExposureMode",r[41987]="WhiteBalance",r[41988]="DigitalZoomRatio",r[41989]="FocalLengthIn35mmFilm",r[41990]="SceneCaptureType",r[41991]="GainControl",r[41992]="Contrast",r[41993]="Saturation",r[41994]="Sharpness",r[41995]="DeviceSettingDescription",r[41996]="SubjectDistanceRange",r})(),G=(()=>{const r=[];return r[1024]="GTModelTypeGeoKey",r[1025]="GTRasterTypeGeoKey",r[1026]="GTCitationGeoKey",r[2048]="GeographicTypeGeoKey",r[2049]="GeogCitationGeoKey",r[2050]="GeogGeodeticDatumGeoKey",r[2051]="GeogPrimeMeridianGeoKey",r[2052]="GeogLinearUnitsGeoKey",r[2053]="GeogLinearUnitSizeGeoKey",r[2054]="GeogAngularUnitsGeoKey",r[2055]="GeogAngularUnitSizeGeoKey",r[2056]="GeogEllipsoidGeoKey",r[2057]="GeogSemiMajorAxisGeoKey",r[2058]="GeogSemiMinorAxisGeoKey",r[2059]="GeogInvFlatteningGeoKey",r[2061]="GeogPrimeMeridianLongGeoKey",r[2060]="GeogAzimuthUnitsGeoKey",r[3072]="ProjectedCSTypeGeoKey",r[3073]="PCSCitationGeoKey",r[3074]="ProjectionGeoKey",r[3075]="ProjCoordTransGeoKey",r[3076]="ProjLinearUnitsGeoKey",r[3077]="ProjLinearUnitSizeGeoKey",r[3078]="ProjStdParallel1GeoKey",r[3079]="ProjStdParallel2GeoKey",r[3080]="ProjNatOriginLongGeoKey",r[3081]="ProjNatOriginLatGeoKey",r[3082]="ProjFalseEastingGeoKey",r[3083]="ProjFalseNorthingGeoKey",r[3084]="ProjFalseOriginLongGeoKey",r[3085]="ProjFalseOriginLatGeoKey",r[3086]="ProjFalseOriginEastingGeoKey",r[3087]="ProjFalseOriginNorthingGeoKey",r[3088]="ProjCenterLongGeoKey",r[3090]="ProjCenterEastingGeoKey",r[3091]="ProjCenterNorthingGeoKey",r[3092]="ProjScaleAtNatOriginGeoKey",r[3093]="ProjScaleAtCenterGeoKey",r[3094]="ProjAzimuthAngleGeoKey",r[3095]="ProjStraightVertPoleLongGeoKey",r[4096]="VerticalCSTypeGeoKey",r[4097]="VerticalCitationGeoKey",r[4098]="VerticalDatumGeoKey",r[4099]="VerticalUnitsGeoKey",r})(),Ct=new Map;Ct.set("EXIFIFD",mt),Ct.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);const it={tiffTags:W,ifdTags:Ct,geoKeys:G,getTagName:(r,dt)=>{let q=(dt||W)[r];return void 0===q&&(q="unknown"+String(r)),q}}},79892:(St,Et,K)=>{K.d(Et,{Z:()=>W});const W=(()=>{const mt=new ArrayBuffer(4),yt=new Uint8Array(mt);return new Uint32Array(mt)[0]=1,1===yt[0]})()},48104:(St,Et,K)=>{K.d(Et,{DP:()=>Z,Nh:()=>st,Pg:()=>J,RP:()=>r,WF:()=>it,_N:()=>Q,eH:()=>at,f4:()=>B,fP:()=>q,zj:()=>dt});var W=K(11432),mt=K(21980),yt=K(96115),G=K(97890);const vt=1,Ct=[.299,.587,.114];function it(_,R=256){R=Math.min(R,256);const{size:s,counts:f}=_,c=new Uint8Array(s),i=f.reduce((n,y)=>n+y/R,0);let h=0,t=0,e=0,o=i;for(let n=0;n<s;n++)if(e+=f[n],!(n<s-1&&e+f[n+1]<o)){for(;h<R-1&&o<e;)h++,o+=i;for(let y=t;y<=n;y++)c[y]=h;t=n+1}for(let n=t;n<s;n++)c[n]=R-1;return c}function r(_){const{minCutOff:R,maxCutOff:s,gamma:f,pixelType:c,rounding:i}=_,h=_.outMin||0,t=_.outMax||255;if(!["u8","u16","s8","s16"].includes(c))return null;const e=R.length;let o,n,y=0;"s8"===c?y=-127:"s16"===c&&(y=-32767);let p=256;["u16","s16"].includes(c)&&(p=65536);const x=[],T=[],O=t-h;for(o=0;o<e;o++)T[o]=s[o]-R[o],x[o]=0===T[o]?0:O/T[o];let M;const N=[];let k,m,S;if(f&&f.length>=e){const V=st(e,f);for(o=0;o<e;o++){for(S=[],n=0;n<p;n++)if(0!==T[o])if(k=n+y,M=(k-R[o])/T[o],m=1,f[o]>1&&(m-=(1/O)**(M*V[o])),k<s[o]&&k>R[o]){const X=m*O*M**(1/f[o])+h;S[n]="floor"===i?Math.floor(X):"round"===i?Math.round(X):X}else S[n]=k>=s[o]?t:h;else S[n]=h;N[o]=S}}else for(o=0;o<e;o++){for(S=[],n=0;n<p;n++)if(k=n+y,k<=R[o])S[n]=h;else if(k>=s[o])S[n]=t;else{const V=(k-R[o])*x[o]+h;S[n]="floor"===i?Math.floor(V):"round"===i?Math.round(V):V}N[o]=S}if(null!=_.contrastOffset){const V=dt(_.contrastOffset,_.brightnessOffset);for(o=0;o<e;o++)for(S=N[o],n=0;n<p;n++)S[n]=V[S[n]]}return{lut:N,offset:y}}function dt(_,R){const s=Math.min(Math.max(_,-100),100),f=Math.min(Math.max(R??0,-100),100);let h=0,t=0;const e=new Uint8Array(256);for(h=0;h<256;h++)s>0&&s<100?t=(200*h-25500+510*f)/(2*(100-s))+128:s<=0&&s>-100?t=(200*h-25500+510*f)*(100+s)/2e4+128:100===s?(t=200*h-25500+256*(100-s)+510*f,t=t>0?255:0):-100===s&&(t=128),e[h]=t>255?255:t<0?0:t;return e}function q(_,R,s){const f=[];for(let c=0;c<R.length;c++){let i=0,h=0,t=0;"min"in R[c]?({min:i,max:h,avg:t}=R[c]):[i,h,t]=R[c];let e=t??0;"u8"!==_&&(e=255*(e-i)/(h-i)),s&&(e*=Ct[c]),f.push(nt(e))}return f}function nt(_){if(_<=0||_>=255)return vt;let R=0;150!==_&&(R=_<=150?45*Math.cos(.01047*_):17*Math.sin(.021*_));const f=_+R,c=Math.log(_/255),i=Math.log(f/255);if(0===i)return vt;const h=c/i;return isNaN(h)?vt:Math.min(9.9,Math.max(.01,h))}function at(_){const{pixels:R,mask:s,pixelType:f,bandMasks:c}=_,i=R.map((h,t)=>function H(_,R,s,f){let c=1/0,i=-1/0,h=0,t=0,e=0,o=0;const n=_.length,y=new Map,p=[];for(let v=0;v<n;v++){const l=_[v];if(!R||R[v]){p.push(l);const w=(y.get(l)??0)+1;y.set(l,w),w>o&&(o=w,e=l),c=l<c?l:c,i=l>i?l:i,h+=l,t++}}if(0===t)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const x=h/t;let T=0;for(let v=0;v<n;v++)R&&!R[v]||(T+=(_[v]-x)**2);const O=R?R.filter(v=>v).length:n,M=O<=1?0:Math.sqrt(T/(O-1));p.sort((v,l)=>v-l);const N=t>>>1,k={min:c,max:i,avg:x,stddev:M,mode:e,median:t%2?p[Math.floor(N)]:(p[N-1]+p[N])/2};if(["u8","s8","u4","u2","u1"].includes(s)){const v=i-c+1,l=new Uint32Array(v);for(let w=0;w<n;w++)R&&!R[w]||l[_[w]-c]++;return{statistics:k,histogram:{min:c-.5,max:i+.5,size:v,counts:l}}}const m=256,S=new Uint32Array(m),V=(i-c)/m;if(0===V)return{statistics:k,histogram:{min:c,max:i,size:1,counts:new Uint32Array(1).fill(t)}};const X=new Uint32Array(257);for(let v=0;v<n;v++)R&&!R[v]||X[Math.floor((_[v]-c)/V)]++;for(let v=0;v<255;v++)S[v]=X[v];return S[255]=X[255]+X[m],{statistics:k,histogram:{min:c,max:i,size:m,counts:S}}}(h,c?.[t]??s,f));return{statistics:i.map(({statistics:h})=>h),histograms:i.map(({histogram:h})=>h)}}function B(_){if(!_?.pixels?.length)return null;const{pixels:R,mask:s,bandMasks:f,pixelType:c}=_,i=_.width*_.height,h=R.length,t=[],e=[],o=256;let n,y,p,x;for(let T=0;T<h;T++){p=new Uint32Array(o);const O=R[T],M=f?.[T]??s;if("u8"===c){if(n=255,y=0,M){for(let P=0;P<i;P++)if(M[P]){const F=O[P];n=F<n?F:n,y=F>y?F:y,p[F]++}}else for(let P=0;P<i;P++){const F=O[P];n=F<n?F:n,y=F>y?F:y,p[F]++}p=p.slice(n,y+1)}else{let P=!1;_.statistics||(_.updateStatistics(),P=!0);const F=_.statistics;n=F[T].minValue,y=F[T].maxValue;const ut=(y-n)/o;if(0===ut){!F||_.validPixelCount||P||_.updateStatistics();const g=(_.validPixelCount||_.width*_.height)/o;for(let a=0;a<o;a++)p[a]=Math.round(g*(a+1))-Math.round(g*a)}else{x=new Uint32Array(257);for(let g=0;g<i;g++)M&&!M[g]||x[Math.floor((O[g]-n)/ut)]++;for(let g=0;g<255;g++)p[g]=x[g];p[255]=x[255]+x[o]}}const N="u8"===c?n-.5:n,k="u8"===c?y+.5:y;t.push({min:N,max:k,size:p.length,counts:p});let m=0,S=0,V=0;for(let P=0;P<p.length;P++)m+=p[P],S+=P*p[P];const X=S/m;for(let P=0;P<p.length;P++)V+=p[P]*(P-X)**2;const v=Math.sqrt(V/(m-1)),l=(k-N)/p.length;e.push({min:n,max:y,avg:(X+("u8"===c?0:.5))*l+n,stddev:v*l})}return{statistics:e,histograms:t}}function J(_){const R=[];for(let s=0;s<_.length;s++){const{min:f,max:c,size:i,counts:h}=_[s];let t=0,e=0;for(let T=0;T<i;T++)t+=h[T],e+=T*h[T];const o=e/t;let n=0;for(let T=0;T<i;T++)n+=h[T]*(T-o)**2;const y=(c-f)/i,p=(o+.5)*y+f,x=Math.sqrt(n/(t-1))*y;R.push({min:f,max:c,avg:p,stddev:x})}return R}function Z(_,R){const{pixelBlock:s,bandIds:f,returnHistogramLut:c,rasterInfo:i}=R;let h=null,t=null,e=_.stretchType;if("number"==typeof e&&(e=G.x[e]),_.dra)if("minMax"===e&&s?.statistics)h=s.statistics.map(A=>[A.minValue,A.maxValue,0,0]);else{const A=B(s);h=null!=A?A.statistics:null,t=null!=A?A.histograms:null}else h=_.statistics?.length?_.statistics:i.statistics,t="histograms"in _?_.histograms:void 0,t||(t=i.histograms);"percentClip"!==e&&"histogramEqualization"!==e||t?.length||(e="minMax");const o=h?.length||t?.length||i.bandCount,n=[],y=[];let p,x,T,O,M,N,k,m,S;h&&!Array.isArray(h[0])&&(h=h.map(A=>[A.min,A.max,A.avg,A.stddev]));const[V,X]=(0,yt.hP)(i.pixelType);if(!h?.length){for(h=[],m=0;m<o;m++)h.push([V,X,1,1]);"standardDeviation"===e&&(e="minMax")}switch(e){case"none":for(m=0;m<o;m++)n[m]=V,y[m]=X;break;case"minMax":for(m=0;m<o;m++){const A=h[m];n[m]=A[0],y[m]=A[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:A=2}=_;for(m=0;m<o;m++){const P=h[m];n[m]=P[2]-A*P[3],y[m]=P[2]+A*P[3],n[m]<P[0]&&(n[m]=P[0]),y[m]>P[1]&&(y[m]=P[1])}}break;case"histogramEqualization":for((0,W.Lw)(t),m=0;m<o;m++)n[m]=t[m].min,y[m]=t[m].max;break;case"percentClip":for((0,W.Lw)(t),m=0;m<t.length;m++){for(p=t[m],M=new Uint32Array(p.size),O=[...p.counts],O.length>=20&&(O[0]=O[1]=O[2]=O[O.length-1]=O[O.length-2]=0),T=0,x=(p.max-p.min)/p.size,k=-.5===p.min&&1===x?.5:0,S=0;S<p.size;S++)T+=O[S],M[S]=T;for(N=(_.minPercent||0)*T/100,n[m]=p.min+k,S=0;S<p.size;S++)if(M[S]>N){n[m]=p.min+x*(S+k);break}for(N=(1-(_.maxPercent||0)/100)*T,y[m]=p.max+k,S=p.size-2;S>=0;S--)if(M[S]<N){y[m]=p.min+x*(S+2-k);break}if(y[m]<n[m]){const A=n[m];n[m]=y[m],y[m]=A}}break;default:for(m=0;m<o;m++){const A=h[m];n[m]=A[0],y[m]=A[1]}}let v,l,w;return"histogramEqualization"===e?((0,W.Lw)(t),l=t[0].size||256,v=0,c&&(w=t.map(A=>it(A)))):(l=_.max||255,v=_.min||0),function Y(_,R){if(null==R||0===R.length)return _;const s=Math.max.apply(null,R),{minCutOff:f,maxCutOff:c,outMin:i,outMax:h,histogramLut:t}=_;return f.length===R.length||f.length<=s?_:{minCutOff:R.map(e=>f[e]),maxCutOff:R.map(e=>c[e]),histogramLut:t?R.map(e=>t[e]):null,outMin:i,outMax:h}}({minCutOff:n,maxCutOff:y,outMax:l,outMin:v,histogramLut:w},f)}function st(_,R){const s=new Float32Array(_);for(let f=0;f<_;f++)s[f]=R[f]>1?R[f]>2?6.5+(R[f]-2)**2.5:6.5+100*(2-R[f])**4:1;return s}function Q(_,R){if(!_?.pixels?.length)return _;const{mask:s,bandMasks:f,width:c,height:i,pixels:h}=_,{minCutOff:t,maxCutOff:e,gamma:o}=R,n=R.outMin||0,y=R.outMax||255,p=c*i,x=R.outputPixelType||"u8",T=_.pixels.map(()=>mt.A.createEmptyBand(x,p)),O=T.length,M=y-n,N=[],k=[];for(let v=0;v<O;v++)k[v]=e[v]-t[v],N[v]=0===k[v]?0:M/k[v];const m=x.startsWith("u")||x.startsWith("s"),V=!!R.isRenderer;if(o&&o.length>=O){const v=st(O,o);for(let l=0;l<O;l++){const w=f?.[l]??s;for(let A=0;A<p;A++)if(null==w||w[A]){if(0===k[l]){T[l][A]=n;continue}const P=h[l][A],F=(P-t[l])/k[l];let ut=1;if(o[l]>1&&(ut-=(1/M)**(F*v[l])),P<e[l]&&P>t[l]){const g=ut*M*F**(1/o[l])+n;T[l][A]=V?Math.floor(g):m?Math.round(g):g}else T[l][A]=P>=e[l]?y:n}}}else for(let v=0;v<O;v++){const l=f?.[v]??s;for(let w=0;w<p;w++)if(null==l||l[w]){const A=h[v][w];if(A<e[v]&&A>t[v]){const P=(A-t[v])*N[v]+n;T[v][w]=V?Math.floor(P):m?Math.round(P):P}else T[v][w]=A>=e[v]?y:n}}const X=new mt.A({width:c,height:i,mask:s,bandMasks:f,pixels:T,pixelType:x});return X.updateStatistics(),X}},14870:(St,Et,K)=>{K.d(Et,{E0:()=>at,SC:()=>q,di:()=>H,fw:()=>dt,ng:()=>Ct,rk:()=>vt,yy:()=>nt});var W=K(21980),mt=K(855),yt=K(40275);const G=1,vt=1/111e3;function Ct(B){let{altitude:J,azimuth:Z}=B;const{hillshadeType:Y,pixelSizePower:st=1,pixelSizeFactor:Q=1,scalingType:_,isGCS:R,resolution:s}=B,f="multi-directional"===Y?2*B.zFactor:B.zFactor,{x:c,y:i}=s;let h=f/(8*c),t=f/(8*i);if(R&&f>.001&&(h/=vt,t/=vt),"adjusted"===_)if(R){const X=c*vt,v=i*vt;h=(f+X**st*Q)/(8*X),t=(f+v**st*Q)/(8*v)}else h=(f+c**st*Q)/(8*c),t=(f+i**st*Q)/(8*i);let e=(90-J)*Math.PI/180,o=Math.cos(e),n=(360-Z+90)*Math.PI/180,y=Math.sin(e)*Math.cos(n),p=Math.sin(e)*Math.sin(n);const x=[315,270,225,360,180,0],T=[60,60,60,60,60,90],O=new Float32Array([3,5,3,2,1,4]),M=O.reduce((X,v)=>X+v),N=O.map(X=>X/M),k="multi-directional"===Y?x.length:1,m=new Float32Array(6),S=new Float32Array(6),V=new Float32Array(6);if("multi-directional"===Y)for(let X=0;X<k;X++)J=T[X],Z=x[X],e=(90-J)*Math.PI/180,o=Math.cos(e),n=(360-Z+90)*Math.PI/180,y=Math.sin(e)*Math.cos(n),p=Math.sin(e)*Math.sin(n),m[X]=o,S[X]=y,V[X]=p;else m.fill(o),S.fill(y),V.fill(p);return{resolution:s,factor:[h,t],sinZcosA:y,sinZsinA:p,cosZ:o,sinZcosAs:S,sinZsinAs:V,cosZs:m,weights:N,hillshadeType:["traditional","multi-directional"].indexOf(Y)}}function it(B,J){const{width:Z,height:Y}=B,st=Z*Y,Q=new Uint8Array(st),_=null!=B.mask;let R;if(_){R=new Uint8Array(B.mask);for(let M=0;M<R.length;M++)R[M]&&(Q[M]=1,R[M]=1)}const s=B.pixels[0],f=new Float32Array(st),c=new Float32Array(st);let i,h=0;if(J){const{resolution:M}=J,N=M?(M.x+M.y)/2:1;h=200*J.zFactor/(N*N),i=new Float32Array(st)}const t=J?.curvatureType;let e,o,n,y,p,x,T,O;for(let M=G;M<Y-G;M++){const N=M*Z;for(let k=G;k<Z-G;k++){const m=N+k;if(!R||0!==R[m]){if(R){if(R[m-Z-1]+R[m-Z]+R[m-Z+1]+R[m-1]+R[m+1]+R[m+Z-1]+R[m+Z]+R[m+Z+1]<7){Q[m]=0;continue}e=R[m-Z-1]?s[m-Z-1]:s[m],o=R[m-Z]?s[m-Z]:s[m],n=R[m-Z+1]?s[m-Z+1]:s[m],y=R[m-1]?s[m-1]:s[m],p=R[m+1]?s[m+1]:s[m],x=R[m+Z-1]?s[m+Z-1]:s[m],T=R[m+Z]?s[m+Z]:s[m],O=R[m+Z+1]?s[m+Z+1]:s[m]}else e=s[m-Z-1],o=s[m-Z],n=s[m-Z+1],y=s[m-1],p=s[m+1],x=s[m+Z-1],T=s[m+Z],O=s[m+Z+1];if(f[m]=n+p+p+O-(e+y+y+x),c[m]=x+T+T+O-(e+o+o+n),null!=i){const S=s[m],V=.5*(y+p)-S,X=.5*(o+T)-S;if("standard"===t)i[m]=-h*(V+X);else{const v=(-e+n+x-O)/4,l=(-y+p)/2,w=(o-T)/2,A=l*l,P=w*w,F=A+P;F&&(i[m]="profile"===t?h*(V*A+X*P+v*l*w)/F:-h*(V*P+X*A-v*l*w)/F)}}}}}return{outMask:_?Q:null,dzxs:f,dzys:c,curvatures:i}}function r(B,J,Z){for(let Y=0;Y<Z;Y++)B[Y*J]=B[Y*J+1],B[(Y+1)*J-1]=B[(Y+1)*J-2];for(let Y=1;Y<J-1;Y++)B[Y]=B[Y+J],B[Y+(Z-1)*J]=B[Y+(Z-2)*J]}function dt(B,J){if(!(0,yt.AB)(B))return B;const{factor:Z,sinZcosA:Y,sinZsinA:st,cosZ:Q,sinZcosAs:_,sinZsinAs:R,cosZs:s,weights:f}=Ct(J),[c,i]=Z,h="traditional"===J.hillshadeType,{width:t,height:e}=B,o=new Uint8Array(t*e),{dzxs:n,dzys:y,outMask:p}=it(B);for(let x=G;x<e-G;x++){const T=x*t;for(let O=G;O<t-G;O++){const M=T+O;if(!p||p[M]){const N=n[M]*c,k=y[M]*i,m=Math.sqrt(1+N*N+k*k);let S=0;if(h){let V=255*(Q+st*k-Y*N)/m;V<0&&(V=0),S=V}else{const V=R.length;for(let X=0;X<V;X++){let v=255*(s[X]+R[X]*k-_[X]*N)/m;v<0&&(v=0),S+=v*f[X]}}o[M]=255&S}}}return r(o,t,e),new W.A({width:t,height:e,pixels:[o],mask:p,pixelType:"u8",validPixelCount:B.validPixelCount,statistics:[new mt.z(0,255)]})}function q(B,J,Z,Y){if(!(0,yt.AB)(B)||!(0,yt.AB)(J))return;const{min:st,max:Q}=Y,_=B.pixels[0],{pixels:R,mask:s}=J,f=R[0],c=255.00001/(Q-st),i=new Uint8ClampedArray(f.length),h=new Uint8ClampedArray(f.length),t=new Uint8ClampedArray(f.length),e=Z.length-1;for(let o=0;o<f.length;o++){if(s&&0===s[o])continue;const n=Math.floor((f[o]-st)*c),[y,p]=Z[n<0?0:n>e?e:n],x=_[o],T=x*p,O=T*(1-Math.abs(y%2-1)),M=x-T;switch(Math.floor(y)){case 0:i[o]=T+M,h[o]=O+M,t[o]=M;break;case 1:i[o]=O+M,h[o]=T+M,t[o]=M;break;case 2:i[o]=M,h[o]=T+M,t[o]=O+M;break;case 3:i[o]=M,h[o]=O+M,t[o]=T+M;break;case 4:i[o]=O+M,h[o]=M,t[o]=T+M;break;case 5:case 6:i[o]=T+M,h[o]=M,t[o]=O+M}}B.pixels=[i,h,t],B.updateStatistics()}function nt(B,J){if(!(0,yt.AB)(B))return B;const Z=J.zFactor,Y=J.pixelSizePower??1,st=J.pixelSizeFactor??1,Q=J.slopeType,_=J.isGCS,{x:R,y:s}=J.resolution;let f=Z/(8*R),c=Z/(8*s);_&&Math.abs(Z-1)<1e-4&&(f/=vt,c/=vt),"adjusted"===Q&&(f=(Z+R**Y*st)/(8*R),c=(Z+s**Y*st)/(8*s));const{dzxs:i,dzys:h,outMask:t}=it(B),{width:e,height:o}=B,n=new Float32Array(e*o);for(let p=G;p<o-G;p++){const x=p*e;for(let T=G;T<e-G;T++){const O=x+T;if(!t||t[O]){const M=i[O]*f,N=h[O]*c,k=Math.sqrt(M*M+N*N);n[x+T]="percent-rise"===Q?100*k:57.2957795*Math.atan(k)}}}r(n,e,o);const y=new W.A({width:e,height:o,pixels:[n],mask:t,pixelType:"f32",validPixelCount:B.validPixelCount});return y.updateStatistics(),y}function H(B,J={}){if(!(0,yt.AB)(B))return B;const{resolution:Z}=J,Y=Z?1/Z.x:1,st=Z?1/Z.y:1,{dzxs:Q,dzys:_,outMask:R}=it(B),{width:s,height:f}=B,c=new Float32Array(s*f);for(let i=G;i<f-G;i++){const h=i*s;for(let t=G;t<s-G;t++){const e=h+t;if(!R||R[e]){const o=Q[e]*Y,n=_[e]*st;let y=-1;0===o&&0===n||(y=90-57.29578*Math.atan2(n,-o),y<0&&(y+=360),360===y?y=0:y>360&&(y%=360)),c[h+t]=y}}}return r(c,s,f),new W.A({width:s,height:f,pixels:[c],mask:R,pixelType:"f32",validPixelCount:B.validPixelCount,statistics:[new mt.z(-1,360)]})}function at(B,J){if(!(0,yt.AB)(B))return B;const{curvatures:Z,outMask:Y}=it(B,J),{width:st,height:Q}=B;r(Z,st,Q);const _=new W.A({width:st,height:Q,pixels:[Z],mask:Y,pixelType:"f32",validPixelCount:B.validPixelCount});return _.updateStatistics(),_}},54636:(St,Et,K)=>{K.d(Et,{A:()=>Z});var W=K(8189),mt=K(29430),yt=K(71065),G=K(35150),vt=K(85211),r=(K(3248),K(40707),K(76576)),dt=K(83179),q=K(40275),nt=K(48104),H=K(14870),at=K(32681),B=K(78290);let J=class extends yt.oY{constructor(s){super(s)}bind(){const{rendererJSON:s}=this;if(!s)return{success:!1};let f;switch(this.lookup={rendererJSON:{}},s.type){case"uniqueValue":f=this._updateUVRenderer(s);break;case"rasterColormap":f=this._updateColormapRenderer(s);break;case"rasterStretch":f=this._updateStretchRenderer(s);break;case"classBreaks":f=this._updateClassBreaksRenderer(s);break;case"rasterShadedRelief":f=this._updateShadedReliefRenderer(s);break;case"vectorField":f=this._updateVectorFieldRenderer();break;case"flowRenderer":f=this._updateFlowRenderer()}return f}symbolize(s){let f=s?.pixelBlock;if(!_(f))return f;if(s.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(f,s.simpleStretchParams);try{let c;switch(f.pixels.length>3&&(f=f.extractBands(s.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":c=this._symbolizeColormap(f);break;case"classBreaks":c=this._symbolizeClassBreaks(f);break;case"rasterStretch":c=this._symbolizeStretch(f,s.bandIds);break;case"rasterShadedRelief":{const i=s.extent;c=this._symbolizeShadedRelief(f,{isGCS:i.spatialReference.isGeographic,resolution:{x:(i.xmax-i.xmin)/f.width,y:(i.ymax-i.ymin)/f.height}});break}}return c}catch(c){return G.A.getLogger(this).error("symbolize",c.message),f}}simpleStretch(s,f){if(!_(s))return s;try{return s.pixels.length>3&&(s=s.extractBands([0,1,2])),(0,nt._N)(s,{...f,isRenderer:!0})}catch(c){return G.A.getLogger(this).error("symbolize",c.message),s}}generateWebGLParameters(s){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:e,offset:o}=this.lookup.colormapLut||{};return{colormap:e,colormapOffset:o,type:"lut"}}const{pixelBlock:f,isGCS:c,resolution:i,bandIds:h}=s,{rendererJSON:t}=this;return"rasterStretch"===t.type?this._generateStretchWebGLParams(f,t,h):"rasterShadedRelief"===t.type?this._generateShadedReliefWebGLParams(t,c,i??void 0):"vectorField"===t.type?this._generateVectorFieldWebGLParams(t):null}_isLUTChanged(s){return!this.lookup||!this.lookup.rendererJSON||("colorRamp"in this.rendererJSON&&s?JSON.stringify(this.rendererJSON.colorRamp)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}_symbolizeColormap(s){return this._isLUTChanged()&&!this.bind().success?s:(0,q.qL)(s,this.lookup.colormapLut)}_symbolizeClassBreaks(s){const{canUseIndexedLUT:f}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?s:f?(0,q.qL)(s,this.lookup.colormapLut):(0,q.Hx)(s,this.lookup.remapLut??[])}_symbolizeStretch(s,f){const{rasterInfo:c}=this,{pixelType:i,bandCount:h}=c,t=this.rendererJSON,e=["u8","u16","s8","s16"].includes(i);let o,n;const{dra:y}=t,{gamma:p}=this.lookup;if("histogramEqualization"===t.stretchType){const x=y?null:this.lookup?.histogramLut,T=(0,nt.DP)(t,{rasterInfo:c,pixelBlock:s,bandIds:f,returnHistogramLut:!x}),O=(0,nt._N)(s,{...T,gamma:p,isRenderer:!0});n=(0,q.eH)(O,{lut:y?T.histogramLut:x,offset:0})}else if(e){if(y){const x=(0,nt.DP)(t,{rasterInfo:c,pixelBlock:s,bandIds:f});o=(0,nt.RP)({pixelType:i,...x,gamma:p,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return s;o=this.lookup?this.lookup.stretchLut:null}else o=this.lookup?this.lookup.stretchLut:null;if(!o)return s;h>1&&null!=f&&f.length===s?.pixels.length&&o?.lut.length===h&&(o={lut:f.map(x=>o.lut[x]),offset:o.offset}),n=(0,q.eH)(s,o)}else{const x=(0,nt.DP)(t,{rasterInfo:c,pixelBlock:s,bandIds:f});n=(0,nt._N)(s,{...x,gamma:p,isRenderer:!0})}if(t.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return s;n=(0,q.qL)(n,this.lookup?.colormapLut)}return n}_symbolizeShadedRelief(s,f){const c=this.rendererJSON,i={...c,...f},h=(0,H.fw)(s,i);if(!c.colorRamp)return h;let t;if(this._isLUTChanged(!0)){if(!this.bind().success)return h;t=this.lookup?this.lookup.hsvMap:null}else t=this.lookup?this.lookup.hsvMap:null;return t?((0,H.SC)(h,s,t,this.rasterInfo.statistics?.[0]??{min:0,max:8e3}),h):h}_isVectorFieldData(){const{bandCount:s,dataType:f}=this.rasterInfo;return 2===s&&("vector-magdir"===f||"vector-uv"===f)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(s){const{bandCount:f,attributeTable:c,pixelType:i}=this.rasterInfo,h=s.field1;if(!h)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const t=s.defaultSymbol,e=1===f&&["u8","s8"].includes(i);if(!(0,B.hu)(this.rasterInfo,h)&&!e)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const o=[];if(null!=c){const y=c.fields.find(p=>"value"===p.name.toLowerCase());if(!y)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};c.features.forEach(p=>{const x=s.uniqueValueInfos?.find(O=>String(O.value)===String(p.attributes[h])),T=x?.symbol?.color;T?o.push([p.attributes[y.name]].concat(T)):t&&o.push([p.attributes[y.name]].concat(t.color))})}else{if("value"!==h.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};s.uniqueValueInfos?.forEach(y=>{const p=y?.symbol?.color;p?o.push([parseInt(""+y.value,10)].concat(p)):t&&o.push([parseInt(""+y.value,10)].concat(t?.color))})}if(0===o.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const n=(0,q.zg)({colormap:o});return this.lookup={rendererJSON:s,colormapLut:n},this.canRenderInWebGL=Y(n?.indexedColormap),{success:!0}}_updateColormapRenderer(s){if(!(0,B.FA)(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const f=s.colormapInfos.map(i=>[i.value].concat(i.color)).sort((i,h)=>i[0]-h[0]);if(!f||0===f.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const c=(0,q.zg)({colormap:f});return this.lookup={rendererJSON:s,colormapLut:c},this.canRenderInWebGL=Y(c?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(s){if(!(0,B.iL)(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(s.colorRamp){const f=(0,at.R8)(s.colorRamp,{interpolateAlpha:!0}),c=(0,q.zg)({colormap:f}),i=[],h=c.indexedColormap;for(let t=0;t<h.length;t+=4){const e=(0,mt.N2)({r:h[t],g:h[t+1],b:h[t+2]});i.push([e.h/60,e.s/100,255*e.v/100])}this.lookup={rendererJSON:s,colormapLut:c,hsvMap:i}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(s){const{attributeTable:f,pixelType:c}=this.rasterInfo,i=null!=f?f.fields.find(e=>"value"===e.name.toLowerCase()):null,h=null!=f?f.fields.find(e=>e.name.toLowerCase()===s.field.toLowerCase()):null,t=null!=i&&null!==h;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(c)||t,tableValueField:i,tableBreakField:h}}_updateClassBreaksRenderer(s){const{attributeTable:f}=this.rasterInfo,{canUseIndexedLUT:c,tableValueField:i,tableBreakField:h}=this._analyzeClassBreaks(s),t=s.classBreakInfos;if(!t?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const e=t.sort((x,T)=>x.classMaxValue-T.classMaxValue),o=e[e.length-1];let n=s.minValue;if(!c){const x=[];for(let T=0;T<e.length;T++)x.push({value:e[T].classMinValue??n,mappedColor:e[T].symbol.color}),n=e[T].classMaxValue;return x.push({value:o.classMaxValue,mappedColor:o.symbol.color}),this.lookup={rendererJSON:s,remapLut:x},this.canRenderInWebGL=!1,{success:!0}}const y=[];if(null!=f&&null!=i&&null!==h&&i!==h){const x=i.name,T=h.name,O=e[e.length-1],{classMaxValue:M}=O;n=s.minValue;for(const N of f.features){const k=N.attributes[x],m=N.attributes[T],S=m===M?O:m<n?null:e.find(({classMaxValue:V})=>V>m);S&&y.push([k].concat(S.symbol.color))}}else{n=Math.floor(s.minValue);for(let x=0;x<e.length;x++){const T=e[x];for(let O=n;O<T.classMaxValue;O++)y.push([O].concat(T.symbol.color));n=Math.ceil(T.classMaxValue)}o.classMaxValue===n&&y.push([o.classMaxValue].concat(o.symbol.color))}const p=(0,q.zg)({colormap:y,fillUnspecified:!1});return this.lookup={rendererJSON:s,colormapLut:p},this.canRenderInWebGL=Y(p?.indexedColormap),{success:!0}}_updateStretchRenderer(s){let{stretchType:f,dra:c}=s;if(!("none"===f||s.statistics?.length||function Q(s){return null!=s&&s.length>0&&null!=s[0].min&&null!=s[0].max}(this.rasterInfo.statistics)||c))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const i=s.histograms||this.rasterInfo.histograms;!function st(s){return"percentClip"===s||"histogramEqualization"===s}(s.stretchType)||i?.length||c||(f="minMax");const{computeGamma:h,useGamma:t,colorRamp:e}=s;let{gamma:o}=s;t&&h&&!o?.length&&(o=(0,nt.fP)(this.rasterInfo.pixelType,s.statistics?.length?s.statistics:this.rasterInfo.statistics));const n=this.rasterInfo.pixelType,y=!c&&["u8","u16","s8","s16"].includes(n);if("histogramEqualization"===f){const p=i.map(x=>(0,nt.WF)(x));this.lookup={rendererJSON:s,histogramLut:p}}else if(y){const p=(0,nt.DP)(s,{rasterInfo:this.rasterInfo}),x=(0,nt.RP)({pixelType:n,...p,gamma:t?o:null,rounding:"floor"});this.lookup={rendererJSON:s,stretchLut:x}}if(e&&!function R(s){return"algorithmic"===s.type&&["0,0,0,255","0,0,0"].includes(s.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(s.toColor.join(","))}(e)){const p=(0,at.R8)(e,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:s}),this.lookup.colormapLut=(0,q.zg)({colormap:p}),this.lookup.rendererJSON=s}return this.lookup.gamma=t&&o?.length?o:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(s,f,c){let i=null,h=null;const t=this.lookup?.colormapLut;f.colorRamp&&t&&(i=t.indexedColormap,h=t.offset),"histogramEqualization"===f.stretchType&&(f={...f,stretchType:"minMax"});const{gamma:e}=this.lookup,o=!(!f.useGamma||!e?.some(V=>1!==V)),{minCutOff:n,maxCutOff:y,outMin:p,outMax:x}=(0,nt.DP)(f,{rasterInfo:this.rasterInfo,pixelBlock:s,bandIds:c});let T=0;null!=s&&(T=s.getPlaneCount(),2===T&&((s=s.clone()).statistics=[s.statistics[0]],s.pixels=[s.pixels[0]]));const{bandCount:O}=this.rasterInfo,M=Math.min(3,c?.length||T||O,O),N=new Float32Array(M),k=i||o?1:255;let m;for(m=0;m<n.length;m++)N[m]=y[m]===n[m]?0:(x-p)/(y[m]-n[m])/k;const S=new Float32Array(M);if(o&&e)for(m=0;m<M;m++)S[m]=e[m]>1?e[m]>2?6.5+(e[m]-2)**2.5:6.5+100*(2-e[m])**4:1;return{bandCount:M,outMin:p/k,outMax:x/k,minCutOff:n,maxCutOff:y,factor:N,useGamma:o,gamma:o?e:[1,1,1],gammaCorrection:o?S:[1,1,1],colormap:i,colormapOffset:h,stretchType:f.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(s,f=!1,c={x:0,y:0}){let i=null,h=null;const t=this.lookup?.colormapLut;s.colorRamp&&t&&(i=t.indexedColormap,h=t.offset);const e={...s,isGCS:f,resolution:c},o=(0,H.ng)(e),n=this.rasterInfo.statistics?.[0];return{...o,minValue:n?.min??0,maxValue:n?.max??8e3,hillshadeType:"traditional"===s.hillshadeType?0:1,type:"hillshade",colormap:i,colormapOffset:h}}_generateVectorFieldWebGLParams(s){const{style:f,inputUnit:c,outputUnit:i,visualVariables:h,symbolTileSize:t,flowRepresentation:e}=s;let o;const n=this.rasterInfo.statistics?.[0].min??0,y=this.rasterInfo.statistics?.[0].max??50,p=h?.find(m=>"sizeInfo"===m.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:y,maxSize:.8*t,minDataValue:n,minSize:.2*t},x=p.minDataValue??n,T=p.maxDataValue??y,O=null!=p.maxSize&&null!=p.minSize?[p.minSize/t,p.maxSize/t]:[.2,.8];"wind_speed"===f&&(O[0]=O[1]=(O[0]+O[1])/2);const M=null!=x&&null!=T?[x,T]:null;if("classified_arrow"===f)if(null!=x&&null!=T&&null!=p){o=[];const m=(p.maxDataValue-p.minDataValue)/5;for(let S=0;S<6;S++)o.push(p.minDataValue+m*S)}else o=[0,1e-6,3.5,7,10.5,14];const N="flow_to"===e==("ocean_current_kn"===f||"ocean_current_m"===f)?0:Math.PI,k=h?.find(m=>"rotationInfo"===m.type);return{breakValues:o,dataRange:M,inputUnit:c,outputUnit:i,symbolTileSize:t,symbolPercentRange:O,style:f||"single_arrow",rotation:N,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":k?.rotationType||s.rotationType,type:"vectorField"}}};(0,W._)([(0,vt.MZ)({json:{write:!0}})],J.prototype,"rendererJSON",void 0),(0,W._)([(0,vt.MZ)({type:dt.A,json:{write:!0}})],J.prototype,"rasterInfo",void 0),(0,W._)([(0,vt.MZ)({json:{write:!0}})],J.prototype,"lookup",void 0),(0,W._)([(0,vt.MZ)()],J.prototype,"canRenderInWebGL",void 0),J=(0,W._)([(0,r.$)("esri.renderers.support.RasterSymbolizer")],J);const Z=J;function Y(s){return!!s?.length&&s.length<=16384}function _(s){return(0,q.AB)(s)&&0!==s.validPixelCount}},32681:(St,Et,K)=>{K.d(Et,{L7:()=>vt,M5:()=>B,R8:()=>s,hf:()=>i,hs:()=>at,iv:()=>R,kH:()=>it,vL:()=>h,vj:()=>Ct});var W=K(68677),mt=K(29430),yt=K(49976),G=K(71065);const vt=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],Ct=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],it=new yt.J({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function r(t,e){if(!t||!e||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]>e[o]+2||t[o]<e[o]-2)return!1;return!0}function dt(t){const e=t.clone();return e.fromColor=t.toColor,e.toColor=t.fromColor,e.algorithm=t.algorithm,e}function nt(t,e){if(!t)return;const o=e??Ct;let n=null;return"algorithmic"===t.type?o.some(y=>{if(r(t.fromColor.toRgb(),y.fromColor)&&r(t.toColor.toRgb(),y.toColor))return n=y.id,!0}):"multipart"===t.type&&o.some(y=>{const p=t.colorRamps,x=y.colorRamps;if(p&&x&&p.length===x.length&&!x.some((T,O)=>{if(!r(p[O].fromColor.toRgb(),new W.A(T.fromColor).toRgb())||!r(p[O].toColor.toRgb(),new W.A(T.toColor).toRgb()))return!0})){if(n)return!0;n=y.id}}),n}function at(t,e=!1){const o="string"==typeof t?t:function H(t,e,o=!1){if(!t)return;let n=!1,y=nt(t,e);return null!=y||o||(n=!0,y=nt(t=function q(t){if("multipart"===t.type){const e=t.clone();return e.colorRamps?.length&&(e.colorRamps=e.colorRamps.reverse().map(o=>dt(o))),e}return dt(t)}(t),e)),y?{id:y,inverted:n}:void 0}(t,void 0,e)?.id;return o?it.toJSON(o):null}function B(t,e="esriCIELabAlgorithm"){const o=Ct.find(({id:n})=>n===t);return o?o.colorRamps?{type:"multipart",colorRamps:o.colorRamps.map(n=>({type:"algorithmic",algorithm:e,fromColor:[...n.fromColor],toColor:[...n.toColor]}))}:{type:"algorithmic",algorithm:e,fromColor:[...o.fromColor],toColor:[...o.toColor]}:null}function J(t){const e=(t=t||{}).numColors||256,o=t.distanceOffset||0,n=null!=t.isCustomInterval?t.isCustomInterval:null!==t.distanceInterval&&t.distanceInterval!==1/(e-1),y=t.distanceInterval||1/(e-1);return{...t,numColors:e,distanceOffset:o,interpolateAlpha:!!t.interpolateAlpha,distanceInterval:y,isCustomInterval:n,weights:t.weights}}function Q(t,e){let{fromColor:o,toColor:n}=t;o=[...o],n=[...n],3===o.length&&(o=o.concat([255])),3===n.length&&(n=n.concat([255]));const y=t.algorithm||"esriCIELabAlgorithm",p=J(e),{numColors:x,distanceOffset:T,isCustomInterval:O,interpolateAlpha:M}=p;if(1===x&&0===T)return[o];if(2===x&&0===T&&!O)return[o,n];const N={r:o[0],g:o[1],b:o[2]},k={r:n[0],g:n[1],b:n[2]},m="esriCIELabAlgorithm"===y?function Y(t,e,o){const{numColors:n,distanceOffset:y,distanceInterval:p,isCustomInterval:x}=o;let{l:T,a:O,b:M}=t;const N=(e.l-T)*p,k=(e.a-O)*p,m=(e.b-M)*p,S=[];if(y){const V=y/p;T+=V*N,O+=V*k,M+=V*m}for(let V=0;V<n-1;V++)S.push({l:T,a:O,b:M}),T+=N,O+=k,M+=m;return S.push(x?{l:T,a:O,b:M}:e),S}((0,mt.ZD)(N),(0,mt.ZD)(k),p):"esriHSVAlgorithm"===y?function Z(t,e,o){const{numColors:n,distanceOffset:y,distanceInterval:p,isCustomInterval:x}=o,T=0===t.s,O=0===e.s;let M=t.h,N=e.h;T&&!O?M=N:O&&!T&&(e={...e,h:M},N=M);let k,m=Math.abs(N-M);const S=360;m<180?k=(N-M)*p:(m=S-m,k=M>N?m*p:-m*p);const V=(e.s-t.s)*p,X=(e.v-t.v)*p;let{s:v,v:l}=t,w=M;if(y){const P=y/p;w=(w+P*k+S)%S,v+=P*V,l+=P*X}const A=[];for(let P=0;P<n-1;P++)A.push({h:w,s:v,v:l}),w=(w+k+S)%S,v+=V,l+=X;return A.push(x?{h:w,s:v,v:l}:e),A}((0,mt.N2)(N),(0,mt.N2)(k),p):function st(t,e,o){const{numColors:n,distanceOffset:y,distanceInterval:p,isCustomInterval:x}=o,T=t.h,O=e.h,M=2*Math.PI;let N;if(T<=O){const w=O-T,A=O-T-M;N=Math.abs(A)<Math.abs(w)?A:w}else{const w=O+M-T,A=O-T;N=Math.abs(A)<Math.abs(w)?A:w}const k=N*p,m=(e.l-t.l)*p,S=(e.c-t.c)*p;let{l:V,c:X,h:v}=t;if(y){const w=y/p;V+=w*m,X+=w*S,v=(v+w*k+M)%M}const l=[];for(let w=0;w<n-1;w++)l.push({l:V,c:X,h:v}),V+=m,X+=S,v=(v+k+M)%M;return l.push(x?{l:V,c:X,h:v}:e),l}((0,mt.RH)(N),(0,mt.RH)(k),p),S=[],V=o[3]??255,X=((n[3]??255)-V)/(x-1);for(let v=0;v<x;v++){const{r:l,g:w,b:A}=(0,mt.$)(m[v]),P=M?Math.round(V+X*v):255;S.push([l,w,A,P])}return S}function R(t,e){const o=(0,G.Wj)(t)?t.toJSON():t;return"multipart"===o.type?function _(t,e){const{numColors:o,interpolateAlpha:n}=J(e);let y=e?.weights;const{colorRamps:p}=t;if(y){const k=y.reduce((m,S)=>m+S);y=y.map(m=>m/k)}else{y=[];for(let k=0;k<p.length;k++)y[k]=1/p.length}const x=[],T=1/(o-1);let O=0,M=!1;for(let k=0;k<p.length;k++){const m=x.length,S=M?0:m*T-O;O+=y[k];let V=k===p.length-1?o-1-m:(y[k]-S)/T;if(M=Math.ceil(V)===V,V=Math.ceil(V),0===V)continue;const X=Q(p[k],{numColors:V,interpolateAlpha:n,distanceOffset:S/y[k],distanceInterval:T/y[k]});x.push(...X)}const N=[...p[p.length-1].toColor];return 3===N.length&&N.push(255),x.push(N),x}(o,e):Q(o,e)}function s(t,e){const o=R(t,e),n=e?.interpolateAlpha;return o.forEach((y,p)=>{y.unshift(p),n||y.pop()}),o}function f(t){const e=(0,mt.N2)(t);return{type:"HsvColor",Hue:e.h,Saturation:e.s,Value:e.v,AlphaValue:255}}function c(t){return{Algorithm:t.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:f(t.fromColor),ToColor:f(t.toColor)}}function i(t){const e=at(t);if(!e)return null;if("algorithmic"===t.type)return{...c(t),Name:e};if(t.colorRamps){const o=t.colorRamps.map(c);return{type:"MultiPartColorRamp",NumColorRamps:o.length,ArrayOfColorRamp:o,Name:e}}return null}function h(t){const e=t.reverse().map(o=>{const n=o.toString(16);return n.length<2?"0"+n:n});return 4294967295&Number.parseInt(e.join(""),16)}},78290:(St,Et,K)=>{function mt(r,dt){const{attributeTable:q,bandCount:nt}=r;return!(null!=q||!function W(r){return["u8","s8"].includes(r.pixelType)&&null!=r.statistics?.[0]?.min&&null!=r.statistics[0]?.max&&1===r.bandCount}(r))||!(null==q||nt>1||dt&&null==q.fields.find(H=>H.name.toLowerCase()===dt.toLowerCase()))}function yt(r){const{bandCount:dt,dataType:q,pixelType:nt}=r;return"elevation"===q||"generic"===q&&1===dt&&("s16"===nt||"s32"===nt||"f32"===nt||"f64"===nt)}function G(r,dt=!1){const{bandCount:q,colormap:nt,pixelType:H}=r;return 1===q&&(!!nt?.length||!dt&&"u8"===H)}function vt(r,dt=!1){const{attributeTable:q,bandCount:nt}=r;return 1===nt&&(!dt||null!=q||null!=r.histograms)}function Ct(r){const{dataType:dt}=r;return"vector-uv"===dt||"vector-magdir"===dt}function it(r){const{dataType:dt}=r;return"vector-uv"===dt||"vector-magdir"===dt}K.d(Et,{FA:()=>G,QJ:()=>it,hu:()=>mt,iL:()=>yt,rd:()=>Ct,xX:()=>vt})},97890:(St,Et,K)=>{K.d(Et,{u:()=>mt,x:()=>yt});const mt=new(K(49976).J)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),yt={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}}}]);