"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[7120,6773],{57120:(V,Z,v)=>{v.d(Z,{A:()=>x});var d=v(10467),S=v(62138),f=v(31033),L=v(85922),G=v(71505),F=v(7981),R=v(16773);class x extends L.A{constructor(g){super(g),this._relation="",this._relationGeom=null,this._relationString="",this.declaredClass="esri.arcade.featureset.actions.SpatialFilter",this._relationString=g.relationString,this._parent=g.parentfeatureset,this._maxProcessing=40,this._relation=g.relation,this._relationGeom=g.relationGeom}_getSet(g){var c=this;return(0,d.A)(function*(){if(null===c._wset){yield c._ensureLoaded();const O=yield c._parent._getFilteredSet("esriSpatialRelRelation"!==c._relation?c._relation:c._relation+":"+c._relationString,c._relationGeom,null,null,g);return c._checkCancelled(g),c._wset=new G.A(O._candidates.slice(0),O._known.slice(0),O._ordered,c._clonePageDefinition(O.pagesDefinition)),c._wset}return c._wset})()}_isInFeatureSet(g){let c=this._parent._isInFeatureSet(g);return c===F.J6.NotInFeatureSet?c:(c=this._idstates[g],void 0===c?F.J6.Unknown:c)}_getFeature(g,c,O){return this._parent._getFeature(g,c,O)}_getFeatures(g,c,O,A){return this._parent._getFeatures(g,c,O,A)}_featureFromCache(g){return this._parent._featureFromCache(g)}executeSpatialRelationTest(g){var c=this;return(0,d.A)(function*(){if(null===g.geometry)return!1;switch(c._relation){case"esriSpatialRelEnvelopeIntersects":return(0,R.intersects)((0,F.Yc)(c._relationGeom),(0,F.Yc)(g.geometry));case"esriSpatialRelIntersects":return(0,R.intersects)(c._relationGeom,g.geometry);case"esriSpatialRelContains":return(0,R.contains)(c._relationGeom,g.geometry);case"esriSpatialRelOverlaps":return(0,R.overlaps)(c._relationGeom,g.geometry);case"esriSpatialRelWithin":return(0,R.within)(c._relationGeom,g.geometry);case"esriSpatialRelTouches":return(0,R.touches)(c._relationGeom,g.geometry);case"esriSpatialRelCrosses":return(0,R.crosses)(c._relationGeom,g.geometry);case"esriSpatialRelRelation":return(0,R.relate)(c._relationGeom,g.geometry,c._relationString??"")}})()}_fetchAndRefineFeatures(g,c,O){var A=this;return(0,d.A)(function*(){const w=new G.A([],g,!1,null),P=Math.min(c,g.length);yield A._parent?._getFeatures(w,-1,P,O),A._checkCancelled(O);const N=[];for(let e=0;e<P;e++){const t=A._parent._featureFromCache(g[e]);N.push(yield A.executeSpatialRelationTest(t))}for(let e=0;e<c;e++)A._idstates[g[e]]=!0===N[e]?F.J6.InFeatureSet:F.J6.NotInFeatureSet;return"success"})()}_getFilteredSet(g,c,O,A,w){var P=this;return(0,d.A)(function*(){yield P._ensureLoaded();const N=yield P._parent._getFilteredSet("esriSpatialRelRelation"!==P._relation?P._relation:P._relation+":"+P._relationString,P._relationGeom,O,A,w);let e;return P._checkCancelled(w),e=null!==c?new G.A(N._candidates.slice(0).concat(N._known.slice(0)),[],N._ordered,P._clonePageDefinition(N.pagesDefinition)):new G.A(N._candidates.slice(0),N._known.slice(0),N._ordered,P._clonePageDefinition(N.pagesDefinition)),e})()}_stat(g,c,O,A,w,P,N){var e=this;return(0,d.A)(function*(){if(""!==O)return{calculated:!1};const t=yield e._parent._stat(g,c,"esriSpatialRelRelation"!==e._relation?e._relation:e._relation+":"+e._relationString,e._relationGeom,w,P,N);return!1===t.calculated?null===w&&""===O&&null===A?e._manualStat(g,c,P,N):{calculated:!1}:t})()}_canDoAggregates(g,c,O,A,w){var P=this;return(0,d.A)(function*(){return""===O&&null===A&&null!==P._parent&&P._parent._canDoAggregates(g,c,"esriSpatialRelRelation"!==P._relation?P._relation:P._relation+":"+P._relationString,P._relationGeom,w)})()}_getAggregatePagesDataSourceDefinition(g,c,O,A,w,P,N){var e=this;return(0,d.A)(function*(){if(null===e._parent)throw new f.dr(f.D_.NeverReach);return e._parent._getAggregatePagesDataSourceDefinition(g,c,"esriSpatialRelRelation"!==e._relation?e._relation:e._relation+":"+e._relationString,e._relationGeom,w,P,N)})()}static registerAction(){L.A._featuresetFunctions.intersects=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelIntersects",relationGeom:g})},L.A._featuresetFunctions.envelopeIntersects=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelEnvelopeIntersects",relationGeom:g})},L.A._featuresetFunctions.contains=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelContains",relationGeom:g})},L.A._featuresetFunctions.overlaps=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelOverlaps",relationGeom:g})},L.A._featuresetFunctions.within=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelWithin",relationGeom:g})},L.A._featuresetFunctions.touches=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelTouches",relationGeom:g})},L.A._featuresetFunctions.crosses=function(g){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelCrosses",relationGeom:g})},L.A._featuresetFunctions.relate=function(g,c){return null==g?new S.A({parentfeatureset:this}):new x({parentfeatureset:this,relation:"esriSpatialRelRelation",relationGeom:g,relationString:c})}}getFieldsIndex(){return this._parent.getFieldsIndex()}}},62138:(V,Z,v)=>{v.d(Z,{A:()=>F});var d=v(10467),S=v(31033),f=v(85922),L=v(71505),G=v(7981);class F extends f.A{constructor(x){super(x),this.declaredClass="esri.layers.featureset.sources.Empty",this._maxProcessing=1e3,this._wset=new L.A([],[],!1,null),this._parent=x.parentfeatureset,this._databaseType=G.zl.Standardised}_getSet(){var x=this;return(0,d.A)(function*(){return x._wset})()}optimisePagingFeatureQueries(){}_isInFeatureSet(){return G.J6.NotInFeatureSet}_getFeature(){return(0,d.A)(function*(){throw new S.dr(S.D_.NeverReach)})()}queryAttachments(){return(0,d.A)(function*(){return[]})()}_getFeatures(){return(0,d.A)(function*(){return"success"})()}_featureFromCache(){return null}_fetchAndRefineFeatures(){return(0,d.A)(function*(){throw new S.dr(S.D_.NeverReach)})()}_getFilteredSet(){return(0,d.A)(function*(){return new L.A([],[],!1,null)})()}_stat(x,J,g,c,O,A,w){return this._manualStat(x,J,A,w)}_canDoAggregates(){return(0,d.A)(function*(){return!1})()}}},85922:(V,Z,v)=>{v.d(Z,{A:()=>w});var d=v(10467),S=v(89812),f=v(31033),L=v(63145);class G{constructor(e,t){this._lastId=-1,this._progress=t,this._parent=e}reset(){this._lastId=-1}nextBatchAsArcadeFeatures(e,t){var a=this;return(0,d.A)(function*(){const r=yield a.nextBatch(e);return null===r?r:r.map(u=>L.A.createFromGraphicLikeObject(u.geometry,u.attributes,a._parent,t))})()}nextBatch(e){if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then(r=>this.nextBatch(e),r=>this.nextBatch(e));const t={returnpromise:null,hasset:!1},a=[];return t.returnpromise=new Promise((r,u)=>{this._parent._getSet(this._progress).then(l=>{const T=l._known;let E=T.length-1;if("GETPAGES"===T[T.length-1]&&(E-=1),this._lastId+e>E&&T.length>0&&"GETPAGES"===T[T.length-1])this._parent._expandPagedSet(l,this._parent._maxQueryRate(),0,0,this._progress).then(W=>{t.hasset=!0,this._parent._mainSetInUse=null,this.nextBatch(e).then(r,u)},W=>{t.hasset=!0,this._parent._mainSetInUse=null,u(W)});else{if(E>=this._lastId+e||0===l._candidates.length){for(let W=0;W<e;W++){const i=W+this._lastId+1;if(i>=T.length)break;a[W]=T[i]}return this._lastId+=a.length,0===a.length&&(t.hasset=!0,this._parent._mainSetInUse=null,r([])),void this._parent._getFeatureBatch(a,this._progress).then(W=>{t.hasset=!0,this._parent._mainSetInUse=null,r(W)},W=>{t.hasset=!0,this._parent._mainSetInUse=null,u(W)})}this._parent._refineSetBlock(l,this._parent._maxProcessingRate(),this._progress).then(()=>{t.hasset=!0,this._parent._mainSetInUse=null,this.nextBatch(e).then(r,u)},W=>{t.hasset=!0,this._parent._mainSetInUse=null,u(W)})}},l=>{t.hasset=!0,this._parent._mainSetInUse=null,u(l)})}),!1===t.hasset&&(this._parent._mainSetInUse=t.returnpromise,t.hasset=!0),t.returnpromise}next(){if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then(t=>this.next(),t=>this.next());const e={returnpromise:null,hasset:!1};return e.returnpromise=new Promise((t,a)=>{this._parent._getSet(this._progress).then(r=>{const u=r._known;this._lastId<u.length-1?"GETPAGES"===u[this._lastId+1]?this._parent._expandPagedSet(r,this._parent._maxQueryRate(),0,0,this._progress).then(l=>(e.hasset=!0,this._parent._mainSetInUse=null,this.next())).then(t,a):(this._lastId+=1,this._parent._getFeature(r,u[this._lastId],this._progress).then(l=>{e.hasset=!0,this._parent._mainSetInUse=null,t(l)},l=>{e.hasset=!0,this._parent._mainSetInUse=null,a(l)})):r._candidates.length>0?this._parent._refineSetBlock(r,this._parent._maxProcessingRate(),this._progress).then(()=>{e.hasset=!0,this._parent._mainSetInUse=null,this.next().then(t,a)},l=>{e.hasset=!0,this._parent._mainSetInUse=null,a(l)}):(e.hasset=!0,this._parent._mainSetInUse=null,t(null))},r=>{e.hasset=!0,this._parent._mainSetInUse=null,a(r)})}),!1===e.hasset&&(this._parent._mainSetInUse=e.returnpromise,e.hasset=!0),e.returnpromise}count(){var e=this;return(0,d.A)(function*(){if(-1!==e._parent._totalCount)return e._parent._totalCount;const t=yield e._parent._getSet(e._progress),a=yield e._refineAllSets(t);return e._parent._totalCount=a._known.length,e._parent._totalCount})()}_refineAllSets(e){var t=this;return(0,d.A)(function*(){if(e._known.length>0&&"GETPAGES"===e._known[e._known.length-1])return yield t._parent._expandPagedSet(e,t._parent._maxQueryRate(),0,1,t._progress),t._refineAllSets(e);if(e._candidates.length>0){if("GETPAGES"===e._known[e._candidates.length-1])return yield t._parent._expandPagedSet(e,t._parent._maxQueryRate(),0,2,t._progress),t._refineAllSets(e);const a=yield t._parent._refineSetBlock(e,t._parent._maxProcessingRate(),t._progress);return a._candidates.length>0?t._refineAllSets(a):a}return e})()}}var F=v(71505),R=v(7981),x=v(7425),J=v(56492),g=v(40013),c=v(16773),O=v(32034),A=v(73258);class w{constructor(e){this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=R.zl.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass="esri.arcade.featureset.support.FeatureSet",this._featureCache=[],this.typeIdField=null,this.types=null,this.subtypeField=null,this.subtypes=null,this.fields=null,this.geometryType="",this.objectIdField="",this.globalIdField="",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,this.fsetInfo=null,e?.lrucache&&(this.recentlyUsedQueries=e.lrucache),e?.interceptor&&(this.featureSetQueryInterceptor=e.interceptor)}optimisePagingFeatureQueries(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)}_hasMemorySource(){return!0}prop(e,t){return void 0===t?this[e]:(void 0!==this[e]&&(this[e]=t),this)}end(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent}_ensureLoaded(){return this.load()}load(){return null===this._loadPromise&&(this._loadPromise=this.loadImpl()),this._loadPromise}loadImpl(){var e=this;return(0,d.A)(function*(){return!0===e._parent?.loaded?(e._initialiseFeatureSet(),e):(yield e._parent?.load(),e._initialiseFeatureSet(),e)})()}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types,this.subtypeField=this._parent.subtypeField,this.subtypes=this._parent.subtypes):(this.fields=[],this.typeIdField="",this.subtypeField="",this.objectIdField="",this.globalIdField="",this.spatialReference=new O.A({wkid:4326}),this.geometryType=R.ik.point)}getField(e,t){let a;return(t=t||this.fields)&&(e=e.toLowerCase(),t.some(r=>(r&&r.name.toLowerCase()===e&&(a=r),!!a))),a}getFieldsIndex(){return null===this._fieldsIndex&&(this._fieldsIndex=A.A.fromLayer({timeInfo:this.timeInfo,editFieldsInfo:this.editFieldsInfo,dateFieldsTimeZone:this.dateFieldsTimeZone,datesInUnknownTimezone:this.datesInUnknownTimezone,fields:this.fields})),this._fieldsIndex}_maxProcessingRate(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())}_maxQueryRate(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery}_checkCancelled(e){if(null!=e&&e.aborted)throw new f.dr(f.D_.Cancelled)}nativeCapabilities(){return this._parent.nativeCapabilities()}_canDoAggregates(e,t,a,r,u){var l=this;return(0,d.A)(function*(){return null!==l._parent&&l._parent._canDoAggregates(e,t,a,r,u)})()}_getAggregatePagesDataSourceDefinition(e,t,a,r,u,l,T){var E=this;return(0,d.A)(function*(){if(null===E._parent)throw new f.dr(f.D_.NeverReach);return E._parent._getAggregatePagesDataSourceDefinition(e,t,a,r,u,l,T)})()}_getAgregagtePhysicalPage(e,t,a){var r=this;return(0,d.A)(function*(){if(null===r._parent)throw new f.dr(f.D_.NeverReach);return r._parent._getAgregagtePhysicalPage(e,t,a)})()}databaseType(){var e=this;return(0,d.A)(function*(){if(e._databaseType===R.zl.NotEvaluated){if(null!==S.A.applicationCache){const t=S.A.applicationCache.getDatabaseType(e._cacheableFeatureSetSourceKey());if(null!==t)return t}if(null!==e._databaseTypeProbed)return e._databaseTypeProbed;try{e._databaseTypeProbed=e._getDatabaseTypeImpl(),null!==S.A.applicationCache&&S.A.applicationCache.setDatabaseType(e._cacheableFeatureSetSourceKey(),e._databaseTypeProbed)}catch(t){throw null!==S.A.applicationCache&&S.A.applicationCache.clearDatabaseType(e._cacheableFeatureSetSourceKey()),t}return e._databaseTypeProbed}return e._databaseType})()}_getDatabaseTypeImpl(){var e=this;return(0,d.A)(function*(){const t=[{thetype:R.zl.SqlServer,testwhere:"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0"},{thetype:R.zl.Oracle,testwhere:"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0"},{thetype:R.zl.StandardisedNoInterval,testwhere:"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0"}];for(const a of t)if(!0===(yield e._runDatabaseProbe(a.testwhere)))return a.thetype;return R.zl.StandardisedNoInterval})()}_cacheableFeatureSetSourceKey(){return"MUSTBESET"}_runDatabaseProbe(e){var t=this;return(0,d.A)(function*(){if(null!==t._parent)return t._parent._runDatabaseProbe(e);throw new f.dr(f.D_.NotImplemented)})()}isTable(){return this._parent?.isTable()??!1}_featureFromCache(e){if(void 0!==this._featureCache[e])return this._featureCache[e]}_isInFeatureSet(e){return R.J6.Unknown}_getSet(e){throw new f.dr(f.D_.NotImplemented)}_getFeature(e,t,a){var r=this;return(0,d.A)(function*(){if(r._checkCancelled(a),void 0!==r._featureFromCache(t)||(yield r._getFeatures(e,t,r._maxProcessingRate(),a),r._checkCancelled(a),void 0!==r._featureFromCache(t)))return r._featureFromCache(t);throw new f.dr(f.D_.MissingFeatures)})()}_getFeatureBatch(e,t){var a=this;return(0,d.A)(function*(){a._checkCancelled(t);const r=new F.A([],e,!1,null),u=[];yield a._getFeatures(r,-1,e.length,t),a._checkCancelled(t);for(const l of e)void 0!==a._featureFromCache(l)&&u.push(a._featureFromCache(l));return u})()}_getFeatures(e,t,a,r){return(0,d.A)(function*(){return"success"})()}_getFilteredSet(e,t,a,r,u){throw new f.dr(f.D_.NotImplemented)}_refineSetBlock(e,t,a){var r=this;return(0,d.A)(function*(){if(!0===r._checkIfNeedToExpandCandidatePage(e,r._maxQueryRate()))return yield r._expandPagedSet(e,r._maxQueryRate(),0,0,a),r._refineSetBlock(e,t,a);r._checkCancelled(a);const u=e._candidates.length;r._refineKnowns(e,t);let l=u-e._candidates.length;if(0===e._candidates.length||l>=t)return e;if(yield r._refineIfParentKnown(e,t-l,a),r._checkCancelled(a),r._refineKnowns(e,t-l),l=u-e._candidates.length,l<t&&e._candidates.length>0){const T=t-l,E=r._prepareFetchAndRefineSet(e._candidates);return yield r._fetchAndRefineFeatures(E,E.length>T?T:e._candidates.length,a),r._checkCancelled(a),r._refineKnowns(e,t-l),e}return e})()}_fetchAndRefineFeatures(e,t,a){return null}_prepareFetchAndRefineSet(e){const t=[];for(let a=0;a<e.length;a++)this._isPhysicalFeature(e[a])&&t.push(e[a]);return t}_isPhysicalFeature(e){return null===this._parent||this._parent._isPhysicalFeature(e)}_refineKnowns(e,t){let a=0,r=null;const u=[];t=this._maxQueryRate();for(let l=0;l<e._candidates.length&&"GETPAGES"!==e._candidates[l];l++){let T=!1;const E=this._candidateIdTransform(e._candidates[l]);E!==e._candidates[l]&&(T=!0);const B=this._isInFeatureSet(E);if(B===R.J6.InFeatureSet)!0===T?e._known.includes(E)||(e._known.push(E),a+=1):(e._known.push(e._candidates[l]),a+=1),null===r?r={start:l,end:l}:r.end===l-1?r.end=l:(u.push(r),r={start:l,end:l});else if(B===R.J6.NotInFeatureSet)null===r?r={start:l,end:l}:r.end===l-1?r.end=l:(u.push(r),r={start:l,end:l}),a+=1;else if(B===R.J6.Unknown&&(a+=1,!0===e._ordered))break;if(a>=t)break}null!==r&&u.push(r);for(let l=u.length-1;l>=0;l--)e._candidates.splice(u[l].start,u[l].end-u[l].start+1)}_refineIfParentKnown(e,t,a){const r=new F.A([],[],e._ordered,null);return r._candidates=e._candidates.slice(0),this._parent._refineSetBlock(r,t,a)}_candidateIdTransform(e){return this._parent._candidateIdTransform(e)}_checkIfNeedToExpandKnownPage(e,t){if(null===e.pagesDefinition)return!1;let a=0;for(let r=e._lastFetchedIndex;r<e._known.length;r++){if("GETPAGES"===e._known[r])return!0;if(void 0===this._featureCache[e._known[r]]&&(a+=1,a>=t))break}return!1}_checkIfNeedToExpandCandidatePage(e,t){if(null===e.pagesDefinition)return!1;let a=0;for(let r=0;r<e._candidates.length;r++){if("GETPAGES"===e._candidates[r])return!0;if(a+=1,a>=t)break}return!1}_expandPagedSet(e,t,a,r,u){var l=this;return(0,d.A)(function*(){if(null===l._parent)throw new f.dr(f.D_.NotImplemented);return l._parent._expandPagedSet(e,t,a,r,u)})()}_expandPagedSetFeatureSet(e,t,a,r,u){var l=this;return(0,d.A)(function*(){if(e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]&&(r=1),0===r&&e._candidates.length>0&&"GETPAGES"===e._candidates[e._candidates.length-1]&&(r=2),0===r)return"finished";const T=yield l._getPage(e,r,u);return a+T<t?l._expandPagedSet(e,t,a+T,0,u):"success"})()}_getPage(e,t,a){var r=this;return(0,d.A)(function*(){const u=1===t?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){u.length=u.length-1;let l=0;for(let E=0;E<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+E>=e.pagesDefinition.internal.set.length);E++)u[u.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+E],l++;e.pagesDefinition.resultOffset+=l;let T=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(T=!0),!1===T&&u.push("GETPAGES"),l}return yield r._getPhysicalPage(e,t,a),r._getPage(e,t,a)})()}_getPhysicalPage(e,t,a){return null}_clonePageDefinition(e){return null===this._parent?null:this._parent._clonePageDefinition(e)}_first(e){return this.iterator(e).next()}first(e){return this._first(e)}calculateStatistic(e,t,a,r){var u=this;return(0,d.A)(function*(){yield u._ensureLoaded();let l=yield u._stat(e,t,"",null,null,a,r);return!1===l.calculated&&(l=yield u._manualStat(e,t,a,r)),l.result})()}_manualStat(e,t,a,r){var u=this;return(0,d.A)(function*(){let l=null;switch(e.toLowerCase()){case"count":return l=yield(0,x.U9)(u,r),{calculated:!0,result:l};case"distinct":return l=yield(0,x.dM)(u,t,a,r),{calculated:!0,result:l};case"avg":case"mean":return l=yield(0,x.i2)(u,t,r),{calculated:!0,result:l};case"stdev":return l=yield(0,x.b$)(u,t,r),{calculated:!0,result:l};case"variance":return l=yield(0,x.GV)(u,t,r),{calculated:!0,result:l};case"sum":return l=yield(0,x.cz)(u,t,r),{calculated:!0,result:l};case"min":return l=yield(0,x.jk)(u,t,r),{calculated:!0,result:l};case"max":return l=yield(0,x.T9)(u,t,r),{calculated:!0,result:l};default:return{calculated:!0,result:0}}})()}_stat(e,t,a,r,u,l,T){var E=this;return(0,d.A)(function*(){const B=yield E._parent._stat(e,t,a,r,u,l,T);return!1===B.calculated?null===u&&""===a&&null===r?E._manualStat(e,t,l,T):{calculated:!1}:B})()}_unionAllGeomSelf(e){const t=this.iterator(this._defaultTracker(e)),a=[];return new Promise((r,u)=>{this._unionShapeInBatches(a,t,r,u)})}_unionAllGeom(e){return new Promise((t,a)=>{const r=this.iterator(this._defaultTracker(e));this._unionShapeInBatches([],r,t,a)})}_unionShapeInBatches(e,t,a,r){t.next().then(u=>{try{null!==u&&null!==u.geometry&&e.push(u.geometry),e.length>30||null===u&&e.length>1?(0,c.union)(e).then(l=>{try{null===u?a(l):this._unionShapeInBatches(e=[l],t,a,r)}catch(T){r(T)}},r):null===u?a(1===e.length?e[0]:null):this._unionShapeInBatches(e,t,a,r)}catch(l){r(l)}},r)}iterator(e){return new G(this,e)}intersection(e,t=!1){return w._featuresetFunctions.intersection.bind(this)(e,t)}difference(e,t=!1,a=!0){return w._featuresetFunctions.difference.bind(this)(e,t,a)}symmetricDifference(e,t=!1,a=!0){return w._featuresetFunctions.symmetricDifference.bind(this)(e,t,a)}morphShape(e,t,a="unknown",r=null){return w._featuresetFunctions.morphShape.bind(this)(e,t,a,r)}morphShapeAndAttributes(e,t,a="unknown"){return w._featuresetFunctions.morphShapeAndAttributes.bind(this)(e,t,a)}union(e,t=!1){return w._featuresetFunctions.union.bind(this)(e,t)}intersects(e){return w._featuresetFunctions.intersects.bind(this)(e)}envelopeIntersects(e){return w._featuresetFunctions.envelopeIntersects.bind(this)(e)}contains(e){return w._featuresetFunctions.contains.bind(this)(e)}overlaps(e){return w._featuresetFunctions.overlaps.bind(this)(e)}relate(e,t){return w._featuresetFunctions.relate.bind(this)(e,t)}within(e){return w._featuresetFunctions.within.bind(this)(e)}touches(e){return w._featuresetFunctions.touches.bind(this)(e)}top(e){return w._featuresetFunctions.top.bind(this)(e)}crosses(e){return w._featuresetFunctions.crosses.bind(this)(e)}buffer(e,t,a,r=!0){return w._featuresetFunctions.buffer.bind(this)(e,t,a,r)}filter(e,t=null){return w._featuresetFunctions.filter.bind(this)(e,t)}orderBy(e){return w._featuresetFunctions.orderBy.bind(this)(e)}dissolve(e,t){return w._featuresetFunctions.dissolve.bind(this)(e,t)}groupby(e,t){return w._featuresetFunctions.groupby.bind(this)(e,t)}reduce(e,t=null,a){return new Promise((r,u)=>{this._reduceImpl(this.iterator(this._defaultTracker(a)),e,t,0,r,u,0)})}_reduceImpl(e,t,a,r,u,l,T){try{if(++T>1e3)return void setTimeout(()=>{this._reduceImpl(e,t,a,r,u,l,T=0)});e.next().then(E=>{try{if(null===E)u(a);else{const B=t(a,E,r,this);(0,J.$X)(B)?B.then(W=>{this._reduceImpl(e,t,W,r+1,u,l,T)},l):this._reduceImpl(e,t,B,r+1,u,l,T)}}catch(B){l(B)}},l)}catch(E){l(E)}}removeField(e){return w._featuresetFunctions.removeField.bind(this)(e)}addField(e,t,a=null){return w._featuresetFunctions.addField.bind(this)(e,t,a)}sumArea(e,t=!1,a){const r=(0,R.uf)(e);return this.reduce((u,l)=>null===l.geometry?0:t?(0,c.geodesicArea)(l.geometry,r).then(T=>u+T):(0,c.planarArea)(l.geometry,r).then(T=>u+T),0,a)}sumLength(e,t=!1,a){const r=(0,R.SQ)(e);return this.reduce((u,l)=>null===l.geometry?0:t?(0,c.geodesicLength)(l.geometry,r).then(T=>u+T):(0,c.planarLength)(l.geometry,r).then(T=>u+T),0,a)}distinct(e,t=1e3,a=null,r){var u=this;return(0,d.A)(function*(){yield u.load();const l=g.WhereClause.create(e,u.getFieldsIndex(),u.dateFieldsTimeZoneDefaultUTC);return P(l,a),u.calculateStatistic("distinct",l,t,u._defaultTracker(r))})()}min(e,t=null,a){var r=this;return(0,d.A)(function*(){yield r.load();const u=g.WhereClause.create(e,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC);return P(u,t),r.calculateStatistic("min",u,-1,r._defaultTracker(a))})()}max(e,t=null,a){var r=this;return(0,d.A)(function*(){yield r.load();const u=g.WhereClause.create(e,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC);return P(u,t),r.calculateStatistic("max",u,-1,r._defaultTracker(a))})()}avg(e,t=null,a){var r=this;return(0,d.A)(function*(){yield r.load();const u=g.WhereClause.create(e,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC);return P(u,t),r.calculateStatistic("avg",u,-1,r._defaultTracker(a))})()}sum(e,t=null,a){var r=this;return(0,d.A)(function*(){yield r.load();const u=g.WhereClause.create(e,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC);return P(u,t),r.calculateStatistic("sum",u,-1,r._defaultTracker(a))})()}stdev(e,t=null,a){var r=this;return(0,d.A)(function*(){yield r.load();const u=g.WhereClause.create(e,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC);return P(u,t),r.calculateStatistic("stdev",u,-1,r._defaultTracker(a))})()}variance(e,t=null,a){var r=this;return(0,d.A)(function*(){yield r.load();const u=g.WhereClause.create(e,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC);return P(u,t),r.calculateStatistic("variance",u,-1,r._defaultTracker(a))})()}count(e){var t=this;return(0,d.A)(function*(){return yield t.load(),t.calculateStatistic("count",g.WhereClause.create("1",t.getFieldsIndex(),t.dateFieldsTimeZoneDefaultUTC),-1,t._defaultTracker(e))})()}_defaultTracker(e){return e??{aborted:!1}}forEach(e,t){return new Promise((a,r)=>{this._forEachImpl(this.iterator(this._defaultTracker(t)),e,this,a,r,0)})}_forEachImpl(e,t,a,r,u,l){try{if(++l>1e3)return void setTimeout(()=>{this._forEachImpl(e,t,a,r,u,l=0)},0);e.next().then(T=>{try{if(null===T)r(a);else{const E=t(T);null==E?this._forEachImpl(e,t,a,r,u,l):(0,J.$X)(E)?E.then(()=>{try{this._forEachImpl(e,t,a,r,u,l)}catch(B){u(B)}},u):this._forEachImpl(e,t,a,r,u,l)}}catch(E){u(E)}},u)}catch(T){u(T)}}convertToJSON(e){const t={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}};for(let a=0;a<this.fields.length;a++)t.layerDefinition.fields.push((0,R.nE)(this.fields[a]));return this.reduce((a,r)=>{const u={geometry:r.geometry?.toJSON(),attributes:{}};for(const l in r.attributes)u.attributes[l]=r.attributes[l];return t.featureSet.features.push(u),1},0,e).then(()=>t)}castToText(e=!1){return"object, FeatureSet"}queryAttachments(e,t,a,r,u){return this._parent.queryAttachments(e,t,a,r,u)}serviceUrl(){return this._parent.serviceUrl()}subtypeMetaData(){return this.subtypeField&&this.subtypes?{subtypeField:this.subtypeField,subtypes:this.subtypes?this.subtypes.map(e=>({name:e.name,code:e.code})):[]}:this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map(e=>({name:e.name,code:e.id})):[]}:null}relationshipMetaData(){return this._parent.relationshipMetaData()}get gdbVersion(){return this._parent?this._parent.gdbVersion:""}schema(){const e=[];for(const t of this.fields)e.push((0,R.nE)(t));return{objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===R.yT[this.geometryType]?"esriGeometryNull":R.yT[this.geometryType],fields:e}}convertToText(e,t){var a=this;return(0,d.A)(function*(){if("schema"===e)return yield a._ensureLoaded(),JSON.stringify(a.schema());if("featureset"===e){yield a._ensureLoaded();const r=[];yield a.reduce((l,T)=>{const E={geometry:T.geometry?T.geometry.toJSON():null,attributes:T.attributes};return null!==E.geometry&&E.geometry.spatialReference&&delete E.geometry.spatialReference,r.push(E),1},0,t);const u=a.schema();return u.features=r,u.spatialReference=a.spatialReference.toJSON(),JSON.stringify(u)}return a.castToText()})()}getFeatureByObjectId(e,t){return this._parent.getFeatureByObjectId(e,t)}getOwningSystemUrl(){return this._parent.getOwningSystemUrl()}getIdentityUser(){return this._parent.getIdentityUser()}getRootFeatureSet(){return null!==this._parent?this._parent.getRootFeatureSet():this}getDataSourceFeatureSet(){return null!==this._parent?this._parent.getDataSourceFeatureSet():this}castAsJson(e=null){return"keeptype"===e?.featureset?this:"none"===e?.featureset?null:{type:"FeatureSet"}}castAsJsonAsync(e=null,t=null){var a=this;return(0,d.A)(function*(){if("keeptype"===t?.featureset)return a;if("schema"===t?.featureset)return yield a._ensureLoaded(),JSON.parse(JSON.stringify(a.schema()));if("none"===t?.featureset)return null;yield a._ensureLoaded();const r=[];yield a.reduce((l,T)=>{const E={geometry:T.geometry?!0===t?.keepGeometryType?T.geometry:T.geometry.toJSON():null,attributes:T.attributes};return null!==E.geometry&&E.geometry.spatialReference&&!0!==t?.keepGeometryType&&delete E.geometry.spatialReference,r.push(E),1},0,e);const u=a.schema();return u.features=r,u.spatialReference=!0===t?.keepGeometryType?a.spatialReference:a.spatialReference?.toJSON(),u})()}fieldTimeZone(e){return this.getFieldsIndex().getTimeZone(e)}get preferredTimeZone(){return this._parent?.preferredTimeZone??null}get dateFieldsTimeZone(){return this._parent?.dateFieldsTimeZone??null}get dateFieldsTimeZoneDefaultUTC(){if(this.datesInUnknownTimezone)return"unknown";const e=this.dateFieldsTimeZone??"UTC";return""===e?"UTC":e}get datesInUnknownTimezone(){return this._parent.datesInUnknownTimezone}get editFieldsInfo(){return this._parent?.editFieldsInfo??null}get timeInfo(){return this._parent?.timeInfo??null}set featureSetInfo(e){this.fsetInfo=e}getFeatureSetInfo(){var e=this;return(0,d.A)(function*(){return e.fsetInfo??(yield e._parent?.getFeatureSetInfo())??null})()}}function P(N,e){if(null!==e){const t={};for(const a in e)t[a.toLowerCase()]=e[a];N.parameters=t}}w._featuresetFunctions={}},71505:(V,Z,v)=>{v.d(Z,{A:()=>d});class d{constructor(f,L,G,F){this._lastFetchedIndex=0,this._ordered=!1,this.pagesDefinition=null,this._candidates=f,this._known=L,this._ordered=G,this.pagesDefinition=F}}},89812:(V,Z,v)=>{v.d(Z,{A:()=>d});let d=(()=>{class S{constructor(){this._databaseTypeMetaData={},this._layerInfo={}}clearDatabaseType(L){void 0===this._databaseTypeMetaData[L]&&delete this._databaseTypeMetaData[L]}getDatabaseType(L){return"MUSTBESET"===L||void 0===this._databaseTypeMetaData[L]?null:this._databaseTypeMetaData[L]}setDatabaseType(L,G){this._databaseTypeMetaData[L]=G}getLayerInfo(L){return void 0===this._layerInfo[L]?null:this._layerInfo[L]}setLayerInfo(L,G){this._layerInfo[L]=G}clearLayerInfo(L){void 0!==this._layerInfo[L]&&delete this._layerInfo[L]}}return S.applicationCache=null,S})()},97089:(V,Z,v)=>{v.d(Z,{C6:()=>e,DA:()=>T,F1:()=>P,F6:()=>O,IY:()=>t,Ju:()=>l,Mi:()=>x,Nf:()=>w,R8:()=>A,YY:()=>R,bD:()=>J,bm:()=>N,kg:()=>g,oj:()=>W});var d=v(61299),S=v(31033),f=v(7981),L=v(29752),G=v(40013),F=v(44549);function R(i,n){return c(i?.parseTree,n,i?.parameters)}function x(i,n,_){return c(i,n,_)}function J(i,n,_,o){return G.WhereClause.create(c(i.parseTree,f.zl.Standardised,i.parameters,n,_),o,i.timeZone)}function g(i,n,_="AND"){return G.WhereClause.create("(("+R(i,f.zl.Standardised)+")"+_+"("+R(n,f.zl.Standardised)+"))",i.fieldsIndex,i.timeZone)}function c(i,n,_,o=null,y=null){let U,C,m,I;switch(i.type){case"interval":return W(c(i.value,n,_,o,y),i.qualifier,i.op);case"case-expression":{let p=" CASE ";"simple"===i.format&&(p+=c(i.operand,n,_,o,y));for(let b=0;b<i.clauses.length;b++)p+=" WHEN "+c(i.clauses[b].operand,n,_,o,y)+" THEN "+c(i.clauses[b].value,n,_,o,y);return null!==i.else&&(p+=" ELSE "+c(i.else,n,_,o,y)),p+=" END ",p}case"parameter":{const p=_[i.value.toLowerCase()];if("string"==typeof p)return"'"+_[i.value.toLowerCase()].toString().replaceAll("'","''")+"'";if((0,f.$P)(p)||(0,f.Lk)(p))return N(p,n);if((0,f.eg)(p))return P(p,n);if((0,f.rX)(p))return A(p,n);if((0,f.f0)(p))return w(p,n);if(Array.isArray(p)){const b=[];for(let M=0;M<p.length;M++)"string"==typeof p[M]?b.push("'"+p[M].toString().replaceAll("'","''")+"'"):(0,f.$P)(p[M])||(0,f.Lk)(p[M])?b.push(N(p[M],n)):(0,f.eg)(p[M])?b.push(P(p[M],n)):(0,f.rX)(p[M])?b.push(A(p[M],n)):(0,f.f0)(p[M])?b.push(w(p[M],n)):b.push(p[M].toString());return b}return p.toString()}case"expression-list":C=[];for(const p of i.value)C.push(c(p,n,_,o,y));return C;case"unary-expression":return" ( NOT "+c(i.expr,n,_,o,y)+" ) ";case"binary-expression":switch(i.operator){case"AND":return" ("+c(i.left,n,_,o,y)+" AND "+c(i.right,n,_,o,y)+") ";case"OR":return" ("+c(i.left,n,_,o,y)+" OR "+c(i.right,n,_,o,y)+") ";case"IS":if("null"!==i.right.type)throw new S.L8(S.Z7.UnsupportedIsRhs);return" ("+c(i.left,n,_,o,y)+" IS NULL )";case"ISNOT":if("null"!==i.right.type)throw new S.L8(S.Z7.UnsupportedIsRhs);return" ("+c(i.left,n,_,o,y)+" IS NOT NULL )";case"IN":return U=[],"expression-list"===i.right.type?(U=c(i.right,n,_,o,y)," ("+c(i.left,n,_,o,y)+" IN ("+U.join(",")+")) "):(I=c(i.right,n,_,o,y),Array.isArray(I)?" ("+c(i.left,n,_,o,y)+" IN ("+I.join(",")+")) ":" ("+c(i.left,n,_,o,y)+" IN ("+I+")) ");case"NOT IN":return U=[],"expression-list"===i.right.type?(U=c(i.right,n,_,o,y)," ("+c(i.left,n,_,o,y)+" NOT IN ("+U.join(",")+")) "):(I=c(i.right,n,_,o,y),Array.isArray(I)?" ("+c(i.left,n,_,o,y)+" NOT IN ("+I.join(",")+")) ":" ("+c(i.left,n,_,o,y)+" NOT IN ("+I+")) ");case"BETWEEN":return m=c(i.right,n,_,o,y)," ("+c(i.left,n,_,o,y)+" BETWEEN "+m[0]+" AND "+m[1]+" ) ";case"NOTBETWEEN":return m=c(i.right,n,_,o,y)," ("+c(i.left,n,_,o,y)+" NOT BETWEEN "+m[0]+" AND "+m[1]+" ) ";case"LIKE":return""!==i.escape?" ("+c(i.left,n,_,o,y)+" LIKE "+c(i.right,n,_,o,y)+" ESCAPE '"+i.escape+"') ":" ("+c(i.left,n,_,o,y)+" LIKE "+c(i.right,n,_,o,y)+") ";case"NOT LIKE":return""!==i.escape?" ("+c(i.left,n,_,o,y)+" NOT LIKE "+c(i.right,n,_,o,y)+" ESCAPE '"+i.escape+"') ":" ("+c(i.left,n,_,o,y)+" NOT LIKE "+c(i.right,n,_,o,y)+") ";case"<>":case"<":case">":case">=":case"<=":case"=":case"*":case"-":case"+":case"/":return" ("+c(i.left,n,_,o,y)+" "+i.operator+" "+c(i.right,n,_,o,y)+") ";case"||":return" ("+c(i.left,n,_,o,y)+" "+(n===f.zl.SqlServer?"+":i.operator)+" "+c(i.right,n,_,o,y)+") "}throw new S.L8(S.Z7.UnsupportedOperator,{operator:i.operator});case"null":return"null";case"boolean":return!0===i.value?"1":"0";case"string":return"'"+i.value.toString().replaceAll("'","''")+"'";case"timestamp":return`timestamp '${i.value}'`;case"date":return`date '${i.value}'`;case"time":return`time '${i.value}'`;case"number":return i.value.toString();case"current-time":return e("date"===i.mode,n);case"column-reference":return o?o.toLowerCase()===i.column.toLowerCase()?"("+y+")":!0===i.delimited?`"${i.column.split('"').join('""')}"`:i.column:i.column;case"data-type":return i.value;case"function":{const p=c(i.args,n,_,o,y);return O(i.name,p,n)}}throw new S.L8(S.Z7.UnsupportedSyntax,{node:i.type})}function O(i,n,_){switch(i.toLowerCase().trim()){case"cos":case"sin":case"tan":case"cosh":case"tanh":case"sinh":case"acos":case"asin":case"atan":case"floor":case"log10":case"log":case"abs":if(1!==n.length)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:i.toLowerCase().trim()});return`${i.toUpperCase().trim()}(${n[0]})`;case"ceiling":case"ceil":if(1!==n.length)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:"ceiling"});return"CEILING("+n[0]+")";case"mod":case"power":case"nullif":if(2!==n.length)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:i.toLowerCase().trim()});return`${i.toUpperCase().trim()}(${n[0]},${n[1]})`;case"round":if(2===n.length)return"ROUND("+n[0]+","+n[1]+")";if(1===n.length)return"ROUND("+n[0]+")";throw new S.L8(S.Z7.InvalidFunctionParameters,{function:"round"});case"truncate":if(n.length<1||n.length>2)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:"truncate"});return _===f.zl.SqlServer?"ROUND("+n[0]+(1===n.length?"0":","+n[1])+",1)":"TRUNCATE("+n[0]+(1===n.length?")":","+n[1]+")");case"char_length":case"len":if(1!==n.length)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:"char_length"});switch(_){case f.zl.SqlServer:return"LEN("+n[0]+")";case f.zl.Oracle:return"LENGTH("+n[0]+")";default:return"CHAR_LENGTH("+n[0]+")"}case"coalesce":case"concat":{if(n.length<1)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:i.toLowerCase()});let o=i.toUpperCase().trim()+"(";for(let y=0;y<n.length;y++)0!==y&&(o+=","),o+=n[y];return o+=")",o}case"lower":case"lcase":if(1!==n.length)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:"lower"});return"LOWER("+n[0]+")";case"upper":case"ucase":if(1!==n.length)throw new S.L8(S.Z7.InvalidFunctionParameters,{function:"upper"});return"UPPER("+n[0]+")";case"substring":{let o="";switch(_){case f.zl.Oracle:return o="SUBSTR("+n[0]+","+n[1],3===n.length&&(o+=","+n[2]),o+=")",o;case f.zl.SqlServer:return o=3===n.length?"SUBSTRING("+n[0]+","+n[1]+","+n[2]+")":"SUBSTRING("+n[0]+",  "+n[1]+", LEN("+n[0]+") - "+n[1]+")",o;default:return o="SUBSTRING("+n[0]+" FROM "+n[1],3===n.length&&(o+=" FOR "+n[2]),o+=")",o}}case"extract":return"EXTRACT("+n[0].replaceAll("'","")+" FROM "+n[1]+")";case"cast":{let o="";switch(_){case f.zl.Oracle:switch(n[1].type){case"date":o="DATE";break;case"float":o="DOUBLE";break;case"integer":o="INTEGER";break;case"real":o="REAL";break;case"smallint":o="SMALLINT";break;case"timestamp":o="TIMESTAMP";break;case"varchar":o="VARCHAR("+n[1].size.toString()+")"}return`CAST(${n[0]} AS ${o})`;case f.zl.Postgres:switch(n[1].type){case"date":o="DATE";break;case"float":o="DOUBLE PRECISION";break;case"integer":o="INT";break;case"real":o="REAL";break;case"smallint":o="SMALLINT";break;case"timestamp":o="TIMESTAMP";break;case"varchar":o="VARCHAR("+n[1].size.toString()+")"}return`CAST(${n[0]} AS ${o})`;case f.zl.SqlServer:switch(n[1].type){case"date":o="DATE";break;case"float":o="FLOAT";break;case"integer":o="INT";break;case"real":o="REAL";break;case"smallint":o="SMALLINT";break;case"timestamp":o="DATETIME";break;case"varchar":o="VARCHAR("+n[1].size.toString()+")"}return`CAST(${n[0]} AS ${o})`;default:switch(n[1].type){case"date":o="DATE";break;case"float":o="FLOAT";break;case"integer":o="INTEGER";break;case"real":o="REAL";break;case"smallint":o="SMALLINT";break;case"timestamp":o="TIMESTAMP";break;case"varchar":o="VARCHAR("+n[1].size.toString()+")"}return`CAST(${n[0]} AS ${o})`}}}throw new S.L8(S.Z7.InvalidFunctionParameters,{function:i})}function A(i,n){const _=i.toDateTime(),o=0===_.hour&&0===_.minute&&0===_.second&&0===_.millisecond;switch(n){case f.zl.FILEGDB:case f.zl.Standardised:case f.zl.StandardisedNoInterval:return o?`date '${_.toFormat("yyyy-LL-dd")}'`:`timestamp '${_.toFormat("yyyy-LL-dd HH:mm:ss")}'`;case f.zl.Oracle:return o?`TO_DATE('${_.toFormat("yyyy-LL-dd")}','YYYY-MM-DD')`:`TO_DATE('${_.toFormat("yyyy-LL-dd HH:mm:ss")}','YYYY-MM-DD HH24:MI:SS')`;case f.zl.SqlServer:return`'${_.toFormat(o?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;case f.zl.PGDB:return`#${_.toFormat(o?"LL-dd-yyyy":"LL-dd-yyyy HH:mm:ss")}#`;case f.zl.Postgres:return`TIMESTAMP '${_.toFormat(o?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;default:return`timestamp '${_.toFormat("yyyy-LL-dd HH:mm:ss")}'`}}function w(i,n){switch(n){case f.zl.FILEGDB:case f.zl.Standardised:case f.zl.StandardisedNoInterval:return i.toSQLWithKeyword();case f.zl.Oracle:return`TO_DATE('${i.toFormat("Y-MM-DD")}'`;case f.zl.SqlServer:return`'${i.toFormat("Y-MM-DD")}'`;case f.zl.PGDB:return`#${i.toFormat("Y-MM-DD")}#`;case f.zl.Postgres:return`TIMESTAMP '${i.toFormat("Y-MM-DD")}'`;default:return i.toSQLWithKeyword()}}function P(i,n){switch(i instanceof L.k&&(i=i.toStorageString()),n){case f.zl.Oracle:return`TO_DATE('${i}', 'HH24:MI:SS')`;case f.zl.SqlServer:return`'${i}'`;default:return`time '${i}'`}}function N(i,n){return A(d.lY.dateTimeToArcadeDate((0,f.Lk)(i)?i:F.c9.fromJSDate(i)),n)}function e(i,n){switch(n){case f.zl.FILEGDB:case f.zl.Standardised:case f.zl.StandardisedNoInterval:case f.zl.Oracle:return i?"CURRENT_DATE":"CURRENT_TIMESTAMP";case f.zl.SqlServer:return i?"CAST(GETDATE() AS DATE)":"GETDATE()";default:return i?"CURRENT_DATE":"CURRENT_TIMESTAMP"}}function t(i,n,_={}){const o={},y={},U={esriFieldTypeSmallInteger:"integer",esriFieldTypeInteger:"integer",esriFieldTypeBigInteger:"integer",esriFieldTypeSingle:"double",esriFieldTypeDouble:"double",esriFieldTypeString:"string",esriFieldTypeTimeOnly:"time-only",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimestampOffset:"timestamp-offset",esriFieldTypeDate:"date",esriFieldTypeOID:"integer",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"guid",oid:"integer",long:"integer","small-integer":"integer",integer:"integer","big-integer":"integer",single:"double","time-only":"time-only","date-only":"date-only","timestamp-offset":"timestemp-offset",double:"double",date:"date",guid:"guid","global-id":"guid",string:"string"};for(const C of n){const m=C.type?U[C.type]:void 0;o[C.name.toLowerCase()]=void 0===m?"":m}for(const C in _){const m=U[_[C]];y[C.toLowerCase()]=void 0===m?"":m}switch(a(o,i.parseTree,i.parameters,y)){case"double":return"double";case"integer":return"integer";case"date":return"date";case"date-only":return"date-only";case"time-only":return"time-only";case"timestamp-offset":return"timestamp-offset";case"string":return"string";case"global-id":case"guid":return"guid"}return""}function a(i,n,_,o){let y;switch(n.type){case"interval":return"integer";case"case-expression":{const U=[];if("simple"===n.format){for(let C=0;C<n.clauses.length;C++)U.push(a(i,n.clauses[C].value,_,o));null!==n.else&&U.push(a(i,n.else,_,o))}else{for(let C=0;C<n.clauses.length;C++)U.push(a(i,n.else,_,o));null!==n.else&&U.push(a(i,n.else,_,o))}return u(U)}case"parameter":{const U=o[n.value.toLowerCase()];if(void 0===U&&_){const C=_[n.value.toLowerCase()];if(null==C)return"";if("string"==typeof C||C instanceof String)return"string";if("boolean"==typeof C)return"boolean";if((0,f.$P)(C)||(0,f.rX)(C))return"date";if((0,f.f0)(C))return"date-only";if((0,f.eg)(C))return"time-only";if("number"==typeof C)return C%1==0?"integer":"double"}return void 0===U?"":U}case"expression-list":{const U=[];for(const C of n.value)U.push(a(i,C,_,o));return U}case"unary-expression":return"boolean";case"binary-expression":switch(n.operator){case"AND":case"OR":case"IN":case"NOT IN":case"BETWEEN":case"NOTBETWEEN":case"LIKE":case"NOT LIKE":case"<>":case"<":case">":case">=":case"<=":case"=":return"boolean";case"IS":case"ISNOT":if("null"!==n.right.type)throw new S.L8(S.Z7.UnsupportedIsRhs);return"boolean";case"*":case"-":case"+":case"/":return u([a(i,n.left,_,o),a(i,n.right,_,o)]);case"||":return"string";default:throw new S.L8(S.Z7.UnsupportedOperator,{operator:n.operator})}case"null":return"";case"boolean":return"boolean";case"string":return"string";case"number":return null===n.value?"":n.value%1==0?"integer":"double";case"date":return"date";case"timestamp":return n.withtimezone?"timestamp-offset":"date";case"time":return"time-only";case"current-time":return"date";case"column-reference":{const U=i[n.column.toLowerCase()];return void 0===U?"":U}case"function":switch(n.name.toLowerCase()){case"cast":switch(n.args?.value[1]?.value.type??""){case"integer":case"smallint":return"integer";case"real":case"float":return"double";case"date":case"timestamp":return!0===n.args?.value[1]?.value?.withtimezone?"timestamp-offset":"date";case"time":return"time-only";case"varchar":return"string";default:return""}case"position":case"extract":case"char_length":case"mod":return"integer";case"round":if(y=a(i,n.args,_,o),Array.isArray(y)){if(y.length<=0)return"double";y=y[0]}return y;case"sign":return"integer";case"ceiling":case"floor":case"abs":return y=a(i,n.args,_,o),Array.isArray(y)&&(y=u(y)),"integer"===y||"double"===y?y:"double";case"area":case"length":case"log":case"log10":case"sin":case"cos":case"tan":case"asin":case"acos":case"atan":case"cosh":case"sinh":case"tanh":case"power":return"double";case"substring":case"trim":case"concat":case"lower":case"upper":return"string";case"truncate":return"double";case"nullif":case"coalesce":return y=a(i,n.args,_,o),Array.isArray(y)?y.length>0?y[0]:"":y}return""}throw new S.L8(S.Z7.UnsupportedSyntax,{node:n.type})}const r={boolean:1,string:2,integer:3,double:4,date:5};function u(i){if(i){let n="";for(const _ of i)""!==_&&(n=""===n||r[n]<r[_]?_:n);return n}return""}function l(i,n){return E(i.parseTree,n)}function T(i){return"column-reference"===i?.parseTree.type}function E(i,n){if(null==i)return!1;switch(i.type){case"when-clause":return E(i.operand,n)||E(i.value,n);case"case-expression":for(const _ of i.clauses)if(E(_,n))return!0;return!("simple"!==i.format||!E(i.operand,n))||!(null===i.else||!E(i.else,n));case"parameter":case"null":case"boolean":case"date":case"timestamp":case"time":case"string":case"number":return!1;case"expression-list":for(const _ of i.value)if(E(_,n))return!0;return!1;case"unary-expression":return E(i.expr,n);case"binary-expression":return E(i.left,n)||E(i.right,n);case"column-reference":return n.toLowerCase()===i.column.toLowerCase();case"function":return E(i.args,n)}return!1}function B(i){let n="";return n+=i.period.toUpperCase(),n}function W(i,n,_){let o="";return o="interval-period"===n.type?B(n):B(n.start)+" TO "+B(n.end),"INTERVAL "+_+" "+i+" "+o}},7425:(V,Z,v)=>{v.d(Z,{Dp:()=>w,GV:()=>l,T9:()=>t,U9:()=>n,b$:()=>E,cz:()=>W,dM:()=>U,i2:()=>r,jk:()=>N,tQ:()=>P});var d=v(10467),S=v(31033),f=v(7981),L=v(97089),G=v(87257),F=v(16924),R=v(29752);function J(m){let I=0;for(let p=0;p<m.length;p++)I+=m[p];return I/m.length}function g(m){const I=J(m);let p=0;for(let b=0;b<m.length;b++)p+=(I-m[b])**2;return p/m.length}function c(m){const I=J(m);let p=0;for(let b=0;b<m.length;b++)p+=(I-m[b])**2;return p/(m.length-1)}function O(m){let I=0;for(let p=0;p<m.length;p++)I+=m[p];return I}function w(m){switch(m.toLowerCase()){case"distinct":return"distinct";case"avg":case"mean":return"avg";case"min":return"min";case"sum":return"sum";case"max":return"max";case"stdev":case"stddev":return"stddev";case"var":case"variance":return"var";case"count":return"count"}return""}function P(m,I,p=1e3){switch(m.toLowerCase()){case"distinct":return function A(m,I){const p=[],b={},M=[];for(let z=0;z<m.length;z++){if(null!=m[z]){const j=m[z];if((0,f.Et)(j)||(0,f.Kg)(j))void 0===b[j]&&(p.push(j),b[j]=1);else{let H=!1;for(let K=0;K<M.length;K++)!0===(0,f.Tf)(M[K],j)&&(H=!0);!1===H&&(M.push(j),p.push(j))}}if(p.length>=I&&-1!==I)return p}return p}(I,p);case"avg":case"mean":return J(I);case"min":return Math.min.apply(Math,I);case"sum":return O(I);case"max":return Math.max.apply(Math,I);case"stdev":case"stddev":return Math.sqrt(g(I));case"var":case"variance":return g(I);case"count":return I.length}return 0}function N(m,I,p){return e.apply(this,arguments)}function e(){return(e=(0,d.A)(function*(m,I,p){const b=yield o(m,I,p,!0);return 0===b.length?null:Math.min.apply(Math,b)})).apply(this,arguments)}function t(m,I,p){return a.apply(this,arguments)}function a(){return(a=(0,d.A)(function*(m,I,p){const b=yield o(m,I,p,!0);return 0===b.length?null:Math.max.apply(Math,b)})).apply(this,arguments)}function r(m,I,p){return u.apply(this,arguments)}function u(){return(u=(0,d.A)(function*(m,I,p){let b="";I&&!(0,L.DA)(I)&&(b=(0,L.IY)(I,m.fields));const M=yield o(m,I,p,!0);if(0===M.length)return null;const z=J(M);return null===z?z:"integer"===b?function x(m){return m=+m,isFinite(m)?m-m%1||(m<0?-0:0===m?m:0):m}(z):z})).apply(this,arguments)}function l(m,I,p){return T.apply(this,arguments)}function T(){return(T=(0,d.A)(function*(m,I,p){const b=yield o(m,I,p,!0);return 0===b.length?null:c(b)})).apply(this,arguments)}function E(m,I,p){return B.apply(this,arguments)}function B(){return(B=(0,d.A)(function*(m,I,p){const b=yield o(m,I,p,!0);return 0===b.length?null:Math.sqrt(c(b))})).apply(this,arguments)}function W(m,I,p){return i.apply(this,arguments)}function i(){return(i=(0,d.A)(function*(m,I,p){const b=yield o(m,I,p,!0);return 0===b.length?null:O(b)})).apply(this,arguments)}function n(m,I){return _.apply(this,arguments)}function _(){return(_=(0,d.A)(function*(m,I){return m.iterator(I).count()})).apply(this,arguments)}function o(m,I,p){return y.apply(this,arguments)}function y(){return(y=(0,d.A)(function*(m,I,p,b=!1){const M=m.iterator(p),z=[],j={ticker:0};let H=yield M.next();for(;null!==H;){if(j.ticker++,p.aborted)throw new S.dr(S.D_.Cancelled);j.ticker%100==0&&(j.ticker=0,yield new Promise($=>{setTimeout($,0)}));const K=I?.calculateValue(H);null===K?!1===b&&(z[z.length]=K):z[z.length]=K instanceof G.n||K instanceof R.k?K.toNumber():K instanceof F.g?K.toMilliseconds():K,H=yield M.next()}return z})).apply(this,arguments)}function U(m,I){return C.apply(this,arguments)}function C(){return(C=(0,d.A)(function*(m,I,p=1e3,b=null){const M=m.iterator(b),z=[],j={},H={ticker:0};let K=yield M.next();for(;null!==K;){if(H.ticker++,b?.aborted)throw new S.dr(S.D_.Cancelled);H.ticker%100==0&&(H.ticker=0,yield new Promise(ee=>{setTimeout(ee,0)}));const $=I?.calculateValue(K);let Q=$;if($ instanceof G.n?Q="!!DATEONLY!!-"+$.toString():$ instanceof F.g?Q="!!TSOFFSETONLY!!-"+$.toString():$ instanceof R.k?Q="!!TIMEONLY!!-"+$.toString():$ instanceof Date&&(Q="!!DATE!!-"+$.toString()),null!=$&&void 0===j[Q]&&(z.push($),j[Q]=1),z.length>=p&&-1!==p)return z;K=yield M.next()}return z})).apply(this,arguments)}},16773:(V,Z,v)=>{v.r(Z),v.d(Z,{buffer:()=>me,changeDefaultSpatialReferenceTolerance:()=>Ce,clearDefaultSpatialReferenceTolerance:()=>Oe,clip:()=>t,contains:()=>l,convexHull:()=>I,crosses:()=>T,cut:()=>r,densify:()=>Fe,difference:()=>b,disjoint:()=>_,distance:()=>E,equals:()=>B,extendedSpatialReferenceInfo:()=>e,flipHorizontal:()=>Ee,flipVertical:()=>ve,generalize:()=>De,geodesicArea:()=>Pe,geodesicBuffer:()=>ye,geodesicDensify:()=>we,geodesicLength:()=>Le,intersect:()=>H,intersectLinesToPoints:()=>Re,intersects:()=>W,isSimple:()=>U,nearestCoordinate:()=>Se,nearestVertex:()=>Ae,nearestVertices:()=>Te,offset:()=>ee,overlaps:()=>o,planarArea:()=>be,planarLength:()=>xe,relate:()=>y,rotate:()=>Ie,simplify:()=>C,symmetricDifference:()=>z,touches:()=>i,union:()=>$,within:()=>n});var d=v(10467),f=(v(21152),v(19284)),L=v(1749),G=v(61320);function F(s){return Array.isArray(s)?s[0]?.spatialReference:s?.spatialReference}function R(s){return s&&(Array.isArray(s)?s.map(R):s.toJSON?s.toJSON():s)}function x(s){return Array.isArray(s)?s.map(h=>(0,G.rS)(h)):(0,G.rS)(s)}let g;function c(){return O.apply(this,arguments)}function O(){return(O=(0,d.A)(function*(){return g||(g=(0,f.ho)("geometryEngineWorker",{strategy:"distributed"})),g})).apply(this,arguments)}function A(s,h){return w.apply(this,arguments)}function w(){return(w=(0,d.A)(function*(s,h){return(yield c()).invoke("executeGEOperation",{operation:s,parameters:R(h)})})).apply(this,arguments)}function P(s,h){return N.apply(this,arguments)}function N(){return(N=(0,d.A)(function*(s,h){const D=yield c();return Promise.all(D.broadcast("executeGEOperation",{operation:s,parameters:R(h)}))})).apply(this,arguments)}function e(s){return A("extendedSpatialReferenceInfo",[s])}function t(s,h){return a.apply(this,arguments)}function a(){return(a=(0,d.A)(function*(s,h){return x(yield A("clip",[F(s),s,h]))})).apply(this,arguments)}function r(s,h){return u.apply(this,arguments)}function u(){return(u=(0,d.A)(function*(s,h){return x(yield A("cut",[F(s),s,h]))})).apply(this,arguments)}function l(s,h){return A("contains",[F(s),s,h])}function T(s,h){return A("crosses",[F(s),s,h])}function E(s,h,D){return A("distance",[F(s),s,h,D])}function B(s,h){return A("equals",[F(s),s,h])}function W(s,h){return A("intersects",[F(s),s,h])}function i(s,h){return A("touches",[F(s),s,h])}function n(s,h){return A("within",[F(s),s,h])}function _(s,h){return A("disjoint",[F(s),s,h])}function o(s,h){return A("overlaps",[F(s),s,h])}function y(s,h,D){return A("relate",[F(s),s,h,D])}function U(s){return A("isSimple",[F(s),s])}function C(s){return m.apply(this,arguments)}function m(){return(m=(0,d.A)(function*(s){return x(yield A("simplify",[F(s),s]))})).apply(this,arguments)}function I(s){return p.apply(this,arguments)}function p(){return(p=(0,d.A)(function*(s,h=!1){return x(yield A("convexHull",[F(s),s,h]))})).apply(this,arguments)}function b(s,h){return M.apply(this,arguments)}function M(){return(M=(0,d.A)(function*(s,h){return x(yield A("difference",[F(s),s,h]))})).apply(this,arguments)}function z(s,h){return j.apply(this,arguments)}function j(){return(j=(0,d.A)(function*(s,h){return x(yield A("symmetricDifference",[F(s),s,h]))})).apply(this,arguments)}function H(s,h){return K.apply(this,arguments)}function K(){return(K=(0,d.A)(function*(s,h){return x(yield A("intersect",[F(s),s,h]))})).apply(this,arguments)}function $(s){return Q.apply(this,arguments)}function Q(){return(Q=(0,d.A)(function*(s,h=null){const D=function J(s,h){let D;return Array.isArray(s)?D=s:(D=[],D.push(s),null!=h&&D.push(h)),D}(s,h);return x(yield A("union",[F(D),D]))})).apply(this,arguments)}function ee(s,h,D,k,Y,q){return te.apply(this,arguments)}function te(){return(te=(0,d.A)(function*(s,h,D,k,Y,q){return x(yield A("offset",[F(s),s,h,D,k,Y,q]))})).apply(this,arguments)}function me(s,h,D){return re.apply(this,arguments)}function re(){return(re=(0,d.A)(function*(s,h,D,k=!1){const Y=[F(s),s,h,D,k];return x(yield A("buffer",Y))})).apply(this,arguments)}function ye(s,h,D,k,Y,q){return ne.apply(this,arguments)}function ne(){return(ne=(0,d.A)(function*(s,h,D,k,Y,q){const Me=[F(s),s,h,D,k,Y,q];return x(yield A("geodesicBuffer",Me))})).apply(this,arguments)}function Se(s,h){return ae.apply(this,arguments)}function ae(){return(ae=(0,d.A)(function*(s,h,D=!0){const k=yield A("nearestCoordinate",[F(s),s,h,D]);return{...k,coordinate:L.A.fromJSON(k.coordinate)}})).apply(this,arguments)}function Ae(s,h){return se.apply(this,arguments)}function se(){return(se=(0,d.A)(function*(s,h){const D=yield A("nearestVertex",[F(s),s,h]);return{...D,coordinate:L.A.fromJSON(D.coordinate)}})).apply(this,arguments)}function Te(s,h,D,k){return ie.apply(this,arguments)}function ie(){return(ie=(0,d.A)(function*(s,h,D,k){return(yield A("nearestVertices",[F(s),s,h,D,k])).map(Y=>({...Y,coordinate:L.A.fromJSON(Y.coordinate)}))})).apply(this,arguments)}function ue(s){return"xmin"in s?s.center:"x"in s?s:s.extent?.center}function Ie(s,h,D){return le.apply(this,arguments)}function le(){return(le=(0,d.A)(function*(s,h,D){if(null==s)throw new X;const k=s.spatialReference;if(null==(D=D??ue(s)))throw new X;const Y=s.constructor.fromJSON(yield A("rotate",[k,s,h,D]));return Y.spatialReference=k,Y})).apply(this,arguments)}function Ee(s,h){return oe.apply(this,arguments)}function oe(){return(oe=(0,d.A)(function*(s,h){if(null==s)throw new X;const D=s.spatialReference;if(null==(h=h??ue(s)))throw new X;const k=s.constructor.fromJSON(yield A("flipHorizontal",[D,s,h]));return k.spatialReference=D,k})).apply(this,arguments)}function ve(s,h){return ce.apply(this,arguments)}function ce(){return(ce=(0,d.A)(function*(s,h){if(null==s)throw new X;const D=s.spatialReference;if(null==(h=h??ue(s)))throw new X;const k=s.constructor.fromJSON(yield A("flipVertical",[D,s,h]));return k.spatialReference=D,k})).apply(this,arguments)}function De(s,h,D,k){return he.apply(this,arguments)}function he(){return(he=(0,d.A)(function*(s,h,D,k){return x(yield A("generalize",[F(s),s,h,D,k]))})).apply(this,arguments)}function Fe(s,h,D){return _e.apply(this,arguments)}function _e(){return(_e=(0,d.A)(function*(s,h,D){return x(yield A("densify",[F(s),s,h,D]))})).apply(this,arguments)}function we(s,h,D){return de.apply(this,arguments)}function de(){return(de=(0,d.A)(function*(s,h,D,k=0){return x(yield A("geodesicDensify",[F(s),s,h,D,k]))})).apply(this,arguments)}function be(s,h){return A("planarArea",[F(s),s,h])}function xe(s,h){return A("planarLength",[F(s),s,h])}function Pe(s,h,D){return A("geodesicArea",[F(s),s,h,D])}function Le(s,h,D){return A("geodesicLength",[F(s),s,h,D])}function Re(s,h){return fe.apply(this,arguments)}function fe(){return(fe=(0,d.A)(function*(s,h){return x(yield A("intersectLinesToPoints",[F(s),s,h]))})).apply(this,arguments)}function Ce(s,h){return pe.apply(this,arguments)}function pe(){return(pe=(0,d.A)(function*(s,h){yield P("changeDefaultSpatialReferenceTolerance",[s,h])})).apply(this,arguments)}function Oe(s){return ge.apply(this,arguments)}function ge(){return(ge=(0,d.A)(function*(s){yield P("clearDefaultSpatialReferenceTolerance",[s])})).apply(this,arguments)}class X extends Error{constructor(){super("Illegal Argument Exception")}}}}]);