"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[3222],{76582:(C,E,t)=>{t.d(E,{LG:()=>p,mb:()=>_,yr:()=>m});var s=t(10467),c=t(56492),n=t(31610),y=t(12273),o=t(88532),d=t(63888),O=t(28399),l=t(50915),r=t(26136),u=t(4931);function p(h){return h&&"render"in h}function m(h){const e=document.createElement("canvas");return e.width=h.width,e.height=h.height,h.render(e.getContext("2d")),e}class _ extends d.q{constructor(e=null,a=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=a,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){null==e&&null==this._source||(this._source=e,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}setSourceAsync(e,a){var i=this;return(0,s.A)(function*(){null!=i._uploadStatus&&i._uploadStatus.controller.abort();const A=new AbortController,D=(0,c.Tw)();return(0,c.NY)(a,()=>A.abort()),(0,c.NY)(A,R=>D.reject(R)),i._uploadStatus={controller:A,resolver:D},i.source=e,D.promise})()}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(e,a){e>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(e,a)}setTransform(e){const a=(0,n.D_)(this.transforms.displayViewScreenMat3),[i,A]=e.toScreenNoRotation([0,0],[this.x,this.y]),D=this.resolution/this.pixelRatio/e.resolution,R=D*this.width,B=D*this.height,f=Math.PI*this.rotation/180;(0,n.Tl)(a,a,(0,o.fA)(i,A)),(0,n.Tl)(a,a,(0,o.fA)(R/2,B/2)),(0,n.e$)(a,a,-f),(0,n.Tl)(a,a,(0,o.fA)(-R/2,-B/2)),(0,n.Oe)(a,a,(0,o.fA)(R,B)),(0,n.lw)(this.transforms.displayViewScreenMat3,e.displayViewMat3,a)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,a){this._texture&&e.bindTexture(this._texture,a)}updateTexture({context:e,painter:a}){var i=this;return(0,s.A)(function*(){if(!i._textureInvalidated)return;if(i._textureInvalidated=!1,i._texture||(i._texture=i._createTexture(e)),!i.source)return void i._texture.setData(null);i._texture.resize(i._sourceWidth,i._sourceHeight);const A=function M(h){return p(h)?h instanceof O.A?h.getRenderedRasterPixels()?.renderedRasterPixels:m(h):h}(i.source);try{if(null!=i._uploadStatus){const{controller:D,resolver:R}=i._uploadStatus,B={signal:D.signal},{width:f,height:g}=i,v=i._texture;yield a.textureUploadManager.enqueueTextureUpdate({data:A,texture:v,width:f,height:g},B),R.resolve(),i._uploadStatus=null}else i._texture.setData(A);i.ready()}catch(D){(0,c.jH)(D)}})()}onDetach(){this.destroy()}_createTransforms(){return{displayViewScreenMat3:(0,y.vt)()}}_createTexture(e){const a=this.immutable,i=new u.R;return i.internalFormat=a?l.H0.RGBA8:l.Ab.RGBA,i.wrapMode=l.pF.CLAMP_TO_EDGE,i.isImmutable=a,i.width=this._sourceWidth,i.height=this._sourceHeight,new r.g(e,i)}}},28399:(C,E,t)=>{t.d(E,{A:()=>s});class s{constructor(n,y,o){this.pixelBlock=n,this.extent=y,this.originalPixelBlock=o}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(n){const y=this.pixelBlock;if(null==y)return;const o=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??y});if(null==o.pixelBlock)return;o.pixelBlock.maskIsAlpha&&(o.pixelBlock.premultiplyAlpha=!0);const d=o.pixelBlock.getAsRGBA(),O=n.createImageData(o.pixelBlock.width,o.pixelBlock.height);O.data.set(d),n.putImageData(O,0,0)}getRenderedRasterPixels(){const n=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==n.pixelBlock?null:(n.pixelBlock.maskIsAlpha&&(n.pixelBlock.premultiplyAlpha=!0),{width:n.pixelBlock.width,height:n.pixelBlock.height,renderedRasterPixels:new Uint8Array(n.pixelBlock.getAsRGBA().buffer)})}}},50201:(C,E,t)=>{t.r(E),t.d(E,{default:()=>h});var s=t(10467),c=t(8189),n=t(35150),y=t(56492),o=t(85211),l=(t(3248),t(40707),t(76576)),r=t(72663),u=t(29459),p=t(68418),m=t(41474),M=t(96081);let _=class extends((0,M.A)((0,u.e)(m.A))){update(e){this._strategy.update(e).catch(a=>{(0,y.zf)(a)||n.A.getLogger(this).error(a)}),this.notifyChange("updating")}attach(){this._bitmapContainer=new r.l,this.container.addChild(this._bitmapContainer),this._strategy=new p.A({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})}detach(){this._strategy.destroy(),this._strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}viewChange(){}moveEnd(){this.requestUpdate()}fetchBitmapData(e,a,i){return this.layer.fetchImageBitmap(e,a,i)}doRefresh(){var e=this;return(0,s.A)(function*(){e.requestUpdate()})()}isUpdating(){return this._strategy.updating||this.updateRequested}};(0,c._)([(0,o.MZ)()],_.prototype,"_strategy",void 0),(0,c._)([(0,o.MZ)()],_.prototype,"updating",void 0),_=(0,c._)([(0,l.$)("esri.views.2d.layers.BaseDynamicLayerView2D")],_);const h=_},29459:(C,E,t)=>{t.d(E,{e:()=>B});var _,s=t(8189),c=t(31178),n=t(5605),y=t(5922),o=t(48900),d=t(85211),u=(t(3248),t(35150),t(40707),t(76576)),p=t(88766),m=t(60746),M=t(66727);let h=_=class extends M.A{constructor(f){super(f),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new _({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,s._)([(0,d.MZ)({type:[Number,String],json:{write:!0}})],h.prototype,"left",void 0),(0,s._)([(0,d.MZ)({type:[Number,String],json:{write:!0}})],h.prototype,"right",void 0),(0,s._)([(0,d.MZ)({type:[Number,String],json:{write:!0}})],h.prototype,"top",void 0),(0,s._)([(0,d.MZ)({type:[Number,String],json:{write:!0}})],h.prototype,"bottom",void 0),h=_=(0,s._)([(0,u.$)("esri.views.layers.support.ClipRect")],h);const e=h;var a=t(75644);let i=class extends M.A{constructor(f){super(f),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,s._)([(0,d.MZ)({type:[[[Number]]],json:{write:!0}})],i.prototype,"path",void 0),i=(0,s._)([(0,u.$)("esri.views.layers.support.Path")],i);const A=i;var D=t(6558);const R=c.A.ofType({key:"type",base:null,typeMap:{rect:e,path:A,geometry:a.A}}),B=f=>{let g=class extends f{constructor(){super(...arguments),this.attached=!1,this.clips=new R,this.highlightOptions=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){const v=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&v&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new y.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new p.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,o.wB)(()=>this.suspended,P=>{this.container&&(this.container.visible=!P)},o.pc),(0,o.wB)(()=>this.updateSuspended,P=>{this.view&&!P&&this.updateRequested&&this.view.requestUpdate()},o.pc),(0,o.wB)(()=>this.layer?.opacity??1,P=>{this.container&&(this.container.opacity=P)},o.pc),(0,o.wB)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",P=>{this.container&&(this.container.blendMode=P)},o.pc),(0,o.wB)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,P=>{this.container&&(this.container.effect=P)},o.pc),(0,o.wB)(()=>this.highlightOptions,P=>this.container.highlightOptions=P,o.pc),(0,o.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},o.pc),(0,o.wB)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:P,scaleRange:L})=>{const T=(0,D.E5)(L,P);T!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=T)},o.pc)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(P=>{P===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const v=this.view?.spatialReference;return null==v||this.supportsSpatialReference(v)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(v){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",v),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(v))):this.updateRequested=!1}hitTest(v,x){return Promise.resolve(null)}supportsSpatialReference(v){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const v=super.getSuspendInfo(),x=!this.spatialReferenceSupported;return x&&(v.spatialReferenceNotSupported=x),v}addAttachHandles(v){this.addHandles(v,"attach")}};return(0,s._)([(0,d.MZ)()],g.prototype,"attached",void 0),(0,s._)([(0,d.MZ)({type:R,set(v){const x=(0,n.V)(v,this._get("clips"),R);this._set("clips",x)}})],g.prototype,"clips",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"container",void 0),(0,s._)([(0,d.MZ)({type:m.A})],g.prototype,"highlightOptions",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"moving",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],g.prototype,"spatialReferenceSupported",null),(0,s._)([(0,d.MZ)({readOnly:!0})],g.prototype,"updateParameters",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"updateRequested",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"updating",null),(0,s._)([(0,d.MZ)()],g.prototype,"view",void 0),(0,s._)([(0,d.MZ)()],g.prototype,"_visibleAtCurrentScale",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentScale",null),g=(0,s._)([(0,u.$)("esri.views.2d.layers.LayerView2D")],g),g}},41474:(C,E,t)=>{t.d(E,{A:()=>h});var s=t(8189),c=t(98877),n=t(42425),y=t(3046),o=t(35150),d=t(11432),O=t(64261),l=t(85211),p=(t(3248),t(40707),t(76576)),m=t(56985),M=t(6558);let _=class extends((0,y.sA)((0,O.g)(n.A.EventedMixin(c.A)))){constructor(e){super(e),this._updatingHandles=new m.U,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const a=this.layer&&this.layer.id||"no id",i=this.layer?.title||"no title";o.A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${a}')`,e)}})}destroy(){this._updatingHandles=(0,d.pR)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,a=this.layer?.visibilityTimeExtent;return!e||!a||!e.intersection(a).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,M.g7)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),(0,M.g7)(this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,s._)([(0,l.MZ)()],_.prototype,"view",void 0),(0,s._)([(0,l.MZ)()],_.prototype,"fullOpacity",null),(0,s._)([(0,l.MZ)()],_.prototype,"layer",void 0),(0,s._)([(0,l.MZ)()],_.prototype,"parent",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],_.prototype,"suspended",null),(0,s._)([(0,l.MZ)({readOnly:!0})],_.prototype,"suspendInfo",null),(0,s._)([(0,l.MZ)({readOnly:!0})],_.prototype,"legendEnabled",null),(0,s._)([(0,l.MZ)({type:Boolean,readOnly:!0})],_.prototype,"updating",null),(0,s._)([(0,l.MZ)({readOnly:!0})],_.prototype,"updatingProgress",null),(0,s._)([(0,l.MZ)()],_.prototype,"updateSuspended",null),(0,s._)([(0,l.MZ)()],_.prototype,"visible",null),(0,s._)([(0,l.MZ)({readOnly:!0})],_.prototype,"visibleAtCurrentScale",null),(0,s._)([(0,l.MZ)({readOnly:!0})],_.prototype,"visibleAtCurrentTimeExtent",null),_=(0,s._)([(0,p.$)("esri.views.layers.LayerView")],_);const h=_},96081:(C,E,t)=>{t.d(E,{A:()=>r});var s=t(8189),c=t(35150),n=t(56492),y=t(48900),l=(t(3248),t(40707),t(5922),t(76576));const r=u=>{let p=class extends u{initialize(){this.addHandles((0,y.on)(()=>this.layer,"refresh",m=>{this.doRefresh(m.dataChanged).catch(M=>{(0,n.zf)(M)||c.A.getLogger(this).error(M)})}),"RefreshableLayerView")}};return p=(0,s._)([(0,l.$)("esri.views.layers.RefreshableLayerView")],p),p}},66727:(C,E,t)=>{t.d(E,{A:()=>r});var s=t(8189),c=t(71065),n=t(85211),O=(t(3248),t(35150),t(40707),t(76576));let l=class extends c.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,s._)([(0,n.MZ)({readOnly:!0})],l.prototype,"version",null),l=(0,s._)([(0,O.$)("esri.views.layers.support.ClipArea")],l);const r=l},75644:(C,E,t)=>{t.d(E,{A:()=>e});var M,s=t(8189),n=(t(21152),t(85211)),O=(t(3248),t(35150),t(40707),t(76576)),l=t(68643),r=t(61320),u=t(66727),p=t(28067),m=t(55861);const _={base:l.A,key:"type",typeMap:{extent:p.A,polygon:m.A}};let h=M=class extends u.A{constructor(a){super(a),this.type="geometry",this.geometry=null}clone(){return new M({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,s._)([(0,n.MZ)({types:_,json:{read:r.rS,write:!0}})],h.prototype,"geometry",void 0),h=M=(0,s._)([(0,O.$)("esri.views.layers.support.Geometry")],h);const e=h},6558:(C,E,t)=>{function s(r){return r&&"function"==typeof r.highlight}function y(r,u){if(u&&r){const{minScale:p,maxScale:m}=r;if(function o(r,u){return null!=r&&r>0||null!=u&&u>0}(p,m))return function n(r,u,p){return null==r||r>=p&&(0===u||r<=u)}(u,p,m)}return!0}function d(r){return!r?.minScale||!r.maxScale||r.minScale>=r.maxScale}t.d(E,{E5:()=>y,Of:()=>s,g7:()=>d})}}]);