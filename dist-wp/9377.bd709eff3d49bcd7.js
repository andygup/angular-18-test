"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[9377],{74784:(Q,Z,z)=>{z.d(Z,{A:()=>$});var P=z(8189),q=z(49976),N=z(71065),k=z(85211),K=(z(3248),z(35150),z(40707),z(15463)),G=z(76576);const w=new q.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),W=new q.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let I=class extends N.oY{constructor(j){super(j),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(j){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",j)}set definedInterval(j){"defined-interval"===this.classificationMethod&&this._set("definedInterval",j)}};(0,P._)([(0,K.e)({classBreaksDef:"class-breaks-definition"})],I.prototype,"type",void 0),(0,P._)([(0,k.MZ)({json:{write:!0}})],I.prototype,"breakCount",void 0),(0,P._)([(0,k.MZ)({json:{write:!0}})],I.prototype,"classificationField",void 0),(0,P._)([(0,k.MZ)({type:String,json:{read:w.read,write:w.write}})],I.prototype,"classificationMethod",void 0),(0,P._)([(0,k.MZ)({json:{write:!0}})],I.prototype,"normalizationField",void 0),(0,P._)([(0,k.MZ)({json:{read:W.read,write:W.write}})],I.prototype,"normalizationType",void 0),(0,P._)([(0,k.MZ)({value:null,json:{write:!0}})],I.prototype,"standardDeviationInterval",null),(0,P._)([(0,k.MZ)({value:null,json:{write:!0}})],I.prototype,"definedInterval",null),I=(0,P._)([(0,G.$)("esri.rest.support.ClassBreaksDefinition")],I);const $=I},54076:(Q,Z,z)=>{z.d(Z,{t:()=>J});var P=z(35150);const q=()=>P.A.getLogger("esri.rest.support.generateRendererUtils");function N(o,c){return Number(o.toFixed(c))}function J(o){const{normalizationTotal:c}=o;return{classBreaks:Y(o),normalizationTotal:c}}function Y(o){const c=o.definition,{classificationMethod:a,normalizationType:u,definedInterval:v}=c,_=c.breakCount??1,h=[];let r=o.values;if(0===r.length)return[];r=r.sort((f,b)=>f-b);const g=r[0],y=r[r.length-1];if("equal-interval"===a)if(r.length>=_){const f=(y-g)/_;let b=g;for(let i=1;i<_;i++){const n=N(g+i*f,6);h.push({minValue:b,maxValue:n,label:C(b,n,u)}),b=n}h.push({minValue:b,maxValue:y,label:C(b,y,u)})}else r.forEach(f=>{h.push({minValue:f,maxValue:f,label:C(f,f,u)})});else if("natural-breaks"===a){const f=function K(o){const c=[],a=[];let u=Number.MIN_VALUE,v=1,_=-1;for(let h=0;h<o.length;h++){const r=o[h];r===u?(v++,a[_]=v):null!==r&&(c.push(r),u=r,v=1,a.push(v),_++)}return{uniqueValues:c,valueFrequency:a}}(r),i=function G(o,c,a){const u=o.length,v=[];a>u&&(a=u);for(let h=0;h<a;h++)v.push(Math.round(h*u/a-1));v.push(u-1);let _=w(v,o,c,a);return function W(o,c,a,u,v,_){let h=0,r=0,g=0,y=0,f=!0;for(let b=0;b<2&&f;b++){0===b&&(f=!1);for(let i=0;i<_-1;i++)for(;a[i+1]+1!==a[i+2];){a[i+1]=a[i+1]+1;const n=L(i,a,u,v);g=n.sbMean,h=n.sbSdcm;const m=L(i+1,a,u,v);if(y=m.sbMean,r=m.sbSdcm,!(h+r<c[i]+c[i+1])){a[i+1]=a[i+1]-1;break}c[i]=h,c[i+1]=r,o[i]=g,o[i+1]=y,f=!0}for(let i=_-1;i>0;i--)for(;a[i]!==a[i-1]+1;){a[i]=a[i]-1;const n=L(i-1,a,u,v);g=n.sbMean,h=n.sbSdcm;const m=L(i,a,u,v);if(y=m.sbMean,r=m.sbSdcm,!(h+r<c[i-1]+c[i])){a[i]=a[i]+1;break}c[i-1]=h,c[i]=r,o[i-1]=g,o[i]=y,f=!0}}return f}(_.mean,_.sdcm,v,o,c,a)&&(_=w(v,o,c,a)),v}(f.uniqueValues,o.valueFrequency||f.valueFrequency,_);let n=g;for(let m=1;m<_;m++)if(f.uniqueValues.length>m){const S=N(f.uniqueValues[i[m]],6);h.push({minValue:n,maxValue:S,label:C(n,S,u)}),n=S}h.push({minValue:n,maxValue:y,label:C(n,y,u)})}else if("quantile"===a)if(r.length>=_&&g!==y){let f=g,b=Math.ceil(r.length/_),i=0;for(let n=1;n<_;n++){let m=b+i-1;m>r.length&&(m=r.length-1),m<0&&(m=0),h.push({minValue:f,maxValue:r[m],label:C(f,r[m],u)}),f=r[m],i+=b,b=Math.ceil((r.length-i)/(_-n))}h.push({minValue:f,maxValue:y,label:C(f,y,u)})}else{let f=-1;for(let b=0;b<r.length;b++){const i=r[b];i!==f&&(f=i,h.push({minValue:f,maxValue:i,label:C(f,i,u)}),f=i)}}else if("standard-deviation"===a){const f=function $(o){let c=0;for(let a=0;a<o.length;a++)c+=o[a];return c/=o.length,c}(r),b=function j(o,c){let a=0;for(let u=0;u<o.length;u++){const v=o[u];a+=(v-c)*(v-c)}return a/=o.length,Math.sqrt(a)}(r,f);if(0===b)h.push({minValue:r[0],maxValue:r[0],label:C(r[0],r[0],u)});else{const i=function I(o,c,a,u,v){let _=Math.max(u-o,c-u)/v/a;return _=_>=1?1:_>=.5?.5:.25,_}(g,y,_,f,b)*b;let n=0,m=g;for(let U=_;U>=1;U--){const A=N(f-(U-.5)*i,6);h.push({minValue:m,maxValue:A,label:C(m,A,u)}),m=A,n++}let S=N(f+.5*i,6);h.push({minValue:m,maxValue:S,label:C(m,S,u)}),m=S,n++;for(let U=1;U<=_;U++)S=n===2*_?y:N(f+(U+.5)*i,6),h.push({minValue:m,maxValue:S,label:C(m,S,u)}),m=S,n++}}else if("defined-interval"===a){if(!v)return h;const f=r[0],b=r[r.length-1],i=Math.ceil((b-f)/v);let n=f;for(let m=1;m<i;m++){const S=N(f+m*v,6);h.push({minValue:n,maxValue:S,label:C(n,S,u)}),n=S}h.push({minValue:n,maxValue:b,label:C(n,b,u)})}return h}function C(o,c,a){let u=null;return u=o===c?a&&"percent-of-total"===a?o+"%":o.toString():a&&"percent-of-total"===a?o+"% - "+c+"%":o+" - "+c,u}function w(o,c,a,u){let v=[],_=[],h=[],r=0;const g=[],y=[];for(let n=0;n<u;n++){const m=L(n,o,c,a);g.push(m.sbMean),y.push(m.sbSdcm),r+=y[n]}let f,b=r,i=!0;for(;i||r<b;){i=!1,v=[];for(let n=0;n<u;n++)v.push(o[n]);for(let n=0;n<u;n++)for(let m=o[n]+1;m<=o[n+1];m++)if(f=c[m],n>0&&m!==o[n+1]&&Math.abs(f-g[n])>Math.abs(f-g[n-1]))o[n]=m;else if(n<u-1&&o[n]!==m-1&&Math.abs(f-g[n])>Math.abs(f-g[n+1])){o[n+1]=m-1;break}b=r,r=0,_=[],h=[];for(let n=0;n<u;n++){_.push(g[n]),h.push(y[n]);const m=L(n,o,c,a);g[n]=m.sbMean,y[n]=m.sbSdcm,r+=y[n]}}if(r>b){for(let n=0;n<u;n++)o[n]=v[n],g[n]=_[n],y[n]=h[n];r=b}return{mean:g,sdcm:y}}function L(o,c,a,u){let v=0,_=0;for(let g=c[o]+1;g<=c[o+1];g++){const y=u[g];v+=a[g]*y,_+=y}_<=0&&q().warn("Exception in Natural Breaks calculation");const h=v/_;let r=0;for(let g=c[o]+1;g<=c[o+1];g++)r+=u[g]*(a[g]-h)**2;return{sbMean:h,sbSdcm:r}}},59377:(Q,Z,z)=>{z.d(Z,{$y:()=>ae,FM:()=>c,G_:()=>L,Rw:()=>H,Vb:()=>$,b3:()=>U,gJ:()=>I,jM:()=>le,lv:()=>X,oZ:()=>S,qg:()=>o,z9:()=>j,zS:()=>ee});var P=z(74784),q=z(54076);const N="<Null>",k="equal-interval",J=1,Y=5,C=10,K=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,G=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),w=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),W=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function I(e){return null==e||"string"==typeof e&&!e?N:e}function $(e){return!(null!=e.normalizationField||null!=e.normalizationType||null!=e.minValue||null!=e.maxValue||e.sqlExpression&&e.supportsSQLExpression)}function j(e){const t=e.returnDistinct?[...new Set(e.values)]:e.values,l=t.filter(p=>null!=p).sort(),s=l.length,d={count:s,min:l[0],max:l[s-1]};return e.supportsNullCount&&(d.nullcount=t.length-s),e.percentileParams&&(d.median=o(t,e.percentileParams)),d}function L(e){const{values:t,useSampleStdDev:l,supportsNullCount:s}=e;let d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,V=null,T=null,M=null,F=null,D=0;const O=null==e.minValue?-1/0:e.minValue,x=null==e.maxValue?1/0:e.maxValue;for(const E of t)Number.isFinite(E)?E>=O&&E<=x&&(V=null===V?E:V+E,d=Math.min(d,E),p=Math.max(p,E),D++):"string"==typeof E&&D++;if(D&&null!=V){T=V/D;let E=0;for(const R of t)Number.isFinite(R)&&R>=O&&R<=x&&(E+=(R-T)**2);F=l?D>1?E/(D-1):0:D>0?E/D:0,M=Math.sqrt(F)}else d=null,p=null;const B={avg:T,count:D,max:p,min:d,stddev:M,sum:V,variance:F};return s&&(B.nullcount=t.length-D),e.percentileParams&&(B.median=o(t,e.percentileParams)),B}function o(e,t){const{fieldType:l,value:s,orderBy:d,isDiscrete:p}=t,V=c(l,"desc"===d);if(0===(e=[...e].filter(B=>null!=B).sort((B,E)=>V(B,E))).length)return null;if(s<=0)return e[0];if(s>=1)return e[e.length-1];const T=(e.length-1)*s,M=Math.floor(T),F=M+1,D=T%1,O=e[M],x=e[F];return F>=e.length||p||"string"==typeof O||"string"==typeof x?O:O*(1-D)+x*D}function c(e,t){if(e){if(G.has(e))return n(t);if(w.has(e))return f(t,!1);if("esriFieldTypeTimestampOffset"===e)return function r(e){return e?h:_}(t);const p=f(t,!0);if("esriFieldTypeString"===e)return p;if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e)return(V,T)=>p(m(V),m(T))}const l=t?1:-1,s=n(t),d=f(t,!0);return(p,V)=>"number"==typeof p&&"number"==typeof V?s(p,V):"string"==typeof p&&"string"==typeof V?d(p,V):l}const a=(e,t)=>null==e?null==t?0:1:null==t?-1:null,u=(e,t)=>null==e?null==t?0:-1:null==t?1:null,_=(e,t)=>u(e,t)??(e===t?0:new Date(e).getTime()-new Date(t).getTime()),h=(e,t)=>a(e,t)??(e===t?0:new Date(t).getTime()-new Date(e).getTime()),g=(e,t)=>u(e,t)??(e===t?0:e<t?-1:1),y=(e,t)=>a(e,t)??(e===t?0:e<t?1:-1);function f(e,t){if(!t)return e?y:g;const l=function v(e){return e?a:u}(e);return e?(s,d)=>l(s,d)??((s=s.toUpperCase())>(d=d.toUpperCase())?-1:s<d?1:0):(s,d)=>l(s,d)??((s=s.toUpperCase())<(d=d.toUpperCase())?-1:s>d?1:0)}const b=(e,t)=>a(e,t)??t-e,i=(e,t)=>u(e,t)??e-t;function n(e){return e?b:i}function m(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function S(e,t){let l;for(l in e)W.includes(l)&&(Number.isFinite(e[l])||(e[l]=null));return t&&["avg","stddev","variance"].forEach(s=>{null!=e[s]&&(e[s]=Math.ceil(e[s]??0))}),e}function U(e){const t={};for(let l of e)(null==l||"string"==typeof l&&""===l.trim())&&(l=null),null==t[l]?t[l]={count:1,data:l}:t[l].count++;return{count:t}}function A(e){return"coded-value"!==e?.type?[]:e.codedValues.map(t=>t.code)}function X(e,t,l,s){const d=e.count,p=[];if(l&&t){const V=[],T=A(t[0]);for(const M of T)if(t[1]){const F=A(t[1]);for(const D of F)if(t[2]){const O=A(t[2]);for(const x of O)V.push(`${I(M)}${s}${I(D)}${s}${I(x)}`)}else V.push(`${I(M)}${s}${I(D)}`)}else V.push(M);for(const M of V)d.hasOwnProperty(M)||(d[M]={data:M,count:0})}for(const V in d){const T=d[V];p.push({value:T.data,count:T.count,label:T.label})}return{uniqueValueInfos:p}}function ee(e,t,l,s){let d=null;switch(t){case"log":0!==e&&(d=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(s)&&0!==s&&(d=e/s*100);break;case"field":Number.isFinite(l)&&0!==l&&(d=e/l);break;case"natural-log":e>0&&(d=Math.log(e));break;case"square-root":e>0&&(d=e**.5)}return d}function H(e,t){const l=function ne(e){const{breakCount:t,field:l,normalizationField:s,normalizationType:d}=e,p=e.classificationMethod||k;return new P.A({breakCount:t,classificationField:l,classificationMethod:p,normalizationField:"field"===d?s:void 0,normalizationType:d,standardDeviationInterval:"standard-deviation"===p?e.standardDeviationInterval||J:void 0})}({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||Y});return e=function te(e,t,l){const s=t??-1/0,d=l??1/0;return e.filter(p=>Number.isFinite(p)&&p>=s&&p<=d)}(e,t.minValue,t.maxValue),(0,q.t)({definition:l,values:e,normalizationTotal:t.normalizationTotal})}function le(e,t){let l=e.classBreaks;const s=l.length,d=l[0]?.minValue,p=l[s-1]?.maxValue,V="standard-deviation"===t,T=K;return l=l.map(M=>{const F=M.label,D={minValue:M.minValue,maxValue:M.maxValue,label:F};if(V&&F){const O=F.match(T),x=O?.map(B=>+B.trim())??[];2===x.length?(D.minStdDev=x[0],D.maxStdDev=x[1],x[0]<0&&x[1]>0&&(D.hasAvg=!0)):1===x.length&&(F.includes("<")?(D.minStdDev=null,D.maxStdDev=x[0]):F.includes(">")&&(D.minStdDev=x[0],D.maxStdDev=null))}return D}),{minValue:d,maxValue:p,classBreakInfos:l,normalizationTotal:e.normalizationTotal}}function ae(e,t){const l=function ie(e,t){const{field:l,classificationMethod:s,standardDeviationInterval:d,normalizationType:p,normalizationField:V,normalizationTotal:T,minValue:M,maxValue:F}=t,D=t.numBins||C;let O=null,x=null,B=null;if(s&&"equal-interval"!==s||p){const{classBreaks:E}=H(e,{field:l,normalizationType:p,normalizationField:V,normalizationTotal:T,classificationMethod:s,standardDeviationInterval:d,minValue:M,maxValue:F,numClasses:D});O=E[0].minValue,x=E[E.length-1].maxValue,B=E.map(R=>[R.minValue,R.maxValue])}else{if(null!=M&&null!=F)O=M,x=F;else{const E=L({values:e,minValue:M,maxValue:F,useSampleStdDev:!p,supportsNullCount:$({normalizationType:p,normalizationField:V,minValue:M,maxValue:F})});O=E.min??null,x=E.max??null}B=function se(e,t,l){const s=(t-e)/l,d=[];let p,V=e;for(let T=1;T<=l;T++)p=V+s,p=Number(p.toFixed(16)),d.push([V,T===l?t:p]),V=p;return d}(O??0,x??0,D)}return{min:O,max:x,intervals:B}}(e,t);if(null==l.min&&null==l.max)return{bins:[],minValue:l.min,maxValue:l.max,normalizationTotal:t.normalizationTotal};const s=l.intervals,d=l.min??0,p=l.max??0,V=s.map((T,M)=>({minValue:s[M][0],maxValue:s[M][1],count:0}));for(const T of e)if(null!=T&&T>=d&&T<=p){const M=oe(s,T);M>-1&&V[M].count++}return{bins:V,minValue:d,maxValue:p,normalizationTotal:t.normalizationTotal}}function oe(e,t){let l=-1;for(let s=e.length-1;s>=0;s--)if(t>=e[s][0]){l=s;break}return l}}}]);