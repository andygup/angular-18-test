"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[3145,7340,9063],{23506:(L,g,r)=>{r.d(g,{v:()=>d});var l=r(99305);function d(E){E?.writtenProperties&&E.writtenProperties.forEach(({target:i,propName:m,newOrigin:O})=>{(0,l.H)(i)&&O&&i.originOf(m)!==O&&i.updateOrigin(m,O)})}},99305:(L,g,r)=>{function l(d){return d&&"getAtOrigin"in d&&"originOf"in d}r.d(g,{H:()=>l})},44905:(L,g,r)=>{r.r(g),r.d(g,{save:()=>p,saveAs:()=>U});var l=r(10467),d=r(17994),E=r(15764),i=r(69927),m=r(3458);const O="Media Layer",P="media-layer-save",I="media-layer-save-as",v=["media-layer:unsupported-source"];function _(t){return{isValid:"media"===t.type,errorMessage:"Layer.type should be 'media'"}}function f(t){return(0,E.m)(t,"portal-item",!0)}function A(t){return t.layerJSON}function D(t,n){return o.apply(this,arguments)}function o(){return(o=(0,l.A)(function*(t,n){n.extent=t.fullExtent?yield(0,i.sQ)(t.fullExtent):null})).apply(this,arguments)}function a(t,n){return c.apply(this,arguments)}function c(){return(c=(0,l.A)(function*(t,n){n.title||=t.title,yield D(t,n),(0,i.OM)(n,i.mm.METADATA)})).apply(this,arguments)}function p(t,n){return x.apply(this,arguments)}function x(){return(x=(0,l.A)(function*(t,n){return(0,d.UN)({layer:t,itemType:O,validateLayer:_,createJSONContext:u=>f(u),createItemData:A,errorNamePrefix:P,supplementalUnsupportedErrors:v,setItemProperties:D,saveResources:(u,h)=>(0,m.r)(t.resourceReferences,h)},n)})).apply(this,arguments)}function U(t,n,u){return e.apply(this,arguments)}function e(){return(e=(0,l.A)(function*(t,n,u){return(0,d.Uh)({layer:t,itemType:O,validateLayer:_,createJSONContext:h=>f(h),createItemData:A,errorNamePrefix:I,supplementalUnsupportedErrors:v,newItem:n,setItemProperties:a,saveResources:(h,s)=>(0,m.r)(t.resourceReferences,s)},u)})).apply(this,arguments)}},57340:(L,g,r)=>{r.r(g),r.d(g,{addOrUpdateResources:()=>P,contentToBlob:()=>c,fetchResources:()=>m,getSiblingOfSameType:()=>x,getSiblingOfSameTypeI:()=>U,removeAllResources:()=>f,removeResource:()=>v,splitPrefixFileNameAndExtension:()=>o});var l=r(10467),d=r(89563),E=r(5922),i=r(45272);function m(e){return O.apply(this,arguments)}function O(){return(O=(0,l.A)(function*(e,t={},n){yield e.load(n);const u=(0,i.fj)(e.itemUrl,"resources"),{start:h=1,num:s=10,sortOrder:y="asc",sortField:T="resource"}=t,R={query:{start:h,num:s,sortOrder:y,sortField:T,token:e.apiKey},signal:n?.signal},M=yield e.portal.request(u,R);return{total:M.total,nextStart:M.nextStart,resources:M.resources.map(({created:C,size:b,resource:j})=>({created:new Date(C),size:b,resource:e.resourceFromPath(j)}))}})).apply(this,arguments)}function P(e,t,n,u){return I.apply(this,arguments)}function I(){return(I=(0,l.A)(function*(e,t,n,u){const h=new Map;for(const{resource:y,content:T,compress:R,access:M}of t){if(!y.hasPath())throw new E.A(`portal-item-resource-${n}:invalid-path`,"Resource does not have a valid path");const[C,b]=D(y.path),j=`${C}/${R??""}/${M??""}`;h.has(j)||h.set(j,{prefix:C,compress:R,access:M,files:[]}),h.get(j).files.push({fileName:b,content:T})}yield e.load(u);const s=(0,i.fj)(e.userItemUrl,"add"===n?"addResources":"updateResources");for(const{prefix:y,compress:T,access:R,files:M}of h.values())for(let b=0;b<M.length;b+=25){const j=M.slice(b,b+25),S=new FormData;y&&"."!==y&&S.append("resourcesPrefix",y),T&&S.append("compress","true"),R&&S.append("access",R);let B=0;for(const{fileName:w,content:K}of j)S.append("file"+ ++B,K,w);S.append("f","json"),yield e.portal.request(s,{method:"post",body:S,signal:u?.signal})}})).apply(this,arguments)}function v(e,t,n){return _.apply(this,arguments)}function _(){return(_=(0,l.A)(function*(e,t,n){if(!t.hasPath())throw new E.A("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield e.load(n);const u=(0,i.fj)(e.userItemUrl,"removeResources");yield e.portal.request(u,{method:"post",query:{resource:t.path},signal:n?.signal}),t.portalItem=null})).apply(this,arguments)}function f(e,t){return A.apply(this,arguments)}function A(){return(A=(0,l.A)(function*(e,t){yield e.load(t);const n=(0,i.fj)(e.userItemUrl,"removeResources");return e.portal.request(n,{method:"post",query:{deleteAll:!0},signal:t?.signal})})).apply(this,arguments)}function D(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function o(e){const[t,n]=function a(e){const t=(0,i.Zo)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[u,h]=D(t);return[u,h,n]}function c(e){return p.apply(this,arguments)}function p(){return(p=(0,l.A)(function*(e){return"blob"===e.type?e.blob:"json"===e.type?new Blob([e.jsonString],{type:"application/json"}):(yield(0,d.A)(e.url,{responseType:"blob"})).data})).apply(this,arguments)}function x(e,t){if(!e.hasPath())return null;const[n,,u]=o(e.path);return e.portalItem.resourceFromPath((0,i.fj)(n,t+u))}function U(e,t){if(!e.hasPath())return null;const[n,,u]=o(e.path);return e.portalItem.resourceFromPath((0,i.fj)(n,t+u))}},3458:(L,g,r)=>{r.d(g,{S:()=>I,r:()=>O});var l=r(10467),d=r(5922),E=r(56492),i=r(43085),m=r(57340);function O(o,a,c){return P.apply(this,arguments)}function P(){return(P=(0,l.A)(function*(o,a,c){const p=yield _(o,a,c);yield A(p,a,c)})).apply(this,arguments)}function I(o,a,c,p,x){return v.apply(this,arguments)}function v(){return(v=(0,l.A)(function*(o,a,c,p,x){const U=yield _(c,p,x);yield o.update({data:a}),yield A(U,p,x)})).apply(this,arguments)}function _(o,a,c){return f.apply(this,arguments)}function f(){return(f=(0,l.A)(function*(o,a,c){if(!a?.resources)return;const p=a.portalItem===o.portalItem?new Set(o.paths):new Set;o.paths.length=0,o.portalItem=a.portalItem;const x=new Set(a.resources.toKeep.map(s=>s.resource.path)),U=new Set,e=[];x.forEach(s=>{p.delete(s),o.paths.push(s)});const t=[],n=[],u=[];for(const s of a.resources.toUpdate)if(p.delete(s.resource.path),x.has(s.resource.path)||U.has(s.resource.path)){const{resource:y,content:T,finish:R}=s,M=(0,m.getSiblingOfSameTypeI)(y,(0,i.lk)());o.paths.push(M.path),t.push({resource:M,content:yield(0,m.contentToBlob)(T),compress:s.compress}),R&&u.push(()=>R(M))}else{o.paths.push(s.resource.path),n.push({resource:s.resource,content:yield(0,m.contentToBlob)(s.content),compress:s.compress});const y=s.finish;y&&u.push(()=>y(s.resource)),U.add(s.resource.path)}for(const s of a.resources.toAdd)if(o.paths.push(s.resource.path),p.has(s.resource.path))p.delete(s.resource.path);else{t.push({resource:s.resource,content:yield(0,m.contentToBlob)(s.content),compress:s.compress});const y=s.finish;y&&u.push(()=>y(s.resource))}if(t.length||n.length){const{addOrUpdateResources:s}=yield Promise.resolve().then(r.bind(r,57340));yield s(a.portalItem,t,"add",c),yield s(a.portalItem,n,"update",c)}if(u.forEach(s=>s()),0===e.length)return p;const h=yield(0,E.Ol)(e);if((0,E.Te)(c),h.length>0)throw new d.A("save:resources","Failed to save one or more resources",{errors:h});return p})).apply(this,arguments)}function A(o,a,c){return D.apply(this,arguments)}function D(){return(D=(0,l.A)(function*(o,a,c){if(!o||!a.portalItem)return;const p=[];for(const x of o){const U=a.portalItem.resourceFromPath(x);p.push(U.portalItem.removeResource(U,c))}yield(0,E.Lx)(p)})).apply(this,arguments)}},96904:(L,g,r)=>{r.d(g,{X:()=>i});var l=r(23098),d=r(5922),E=r(2174);function i(m){if(l.A.apiKey&&(0,E.Q)(m.portal.url))throw new d.A("save-api-key-utils:api-key-not-supported",`Saving is not supported on ${m.portal.url} when using an api key`)}},95945:(L,g,r)=>{r.d(g,{c:()=>O,d:()=>E});var l=r(10467),d=r(5922);function E(P){return i.apply(this,arguments)}function i(){return(i=(0,l.A)(function*(P){const I=[];for(const v of P.allLayers)if("beforeSave"in v&&"function"==typeof v.beforeSave){const _=v.beforeSave();_&&I.push(_)}yield Promise.allSettled(I)})).apply(this,arguments)}const m=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function O(P,I,v){let _=(P.messages??[]).filter(({type:f})=>"error"===f).map(({name:f,message:A,details:D})=>new d.A(f,A,D));if(P.blockedRelativeUrls&&(_=_.concat(P.blockedRelativeUrls.map(f=>new d.A("url:unsupported",`Relative url '${f}' is not supported`)))),v){const{ignoreUnsupported:f,supplementalUnsupportedErrors:A=[],requiredPropertyChecksDisabled:D}=v;f&&(_=_.filter(({name:o})=>!(m.has(o)||A.includes(o)))),D&&(_=_.filter(o=>"web-document-write:property-required"!==o.name))}if(_.length>0)throw new d.A(I.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:_})}}}]);