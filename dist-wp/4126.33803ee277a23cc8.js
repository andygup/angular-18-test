"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[4126],{34126:(z,p,n)=>{n.r(p),n.d(p,{fromUrl:()=>G});var e=n(10467),U=n(5922),t=n(45272),s=n(68438),A=n(86537),S=n(23154),W=n(58443),B=n(64833),I=n(56151);const F={FeatureLayer:!0,SceneLayer:!0};function G(r){return x.apply(this,arguments)}function x(){return x=(0,e.A)(function*(r){const{properties:a,url:l}=r,u={...a,url:l},i=yield function K(r,a){return D.apply(this,arguments)}(l,a?.customParameters),{Constructor:o,layerId:L,sourceJSON:g,parsedUrl:P,layers:T,tables:h}=i;if(T.length+h.length===0)return null!=L&&(u.layerId=L),null!=g&&(u.sourceJSON=g),new o(u);const C=new((yield n.e(2429).then(n.bind(n,82429))).default)({title:P.title});return yield function j(r,a,l){return O.apply(this,arguments)}(C,i,u),C}),x.apply(this,arguments)}function f(r,a){return r?r.find(({id:l})=>l===a):null}function E(r,a,l,u,i){const o={...i,layerId:a};return null!=r&&(o.url=r),null!=l&&(o.sourceJSON=l),"sublayerTitleMode"in u.prototype&&(o.sublayerTitleMode="service-name"),new u(o)}function O(){return(O=(0,e.A)(function*(r,a,l){const u=a.sublayerConstructorProvider;for(const{id:i,serverUrl:o}of a.layers){const L=f(a.sublayerInfos,i),g=E(o,i,L,(L&&u?.(L))??a.Constructor,l);r.add(g)}if(a.tables.length){const i=yield R("FeatureLayer");a.tables.forEach(({id:o,serverUrl:L})=>{const g=E(L,o,f(a.tableInfos,o),i,l);r.tables.add(g)})}})).apply(this,arguments)}function D(){return D=(0,e.A)(function*(r,a){let l=(0,s.qg)(r);if(null==l&&(l=yield function N(r,a){return M.apply(this,arguments)}(r,a)),null==l)throw new U.A("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:r});const{serverType:u,sublayer:i}=l;let o;const L={FeatureServer:"FeatureLayer",KnowledgeGraphServer:"KnowledgeGraphLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer",VideoServer:"VideoLayer"},g="FeatureServer"===u,P="SceneServer"===u,T={parsedUrl:l,Constructor:null,layerId:g||P?i??void 0:void 0,layers:[],tables:[]};switch(u){case"MapServer":o=null!=i?"FeatureLayer":(yield function $(r,a){return Q.apply(this,arguments)}(r,a))?"TileLayer":"MapImageLayer";break;case"ImageServer":{const h=yield(0,I.V)(r,{customParameters:a}),{tileInfo:C,cacheType:V}=h;o=C?"LERC"!==C?.format?.toUpperCase()||V&&"elevation"!==V.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const h=yield(0,I.V)(l.url.path,{customParameters:a});if(o="SceneLayer",h){const C=h?.layers;if("Voxel"===h?.layerType)o="VoxelLayer";else if(C?.length){const V=C[0]?.layerType;null!=V&&null!=W.XX[V]&&(o=W.XX[V])}}break}case"3DTilesServer":throw new U.A("arcgis-layers:unsupported","fromUrl() not supported for 3DTiles layers");case"FeatureServer":if(o="FeatureLayer",null!=i){const h=yield(0,I.V)(r,{customParameters:a});T.sourceJSON=h,o=(0,S.K)(h.type)}break;default:o=L[u]}if(F[o]&&null==i){const h=yield function c(r,a,l){return m.apply(this,arguments)}(r,u,a);if(g&&(T.sublayerInfos=h.layerInfos,T.tableInfos=h.tableInfos),h.layers.length+h.tables.length!==1)T.layers=h.layers,T.tables=h.tables,g&&h.layerInfos?.length&&(T.sublayerConstructorProvider=yield function H(r){return X.apply(this,arguments)}(h.layerInfos));else if(g||P){const C=h.layerInfos?.[0]??h.tableInfos?.[0];if(T.layerId=h.layers[0]?.id??h.tables[0]?.id,T.sourceJSON=C,g){const V=C?.type;o=(0,S.K)(V)}}}return T.Constructor=yield R(o),T}),D.apply(this,arguments)}function M(){return(M=(0,e.A)(function*(r,a){const l=yield(0,I.V)(r,{customParameters:a});let u=null,i=null;const o=l.type;if("Feature Layer"===o||"Table"===o?(u="FeatureServer",i=l.id??null):"indexedVector"===o?u="VectorTileServer":l.hasOwnProperty("mapName")?u="MapServer":l.hasOwnProperty("bandCount")&&l.hasOwnProperty("pixelSizeX")?u="ImageServer":l.hasOwnProperty("maxRecordCount")&&l.hasOwnProperty("allowGeometryUpdates")?u="FeatureServer":l.hasOwnProperty("streamUrls")?u="StreamServer":y(l)?(u="SceneServer",i=l.id):l.hasOwnProperty("layers")&&y(l.layers?.[0])&&(u="SceneServer"),!u)return null;const L=null!=i?(0,s.iz)(r):null;return{title:null!=L&&l.name||(0,t.e7)(r),serverType:u,sublayer:i,url:{path:null!=L?L.serviceUrl:(0,t.An)(r).path}}})).apply(this,arguments)}function y(r){return null!=r&&r.hasOwnProperty("store")&&r.hasOwnProperty("id")&&"number"==typeof r.id}function m(){return m=(0,e.A)(function*(r,a,l){let u,i,o=!1;switch(a){case"FeatureServer":{const P=yield(0,S.Q)(r,{customParameters:l});o=!!P.layersJSON,u=P.layersJSON||P.serviceJSON;break}case"SceneServer":{const P=yield function d(r,a){return v.apply(this,arguments)}(r,l);u=P.serviceInfo,i=P.tableServerUrl;break}default:u=yield(0,I.V)(r,{customParameters:l})}const L=u?.layers,g=u?.tables;return{layers:L?.map(P=>({id:P.id})).reverse()||[],tables:g?.map(P=>({serverUrl:i,id:P.id})).reverse()||[],layerInfos:o?L:[],tableInfos:o?g:[]}}),m.apply(this,arguments)}function v(){return(v=(0,e.A)(function*(r,a){const l=yield(0,I.V)(r,{customParameters:a});if(!l.layers?.[0])return{serviceInfo:l};try{const{serverUrl:i}=yield(0,A.L)(r),o=yield(0,I.V)(i,{customParameters:a}).catch(()=>null);return o&&(l.tables=o.tables),{serviceInfo:l,tableServerUrl:i}}catch{return{serviceInfo:l}}})).apply(this,arguments)}function R(r){return J.apply(this,arguments)}function J(){return(J=(0,e.A)(function*(r){return(0,B.S[r])()})).apply(this,arguments)}function Q(){return(Q=(0,e.A)(function*(r,a){return(yield(0,I.V)(r,{customParameters:a})).tileInfo})).apply(this,arguments)}function X(){return(X=(0,e.A)(function*(r){if(!r.length)return;const a=new Set,l=[];for(const{type:o}of r)a.has(o)||(a.add(o),l.push(R((0,S.K)(o))));const u=yield Promise.all(l),i=new Map;return Array.from(a).forEach((o,L)=>{i.set(o,u[L])}),o=>i.get(o.type)})).apply(this,arguments)}},86537:(z,p,n)=>{n.d(p,{L:()=>I});var e=n(10467),U=n(77469),t=n(89563),s=n(5922),A=n(56492),S=n(68438),W=n(73874),B=n(46577);function I(y,c){return F.apply(this,arguments)}function F(){return F=(0,e.A)(function*(y,c){const m=(0,S.qg)(y);if(!m)throw new s.A("invalid-url","Invalid scene service url");const d={...c,sceneServerUrl:m.url.path,layerId:m.sublayer??void 0};if(d.sceneLayerItem??=(yield function G(y){return x.apply(this,arguments)}(d)),null==d.sceneLayerItem)return K(d.sceneServerUrl.replace("/SceneServer","/FeatureServer"),d);const v=yield function N(y){return M.apply(this,arguments)}(d);if(!v?.url)throw new s.A("related-service-not-found","Could not find feature service through portal item relationship");d.featureServiceItem=v;const R=yield K(v.url,d);return R.portalItem=v,R}),F.apply(this,arguments)}function x(){return x=(0,e.A)(function*(y){const c=(yield f(y)).serviceItemId;if(!c)return null;const m=new B.default({id:c,apiKey:y.apiKey}),d=yield function j(y){return O.apply(this,arguments)}(y);null!=d&&(m.portal=new W.A({url:d}));try{return m.load({signal:y.signal})}catch(v){return(0,A.QP)(v),null}}),x.apply(this,arguments)}function f(y){return E.apply(this,arguments)}function E(){return(E=(0,e.A)(function*(y){if(y.rootDocument)return y.rootDocument;const c={query:{f:"json",...y.customParameters,token:y.apiKey},responseType:"json",signal:y.signal};try{const m=yield(0,t.A)(y.sceneServerUrl,c);y.rootDocument=m.data}catch{y.rootDocument={}}return y.rootDocument})).apply(this,arguments)}function O(){return(O=(0,e.A)(function*(y){const c=U.id?.findServerInfo(y.sceneServerUrl);if(c?.owningSystemUrl)return c.owningSystemUrl;const m=y.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const d=(yield(0,t.A)(m,{query:{f:"json"},responseType:"json",signal:y.signal})).data.owningSystemUrl;if(d)return d}catch(d){(0,A.QP)(d)}return null})).apply(this,arguments)}function K(y,c){return D.apply(this,arguments)}function D(){return(D=(0,e.A)(function*(y,c){const m=(0,S.qg)(y);if(!m)throw new s.A("invalid-feature-service-url","Invalid feature service url");const d=m.url.path,v=c.layerId;if(null==v)return{serverUrl:d};const R=f(c),J=c.featureServiceItem?yield c.featureServiceItem.fetchData("json"):null,$=(J?.layers?.[0]||J?.tables?.[0])?.customParameters,Q=u=>{const i={query:{f:"json",...$},responseType:"json",authMode:u,signal:c.signal};return(0,t.A)(d,i)},H=Q("anonymous").catch(()=>Q("no-prompt")),[X,r]=yield Promise.all([H,R]),a=r?.layers,l=X.data&&X.data.layers;if(!Array.isArray(l))throw new Error("expected layers array");if(Array.isArray(a)){for(let u=0;u<Math.min(a.length,l.length);u++)if(a[u].id===v)return{serverUrl:d,layerId:l[u].id}}else if(null!=v&&v<l.length)return{serverUrl:d,layerId:l[v].id};throw new Error("could not find matching associated sublayer")})).apply(this,arguments)}function M(){return(M=(0,e.A)(function*({sceneLayerItem:y,signal:c}){if(!y)return null;try{const m=(yield y.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:c})).find(v=>"Feature Service"===v.type)||null;if(!m)return null;const d=new B.default({portal:m.portal,id:m.id});return yield d.load(),d}catch(m){return(0,A.QP)(m),null}})).apply(this,arguments)}},23154:(z,p,n)=>{n.d(p,{K:()=>x,Q:()=>s});var e=n(10467),U=n(56151);const t=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);function s(f,E){return A.apply(this,arguments)}function A(){return(A=(0,e.A)(function*(f,E){const{loadContext:j,...O}=E||{},K=j?yield j.fetchServiceMetadata(f,O):yield(0,U.V)(f,O);G(K),B(K);const D={serviceJSON:K};if((K.currentVersion??0)<10.5)return D;const N=`${f}/layers`,M=j?yield j.fetchServiceMetadata(N,O):yield(0,U.V)(N,O);return G(M),B(M),D.layersJSON={layers:M.layers,tables:M.tables},D})).apply(this,arguments)}function S(f){const{type:E}=f;return!!E&&t.has(E)}function W(f){return"Table"===f.type}function B(f){f.layers=f.layers?.filter(S),f.tables=f.tables?.filter(W)}function I(f){f.type||="Feature Layer"}function F(f){f.type||="Table"}function G(f){f.layers?.forEach(I),f.tables?.forEach(F)}function x(f){switch(f){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}},64833:(z,p,n)=>{n.d(p,{S:()=>U});var e=n(10467);const U={BingMapsLayer:(t=(0,e.A)(function*(){return(yield n.e(6767).then(n.bind(n,16767))).default}),function(){return t.apply(this,arguments)}),BuildingSceneLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(3647),n.e(6406),n.e(9641),n.e(401),n.e(9078),n.e(2734)]).then(n.bind(n,13305))).default});return function(){return t.apply(this,arguments)}}(),CSVLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(4015).then(n.bind(n,34015))).default});return function(){return t.apply(this,arguments)}}(),CatalogLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1732),n.e(1277),n.e(9377),n.e(5434),n.e(3647),n.e(143),n.e(2767),n.e(5931),n.e(3718),n.e(8512)]).then(n.bind(n,78512))).default});return function(){return t.apply(this,arguments)}}(),DimensionLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(4511)]).then(n.bind(n,94511))).default});return function(){return t.apply(this,arguments)}}(),ElevationLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(8147)]).then(n.bind(n,98147))).default});return function(){return t.apply(this,arguments)}}(),FeatureLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.resolve().then(n.bind(n,35940))).default});return function(){return t.apply(this,arguments)}}(),GeoJSONLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(8474).then(n.bind(n,88474))).default});return function(){return t.apply(this,arguments)}}(),GeoRSSLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(6337).then(n.bind(n,66337))).default});return function(){return t.apply(this,arguments)}}(),GroupLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(2429).then(n.bind(n,82429))).default});return function(){return t.apply(this,arguments)}}(),ImageryLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1277),n.e(9642),n.e(2758),n.e(3944),n.e(1375)]).then(n.bind(n,64123))).default});return function(){return t.apply(this,arguments)}}(),ImageryTileLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(9642),n.e(18),n.e(2758),n.e(9965),n.e(3944),n.e(2076),n.e(6739)]).then(n.bind(n,36739))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMesh3DTilesLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(1912).then(n.bind(n,41912))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(6406),n.e(2076),n.e(2138)]).then(n.bind(n,12138))).default});return function(){return t.apply(this,arguments)}}(),KMLLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(7160)]).then(n.bind(n,27160))).default});return function(){return t.apply(this,arguments)}}(),KnowledgeGraphLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1732),n.e(7936),n.e(3596),n.e(13),n.e(9377),n.e(515),n.e(328),n.e(512),n.e(916)]).then(n.bind(n,20916))).default});return function(){return t.apply(this,arguments)}}(),LineOfSightLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(5357)]).then(n.bind(n,89957))).default});return function(){return t.apply(this,arguments)}}(),LinkChartLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1732),n.e(7936),n.e(3596),n.e(13),n.e(9377),n.e(515),n.e(328),n.e(512),n.e(497)]).then(n.bind(n,10497))).default});return function(){return t.apply(this,arguments)}}(),MapImageLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1732),n.e(1277),n.e(5931),n.e(5395),n.e(2076),n.e(2916)]).then(n.bind(n,39425))).default});return function(){return t.apply(this,arguments)}}(),MapNotesLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(2921)]).then(n.bind(n,72921))).default});return function(){return t.apply(this,arguments)}}(),MediaLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(3073)]).then(n.bind(n,92072))).default});return function(){return t.apply(this,arguments)}}(),OGCFeatureLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1732),n.e(5225),n.e(2693)]).then(n.bind(n,64368))).default});return function(){return t.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(2882)]).then(n.bind(n,94717))).default});return function(){return t.apply(this,arguments)}}(),OrientedImageryLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(9027).then(n.bind(n,49027))).default});return function(){return t.apply(this,arguments)}}(),PointCloudLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(6406),n.e(2076),n.e(1852)]).then(n.bind(n,1852))).default});return function(){return t.apply(this,arguments)}}(),RouteLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(709),n.e(380)]).then(n.bind(n,30380))).default});return function(){return t.apply(this,arguments)}}(),SceneLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(5434),n.e(3647),n.e(143),n.e(6406),n.e(9641),n.e(2767),n.e(401),n.e(9078),n.e(2076),n.e(3136)]).then(n.bind(n,33136))).default});return function(){return t.apply(this,arguments)}}(),StreamLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(9373).then(n.bind(n,19373))).default});return function(){return t.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(1943).then(n.bind(n,11943))).default});return function(){return t.apply(this,arguments)}}(),TileLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(1732),n.e(1277),n.e(5931),n.e(5395),n.e(2076),n.e(460)]).then(n.bind(n,40460))).default});return function(){return t.apply(this,arguments)}}(),UnknownLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(482).then(n.bind(n,30482))).default});return function(){return t.apply(this,arguments)}}(),UnsupportedLayer:function(){var t=(0,e.A)(function*(){return(yield n.e(2605).then(n.bind(n,42605))).default});return function(){return t.apply(this,arguments)}}(),VectorTileLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(9093),n.e(6517),n.e(2076),n.e(6989)]).then(n.bind(n,90769))).default});return function(){return t.apply(this,arguments)}}(),VideoLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(9127)]).then(n.bind(n,29127))).default});return function(){return t.apply(this,arguments)}}(),VoxelLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(6406),n.e(2076),n.e(584)]).then(n.bind(n,18203))).default});return function(){return t.apply(this,arguments)}}(),WFSLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(3650),n.e(2996)]).then(n.bind(n,3723))).default});return function(){return t.apply(this,arguments)}}(),WMSLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(9757)]).then(n.bind(n,52138))).default});return function(){return t.apply(this,arguments)}}(),WMTSLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(7438)]).then(n.bind(n,67438))).default});return function(){return t.apply(this,arguments)}}(),WebTileLayer:function(){var t=(0,e.A)(function*(){return(yield Promise.all([n.e(2076),n.e(3014)]).then(n.bind(n,75090))).default});return function(){return t.apply(this,arguments)}}()};var t},56151:(z,p,n)=>{n.d(p,{V:()=>t});var e=n(10467),U=n(89563);function t(A,S){return s.apply(this,arguments)}function s(){return(s=(0,e.A)(function*(A,S){const{data:W}=yield(0,U.A)(A,{responseType:"json",query:{f:"json",...S?.customParameters,token:S?.apiKey}});return W})).apply(this,arguments)}}}]);