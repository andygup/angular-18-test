"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[5931],{5931:(Z,M,e)=>{e.d(M,{A:()=>N});var p=e(10467),v=e(8189),R=e(98877),E=e(5922),T=e(3248),m=e(56492),x=e(45272),y=e(85211),g=(e(35150),e(40707),e(76576)),I=e(58701),F=e(6829),G=e(93164),j=e(68800),B=e(33063),V=(e(21152),e(1277)),l=e(87086),c=e(28067);function t(){return(t=(0,p.A)(function*(s,n,u){const h=(0,j.Dl)(s),C=yield(0,V.Jf)(h,l.A.from(n),{...u}),O=C.data.extent;return!O||isNaN(O.xmin)||isNaN(O.ymin)||isNaN(O.xmax)||isNaN(O.ymax)?{count:C.data.count,extent:null}:{count:C.data.count,extent:c.A.fromJSON(O)}})).apply(this,arguments)}var r=e(87342),i=e(34687),f=e(11170),A=e(93327);let P=class extends R.A{constructor(s){super(s),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,x.An)(this.url)}execute(s,n){var u=this;return(0,p.A)(function*(){const h=yield u.executeJSON(s,n);return u.featureSetFromJSON(s,h,n)})()}executeJSON(s,n){var u=this;return(0,p.A)(function*(){const h=u._normalizeQuery(s),C=null!=s.outStatistics?.[0],O=(0,T.A)("featurelayer-pbf-statistics"),Q=!C||O;let L;if(u.pbfSupported&&Q)try{L=yield(0,f.S)(u.url,h,n)}catch(U){if("query:parsing-pbf"!==U.name)throw U;u.pbfSupported=!1}return u.pbfSupported&&Q||(L=yield(0,i.e)(u.url,h,n)),u._normalizeFields(L.fields),L})()}featureSetFromJSON(s,n,u){var h=this;return(0,p.A)(function*(){if(!h._queryIs3DObjectFormat(s)||null==h.infoFor3D||!n.features)return A.A.fromJSON(n);const{meshFeatureSetFromJSON:C}=yield(0,m.qr)(Promise.all([e.e(5434),e.e(3647),e.e(143),e.e(2767),e.e(1698)]).then(e.bind(e,71698)),u);return C(s,h.infoFor3D,n)})()}executeForCount(s,n){return(0,B.I)(this.url,this._normalizeQuery(s),n)}executeForExtent(s,n){return function d(s,n,u){return t.apply(this,arguments)}(this.url,this._normalizeQuery(s),n)}executeForIds(s,n){return(0,r.V)(this.url,this._normalizeQuery(s),n)}executeRelationshipQuery(s,n){var u=this;return(0,p.A)(function*(){const[{default:h},{executeRelationshipQuery:C}]=yield(0,m.qr)(Promise.all([Promise.resolve().then(e.bind(e,59487)),e.e(5345).then(e.bind(e,65345))]),n);return s=h.from(s),(u.gdbVersion||u.dynamicDataSource)&&((s=s.clone()).gdbVersion=s.gdbVersion||u.gdbVersion,s.dynamicDataSource=s.dynamicDataSource||u.dynamicDataSource),C(u.url,s,n)})()}executeRelationshipQueryForCount(s,n){var u=this;return(0,p.A)(function*(){const[{default:h},{executeRelationshipQueryForCount:C}]=yield(0,m.qr)(Promise.all([Promise.resolve().then(e.bind(e,59487)),e.e(5345).then(e.bind(e,65345))]),n);return s=h.from(s),(u.gdbVersion||u.dynamicDataSource)&&((s=s.clone()).gdbVersion=s.gdbVersion||u.gdbVersion,s.dynamicDataSource=s.dynamicDataSource||u.dynamicDataSource),C(u.url,s,n)})()}executeAttachmentQuery(s,n){var u=this;return(0,p.A)(function*(){const{executeAttachmentQuery:h,fetchAttachments:C,processAttachmentQueryResult:O}=yield(0,m.qr)(e.e(3083).then(e.bind(e,43083)),n),Q=(0,j.Dl)(u.url);return O(Q,yield u.queryAttachmentsSupported?h(Q,s,n):C(Q,s,n))})()}executeTopFeaturesQuery(s,n){var u=this;return(0,p.A)(function*(){const{executeTopFeaturesQuery:h}=yield(0,m.qr)(Promise.all([e.e(2076),e.e(8041)]).then(e.bind(e,8041)),n);return h(u.parsedUrl,s,u.sourceSpatialReference,n)})()}executeForTopIds(s,n){var u=this;return(0,p.A)(function*(){const{executeForTopIds:h}=yield(0,m.qr)(Promise.all([e.e(2076),e.e(5021)]).then(e.bind(e,5021)),n);return h(u.parsedUrl,s,n)})()}executeForTopExtents(s,n){var u=this;return(0,p.A)(function*(){const{executeForTopExtents:h}=yield(0,m.qr)(Promise.all([e.e(2076),e.e(7058)]).then(e.bind(e,7058)),n);return h(u.parsedUrl,s,n)})()}executeForTopCount(s,n){var u=this;return(0,p.A)(function*(){const{executeForTopCount:h}=yield(0,m.qr)(Promise.all([e.e(2076),e.e(6436)]).then(e.bind(e,6436)),n);return h(u.parsedUrl,s,n)})()}_normalizeQuery(s){let n=l.A.from(s);n.sourceSpatialReference=n.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(n=n===s?n.clone():n,n.gdbVersion=s.gdbVersion||this.gdbVersion,n.dynamicDataSource=s.dynamicDataSource?G.L.from(s.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:u}=this;if(null!=u&&this._queryIs3DObjectFormat(s)){n=n===s?n.clone():n,n.formatOf3DObjects=null;const{supportedFormats:h,queryFormats:C}=u,O=(0,F.R_)("model/gltf-binary",h)??(0,F.E1)("glb",h),Q=(0,F.R_)("model/gltf+json",h)??(0,F.E1)("gltf",h);for(const L of C){if(L===O){n.formatOf3DObjects=L;break}L!==Q||n.formatOf3DObjects||(n.formatOf3DObjects=L)}if(!n.formatOf3DObjects)throw new E.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(n.outSpatialReference&&!(0,I.aI)(n.outSpatialReference,this.sourceSpatialReference))throw new E.A("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==n.outFields||!n.outFields.includes("*")){n=n===s?n.clone():n,null==n.outFields&&(n.outFields=[]);const{originX:L,originY:U,originZ:J,translationX:b,translationY:z,translationZ:K,scaleX:X,scaleY:Y,scaleZ:$,rotationX:H,rotationY:_,rotationZ:w,rotationDeg:q}=u.transformFieldRoles;n.outFields.push(L,U,J,b,z,K,X,Y,$,H,_,w,q)}}return n}_normalizeFields(s){if(null!=this.fieldsIndex&&null!=s)for(const n of s){const u=this.fieldsIndex.get(n.name);u&&Object.assign(n,u.toJSON())}}_queryIs3DObjectFormat(s){return null!=this.infoFor3D&&!0===s.returnGeometry&&"xyFootprint"!==s.multipatchOption&&!s.outStatistics}};(0,v._)([(0,y.MZ)({type:G.L})],P.prototype,"dynamicDataSource",void 0),(0,v._)([(0,y.MZ)()],P.prototype,"fieldsIndex",void 0),(0,v._)([(0,y.MZ)()],P.prototype,"gdbVersion",void 0),(0,v._)([(0,y.MZ)()],P.prototype,"infoFor3D",void 0),(0,v._)([(0,y.MZ)({readOnly:!0})],P.prototype,"parsedUrl",null),(0,v._)([(0,y.MZ)()],P.prototype,"pbfSupported",void 0),(0,v._)([(0,y.MZ)()],P.prototype,"queryAttachmentsSupported",void 0),(0,v._)([(0,y.MZ)()],P.prototype,"sourceSpatialReference",void 0),(0,v._)([(0,y.MZ)({type:String})],P.prototype,"url",void 0),P=(0,v._)([(0,g.$)("esri.layers.graphics.sources.support.QueryTask")],P);const N=P},6829:(Z,M,e)=>{e.d(M,{E1:()=>x,Fm:()=>y,JZ:()=>V,R_:()=>m,fu:()=>v,oF:()=>R,rq:()=>S});const p=[["binary","application/octet-stream","bin",""]];function v(l,c){return null!=F(c.name,l?.supportedFormats??[])}function R(l,c){if(!l)return!1;const d=S(c,l.supportedFormats??[]);return null!=d&&l.editFormats.includes(d)}function m(l,c){return G(function I(l,c){const d=l.toLowerCase();return D(c).find(t=>j(t)===d)}(l,c))}function x(l,c){return G(F(l,c))}function y(l,c){return j(function g(l,c){return D(c).find(d=>G(d)===l)}(l,c))}function S(l,c){return x(l.name,c)??m(l.type,c)}function D(l){return[...p,...l]}function F(l,c){const d=l.toLowerCase();return D(c).find(t=>function B(l){return l?.[2].split(",").map(c=>c.toLowerCase())??[]}(t).some(r=>d.endsWith(r)))}function G(l){return l?.[0]}function j(l){return l?.[1].toLowerCase()}function V(l){return l.tables?.find(c=>"assetMaps"===c.role)}},33063:(Z,M,e)=>{e.d(M,{I:()=>T});var p=e(10467),v=e(68800),R=e(1277),E=e(87086);function T(x,y,S){return m.apply(this,arguments)}function m(){return(m=(0,p.A)(function*(x,y,S){const D=(0,v.Dl)(x),{data:g}=yield(0,R.gW)(D,E.A.from(y),S);return g.count})).apply(this,arguments)}},87342:(Z,M,e)=>{e.d(M,{V:()=>T});var p=e(10467),v=e(68800),R=e(1277),E=e(87086);function T(x,y,S){return m.apply(this,arguments)}function m(){return(m=(0,p.A)(function*(x,y,S){const D=(0,v.Dl)(x),{data:g}=yield(0,R.Pk)(D,E.A.from(y),S);return g.objectIds})).apply(this,arguments)}},34687:(Z,M,e)=>{e.d(M,{e:()=>y,s:()=>m});var p=e(10467),v=e(68800),R=e(1277),E=e(93327),T=e(87086);function m(D,g,I){return x.apply(this,arguments)}function x(){return(x=(0,p.A)(function*(D,g,I){const F=yield y(D,g,I);return E.A.fromJSON(F)})).apply(this,arguments)}function y(D,g,I){return S.apply(this,arguments)}function S(){return(S=(0,p.A)(function*(D,g,I){const F=(0,v.Dl)(D),G={...I},j=T.A.from(g),{data:B}=yield(0,R.eW)(F,j,j.sourceSpatialReference,G);return B})).apply(this,arguments)}},11170:(Z,M,e)=>{e.d(M,{S:()=>l});var p=e(10467),v=e(68800),R=e(11432),E=e(23743),T=e(31732);function m(d,t){return t}function x(d,t,r,i){switch(r){case 0:return g(d,t+i,0);case 1:return"lowerLeft"===d.originPosition?g(d,t+i,1):function I({translate:d,scale:t},r,i){return d[i]-r*t[i]}(d,t+i,1)}}function y(d,t,r,i){return 2===r?g(d,t,2):x(d,t,r,i)}function S(d,t,r,i){return 2===r?0===t?0:g(d,t,3):x(d,t,r,i)}function D(d,t,r,i){return 3===r?0===t?0:g(d,t,3):y(d,t,r,i)}function g({translate:d,scale:t},r,i){return d[i]+r*t[i]}class F{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=m,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const r=(0,E.N)(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(null!=r)for(const i of t.features)r(i.geometry)}createSpatialReference(){return{}}addField(t,r){const i=t.fields;(0,R.Lw)(i),i.push(r);const f=i.map(A=>A.name);this._attributesConstructor=function(){for(const A of f)this[A]=null}}addFeature(t,r){t.features.push(r)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,i,f)=>this.addCoordinatePoint(r,i,f),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,i,f)=>this._addCoordinatePolygon(r,i,f),this.createGeometry=r=>this._createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,i,f)=>this._addCoordinatePolyline(r,i,f),this.createGeometry=r=>this._createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,i,f)=>this._addCoordinateMultipoint(r,i,f),this.createGeometry=r=>this._createMultipointGeometry(r)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,r,i){0===this._lengths.length&&(this._toAddInCurrentPath=r),this._lengths.push(r)}addQueryGeometry(t,r){const{queryGeometry:i,queryGeometryType:f}=r,A=(0,T.Ch)(i.clone(),i,!1,!1,this._transform),P=(0,T.zv)(A,f,!1,!1);t.queryGeometryType=f,t.queryGeometry={...P}}createPointGeometry(t){const r={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(r.z=0),t.hasM&&(r.m=0),r}addCoordinatePoint(t,r,i){switch(r=this._applyTransform(this._transform,r,i,0),i){case 0:t.x=r;break;case 1:t.y=r;break;case 2:"z"in t?t.z=r:t.m=r;break;case 3:t.m=r}}_transformPathLikeValue(t,r){let i=0;return r<=1&&(i=this._previousCoordinate[r],this._previousCoordinate[r]+=t),null===this._mValueOffset||0!==t||r%this._mValueOffset?this._applyTransform(this._transform,t,r,i):0}_addCoordinatePolyline(t,r,i){this._dehydratedAddPointsCoordinate(t.paths,r,i)}_addCoordinatePolygon(t,r,i){this._dehydratedAddPointsCoordinate(t.rings,r,i)}_addCoordinateMultipoint(t,r,i){0===i&&t.points.push([]);const f=this._transformPathLikeValue(r,i);t.points[t.points.length-1].push(f)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,r,i){0===i&&0==this._toAddInCurrentPath--&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const f=this._transformPathLikeValue(r,i),A=t[t.length-1];0===i&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),A.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=f}_deriveApplyTransform(t){const{hasZ:r,hasM:i}=t;return r&&i?D:r?y:i?S:x}}var G=e(1277),B=(e(93327),e(87086));function l(d,t,r){return c.apply(this,arguments)}function c(){return(c=(0,p.A)(function*(d,t,r){const i=(0,v.Dl)(d),f={...r},A=B.A.from(t),P=!A.quantizationParameters,{data:N}=yield(0,G.IJ)(i,A,new F({sourceSpatialReference:A.sourceSpatialReference,applyTransform:P}),f);return N})).apply(this,arguments)}}}]);