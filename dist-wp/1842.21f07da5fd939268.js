"use strict";(self.webpackChunkangular_18_test=self.webpackChunkangular_18_test||[]).push([[1842],{50279:(Oe,xe,_)=>{_.d(xe,{x:()=>P});class P{constructor(g){this.source=g}}},48504:(Oe,xe,_)=>{_.d(xe,{a:()=>P});class P{constructor(g,$){this._moduleSingletons=g,this._syntaxModules=$}loadLibrary(g){if(null==this._syntaxModules)return null;const $=this._syntaxModules[g.toLowerCase()];return $?{syntax:$.script,uri:$.uri}:null}}},45369:(Oe,xe,_)=>{_.d(xe,{A:()=>I});var P=_(53787);class I extends P.A{constructor($){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",$),this.immutable=!0}}},84462:(Oe,xe,_)=>{_.d(xe,{A:()=>I});var P=_(53787);class I extends P.A{constructor($,m,a,Y,k,s,J){super(),this.attachmentUrl=k,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",$),this.setField("name",m),this.setField("contenttype",a),this.setField("size",Y),this.setField("exifinfo",s),this.setField("keywords",J),this.immutable=!0}deepClone(){return new I(this.field("id"),this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))}}},53787:(Oe,xe,_)=>{_.d(xe,{A:()=>s});var P=_(10467),I=_(61299),g=_(59312),$=_(55279),m=_(42970),a=_(42686),Y=_(68643);function k(J,V,R=!1,ee=!1){if(null==J)return null;if((0,a.b)(J))return(0,a.g)(J);if((0,a.a)(J))return(0,a.h)(J);if((0,a.c)(J))return(0,a.j)(J);if((0,a.k)(J))return(0,a.l)(J,V);if((0,a.m)(J)||(0,a.n)(J))return J;if((0,a.o)(J)){const X=[];for(const q of J)X.push(k(q,V,R,ee));return X}if(ee&&(0,a.p)(J))return J;const ue=new s;ue.immutable=!1;for(const X of Object.keys(J)){const q=J[X];void 0!==q&&ue.setField(X,k(q,V,R,ee))}return ue.immutable=R,ue}class s{constructor(V){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=V instanceof s?V.attributes:V??{}}field(V){const R=V.toLowerCase(),ee=this.attributes[V];if(void 0!==ee)return ee;for(const ue in this.attributes)if(ue.toLowerCase()===R)return this.attributes[ue];throw new $.D$(null,$.TX.FieldNotFound,null,{key:V})}setField(V,R){if(this.immutable)throw new $.D$(null,$.TX.Immutable,null);if((0,a.i)(R))throw new $.D$(null,$.TX.NoFunctionInDictionary,null);const ee=V.toLowerCase();if(R instanceof Date&&(R=I.lY.dateJSToArcadeDate(R)),void 0===this.attributes[V]){for(const ue in this.attributes)if(ue.toLowerCase()===ee)return void(this.attributes[ue]=R);this.attributes[V]=R}else this.attributes[V]=R}hasField(V){const R=V.toLowerCase();if(void 0!==this.attributes[V])return!0;for(const ee in this.attributes)if(ee.toLowerCase()===R)return!0;return!1}keys(){let V=[];for(const R in this.attributes)V.push(R);return V=V.sort(),V}castToText(V=!1){let R="";for(const ee in this.attributes){""!==R&&(R+=",");const ue=this.attributes[ee];null==ue?R+=JSON.stringify(ee)+":null":(0,a.a)(ue)||(0,a.b)(ue)||(0,a.c)(ue)?R+=JSON.stringify(ee)+":"+JSON.stringify(ue):ue instanceof Y.A?R+=JSON.stringify(ee)+":"+(0,a.t)(ue):ue instanceof m.A||Array.isArray(ue)?R+=JSON.stringify(ee)+":"+(0,a.t)(ue,null,V):ue instanceof I.lY?R+=V?JSON.stringify(ee)+":"+JSON.stringify(ue.getTime()):JSON.stringify(ee)+":"+ue.stringify():null!==ue&&"object"==typeof ue&&void 0!==ue.castToText&&(R+=JSON.stringify(ee)+":"+ue.castToText(V))}return"{"+R+"}"}static convertObjectToArcadeDictionary(V,R,ee=!0,ue=!1){const X=new s;X.immutable=!1;for(const q in V){const D=V[q];void 0!==D&&X.setField(q.toString(),k(D,R,ee,ue))}return X.immutable=ee,X}static convertJsonToArcade(V,R,ee=!1,ue=!1){return k(V,R,ee,ue)}castAsJson(V=null){const R={};for(let ee in this.attributes){const ue=this.attributes[ee];void 0!==ue&&(V?.keyTranslate&&(ee=V.keyTranslate(ee)),R[ee]=(0,a.d)(ue,V))}return R}castDictionaryValueAsJsonAsync(V,R,ee,ue=null,X){return(0,P.A)(function*(){const q=yield(0,a.e)(ee,ue,X);return V[R]=q,q})()}castAsJsonAsync(V=null,R=null){var ee=this;return(0,P.A)(function*(){const ue={},X=[];for(let q in ee.attributes){const D=ee.attributes[q];R?.keyTranslate&&(q=R.keyTranslate(q)),void 0!==D&&((0,a.f)(D)||D instanceof Y.A||D instanceof I.lY?ue[q]=(0,a.d)(D,R):X.push(ee.castDictionaryValueAsJsonAsync(ue,q,D,V,R)))}return X.length>0&&(yield Promise.all(X)),ue})()}deepClone(){const V=new s;V.immutable=!1;for(const R of this.keys())V.setField(R,(0,g.G)(this.field(R)));return V}}},63145:(Oe,xe,_)=>{_.d(xe,{A:()=>X});var P=_(10467),I=_(61299),g=_(59312),$=_(53787),m=_(55279),a=_(42970),Y=_(42686),k=_(87257),s=_(29752),J=_(68643),V=_(1749),R=_(61320),ee=_(31732),ue=_(73258);class X{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._fieldTypesFixed=!0,this.fieldsIndex=null,this.contextTimeZone=null,this.immutable=!0,this._fieldsToFixDataTypes=null,this.immutable=!0}static createFromGraphic(D,f){const l=new X;return l.contextTimeZone=f??null,l._geometry=null!=D.geometry?D.geometry:null,l.attributes=null==D.attributes?{}:D.attributes,D._sourceLayer?(l._layer=D._sourceLayer,l._fieldTypesFixed=!1):D._layer?(l._layer=D._layer,l._fieldTypesFixed=!1):D.layer&&"fields"in D.layer?(l._layer=D.layer,l._fieldTypesFixed=!1):D.sourceLayer&&"fields"in D.sourceLayer&&(l._layer=D.sourceLayer,l._fieldTypesFixed=!1),l._layer&&!l._fieldTypesFixed&&(l.fieldsIndex=this.hydrateFieldsIndex(l._layer)),l}static createFromArcadeFeature(D){if(D instanceof X){const l=new X;return l._fieldTypesFixed=D._fieldTypesFixed,l.attributes=D.attributes,l._geometry=D._geometry,l._optimizedGeomDefinition=D._optimizedGeomDefinition,D._layer&&(l._layer=D._layer),l.fieldsIndex=D.fieldsIndex,l.contextTimeZone=D.contextTimeZone,l}const f={};for(const l of D.keys())f[l]=D.field(l);return X.createFromGraphicLikeObject(D.geometry(),f,D.fullSchema(),D.contextTimeZone)}static createFromOptimisedFeature(D,f,l){const p=new X;return p._geometry=D.geometry?{geometry:D.geometry}:null,p._optimizedGeomDefinition=l,p.attributes=D.attributes||{},p._layer=f,p._fieldTypesFixed=!1,p}static createFromArcadeDictionary(D,f){const l=new X;return l.attributes=D.field("attributes"),null!==l.attributes&&l.attributes instanceof $.A?(l.attributes=l.attributes.attributes,null===l.attributes&&(l.attributes={})):l.attributes={},l._geometry=D.field("geometry"),null!==l._geometry&&(l._geometry instanceof $.A?l._geometry=X.parseGeometryFromDictionary(l._geometry,f):l._geometry instanceof J.A||(l._geometry=null)),l}static createFromGraphicLikeObject(D,f,l=null,p){const h=new X;return h.contextTimeZone=p??null,null===f&&(f={}),h.attributes=f,h._geometry=D??null,h._layer=l,h._layer&&(h._fieldTypesFixed=!1,h.fieldsIndex=this.hydrateFieldsIndex(h._layer)),h}static hydrateFieldsIndex(D){return null===D?null:(0,Y.u)(D)?D.getFieldsIndex():D.fieldsIndex?D.fieldsIndex:ue.A.fromLayerJSON({datesInUnknownTimezone:D.datesInUnknownTimezone,fields:D.fields,timeInfo:D.timeInfo,editFieldsInfo:D.editFieldsInfo,dateFieldsTimeReference:D.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(D,f,l=null){null===f&&(f={}),this.attributes=f,this._geometry=D??null,this._layer=l,this._fieldTypesFixed=!this._layer}castToText(D=!1){let f="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const l in this.attributes){""!==f&&(f+=",");const p=this.attributes[l];null==p?f+=JSON.stringify(l)+":null":(0,Y.a)(p)||(0,Y.b)(p)||(0,Y.c)(p)?f+=JSON.stringify(l)+":"+JSON.stringify(p):p instanceof J.A?f+=JSON.stringify(l)+":"+(0,Y.t)(p):p instanceof s.k||p instanceof k.n?f+=`${JSON.stringify(l)}:${JSON.stringify(p.toString())}`:p instanceof a.A||Array.isArray(p)?f+=JSON.stringify(l)+":"+(0,Y.t)(p,null,D):p instanceof I.lY?f+=D?JSON.stringify(l)+":"+JSON.stringify(p.getTime()):JSON.stringify(l)+":"+p.stringify():null!==p&&"object"==typeof p&&void 0!==p.castToText&&(f+=JSON.stringify(l)+":"+p.castToText(D))}return'{"geometry":'+(null===this.geometry()?"null":(0,Y.t)(this.geometry()))+',"attributes":{'+f+"}}"}_fixFieldTypes(){if(this._fieldsToFixDataTypes&&this._fieldsToFixDataTypes?.length>0)return this._fixAllFields(this._fieldsToFixDataTypes),void(this._fieldTypesFixed=!0);const D=[],f=this._layer.fields;for(let l=0;l<f.length;l++){const p=f[l],{name:h,type:o}=p;switch(o){case"date":case"esriFieldTypeDate":D.push({field:h,dataType:"date"});break;case"date-only":case"esriFieldTypeDateOnly":D.push({field:h,dataType:"date-only"});break;case"time-only":case"esriFieldTypeTimeOnly":D.push({field:h,dataType:"time-only"});break;case"timestamp-offset":case"esriFieldTypeTimestampOffset":D.push({field:h,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=D,D.length>0&&this._fixAllFields(D),this._fieldTypesFixed=!0}isUnknownDateTimeField(D){return"unknown"===this.fieldsIndex?.getTimeZone(D)}_fixAllFields(D){this.attributes={...this.attributes};const f=this.contextTimeZone??"system";for(let l=0;l<D.length;l++){const p=D[l].field,h=D[l].dataType;let o=this.attributes[p];if(void 0===o){for(const E in this.attributes)if(E.toLowerCase()===p.toLowerCase()){if(o=this.attributes[E],null!==o){if("time-only"===h){(0,Y.n)(o)||(this.attributes[E]=s.k.fromReader(o.toString()));break}if("date-only"===h){(0,Y.m)(o)||(this.attributes[E]=k.n.fromReader(o.toString()));break}if("timestamp-offset"===h){(0,Y.k)(o)||(this.attributes[E]=I.lY.fromReaderAsTimeStampOffset(o.toString()));break}const N=this.isUnknownDateTimeField(E);o instanceof Date?this.attributes[E]=N?I.lY.unknownDateJSToArcadeDate(o):I.lY.dateJSAndZoneToArcadeDate(o,f):(0,Y.k)(o)||(this.attributes[E]=N?I.lY.unknownEpochToArcadeDate(o):I.lY.epochToArcadeDate(o,f))}break}}else if(null!==o){if("time-only"===h){this.attributes[p]=(0,Y.n)(o)?o:s.k.fromReader(o.toString());continue}if("date-only"===h){this.attributes[p]=(0,Y.m)(o)?o:k.n.fromReader(o.toString());continue}if("timestamp-offset"===h){this.attributes[p]=(0,Y.k)(o)?o:I.lY.fromReaderAsTimeStampOffset(o.toString());continue}const E=this.isUnknownDateTimeField(p);this.attributes[p]=(0,Y.k)(o)?o:o instanceof Date?E?I.lY.unknownDateJSToArcadeDate(o):I.lY.dateJSAndZoneToArcadeDate(o,f):E?I.lY.unknownEpochToArcadeDate(o):I.lY.epochToArcadeDate(o,f)}}}geometry(){return null===this._geometry||this._geometry instanceof J.A||(this._optimizedGeomDefinition?(this._geometry=(0,R.rS)((0,ee.zv)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,R.rS)(this._geometry)),this._geometry}field(D){this._fieldTypesFixed||this._fixFieldTypes();const f=this.attributes[D];if(void 0!==f)return f;const l=D.toLowerCase();for(const p in this.attributes)if(p.toLowerCase()===l)return this.attributes[p];if(this._hasFieldDefinition(l))return null;throw new m.D$(null,m.TX.FieldNotFound,null,{key:D})}_hasFieldDefinition(D){if(null===this._layer)return!1;for(let f=0;f<this._layer.fields.length;f++)if(this._layer.fields[f].name.toLowerCase()===D)return!0;return!1}setField(D,f){if(this.immutable)throw new m.D$(null,m.TX.Immutable,null);if(f instanceof Date&&(f=this.isUnknownDateTimeField(D)?I.lY.unknownDateJSToArcadeDate(f):I.lY.dateJSToArcadeDate(f)),!1===(0,Y.f)(f))throw new m.D$(null,m.TX.TypeNotAllowedInFeature,null);const l=D.toLowerCase();if(void 0===this.attributes[D]){for(const p in this.attributes)if(p.toLowerCase()===l)return void(this.attributes[p]=f);this.attributes[D]=f}else this.attributes[D]=f}hasField(D){const f=D.toLowerCase();if(void 0!==this.attributes[D])return!0;for(const l in this.attributes)if(l.toLowerCase()===f)return!0;return!!this._hasFieldDefinition(f)}keys(){let D=[];const f={};for(const l in this.attributes)D.push(l),f[l.toLowerCase()]=1;if(null!==this._layer)for(let l=0;l<this._layer.fields.length;l++){const p=this._layer.fields[l];1!==f[p.name.toLowerCase()]&&D.push(p.name)}return D=D.sort(),D}static parseGeometryFromDictionary(D,f){const l=X._convertDictionaryToJson(D,!0);return void 0!==l.hasm&&(l.hasM=l.hasm,delete l.hasm),void 0!==l.hasz&&(l.hasZ=l.hasz,delete l.hasz),void 0!==l.spatialreference&&(l.spatialReference=l.spatialreference,delete l.spatialreference),l.spatialReference||(l.spatialReference=f),void 0!==l.rings&&(l.rings=this._fixPathArrays(l.rings,!0===l.hasZ,!0===l.hasZ)),void 0!==l.paths&&(l.paths=this._fixPathArrays(l.paths,!0===l.hasZ,!0===l.hasM)),void 0!==l.points&&(l.points=this._fixPointArrays(l.points,!0===l.hasZ,!0===l.hasM)),(0,R.rS)(l)}static _fixPathArrays(D,f,l){const p=[];if(Array.isArray(D))for(let h=0;h<D.length;h++)p.push(this._fixPointArrays(D[h],f,l));else if(D instanceof a.A)for(let h=0;h<D.length();h++)p.push(this._fixPointArrays(D.get(h),f,l));return p}static _fixPointArrays(D,f,l){const p=[];if(Array.isArray(D))for(let h=0;h<D.length;h++){const o=D[h];p.push(o instanceof V.A?f&&l?[o.x,o.y,o.z,o.m]:f?[o.x,o.y,o.z]:l?[o.x,o.y,o.m]:[o.x,o.y]:o instanceof a.A?o.toArray():o)}else if(D instanceof a.A)for(let h=0;h<D.length();h++){const o=D.get(h);p.push(o instanceof V.A?f&&l?[o.x,o.y,o.z,o.m]:f?[o.x,o.y,o.z]:l?[o.x,o.y,o.m]:[o.x,o.y]:o instanceof a.A?o.toArray():o)}return p}static _convertDictionaryToJson(D,f=!1){const l={};for(const p in D.attributes){let h=D.attributes[p];h instanceof $.A&&(h=X._convertDictionaryToJson(h)),f?l[p.toLowerCase()]=h:l[p]=h}return l}static parseAttributesFromDictionary(D){const f={};for(const l in D.attributes){const p=D.attributes[l];if(!(0,Y.f)(p))throw new m.D$(null,m.TX.InvalidParameter,null);f[l]=p}return f}static fromJson(D,f){let l=null;null!=D.geometry&&(l=(0,R.rS)(D.geometry));const p={};if(null!=D.attributes)for(const h in D.attributes){const o=D.attributes[h];if(null===o)p[h]=o;else{if(!((0,Y.c)(o)||(0,Y.b)(o)||(0,Y.a)(o)||(0,Y.k)(o)||(0,Y.n)(o)||(0,Y.m)(o)))throw new m.D$(null,m.TX.InvalidParameter,null);p[h]=o}}return X.createFromGraphicLikeObject(l,p,null,f??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const D=this._layer.gdbVersion;return void 0===D?"":""===D&&this._layer.capabilities?.isVersioned?"SDE.DEFAULT":D}castAsJson(D){const f={attributes:{},geometry:!0===D?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const l in this.attributes){const p=this.attributes[l];void 0!==p&&(f.attributes[l]=(0,Y.d)(p,D))}return f}castAsJsonAsync(D=null,f){var l=this;return(0,P.A)(function*(){return l.castAsJson(f)})()}}(0,g.y)(X)},61552:(Oe,xe,_)=>{_.d(xe,{CU:()=>m,UQ:()=>$,fF:()=>I,o6:()=>g});var P=_(56492);class I{constructor(){}}function g(a,Y,k){if(a instanceof I&&!(a instanceof m)){const s=new m;return s.fn=a,s.parameterEvaluator=k,s.context=Y,s}return a}class $ extends I{constructor(Y){super(),this.fn=Y}createFunction(Y){return(...k)=>this.fn(Y,{preparsed:!0,arguments:k})}call(Y,k){return this.fn(Y,k)}marshalledCall(Y,k,s,J){return J(Y,k,(V,R,ee)=>{ee=ee.map(X=>X instanceof I&&!(X instanceof m)?g(X,Y,J):X);const ue=this.call(s,{args:ee});return(0,P.$X)(ue)?ue.then(X=>g(X,s,J)):ue})}}class m extends I{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(Y){return this.fn.createFunction(this.context)}call(Y,k){return this.fn.marshalledCall(Y,k,this.context,this.parameterEvaluator)}marshalledCall(Y,k,s){return this.fn.marshalledCall(Y,k,this.context,this.parameterEvaluator)}}},61223:(Oe,xe,_)=>{_.d(xe,{A:()=>g});var P=_(42970),I=_(40056);class g extends P.A{constructor(m,a,Y,k,s){super(m),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=Y,this._hasM=k,this._spRef=a,this._cacheId=s}get(m){if(void 0===this._lazyPath[m]){const a=this._elements[m];if(void 0===a)return;this._lazyPath[m]=new I.A(a,this._spRef,this._hasZ,this._hasM,this._cacheId,m)}return this._lazyPath[m]}equalityTest(m){return m===this||null!==m&&m instanceof g&&m.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},40056:(Oe,xe,_)=>{_.d(xe,{A:()=>g});var P=_(42970),I=_(1749);class g extends P.A{constructor(m,a,Y,k,s,J){super(m),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=a,this._hasZ=Y,this._hasM=k,this._cacheId=s,this._partId=J}get(m){if(void 0===this._lazyPt[m]){const a=this._elements[m];if(void 0===a)return;const Y=this._hasZ,k=this._hasM;let s;s=Y&&!k?new I.A(a[0],a[1],a[2],void 0,this._spRef):k&&!Y?new I.A(a[0],a[1],void 0,a[2],this._spRef):Y&&k?new I.A(a[0],a[1],a[2],a[3],this._spRef):new I.A(a[0],a[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+m.toString(),this._lazyPt[m]=s}return this._lazyPt[m]}equalityTest(m){return m===this||null!==m&&m instanceof g&&m.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},59312:(Oe,xe,_)=>{_.d(xe,{G:()=>m,y:()=>g});var P=_(50279),I=_(42686);function g(a){$=a}let $;function m(a){return null===a?null:(0,I.k)(a)?a.clone():(0,I.f)(a)?a:(0,I.p)(a)?a.clone():(0,I.q)(a)?a.toArray().map(Y=>m(Y)):(0,I.o)(a)?a.map(Y=>m(Y)):(0,I.r)(a)?$.createFromArcadeFeature(a):(0,I.s)(a)||(0,I.u)(a)?a:(0,I.v)(a)||"esri.arcade.Attachment"===a?.declaredClass?a.deepClone():("esri.arcade.Portal"===a?.declaredClass||(0,I.w)(a)||a instanceof P.x||(0,I.i)(a),a)}},55279:(Oe,xe,_)=>{_.d(xe,{B:()=>V,D$:()=>a,Nh:()=>J,O$:()=>s,TX:()=>I,mT:()=>k,ps:()=>ee});var I,X,P=_(1119);(X=I||(I={})).AsyncNotEnabled="AsyncNotEnabled",X.ModulesNotSupported="ModulesNotSupported",X.CircularModules="CircularModules",X.CannotCompareDateAndTime="CannotCompareDateAndTime",X.NeverReach="NeverReach",X.UnsupportedHashType="UnsupportedHashType",X.InvalidParameter="InvalidParameter",X.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",X.UnexpectedToken="UnexpectedToken",X.Unrecognized="Unrecognized",X.UnrecognizedType="UnrecognizedType",X.MaximumCallDepth="MaximumCallDepth",X.BooleanConditionRequired="BooleanConditionRequired",X.TypeNotAllowedInFeature="TypeNotAllowedInFeature",X.KeyMustBeString="KeyMustBeString",X.WrongNumberOfParameters="WrongNumberOfParameters",X.CallNonFunction="CallNonFunction",X.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",X.NoFunctionInDictionary="NoFunctionInDictionary",X.NoFunctionInArray="NoFunctionInArray",X.AssignModuleFunction="AssignModuleFunction",X.LogicExpressionOrAnd="LogicExpressionOrAnd",X.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",X.FunctionNotFound="FunctionNotFound",X.InvalidMemberAccessKey="InvalidMemberAccessKey",X.UnsupportedUnaryOperator="UnsupportUnaryOperator",X.InvalidIdentifier="InvalidIdentifier",X.MemberOfNull="MemberOfNull",X.UnsupportedOperator="UnsupportedOperator",X.Cancelled="Cancelled",X.ModuleAccessorMustBeString="ModuleAccessorMustBeString",X.ModuleExportNotFound="ModuleExportNotFound",X.Immutable="Immutable",X.OutOfBounds="OutOfBounds",X.IllegalResult="IllegalResult",X.FieldNotFound="FieldNotFound",X.PortalRequired="PortalRequired",X.LogicError="LogicError",X.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",X.KeyAccessorMustBeString="KeyAccessorMustBeString",X.WrongSpatialReference="WrongSpatialReference",X.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",X.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly";const g={[I.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[I.LogicError]:"Logic error - {reason}",[I.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[I.NeverReach]:"Encountered unreachable logic",[I.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[I.ModuleAccessorMustBeString]:"Module accessor must be a string",[I.ModuleExportNotFound]:"Module has no export with provided identifier",[I.ModulesNotSupported]:"Current profile does not support modules",[I.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[I.FunctionNotFound]:"Function not found",[I.FieldNotFound]:"Key not found - {key}",[I.CircularModules]:"Circular module dependencies are not allowed",[I.Cancelled]:"Execution cancelled",[I.UnsupportedHashType]:"Type not supported in hash function",[I.IllegalResult]:"Value is not a supported return type",[I.PortalRequired]:"Portal is required",[I.InvalidParameter]:"Invalid parameter",[I.WrongNumberOfParameters]:"Call with wrong number of parameters",[I.Unrecognized]:"Unrecognized code structure",[I.UnrecognizedType]:"Unrecognized type",[I.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[I.BooleanConditionRequired]:"Conditions must use booleans",[I.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[I.NoFunctionInArray]:"Arrays cannot contain functions.",[I.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[I.KeyAccessorMustBeString]:"Accessor must be a string",[I.KeyMustBeString]:"Object keys must be a string",[I.Immutable]:"Object is immutable",[I.UnexpectedToken]:"Unexpected token",[I.MemberOfNull]:"Cannot access property of null object",[I.MaximumCallDepth]:"Exceeded maximum function depth",[I.OutOfBounds]:"Out of bounds",[I.InvalidIdentifier]:"Identifier not recognized",[I.CallNonFunction]:"Expression is not a function",[I.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[I.AssignModuleFunction]:"Cannot assign function to module variable",[I.UnsupportedUnaryOperator]:"Unsupported unary operator",[I.UnsupportedOperator]:"Unsupported operator",[I.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[I.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[I.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[I.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[I.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};class $ extends Error{constructor(...q){super(...q)}}class m extends ${constructor(q,D){super(Y(D)+q.message,{cause:q}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,m),D?.loc&&(this.loc=D.loc)}}class a extends Error{constructor(q,D,f,l){super("Execution error - "+Y(f)+(0,P.HC)(g[D],l)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,a),f?.loc&&(this.loc=f.loc)}}function Y(X){return X&&X.loc?`Line : ${X.loc.start?.line}, ${X.loc.start?.column}: `:""}class k extends Error{constructor(q,D,f,l){super("Compilation error - "+Y(f)+(0,P.HC)(g[D],l)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,k),f?.loc&&(this.loc=f.loc)}}class s extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,s)}}function J(X,q,D){return"esri.arcade.arcadeexecutionerror"===D.declaredRootClass||"esri.arcade.arcadecompilationerror"===D.declaredRootClass?null===D.loc&&q?.loc?new m(D,{cause:D}):D:q?.loc?new m(D,{cause:D}):D}var V;!function(X){X.UnrecognizedUri="UnrecognizedUri",X.UnsupportedUriProtocol="UnsupportedUriProtocol"}(V||(V={}));const R={[V.UnrecognizedUri]:"Unrecognized uri - {uri}",[V.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class ee extends Error{constructor(q,D){super((0,P.HC)(R[q],D)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,ee)}}},7981:(Oe,xe,_)=>{_.d(xe,{$P:()=>X,At:()=>me,Et:()=>ee,J6:()=>k,JB:()=>W,Kg:()=>V,Lk:()=>q,NI:()=>Q,Qi:()=>G,SQ:()=>N,Tf:()=>p,Yc:()=>E,eB:()=>j,eg:()=>l,f0:()=>f,gO:()=>S,ik:()=>ae,ke:()=>s,nE:()=>J,rX:()=>D,uf:()=>o,yT:()=>ie,zl:()=>Y});var Y,k,B,P=_(61299),I=_(87257),g=_(29752),$=_(28067),m=_(29141),a=_(44549);function s(B){return m.A.fromJSON(B.toJSON())}function J(B){return B.toJSON?B.toJSON():B}function V(B){return"string"==typeof B||B instanceof String}function ee(B){return"number"==typeof B}function X(B){return B instanceof Date}function q(B){return B instanceof a.c9}function D(B){return B instanceof P.lY}function f(B){return B instanceof I.n}function l(B){return B instanceof g.k}function p(B,se){return B===se||!(!X(B)&&!D(B)||!X(se)&&!D(se))&&B.getTime()===se.getTime()}function o(B){if(null==B)return null;if("number"==typeof B)return B;switch(B.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function E(B){if(null==B)return null;switch(B.type){case"polygon":case"multipoint":case"polyline":return B.extent;case"point":return new $.A({xmin:B.x,ymin:B.y,xmax:B.x,ymax:B.y,spatialReference:B.spatialReference});case"extent":return B}return null}function N(B){if(null==B)return null;if("number"==typeof B||"number"==typeof B)return B;switch(B.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(B=Y||(Y={}))[B.Standardised=0]="Standardised",B[B.StandardisedNoInterval=1]="StandardisedNoInterval",B[B.SqlServer=2]="SqlServer",B[B.Oracle=3]="Oracle",B[B.Postgres=4]="Postgres",B[B.PGDB=5]="PGDB",B[B.FILEGDB=6]="FILEGDB",B[B.NotEvaluated=7]="NotEvaluated",function(B){B[B.InFeatureSet=0]="InFeatureSet",B[B.NotInFeatureSet=1]="NotInFeatureSet",B[B.Unknown=2]="Unknown"}(k||(k={}));const S=1e3,ae={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},ie={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},me={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function G(B){return void 0===B?"":B=(B=(B=B.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function W(B,se){se||(se={}),"function"==typeof se&&(se={cmp:se});const Z="boolean"==typeof se.cycles&&se.cycles,he=se.cmp&&(Ce=se.cmp,function(Ke){return function(ge,Le){return Ce({key:ge,value:Ke[ge]},{key:Le,value:Ke[Le]})}});var Ce;const Se=[];return function Ke(ge){if(ge?.toJSON&&"function"==typeof ge.toJSON&&(ge=ge.toJSON()),void 0===ge)return;if("number"==typeof ge)return isFinite(ge)?""+ge:"null";if("object"!=typeof ge)return JSON.stringify(ge);let Le,ve;if(Array.isArray(ge)){for(ve="[",Le=0;Le<ge.length;Le++)Le&&(ve+=","),ve+=Ke(ge[Le])||"null";return ve+"]"}if(null===ge)return"null";if(Se.includes(ge)){if(Z)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const st=Se.push(ge)-1,Re=Object.keys(ge).sort(he?.(ge));for(ve="",Le=0;Le<Re.length;Le++){const Je=Re[Le],$e=Ke(ge[Je]);$e&&(ve&&(ve+=","),ve+=JSON.stringify(Je)+":"+$e)}return Se.splice(st,1),"{"+ve+"}"}(B)}function Q(B){switch(B.type){case"catalog":case"feature":case"oriented-imagery":case"subtype-group":return!0;default:return!1}}function j(B){switch(B.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return Q(B)}}},29417:(Oe,xe,_)=>{_.d(xe,{BM:()=>$,E8:()=>R,G9:()=>k,L5:()=>x,UX:()=>ee,Uc:()=>N,Ws:()=>me,_j:()=>O,e0:()=>q,eb:()=>h,ln:()=>o,tI:()=>X,ux:()=>Ne,x6:()=>m});var P=_(69287),I=_(1749),g=_(62928);function $(G,W,Q){return Math.sqrt((G[0]-W[0])**2+(G[1]-W[1])**2+(void 0!==G[2]&&void 0!==W[2]?(G[2]*Q-W[2]*Q)**2:0))}function m(G,W,Q){return Math.sqrt((G[0]-W[0])**2+(G[1]-W[1])**2+(void 0!==G[2]&&void 0!==W[2]?(G[2]*Q-W[2]*Q)**2:0))}const a=[];for(const G of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const W=G[0];for(let Q=1;Q<G.length;Q++)a[G[Q]]=W}const Y=[];function k(G){return G.vcsWkid&&void 0!==a[G.vcsWkid]?Y[a[G.vcsWkid]]:G.latestVcsWkid&&void 0!==a[G.latestVcsWkid]?Y[a[G.latestVcsWkid]]:1}function s(G,W,Q){const j={x:0,y:0};W&&(j.z=0),Q&&(j.m=0);let B=0,se=G[0];for(let Z=0;Z<G.length;Z++){const he=G[Z];if(!1===ue(he,se)){const Ce=R(se,he,W),Se=J(se,he,W,Q);Se.x*=Ce,Se.y*=Ce,j.x+=Se.x,j.y+=Se.y,W&&(Se.z*=Ce,j.z+=Se.z),Q&&(Se.m*=Ce,j.m+=Se.m),B+=Ce,se=he}}return B>0?(j.x/=B,j.y/=B,W&&(j.z/=B),Q&&(j.m/=B)):(j.x=G[0][0],j.y=G[0][1],W&&(j.z=G[0][2]),Q&&W?j.m=G[0][3]:Q&&(j.m=G[0][2])),j}function J(G,W,Q,j){const B={x:(G[0]+W[0])/2,y:(G[1]+W[1])/2};return Q&&(B.z=(G[2]+W[2])/2),Q&&j?B.m=(G[3]+W[3])/2:j&&(B.m=(G[2]+W[2])/2),B}function V(G,W){if(G.length<=1)return 0;let Q=0;for(let j=1;j<G.length;j++)Q+=R(G[j-1],G[j],W);return Q}function R(G,W,Q){const j=W[0]-G[0],B=W[1]-G[1];if(Q){const se=W[2]-W[2];return Math.sqrt(j*j+B*B+se*se)}return Math.sqrt(j*j+B*B)}function ee(G,W,Q){const j=W[0]-G[0],B=W[1]-G[1];if(Q){const se=W[2]-W[2];return j*j+B*B+se*se}return j*j+B*B}function ue(G,W){if(G.length!==W.length)return!1;for(let Q=0;Q<G.length;Q++)if(G[Q]!==W[Q])return!1;return!0}function X(G){const W={x:0,y:0,spatialReference:G.spatialReference.toJSON()},Q={x:0,y:0,spatialReference:G.spatialReference.toJSON()};let j=0,B=0;for(let se=0;se<G.paths.length;se++){if(0===G.paths[se].length)continue;const Z=V(G.paths[se],!0===G.hasZ);if(0===Z){const he=s(G.paths[se],!0===G.hasZ,!0===G.hasM);W.x+=he.x,W.y+=he.y,!0===G.hasZ&&(W.z+=he.z),!0===G.hasM&&(W.m+=he.m),++j}else{const he=s(G.paths[se],!0===G.hasZ,!0===G.hasM);Q.x+=he.x*Z,Q.y+=he.y*Z,!0===G.hasZ&&(Q.z+=he.z*Z),!0===G.hasM&&(Q.m+=he.m*Z),B+=Z}}return B>0?(Q.x/=B,Q.y/=B,!0===G.hasZ&&(Q.z/=B),!0===G.hasM&&(Q.m/=B),new I.A(Q)):j>0?(W.x/=j,W.y/=j,!0===G.hasZ&&(Q.z/=j),!0===G.hasM&&(W.m/=j),new I.A(W)):null}function q(G){if(0===G.points.length)return null;let W=0,Q=0,j=0,B=0;for(let Z=0;Z<G.points.length;Z++){const he=G.getPoint(Z);!0===he.hasZ&&(j+=he.z),!0===he.hasM&&(B+=he.m),W+=he.x,Q+=he.y,B+=he.m}const se={x:W/G.points.length,y:Q/G.points.length,spatialReference:null};return se.spatialReference=G.spatialReference.toJSON(),!0===G.hasZ&&(se.z=j/G.points.length),!0===G.hasM&&(se.m=B/G.points.length),new I.A(se)}function l(G,W,Q=0){for(;G<Q;)G+=W;const j=Q+W;for(;G>=j;)G-=W;return G}function p(G,W){return Math.atan2(W.y-G.y,W.x-G.x)}function h(G,W){return l(p(G,W),2*Math.PI)*(180/Math.PI)}function o(G,W){return l(Math.PI/2-p(G,W),2*Math.PI)*(180/Math.PI)}function E(G,W,Q){const j={x:G.x-W.x,y:G.y-W.y},B={x:Q.x-W.x,y:Q.y-W.y};return Math.atan2(function f(G,W){return G.x*W.y-W.x*G.y}(j,B),function D(G,W){return G.x*W.x+G.y*W.y}(j,B))}function N(G,W,Q){return(0,P.KJ)(l(E(G,W,Q),2*Math.PI))}function x(G,W,Q){return(0,P.KJ)(l(-1*E(G,W,Q),2*Math.PI))}Y[9002]=.3048,Y[9003]=.3048006096012192,Y[9095]=.3048007491;const S=[0,0];function O(G){for(let W=0;W<G.length;W++){const Q=G[W];for(let B=0;B<Q.length-1;B++){const se=Q[B],Z=Q[B+1];for(let he=W+1;he<G.length;he++)for(let Ce=0;Ce<G[he].length-1;Ce++){const Se=G[he][Ce],Ke=G[he][Ce+1];if((0,g.Ql)(se,Z,Se,Ke,S)&&!(S[0]===se[0]&&S[1]===se[1]||S[0]===Se[0]&&S[1]===Se[1]||S[0]===Z[0]&&S[1]===Z[1]||S[0]===Ke[0]&&S[1]===Ke[1]))return!0}}const j=Q.length;if(!(j<3))for(let B=0;B<=j-2;B++){const se=Q[B],Z=Q[B+1];for(let he=B+2;he<=j-2;he++){const Ce=Q[he],Se=Q[he+1];if((0,g.Ql)(se,Z,Ce,Se,S)&&!(S[0]===se[0]&&S[1]===se[1]||S[0]===Ce[0]&&S[1]===Ce[1]||S[0]===Z[0]&&S[1]===Z[1]||S[0]===Se[0]&&S[1]===Se[1]))return!0}}}return!1}function me(G,W,Q){const j=[Q[0]-W[0],Q[1]-W[1],Q[2]-W[2]],B=function z(G,W,Q){return Math.max(W,Math.min(Q,G))}(function ae(G,W){return G[0]*W[0]+G[1]*W[1]+G[2]*W[2]}(j,[G[0]-W[0],G[1]-W[1],G[2]-W[2]])/function ie(G){return G[0]*G[0]+G[1]*G[1]+G[2]*G[2]}(j),0,1);return[W[0]+(Q[0]-W[0])*B,W[1]+(Q[1]-W[1])*B,W[2]+(Q[2]-W[2])*B]}function Ne(G,W,Q){let j=0;const B=Q[0]-W[0],se=Q[1]-W[1],Z=B*B+se*se;return 0===Z?j=.5:(j=((G[0]-W[0])*B+(G[1]-W[1])*se)/Z,j<0?j=0:j>1&&(j=1)),j<=.5?[W[0]+(Q[0]-W[0])*j,W[1]+(Q[1]-W[1])*j]:[Q[0]-(Q[0]-W[0])*(1-j),Q[1]-(Q[1]-W[1])*(1-j)]}},98745:(Oe,xe,_)=>{_.d(xe,{d:()=>X});var P=_(61299),I=_(55279),g=_(42686),$=_(87257),m=_(29752),a=_(88996),Y=_(44549);const J=[0,31,59,90,120,151,181,212,243,273,304,334],V=[0,31,60,91,121,152,182,213,244,274,305,335];function R(q){return null===q?q:!1===q.isValid?null:q}function ee(q,D){return""===q||"default"===q.toLowerCase().trim()?(0,g.N)(D):"z"===q||"Z"===q?"UTC":q}function ue(q,D){return(0,g.m)(q)?q.toArcadeDate():(0,g.l)(q,(0,g.N)(D))}function X(q,D){q.today=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,0,0,f,l);const E=new Date;return E.setHours(0,0,0,0),P.lY.dateJSAndZoneToArcadeDate(E,(0,g.N)(f))})},q.time=function(f,l){return D(f,l,(p,h,o)=>{switch((0,g.H)(o,0,4,f,l),o.length){case 0:{const E=P.lY.nowToArcadeDate((0,g.N)(f));return new m.k(E.hour,E.minute,E.second,E.millisecond)}case 1:{if((0,g.n)(o[0]))return o[0].clone();if((0,g.k)(o[0]))return new m.k(o[0].hour,o[0].minute,o[0].second,o[0].millisecond);if((0,g.m)(o[0]))return new m.k(0,0,0,0);if((0,g.c)(o[0]))return m.k.fromString(o[0]);const E=(0,g.g)(o[0]);return!1===isNaN(E)?m.k.fromMilliseconds(E):null}case 2:return(0,g.c)(o[0])&&(0,g.c)(o[1])?m.k.fromString(o[0],o[1]):m.k.fromParts((0,g.g)(o[0]),(0,g.g)(o[1]),0,0);case 3:return m.k.fromParts((0,g.g)(o[0]),(0,g.g)(o[1]),(0,g.g)(o[2]),0);case 4:return m.k.fromParts((0,g.g)(o[0]),(0,g.g)(o[1]),(0,g.g)(o[2]),(0,g.g)(o[3]))}throw new I.D$(f,I.TX.InvalidParameter,l)})},q.dateonly=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,0,3,f,l),3===o.length)return $.n.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]));if(2===o.length){const E=(0,g.j)(o[1]);return""===E?null:"X"===E?$.n.fromSeconds((0,g.g)(o[0])):"x"===E?$.n.fromMilliseconds((0,g.g)(o[0])):$.n.fromString((0,g.j)(o[0]),E)}if(1===o.length){if((0,g.c)(o[0])){if(""===o[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(o[0]))return $.n.fromString(o[0]+"-01-01")}if((0,g.m)(o[0]))return o[0].clone();if((0,g.k)(o[0]))return $.n.fromParts(o[0].year,o[0].monthJS+1,o[0].day);const E=(0,g.g)(o[0]);return!1===isNaN(E)?$.n.fromMilliseconds(E):(0,g.c)(o[0])?$.n.fromString(o[0]):null}if(0===o.length){const E=P.lY.nowToArcadeDate((0,g.N)(f));return!1===E.isValid?null:$.n.fromParts(E.year,E.monthJS+1,E.day)}return null})},q.changetimezone=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,2,2,f,l),null===o[0])return null;if((0,g.m)(o[0]))throw new I.D$(f,I.TX.CannotChangeTimeZoneDateOnly,l);if((0,g.m)(o[0]))throw new I.D$(f,I.TX.CannotChangeTimeZoneTime,l);const E=(0,g.l)(o[0],(0,g.N)(f));if(null===E)throw new I.D$(f,I.TX.InvalidParameter,l);const N=(0,P.mT)(ee((0,g.j)(o[1]),f),!1);if(null===N)return null;const x=P.lY.arcadeDateAndZoneToArcadeDate(E,N);return!1===x.isValid?null:x})},q.timezone=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,1,2,f,l),(0,g.n)(o[0])||(0,g.m)(o[0]))return"Unknown";const E=(0,g.l)(o[0],(0,g.N)(f));if(null===E)return null;const N=E.timeZone;return"system"===N?P.lY.systemTimeZoneCanonicalName:"utc"===N.toLowerCase()?"UTC":"unknown"===N.toLowerCase()?"Unknown":N})},q.timezoneoffset=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?null:60*E.timeZoneOffset*1e3})},q.now=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,0,0,f,l);const E=P.lY.nowToArcadeDate((0,g.N)(f));return!1===E.isValid?null:E})},q.timestamp=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,0,0,f,l);const E=P.lY.nowUTCToArcadeDate();return!1===E.isValid?null:E})},q.toutc=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?null:E.toUTC()})},q.tolocal=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?null:E.toLocal()})},q.day=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.day})},q.month=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.monthJS})},q.year=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.year})},q.hour=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,1,1,f,l),(0,g.n)(o[0]))return o[0].hour;const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?NaN:E.hour})},q.second=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,1,1,f,l),(0,g.n)(o[0]))return o[0].second;const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?NaN:E.second})},q.millisecond=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,1,1,f,l),(0,g.n)(o[0]))return o[0].millisecond;const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?NaN:E.millisecond})},q.minute=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,1,1,f,l),(0,g.n)(o[0]))return o[0].minute;const E=(0,g.l)(o[0],(0,g.N)(f));return null===E?NaN:E.minute})},q.week=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,2,f,l);const E=ue(o[0],(0,g.N)(f));if(null===E)return NaN;const N=(0,g.g)((0,g.K)(o[1],0));if(N<0||N>6)throw new I.D$(f,I.TX.InvalidParameter,l);const z=E.dayOfWeekJS,ae=function k(q,D,f){return q+(function s(q){return q%4==0&&(q%100!=0||q%400==0)}(f)?V:J)[D]}(E.day,E.monthJS,E.year)-1,ie=Math.floor(ae/7);return z-N+(z-N<0?7:0)<ae-7*ie?ie+1:ie})},q.weekday=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.dayOfWeekJS})},q.isoweekday=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.dayOfWeekISO})},q.isomonth=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.monthISO})},q.isoweek=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.weekISO})},q.isoyear=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,1,1,f,l);const E=ue(o[0],(0,g.N)(f));return null===E?NaN:E.yearISO})},q.date=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,0,8,f,l),3===o.length){if((0,g.m)(o[0])&&(0,g.n)(o[1])&&(0,g.c)(o[2])){const E=(0,P.mT)(ee((0,g.j)(o[2])??"unknown",f),!1);return null===E?null:R(P.lY.fromParts(o[0].year,o[0].month,o[0].day,o[1].hour,o[1].minute,o[1].second,o[1].millisecond,E))}return R(P.lY.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]),0,0,0,0,(0,g.N)(f)))}if(4===o.length)return R(P.lY.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]),(0,g.g)(o[3]),0,0,0,(0,g.N)(f)));if(5===o.length)return R(P.lY.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]),(0,g.g)(o[3]),(0,g.g)(o[4]),0,0,(0,g.N)(f)));if(6===o.length)return R(P.lY.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]),(0,g.g)(o[3]),(0,g.g)(o[4]),(0,g.g)(o[5]),0,(0,g.N)(f)));if(7===o.length)return R(P.lY.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]),(0,g.g)(o[3]),(0,g.g)(o[4]),(0,g.g)(o[5]),(0,g.g)(o[6]),(0,g.N)(f)));if(8===o.length){const E=(0,P.mT)(ee((0,g.j)(o[7])??"unknown",f),!1);return null===E?null:R(P.lY.fromParts((0,g.g)(o[0]),(0,g.g)(o[1])+1,(0,g.g)(o[2]),(0,g.g)(o[3]),(0,g.g)(o[4]),(0,g.g)(o[5]),(0,g.g)(o[6]),E))}if(2===o.length){if((0,g.m)(o[0])&&(0,g.c)(o[1])){const x=(0,P.mT)(ee((0,g.j)(o[1])??"unknown",f),!1);return null===x?null:R(P.lY.fromParts(o[0].year,o[0].month,o[0].day,0,0,0,0,x))}if((0,g.m)(o[0])&&(0,g.n)(o[1]))return R(P.lY.fromParts(o[0].year,o[0].month,o[0].day,o[1].hour,o[1].minute,o[1].second,o[1].millisecond,"unknown"));let E,N=(0,g.j)(o[1]);return""===N?null:(N=(0,g.Q)(N,!0),E="X"===N?Y.c9.fromSeconds((0,g.g)(o[0])):"x"===N?Y.c9.fromMillis((0,g.g)(o[0])):Y.c9.fromFormat((0,g.j)(o[0]),N,{locale:(0,a.JK)(),numberingSystem:"latn"}),E.isValid?P.lY.dateTimeToArcadeDate(E):null)}if(1===o.length){if((0,g.m)(o[0]))return R(P.lY.fromParts(o[0].year,o[0].month,o[0].day,0,0,0,0,"unknown"));if((0,g.c)(o[0])){if(""===o[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(o[0]))return(0,g.l)(o[0]+"-01-01",(0,g.N)(f))}const E=(0,g.g)(o[0]);if(!1===isNaN(E)){const N=Y.c9.fromMillis(E);return N.isValid?P.lY.dateTimeAndZoneToArcadeDate(N,(0,g.N)(f)):null}return(0,g.l)(o[0],(0,g.N)(f))}return 0===o.length?P.lY.nowToArcadeDate((0,g.N)(f)):null})},q.datediff=function(f,l){return D(f,l,(p,h,o)=>{if((0,g.H)(o,2,4,f,l),(0,g.n)(o[0]))return(0,g.n)(o[1])?o[0].difference(o[1],(0,g.j)(o[2])):NaN;if((0,g.n)(o[1]))return NaN;if((0,g.m)(o[0]))return(0,g.m)(o[1])?o[0].difference(o[1],(0,g.j)(o[2])):NaN;if((0,g.m)(o[1]))return NaN;let E=(0,g.l)(o[0],(0,g.N)(f)),N=(0,g.l)(o[1],(0,g.N)(f));if(null===E||null===N)return NaN;let x=(0,g.K)(o[3],"");switch(""!==x&&null!==x?(x=ee((0,g.j)(x),f),E=P.lY.arcadeDateAndZoneToArcadeDate(E,x),N=P.lY.arcadeDateAndZoneToArcadeDate(N,x)):E.timeZone!==N.timeZone&&(E.isUnknownTimeZone?E=P.lY.arcadeDateAndZoneToArcadeDate(E,N.timeZone):N=P.lY.arcadeDateAndZoneToArcadeDate(N,E.timeZone)),(0,g.j)(o[2]).toLowerCase()){case"days":case"day":case"d":return E.diff(N,"days");case"months":case"month":return E.diff(N,"months");case"minutes":case"minute":case"m":return E.diff(N,"M"===o[2]?"months":"minutes");case"seconds":case"second":case"s":return E.diff(N,"seconds");case"milliseconds":case"millisecond":case"ms":default:return E.diff(N);case"hours":case"hour":case"h":return E.diff(N,"hours");case"years":case"year":case"y":return E.diff(N,"years")}})},q.dateadd=function(f,l){return D(f,l,(p,h,o)=>{(0,g.H)(o,2,3,f,l);let E=(0,g.g)(o[1]);if(isNaN(E)||E===1/0||E===-1/0)return(0,g.n)(o[0])||(0,g.m)(o[0])?o[0].clone():(0,g.l)(o[0],(0,g.N)(f));let N="milliseconds";switch((0,g.j)(o[2]).toLowerCase()){case"days":case"day":case"d":N="days",E=(0,g.m)(o[0])?E:(0,g.R)(E);break;case"months":case"month":N="months",E=(0,g.m)(o[0])?E:(0,g.R)(E);break;case"minutes":case"minute":case"m":N="M"===o[2]?"months":"minutes";break;case"seconds":case"second":case"s":N="seconds";break;case"milliseconds":case"millisecond":case"ms":N="milliseconds";break;case"hours":case"hour":case"h":N="hours";break;case"years":case"year":case"y":N="years"}if((0,g.n)(o[0])||(0,g.m)(o[0]))return o[0].plus(N,E);const x=(0,g.l)(o[0],(0,g.N)(f));return null===x?null:x.plus({[N]:E})})}}},59118:(Oe,xe,_)=>{_.d(xe,{t:()=>Y});var P=_(42686);function I(k){let s=0;for(let J=0;J<k.length;J++)s+=k[J];return s/k.length}function g(k){const s=I(k);let J=0;for(let V=0;V<k.length;V++)J+=(s-k[V])**2;return J/k.length}function Y(k,s,J=1e3){switch(k.toLowerCase()){case"distinct":return function m(k,s){const J=[],V={},R=[];for(let ee=0;ee<k.length;ee++){if(null!=k[ee]&&k[ee]!==P.B){const ue=k[ee];if((0,P.b)(ue)||(0,P.c)(ue))void 0===V[ue]&&(J.push(ue),V[ue]=1);else{let X=!1;for(let q=0;q<R.length;q++)!0===(0,P.F)(R[q],ue)&&(X=!0);!1===X&&(R.push(ue),J.push(ue))}}if(J.length>=s&&-1!==s)return J}return J}(s,J);case"avg":case"mean":return I((0,P._)(s));case"min":return Math.min.apply(Math,(0,P._)(s));case"sum":return function $(k){let s=0;for(let J=0;J<k.length;J++)s+=k[J];return s}((0,P._)(s));case"max":return Math.max.apply(Math,(0,P._)(s));case"stdev":case"stddev":return Math.sqrt(g((0,P._)(s)));case"var":case"variance":return g((0,P._)(s));case"count":return s.length}return 0}},39521:(Oe,xe,_)=>{_.d(xe,{B:()=>f,d:()=>q});var P=_(53787),I=_(55279),g=_(63145),$=_(61223),m=_(40056),a=_(42686),Y=_(29417),k=_(28067),s=_(68643),J=_(21870),V=_(1749),R=_(55861),ee=_(93615),ue=_(15268),X=_(61320);function q(l,p){l.ringisclockwise=function(h,o){return p(h,o,(E,N,x)=>{(0,a.H)(x,1,1,h,o);let S=[];if(null===x[0])return!1;if((0,a.o)(x[0]))for(const O of x[0]){if(!(O instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);S.push(O.hasZ?O.hasM?[O.x,O.y,O.z,O.m]:[O.x,O.y,O.z]:[O.x,O.y])}else if(x[0]instanceof m.A)S=x[0]._elements;else{if(!(0,a.q)(x[0]))throw new I.D$(h,I.TX.InvalidParameter,o);for(const O of x[0].toArray()){if(!(O instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);S.push(O.hasZ?O.hasM?[O.x,O.y,O.z,O.m]:[O.x,O.y,O.z]:[O.x,O.y])}}return!(S.length<3)&&(0,ue.$3)(S)})},l.polygon=function(h,o){return p(h,o,(E,N,x)=>{let S;if((0,a.H)(x,1,1,h,o),x[0]instanceof P.A){const O=(0,a.x)(g.A.parseGeometryFromDictionary(x[0],h.spatialReference),h.spatialReference);if(!(O instanceof R.A))throw new I.D$(h,I.TX.InvalidParameter,o);S=O}else if(x[0]instanceof R.A)S=(0,X.rS)(x[0].toJSON());else{const O=JSON.parse(x[0]);O&&!O.spatialReference&&(O.spatialReference=h.spatialReference),S=(0,a.x)(new R.A(O),h.spatialReference)}if(null!==S&&!1===S.spatialReference.equals(h.spatialReference))throw new I.D$(h,I.TX.WrongSpatialReference,o);return(0,a.S)(S)})},l.polyline=function(h,o){return p(h,o,(E,N,x)=>{let S;if((0,a.H)(x,1,1,h,o),x[0]instanceof P.A){const O=(0,a.x)(g.A.parseGeometryFromDictionary(x[0],h.spatialReference),h.spatialReference);if(!(O instanceof ee.A))throw new I.D$(h,I.TX.InvalidParameter,o);S=O}else if(x[0]instanceof ee.A)S=(0,X.rS)(x[0].toJSON());else{const O=JSON.parse(x[0]);O&&!O.spatialReference&&(O.spatialReference=h.spatialReference),S=(0,a.x)(new ee.A(O),h.spatialReference)}if(null!==S&&!1===S.spatialReference.equals(h.spatialReference))throw new I.D$(h,I.TX.WrongSpatialReference,o);return(0,a.S)(S)})},l.point=function(h,o){return p(h,o,(E,N,x)=>{let S;if((0,a.H)(x,1,1,h,o),x[0]instanceof P.A){const O=(0,a.x)(g.A.parseGeometryFromDictionary(x[0],h.spatialReference),h.spatialReference);if(!(O instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);S=O}else if(x[0]instanceof V.A)S=(0,X.rS)(x[0].toJSON());else{const O=JSON.parse(x[0]);O&&!O.spatialReference&&(O.spatialReference=h.spatialReference),S=(0,a.x)(new V.A(O),h.spatialReference)}if(null!==S&&!1===S.spatialReference.equals(h.spatialReference))throw new I.D$(h,I.TX.WrongSpatialReference,o);return(0,a.S)(S)})},l.multipoint=function(h,o){return p(h,o,(E,N,x)=>{let S;if((0,a.H)(x,1,1,h,o),x[0]instanceof P.A){const O=(0,a.x)(g.A.parseGeometryFromDictionary(x[0],h.spatialReference),h.spatialReference);if(!(O instanceof J.A))throw new I.D$(h,I.TX.InvalidParameter,o);S=O}else if(x[0]instanceof J.A)S=(0,X.rS)(x[0].toJSON());else{const O=JSON.parse(x[0]);O&&!O.spatialReference&&(O.spatialReference=h.spatialReference),S=(0,a.x)(new J.A(O),h.spatialReference)}if(null!==S&&!1===S.spatialReference.equals(h.spatialReference))throw new I.D$(h,I.TX.WrongSpatialReference,o);return(0,a.S)(S)})},l.extent=function(h,o){return p(h,o,(E,N,x)=>{x=(0,a.I)(x),(0,a.H)(x,1,1,h,o);let S=null;if(x[0]instanceof P.A)S=(0,a.x)(g.A.parseGeometryFromDictionary(x[0],h.spatialReference),h.spatialReference);else if(x[0]instanceof V.A){const O={xmin:x[0].x,ymin:x[0].y,xmax:x[0].x,ymax:x[0].y,spatialReference:x[0].spatialReference.toJSON()},z=x[0];z.hasZ?(O.zmin=z.z,O.zmax=z.z):z.hasM&&(O.mmin=z.m,O.mmax=z.m),S=(0,X.rS)(O)}else if(x[0]instanceof R.A)S=(0,X.rS)(x[0].extent?.toJSON());else if(x[0]instanceof ee.A)S=(0,X.rS)(x[0].extent?.toJSON());else if(x[0]instanceof J.A)S=(0,X.rS)(x[0].extent?.toJSON());else if(x[0]instanceof k.A)S=(0,X.rS)(x[0].toJSON());else{const O=JSON.parse(x[0]);O&&!O.spatialReference&&(O.spatialReference=h.spatialReference),S=(0,a.x)(new k.A(O),h.spatialReference)}if(null!==S&&!1===S.spatialReference.equals(h.spatialReference))throw new I.D$(h,I.TX.WrongSpatialReference,o);return(0,a.S)(S)})},l.geometry=function(h,o){return p(h,o,(E,N,x)=>{(0,a.H)(x,1,1,h,o);let S=null;if(null===x[0])return null;if((0,a.r)(x[0]))S=(0,a.x)(x[0].geometry(),h.spatialReference);else if(x[0]instanceof P.A)S=(0,a.x)(g.A.parseGeometryFromDictionary(x[0],h.spatialReference),h.spatialReference);else{const O=JSON.parse(x[0]);O&&!O.spatialReference&&(O.spatialReference=h.spatialReference),S=(0,a.x)((0,X.rS)(O),h.spatialReference)}if(null!==S&&!1===S.spatialReference.equals(h.spatialReference))throw new I.D$(h,I.TX.WrongSpatialReference,o);return(0,a.S)(S)})},l.setgeometry=function(h,o){return p(h,o,(E,N,x)=>{if((0,a.H)(x,2,2,h,o),!(0,a.r)(x[0]))throw new I.D$(h,I.TX.InvalidParameter,o);if(!0===x[0].immutable)throw new I.D$(h,I.TX.Immutable,o);if(!(x[1]instanceof s.A||null===x[1]))throw new I.D$(h,I.TX.InvalidParameter,o);return x[0]._geometry=x[1],a.B})},l.feature=function(h,o){return p(h,o,(E,N,x)=>{if(0===x.length)throw new I.D$(h,I.TX.WrongNumberOfParameters,o);let S;if(1===x.length)if((0,a.c)(x[0]))S=g.A.fromJson(JSON.parse(x[0]),h.timeZone);else if((0,a.r)(x[0]))S=g.A.createFromArcadeFeature(x[0]);else if(x[0]instanceof s.A)S=g.A.createFromGraphicLikeObject(x[0],null,null,h.timeZone);else{if(!(x[0]instanceof P.A))throw new I.D$(h,I.TX.InvalidParameter,o);{let O=x[0].hasField("geometry")?x[0].field("geometry"):null,z=x[0].hasField("attributes")?x[0].field("attributes"):null;null!==O&&O instanceof P.A&&(O=g.A.parseGeometryFromDictionary(O,h.spatialReference)),null!==z&&(z=g.A.parseAttributesFromDictionary(z)),S=g.A.createFromGraphicLikeObject(O,z,null,h.timeZone)}}else if(2===x.length){let O=null,z=null;if(null!==x[0])if(x[0]instanceof s.A)O=x[0];else{if(!(O instanceof P.A))throw new I.D$(h,I.TX.InvalidParameter,o);O=g.A.parseGeometryFromDictionary(x[0],h.spatialReference)}if(null!==x[1]){if(!(x[1]instanceof P.A))throw new I.D$(h,I.TX.InvalidParameter,o);z=g.A.parseAttributesFromDictionary(x[1])}S=g.A.createFromGraphicLikeObject(O,z,null,h.timeZone)}else{let O=null;const z={};if(null!==x[0])if(x[0]instanceof s.A)O=x[0];else{if(!(O instanceof P.A))throw new I.D$(h,I.TX.InvalidParameter,o);O=g.A.parseGeometryFromDictionary(x[0],h.spatialReference)}for(let ae=1;ae<x.length;ae+=2){const ie=(0,a.j)(x[ae]),me=x[ae+1];if(!(null==me||(0,a.c)(me)||isNaN(me)||(0,a.k)(me)||(0,a.b)(me)||(0,a.n)(me)||(0,a.m)(me)||(0,a.a)(me)))throw new I.D$(h,I.TX.InvalidParameter,o);if((0,a.i)(me)||!1===(0,a.f)(me))throw new I.D$(h,I.TX.InvalidParameter,o);z[ie]=me===a.B?null:me}S=g.A.createFromGraphicLikeObject(O,z,null,h.timeZone)}return S._geometry=(0,a.x)(S.geometry(),h.spatialReference),S.immutable=!1,S})},l.dictionary=function(h,o){return p(h,o,(E,N,x)=>{if(0===x.length||1===x.length&&null===x[0]){const z=new P.A;return z.immutable=!1,z}if(1===x.length&&(0,a.c)(x[0]))try{const z=JSON.parse(x[0]),ae=P.A.convertObjectToArcadeDictionary(z,(0,a.N)(h),!1);return ae.immutable=!1,ae}catch{throw new I.D$(h,I.TX.InvalidParameter,o)}if(1===x.length&&x[0]instanceof s.A)try{const z=x[0].toJSON();z.hasZ=!0===x[0].hasZ,z.hasM=!0===x[0].hasM;const ae=P.A.convertObjectToArcadeDictionary(z,(0,a.N)(h),!1);return ae.immutable=!1,ae}catch{throw new I.D$(h,I.TX.InvalidParameter,o)}if(1===x.length&&(0,a.r)(x[0]))try{const z=new P.A;z.immutable=!1,z.setField("geometry",x[0].geometry());const ae=new P.A;ae.immutable=!1,z.setField("attributes",ae);for(const ie of x[0].keys())ae.setField(ie,x[0].field(ie));return z}catch{throw new I.D$(h,I.TX.InvalidParameter,o)}if(1===x.length&&x[0]instanceof P.A)try{const z=new P.A;z.immutable=!1;for(const ae of x[0].keys())z.setField(ae,x[0].field(ae));return z}catch{throw new I.D$(h,I.TX.InvalidParameter,o)}if(2===x.length&&x[0]instanceof P.A&&(0,a.a)(x[1]))try{if(!0!==x[1]){const z=new P.A;z.immutable=!1;for(const ae of x[0].keys())z.setField(ae,x[0].field(ae));return z}return x[0].deepClone()}catch{throw new I.D$(h,I.TX.InvalidParameter,o)}if(x.length%2!=0)throw new I.D$(h,I.TX.WrongNumberOfParameters,o);const S={};for(let z=0;z<x.length;z+=2){const ae=(0,a.j)(x[z]),ie=x[z+1];if(!(null==ie||(0,a.c)(ie)||isNaN(ie)||(0,a.k)(ie)||(0,a.b)(ie)||(0,a.a)(ie)||(0,a.m)(ie)||(0,a.n)(ie)||(0,a.o)(ie)||(0,a.q)(ie)))throw new I.D$(h,I.TX.InvalidParameter,o);if((0,a.i)(ie))throw new I.D$(h,I.TX.InvalidParameter,o);S[ae]=ie===a.B?null:ie}const O=new P.A(S);return O.immutable=!1,O})},l.haskey=function(h,o){return p(h,o,(E,N,x)=>{(0,a.H)(x,2,2,h,o);const S=(0,a.j)(x[1]);if((0,a.r)(x[0])||x[0]instanceof P.A)return x[0].hasField(S);if(x[0]instanceof s.A){const O=f(x[0],S,null,null,2);return!O||"notfound"!==O.keystate}throw new I.D$(h,I.TX.InvalidParameter,o)})},l.hasvalue=function(h,o){return p(h,o,(E,N,x)=>{if((0,a.H)(x,2,2,h,o),(0,a.o)(x[1])||(0,a.q)(x[1])){const O=x[1];let z=[];if((0,a.q)(O))z=O.toArray();else{if(!(0,a.o)(O))throw new I.D$(h,I.TX.InvalidParameter,o);z=O}let ae=x[0];if(null===ae)return!1;for(const ie of z)if((0,a.r)(ae)){if(!1===(0,a.c)(ie)||!ae.hasField(ie)||(ae=ae.field(ie),null===ae))return!1}else if(ae instanceof P.A){if(!1===(0,a.c)(ie)||!ae.hasField(ie)||(ae=ae.field(ie),null===ae))return!1}else if(ae instanceof s.A){if(!1===(0,a.c)(ie)||(ae=f(ae,ie,null,null,0),null===ae))return!1}else if((0,a.o)(ae)){if(!1===(0,a.b)(ie)||(ae=ae[ie],null==ae))return!1}else if(!(0,a.q)(ae)||!1===(0,a.b)(ie)||(ae=ae.get(ie),null==ae))return!1;return!0}if(null===x[0]||null===x[1])return!1;const S=(0,a.j)(x[1]);return(0,a.r)(x[0])||x[0]instanceof P.A?!!x[0].hasField(S)&&null!==x[0].field(S):x[0]instanceof s.A&&null!==f(x[0],S,null,null,0)})},l.indexof=function(h,o){return p(h,o,(E,N,x)=>{(0,a.H)(x,2,2,h,o);const S=x[1];if((0,a.o)(x[0])){for(let O=0;O<x[0].length;O++)if((0,a.F)(S,x[0][O]))return O;return-1}if((0,a.q)(x[0])){const O=x[0].length();for(let z=0;z<O;z++)if((0,a.F)(S,x[0].get(z)))return z;return-1}throw new I.D$(h,I.TX.InvalidParameter,o)})},l.angle=function(h,o){return p(h,o,(E,N,x)=>{if(x=(0,a.I)(x),(0,a.H)(x,2,3,h,o),!(x[0]instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);if(!(x[1]instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);if(x.length>2&&!(x[2]instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);return 2===x.length?(0,Y.eb)(x[0],x[1]):(0,Y.Uc)(x[0],x[1],x[2])})},l.bearing=function(h,o){return p(h,o,(E,N,x)=>{if(x=(0,a.I)(x),(0,a.H)(x,2,3,h,o),!(x[0]instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);if(!(x[1]instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);if(x.length>2&&!(x[2]instanceof V.A))throw new I.D$(h,I.TX.InvalidParameter,o);return 2===x.length?(0,Y.ln)(x[0],x[1]):(0,Y.L5)(x[0],x[1],x[2])})},l.isselfintersecting=function(h,o){return p(h,o,(E,N,x)=>{x=(0,a.I)(x),(0,a.H)(x,1,1,h,o);let S=x[0];if(S instanceof R.A)return S.isSelfIntersecting;if(S instanceof ee.A)return(0,Y._j)(S.paths);if(S instanceof J.A){const O=S.points;for(let z=0;z<O.length;z++)for(let ae=0;ae<O.length;ae++)if(ae!==z){let ie=!0;for(let me=0;me<O[z].length;me++)if(O[z][me]!==O[ae][me]){ie=!1;break}if(!0===ie)return!0}}if((0,a.o)(S)||(0,a.q)(S)){const O=(0,a.L)(S,h.spatialReference);return null!==O&&(S=O.paths),(0,Y._j)(S)}return!1})}}let D=0;function f(l,p,h,o,E=1){let N;switch(p=p.toLowerCase()){case"hasz":{const x=l.hasZ;return void 0!==x&&x}case"hasm":{const x=l.hasM;return void 0!==x&&x}case"spatialreference":{let x=l.spatialReference._arcadeCacheId;if(void 0===x){let O=!0;Object.freeze&&Object.isFrozen(l.spatialReference)&&(O=!1),O&&(D++,l.spatialReference._arcadeCacheId=D,x=D)}const S=new P.A({wkt:l.spatialReference.wkt,wkid:l.spatialReference.wkid});return void 0!==x&&(S._arcadeCacheId="SPREF"+x.toString()),S}}switch(l.type){case"extent":switch(p){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const x=l[p];return void 0!==x?x:null}case"type":return"Extent"}break;case"polygon":switch(p){case"rings":return N=l.cache._arcadeCacheId,void 0===N&&(D++,N=D,l.cache._arcadeCacheId=N),new $.A(l.rings,l.spatialReference,!0===l.hasZ,!0===l.hasM,N);case"type":return"Polygon"}break;case"point":switch(p){case"x":case"y":case"z":case"m":return l[p]??null;case"type":return"Point"}break;case"polyline":switch(p){case"paths":return N=l.cache._arcadeCacheId,void 0===N&&(D++,N=D,l.cache._arcadeCacheId=N),new $.A(l.paths,l.spatialReference,!0===l.hasZ,!0===l.hasM,N);case"type":return"Polyline"}break;case"multipoint":switch(p){case"points":return N=l.cache._arcadeCacheId,void 0===N&&(D++,N=D,l.cache._arcadeCacheId=N),new m.A(l.points,l.spatialReference,!0===l.hasZ,!0===l.hasM,N,1);case"type":return"Multipoint"}}if(1===E)throw new I.D$(h,I.TX.InvalidIdentifier,o);return 2===E?{keystate:"notfound"}:null}},82050:(Oe,xe,_)=>{_.d(xe,{d:()=>$});var P=_(42686),I=_(85775);function g(m,a,Y){if(void 0===Y||0==+Y)return Math[m](a);if(a=+a,Y=+Y,isNaN(a)||"number"!=typeof Y||Y%1!=0)return NaN;let k=a.toString().split("e");return k=(a=Math[m](+(k[0]+"e"+(k[1]?+k[1]-Y:-Y)))).toString().split("e"),+(k[0]+"e"+(k[1]?+k[1]+Y:Y))}function $(m,a){function Y(k,s,J){const V=(0,P.g)(k);return isNaN(V)?V:isNaN(s)||isNaN(J)||s>J?NaN:V<s?s:V>J?J:V}m.number=function(k,s){return a(k,s,(J,V,R)=>{(0,P.H)(R,1,2,k,s);const ee=R[0];if((0,P.b)(ee))return ee;if(null===ee)return 0;if((0,P.k)(ee)||(0,P.n)(ee)||(0,P.m)(ee))return ee.toNumber();if((0,P.a)(ee))return Number(ee);if((0,P.o)(ee))return NaN;if(""===ee||void 0===ee)return Number(ee);if((0,P.c)(ee)){if(void 0!==R[1]){let ue=(0,P.T)(R[1],"\u2030","");return ue=(0,P.T)(ue,"\xa4",""),(0,I.qg)(ee,{pattern:ue})}return Number(ee.trim())}return Number(ee)})},m.abs=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.abs((0,P.g)(R[0]))))},m.acos=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.acos((0,P.g)(R[0]))))},m.asin=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.asin((0,P.g)(R[0]))))},m.atan=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.atan((0,P.g)(R[0]))))},m.atan2=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,2,2,k,s),Math.atan2((0,P.g)(R[0]),(0,P.g)(R[1]))))},m.ceil=function(k,s){return a(k,s,(J,V,R)=>{if((0,P.H)(R,1,2,k,s),2===R.length){let ee=(0,P.g)(R[1]);return isNaN(ee)&&(ee=0),g("ceil",(0,P.g)(R[0]),-1*ee)}return Math.ceil((0,P.g)(R[0]))})},m.round=function(k,s){return a(k,s,(J,V,R)=>{if((0,P.H)(R,1,2,k,s),2===R.length){let ee=(0,P.g)(R[1]);return isNaN(ee)&&(ee=0),g("round",(0,P.g)(R[0]),-1*ee)}return Math.round((0,P.g)(R[0]))})},m.floor=function(k,s){return a(k,s,(J,V,R)=>{if((0,P.H)(R,1,2,k,s),2===R.length){let ee=(0,P.g)(R[1]);return isNaN(ee)&&(ee=0),g("floor",(0,P.g)(R[0]),-1*ee)}return Math.floor((0,P.g)(R[0]))})},m.cos=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.cos((0,P.g)(R[0]))))},m.isnan=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),"number"==typeof R[0]&&isNaN(R[0])))},m.exp=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.exp((0,P.g)(R[0]))))},m.log=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.log((0,P.g)(R[0]))))},m.pow=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,2,2,k,s),(0,P.g)(R[0])**(0,P.g)(R[1])))},m.random=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,0,0,k,s),Math.random()))},m.sin=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.sin((0,P.g)(R[0]))))},m.sqrt=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.sqrt((0,P.g)(R[0]))))},m.tan=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),Math.tan((0,P.g)(R[0]))))},m.isempty=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),null===R[0]||""===R[0]||void 0===R[0]||R[0]===P.B))},m.boolean=function(k,s){return a(k,s,(J,V,R)=>((0,P.H)(R,1,1,k,s),(0,P.h)(R[0])))},m.constrain=function(k,s){return a(k,s,(J,V,R)=>{(0,P.H)(R,3,3,k,s);const ee=(0,P.g)(R[1]),ue=(0,P.g)(R[2]);if((0,P.o)(R[0])){const X=[];for(const q of R[0])X.push(Y(q,ee,ue));return X}if((0,P.q)(R[0])){const X=[];for(let q=0;q<R[0].length();q++)X.push(Y(R[0].get(q),ee,ue));return X}return Y(R[0],ee,ue)})}}},55316:(Oe,xe,_)=>{_.d(xe,{EP:()=>V,du:()=>R,sO:()=>q});var P=_(29417),I=_(82663),g=_(1749),$=_(55861);function m(D,f,l){const p=f[0]-D[0],h=f[1]-D[1];return Math.sqrt(p*p+h*h)}function k(D,f,l,p){const h=function Y(D){const f=function a(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1]+D[2]*D[2])}(D);return[D[0]/f,D[1]/f,D[2]/f]}([f[0]-D[0],f[1]-D[1],f[2]*p-D[2]*p]);return[D[0]+h[0]*l,D[1]+h[1]*l,D[2]+h[2]*l]}function s(D,f,l,p){return D+(f-D)/l*p}function J(D,f,l){let p=f[0]-D[0],h=f[1]-D[1];const o=Math.sqrt(p*p+h*h);return p/=o,h/=o,p*=l,h*=l,[D[0]+p,D[1]+h]}function V(D,f){if(!D)return null;switch(D.type){case"extent":case"multipoint":case"mesh":case"point":return null}const l="polygon"===D.type?D.rings:D.paths;let p=1;if((D.spatialReference.vcsWkid||D.spatialReference.latestVcsWkid)&&(p=(0,P.G9)(D.spatialReference)/(0,I.GA)(D.spatialReference)),0===l.length||0===l[0].length||!1===D.hasM)return null;let h=-1,o=0;const E=D.hasZ?P.BM:m,N=D.hasZ?3:2;for(const S of l){if(h++,S.length>0&&S[0][N]===f)return{partId:h,distanceAlong:o,coordinate:new g.A({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:S[0][0],y:S[0][1],...D.hasZ?{z:S[0][2]}:{},...D.hasM?{m:S[0][N]}:{}}),segmentId:0};let O=-1;for(let z=1;z<S.length;z++){const ae=E(S[z-1],S[z],p);O++;const ie=S[z][N]-S[z-1][N],me=S[z][N];if(me===f)return{partId:h,distanceAlong:ae+o,coordinate:new g.A({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:S[z][0],y:S[z][1],...D.hasZ?{z:S[z][2]}:{},...D.hasM?{m:S[z][N]}:{}}),segmentId:O};if(me>f&&f>S[z-1][N]){const Ne=(f-S[z-1][N])/ie*ae;let G=D.hasZ?k(S[z-1],S[z],Ne,p):J(S[z-1],S[z],Ne);G=[...G,f];const W=new g.A({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:G[0],y:G[1],...D.hasZ?{z:G[2]}:{},...D.hasM?{m:G[N]}:{}});return{partId:h,distanceAlong:o+E(S[z-1],[W.x,W.y,...W.hasZ?[W.z]:[],...W.hasM?[W.m]:[]],p),coordinate:W,segmentId:O}}o+=ae}}return null}function R(D,f){if(!D)return null;switch(D.type){case"extent":case"multipoint":case"mesh":case"point":return null}const l="polygon"===D.type?D.rings:D.paths;if(f<0)return null;let p=1;(D.spatialReference.vcsWkid||D.spatialReference.latestVcsWkid)&&(p=(0,P.G9)(D.spatialReference)/(0,I.GA)(D.spatialReference));let h=0;const o=D.hasZ?3:2,N=D.hasZ?P.BM:m;let x=-1;if(0===f)return 0===l.length||0===l[0].length?null:{partId:0,coordinate:new g.A({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:l[0][0][0],y:l[0][0][1],...D.hasZ?{z:l[0][0][2]}:{},...D.hasM?{m:l[0][0][o]}:{}}),segmentId:0};for(const S of l){x++;let O=-1;for(let z=1;z<S.length;z++){O++;const ae=N(S[z-1],S[z],p),ie=h+ae;if(ie===f)return{partId:x,coordinate:new g.A({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:S[z][0],y:S[z][1],...D.hasZ?{z:S[z][2]}:{},...D.hasM?{m:S[z][o]}:{}}),segmentId:O};if(ie>f){let me=D.hasZ?k(S[z-1],S[z],f-h,p):J(S[z-1],S[z],f-h);return me=[...me,s(S[z-1][o],S[z][o],ae,f-h)],{partId:x,coordinate:new g.A({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:me[0],y:me[1],...D.hasZ?{z:me[2]}:{},...D.hasM?{m:me[o]}:{}}),segmentId:O}}h=ie}}return null}function q(D,f){if(!D||!f)return null;switch("extent"===D.type&&(D=new $.A({spatialReference:D.spatialReference,rings:[[[D.xmin,D.ymin],[D.xmin,D.ymax],[D.xmax,D.ymax],[D.xmax,D.ymin],[D.xmin,D.ymin]]]})),D.type){case"point":return function ee(D,f){if(!D||!f)return null;let l=1;(f.spatialReference.vcsWkid||f.spatialReference.latestVcsWkid)&&(l=(0,P.G9)(f.spatialReference)/(0,I.GA)(f.spatialReference));let p=null,h=0;return p=D,h=D.hasZ&&f.hasZ?(0,P.BM)([f.x,f.y,f.z],[D.x,D.y,D.z],l):(0,P.E8)([f.x,f.y],[D.x,D.y],!1),{coordinate:p,distance:h}}(D,f)??null;case"multipoint":return function ue(D,f){if(!D||!f)return null;let l=1;(f.spatialReference.vcsWkid||f.spatialReference.latestVcsWkid)&&(l=(0,P.G9)(f.spatialReference)/(0,I.GA)(f.spatialReference));let p=null,h=0,o=Number.MAX_VALUE,E=-1,N=-1;for(const x of D.points||[]){N++;const S=D.hasZ&&f.hasZ?(0,P.x6)([x[0],x[1],x[2]],[f.x,f.y,f.z],l):(0,P.UX)([x[0],x[1]],[f.x,f.y],!1);S<o&&(o=S,E=N)}return E<0?null:(h=o,p=D.getPoint(E),{coordinate:p,distance:Math.sqrt(h)})}(D,f)??null;case"polygon":case"polyline":return function X(D,f){if(!D||!f)return null;const l="polygon"===D.type?D.rings:D.paths;let p=1;(f.spatialReference.vcsWkid||f.spatialReference.latestVcsWkid)&&(p=(0,P.G9)(f.spatialReference)/(0,I.GA)(f.spatialReference));let h=Number.MAX_VALUE,o=-1,E=-1,N=-1;const x=D.hasZ&&f.hasZ;let S=null;const O=x?[f.x,f.y,f.z]:[f.x,f.y];for(const j of l){E++;for(let B=1;B<j.length;B++){const se=x?(0,P.Ws)(O,j[B-1],j[B]):(0,P.ux)(O,j[B-1],j[B]),Z=x?(0,P.x6)(se,O,p):(0,P.UX)(se,O,!1);Z<h&&(h=Z,S=se,N=E,o=B-1)}}if(o<0)return null;const z=D.hasM&&D.hasZ?3:2,ie=l[N][o],me=l[N][o+1];let Ne=null,G=null,W=x?S[2]:null;D.hasM&&(G=s(ie[z],me[z],x?(0,P.BM)(ie,me,p):(0,P.E8)(ie,me,!1),x?(0,P.BM)(ie,S,p):(0,P.E8)(ie,S,!1))),D.hasZ&&!1===f.hasZ&&(W=s(ie[2],me[2],x?(0,P.BM)(ie,me,p):(0,P.E8)(ie,me,!1),x?(0,P.BM)(ie,S,p):(0,P.E8)(ie,S,!1))),Ne=new g.A({hasZ:x,hasM:D.hasM,spatialReference:f.spatialReference,x:S[0],y:S[1],...D.hasZ?{z:W}:{},...D.hasM?{m:G}:{}});let Q=0;for(let j=0;j<=N;j++){const B=l[j],se=j===N?o:B.length-1;for(let Z=1;Z<=se;Z++)Q+=D.hasZ?(0,P.BM)(B[Z-1],B[Z],p):(0,P.E8)([B[Z-1][0],B[Z-1][1]],[B[Z][0],B[Z][1]],!1)}return Q+=D.hasZ?(0,P.BM)(ie,[Ne.x,Ne.y,Ne.z],p):(0,P.E8)(ie,[Ne.x,Ne.y],!1),{partId:N,segmentId:o,coordinate:Ne,distance:Math.sqrt(h),distanceAlong:Q}}(D,f)??null;default:return null}}},35154:(Oe,xe,_)=>{_.d(xe,{d:()=>m});var P=_(55279),I=_(42686),g=_(59118);function $(a,Y){if(1===Y.length){if((0,I.o)(Y[0]))return(0,g.t)(a,Y[0],-1);if((0,I.q)(Y[0]))return(0,g.t)(a,Y[0].toArray(),-1)}return(0,g.t)(a,Y,-1)}function m(a,Y){a.stdev=function(k,s){return Y(k,s,(J,V,R)=>$("stdev",R))},a.variance=function(k,s){return Y(k,s,(J,V,R)=>$("variance",R))},a.average=function(k,s){return Y(k,s,(J,V,R)=>$("mean",R))},a.mean=function(k,s){return Y(k,s,(J,V,R)=>$("mean",R))},a.sum=function(k,s){return Y(k,s,(J,V,R)=>$("sum",R))},a.min=function(k,s){return Y(k,s,(J,V,R)=>$("min",R))},a.max=function(k,s){return Y(k,s,(J,V,R)=>$("max",R))},a.distinct=function(k,s){return Y(k,s,(J,V,R)=>$("distinct",R))},a.count=function(k,s){return Y(k,s,(J,V,R)=>{if((0,I.H)(R,1,1,k,s),(0,I.o)(R[0])||(0,I.c)(R[0]))return R[0].length;if((0,I.q)(R[0]))return R[0].length();throw new P.D$(k,P.TX.InvalidParameter,s)})}}},61828:(Oe,xe,_)=>{_.d(xe,{d:()=>bt});var P=_(45369),I=_(84462),g=_(53787),$=_(55279),m=_(42686),a=_(7981),Y=_(11432);const k=w=>(y,A,T)=>(T=T||14,+w(y,A).toFixed(T)),s=(w,y)=>w+y,V=(w,y)=>w*y,R=(w,y)=>w/y,ee=(w,y,A)=>k(s)(w,y,A),X=(w,y,A)=>k(V)(w,y,A),q=(w,y,A)=>k(R)(w,y,A),D=360,f=400,l=2*Math.PI,p=3600,o=60,E=60,N=180*p/Math.PI,x=D*o*E,S=90*p,O=180*p,ae="\u1d4d",ie="\xb0";function me(w){if(!1===(0,m.c)(w))throw new $.D$(null,$.TX.InvalidParameter,null);return w}function Ne(w,y){const A=10**y;return Math.round(w*A)/A}function W(w){const y=parseFloat(w.toString().replace(Math.trunc(w).toString(),"0"))*Math.sign(w);return w<0?{fraction:y,integer:Math.ceil(w)}:{fraction:y,integer:Math.floor(w)}}var Q,j,B,se,w;function Z(w,y){switch(w){case Q.north:return"SHORT"===y?"N":"North";case Q.east:return"SHORT"===y?"E":"East";case Q.south:return"SHORT"===y?"S":"South";case Q.west:return"SHORT"===y?"W":"West"}}function he(w,y){return w-Math.floor(w/y)*y}function Ce(w){switch(w){case j.truncated_degrees:case j.decimal_degrees:return D;case j.radians:return l;case j.gradians:return f;case j.seconds:return x;case j.fractional_degree_minutes:return o;case j.fractional_minute_seconds:return E;default:throw new $.D$(null,$.TX.LogicError,null,{reason:"unsupported evaluations"})}}function Se(w){switch(w.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return B.north_azimuth;case"POLAR":return B.polar;case"QUADRANT":return B.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return B.south_azimuth}throw new $.D$(null,$.TX.LogicError,null,{reason:"unsupported directionType"})}function Ke(w){switch(w.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return j.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return j.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return j.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return j.gradians}throw new $.D$(null,$.TX.LogicError,null,{reason:"unsupported units"})}(w=Q||(Q={}))[w.north=0]="north",w[w.east=1]="east",w[w.south=2]="south",w[w.west=3]="west",function(w){w[w.decimal_degrees=1]="decimal_degrees",w[w.seconds=2]="seconds",w[w.degrees_minutes_seconds=3]="degrees_minutes_seconds",w[w.radians=4]="radians",w[w.gradians=5]="gradians",w[w.truncated_degrees=6]="truncated_degrees",w[w.fractional_degree_minutes=7]="fractional_degree_minutes",w[w.fractional_minute_seconds=8]="fractional_minute_seconds"}(j||(j={})),function(w){w[w.north_azimuth=1]="north_azimuth",w[w.polar=2]="polar",w[w.quadrant=3]="quadrant",w[w.south_azimuth=4]="south_azimuth"}(B||(B={})),function(w){w[w.meridian=0]="meridian",w[w.direction=1]="direction"}(se||(se={}));class ge{constructor(y,A,T){this.m_degrees=y,this.m_minutes=A,this.m_seconds=T}getField(y){switch(y){case j.decimal_degrees:case j.truncated_degrees:return this.m_degrees;case j.fractional_degree_minutes:return this.m_minutes;case j.seconds:case j.fractional_minute_seconds:return this.m_seconds;default:throw new $.D$(null,$.TX.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(y){const A=W(y).fraction;let T=W(y).integer;const U=Math.floor(T/p);T-=U*p;const K=Math.floor(T/E);return T-=K*E,new ge(U,K,T+A)}static numberToDms(y){const A=W(y).fraction,T=W(y).integer,U=X(W(100*A).fraction,100),K=W(100*A).integer;return new ge(T,K,U)}format(y,A){let T=Ne(this.m_seconds,A),U=this.m_minutes,K=this.m_degrees;if(y===j.seconds||y===j.fractional_minute_seconds)E<=T&&(T-=E,++U),o<=U&&(U=0,++K),D<=K&&(K=0);else if(y===j.fractional_degree_minutes)T=0,U=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,K=this.m_degrees,o<=U&&(U=0,++K),D<=K&&(K=0);else if(y===j.decimal_degrees||y===j.truncated_degrees){const v=q(this.m_seconds,p),H=q(this.m_minutes,o);K=Math.round(this.m_degrees+H+v),U=0,T=0}return new ge(K,U,T)}static dmsToSeconds(y,A,T){return y*p+A*E+T}}class Le{constructor(y,A,T){this.meridian=y,this.angle=A,this.direction=T}fetchAzimuth(y){return y===se.meridian?this.meridian:this.direction}}class ve{constructor(y){this._angle=y}static createFromAngleAndDirection(y,A){return new ve(new Re(ve._convertDirectionFormat(y.extractAngularUnits(j.seconds),A,B.north_azimuth)))}getAngle(y){const A=this._angle.extractAngularUnits(j.seconds);switch(y){case B.north_azimuth:case B.south_azimuth:case B.polar:return new Re(ve._convertDirectionFormat(A,B.north_azimuth,y));case B.quadrant:{const T=ve.secondsNorthAzimuthToQuadrant(A);return new Re(T.angle)}}}getMeridian(y){const A=this._angle.extractAngularUnits(j.seconds);switch(y){case B.north_azimuth:return Q.north;case B.south_azimuth:return Q.south;case B.polar:return Q.east;case B.quadrant:return ve.secondsNorthAzimuthToQuadrant(A).meridian}}getDirection(y){const A=this._angle.extractAngularUnits(j.seconds);switch(y){case B.north_azimuth:return Q.east;case B.south_azimuth:return Q.west;case B.polar:return Q.north;case B.quadrant:return ve.secondsNorthAzimuthToQuadrant(A).direction}}static secondsNorthAzimuthToQuadrant(y){const A=y<=S||y>=972e3?Q.north:Q.south,T=A===Q.north?Math.min(x-y,y):Math.abs(y-O);return new Le(A,T,y>O?Q.west:Q.east)}static createFromAngleMeridianAndDirection(y,A,T){return new ve(new Re(ve.secondsQuadrantToNorthAzimuth(y.extractAngularUnits(j.seconds),A,T)))}static secondsQuadrantToNorthAzimuth(y,A,T){return A===Q.north?T===Q.east?y:x-y:T===Q.east?O-y:O+y}static _convertDirectionFormat(y,A,T){let U=0;switch(A){case B.north_azimuth:U=y;break;case B.polar:U=S-y;break;case B.quadrant:throw new $.D$(null,$.TX.LogicError,null,{reason:"unexpected evaluation"});case B.south_azimuth:U=y+O}let K=0;switch(T){case B.north_azimuth:K=U;break;case B.polar:K=S-U;break;case B.quadrant:throw new $.D$(null,$.TX.LogicError,null,{reason:"unexpected evaluation"});case B.south_azimuth:K=U-O}return K=function G(w,y){return w%y}(K,x),K<0?x+K:K}}function st(w,y,A){let T=null;switch(y){case j.decimal_degrees:T=X(w,p);break;case j.seconds:T=w;break;case j.gradians:T=X(w,3240);break;case j.radians:T=X(w,N);break;default:throw new $.D$(null,$.TX.LogicError,null,{reason:"unexpected evaluation"})}switch(A){case j.decimal_degrees:return q(T,p);case j.seconds:return T;case j.gradians:return q(T,3240);case j.radians:return T/N;default:throw new $.D$(null,$.TX.LogicError,null,{reason:"unexpected evaluation"})}}class Re{constructor(y){this._seconds=y}static createFromAngleAndUnits(y,A){return new Re(st(y,A,j.seconds))}extractAngularUnits(y){return st(this._seconds,j.seconds,Je(y))}static createFromDegreesMinutesSeconds(y,A,T){return new Re(ee(ee(X(y,p),X(A,E)),T))}}function Je(w){switch((0,Y.Lw)(w),w){case j.decimal_degrees:case j.truncated_degrees:case j.degrees_minutes_seconds:return j.decimal_degrees;case j.gradians:return j.gradians;case j.fractional_degree_minutes:return j.fractional_degree_minutes;case j.radians:return j.radians;case j.seconds:case j.fractional_minute_seconds:return j.seconds}}class $e{constructor(y,A,T,U){this.view=y,this.angle=A,this.merdian=T,this.direction=U,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(y,A,T){return new $e(y,A.getAngle(T),A.getMeridian(T),A.getDirection(T))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return null===this._dms&&this._calculateDms(),this._dms}fetchFormattedDms(){return null===this._formattedDms&&this._calculateDms(),this._formattedDms}_calculateDms(){let y=null,A=j.truncated_degrees,T=0;for(let U=0;U<this.view.length;U++){const K=this.view[U];switch(K){case"m":y=xt(this.view,U,K),A=A===j.truncated_degrees?j.fractional_degree_minutes:A,U=y.newpos;continue;case"s":y=xt(this.view,U,K),A=j.fractional_minute_seconds,T=T<y.rounding?y.rounding:T,U=y.newpos;continue;default:continue}}this._dms=ge.secondsToDMS(this.angle.extractAngularUnits(j.seconds)),this._formattedDms=ge.secondsToDMS(this.angle.extractAngularUnits(j.seconds)).format(A,T)}}function be(w,y,A,T,U){let K=null;switch(y){case j.decimal_degrees:case j.radians:case j.gradians:return K=he(Ne(w.extractAngularUnits(y),T),Ce(y)),K.toFixed(T).padStart(A+T+(T>0?1:0),"0");case j.truncated_degrees:case j.fractional_degree_minutes:return K=he(U.fetchFormattedDms().getField(y),Ce(y)),K.toFixed(T).padStart(A+T+(T>0?1:0),"0");case j.fractional_minute_seconds:return K=he(Ne(U.fetchDms().getField(y),T),Ce(y)),K.toFixed(T).padStart(A+T+(T>0?1:0),"0");default:throw new $.D$(null,$.TX.LogicError,null,{reason:"unexpected evaluation"})}}function Ue(w){switch(w.toUpperCase().trim()){case"N":case"NORTH":return Q.north;case"E":case"EAST":return Q.east;case"S":case"SOUTH":return Q.south;case"W":case"WEST":return Q.west}return null}function Qe(w){const y=parseFloat(w);if((0,m.b)(y)){if(isNaN(y))throw new $.D$(null,$.TX.LogicError,null,{reason:"invalid conversion"});return y}throw new $.D$(null,$.TX.LogicError,null,{reason:"invalid conversion"})}function yt(w,y,A){const T=A===B.quadrant;let U=null,K=null,v=0,H=0,ne=0;if(T){if(w.length<2)throw new $.D$(null,$.TX.LogicError,null,{reason:"conversion error"});ne=1;const fe=function Pe(w){switch((0,m.g)(w)){case 1:return{first:Q.north,second:Q.east};case 2:return{first:Q.south,second:Q.east};case 3:return{first:Q.south,second:Q.west};case 4:return{first:Q.north,second:Q.west}}return null}((0,m.j)(w[w.length-1]));if(fe?(U=fe.first,K=fe.second):(v=1,U=Ue((0,m.j)(w[0])),K=Ue((0,m.j)(w[w.length-1]))),null===U||null===K)throw new $.D$(null,$.TX.LogicError,null,{reason:"invalid conversion"})}switch(y){case j.decimal_degrees:case j.radians:case j.gradians:if(0===w.length)throw new $.D$(null,$.TX.LogicError,null,{reason:"invalid conversion"});return T?ve.createFromAngleMeridianAndDirection(Re.createFromAngleAndUnits(Qe(w[v]),Je(y)),U,K):ve.createFromAngleAndDirection(Re.createFromAngleAndUnits(Qe(w[v]),Je(y)),A);case j.degrees_minutes_seconds:if(H=w.length-ne-v,3===H){const fe=Re.createFromDegreesMinutesSeconds(Qe(w[v]),Qe(w[v+1]),Qe(w[v+2]));return T?ve.createFromAngleMeridianAndDirection(fe,U,K):ve.createFromAngleAndDirection(fe,A)}if(1===H){const fe=Qe(w[v]),Ie=ge.numberToDms(fe),Be=Re.createFromDegreesMinutesSeconds(Ie.m_degrees,Ie.m_minutes,Ie.m_seconds);return T?ve.createFromAngleMeridianAndDirection(Be,U,K):ve.createFromAngleAndDirection(Be,A)}}throw new $.D$(null,$.TX.LogicError,null,{reason:"invalid conversion"})}function xt(w,y,A){const T={padding:0,rounding:0,newpos:y};let U=!1;for(;y<w.length;){const K=w[y];if(K===A)U?T.rounding++:T.padding++,y++;else{if("."!==K)break;U=!0,y++}}return T.newpos=y-1,T}function vt(w,y,A){const T={escaped:"",newpos:y};for(y++;y<w.length;){const U=w[y];if(y++,"]"===U)break;T.escaped+=U}return T.newpos=y-1,T}function Bt(w,y,A){if(!(y instanceof g.A))throw new $.D$(null,$.TX.InvalidParameter,null);if(!1===y.hasField("directionType"))throw new $.D$(null,$.TX.LogicError,null,{reason:"missing directionType"});if(!1===y.hasField("angleType"))throw new $.D$(null,$.TX.LogicError,null,{reason:"missing angleType"});const T=Se(me(y.field("directiontype"))),U=function Ft(w,y,A){if((0,m.b)(w))return function Me(w,y,A){if(A===B.quadrant)throw new $.D$(null,$.TX.LogicError,null,{reason:"conversion error"});if(y===j.degrees_minutes_seconds){const T=ge.numberToDms(w);return ve.createFromAngleAndDirection(Re.createFromDegreesMinutesSeconds(T.m_degrees,T.m_minutes,T.m_seconds),A)}return ve.createFromAngleAndDirection(Re.createFromAngleAndUnits(w,Je(y)),A)}((0,m.g)(w),y,A);if((0,m.c)(w))return yt(function It(w){const y=new Set([" ","-","/","'",'"',"\\","^",ie,ae,"\t","\r","\n","*"]);let A="";for(let T=0;T<w.length;T++){const U=w.charAt(T);y.has(U)?A+="RRSPLITRRSPLITRR":A+=U}return A.split("RRSPLITRRSPLITRR").filter(T=>""!==T)}(w),y,A);if((0,m.o)(w))return yt(w,y,A);if((0,m.q)(w))return yt(w.toArray(),y,A);throw new $.D$(null,$.TX.LogicError,null,{reason:"conversion error"})}(w,Ke(me(y.field("angletype"))),T);if(!(A instanceof g.A))throw new $.D$(null,$.TX.InvalidParameter,null);if(!1===A.hasField("directionType"))throw new $.D$(null,$.TX.LogicError,null,{reason:"missing directionType"});if(!1===A.hasField("outputType"))throw new $.D$(null,$.TX.LogicError,null,{reason:"missing angleType"});const K=Se(me(A.field("directiontype"))),v=A.hasField("angleType")?Ke(me(A.field("angletype"))):null,H=me(A.field("outputType")).toUpperCase().trim();if(!K||!H)throw new $.D$(null,$.TX.LogicError,null,{reason:"conversion error"});if(!(v||"TEXT"===H&&A.hasField("format")))throw new $.D$(null,$.TX.LogicError,null,{reason:"invalid unit"});switch(H){case"VALUE":return K===B.quadrant||v===j.degrees_minutes_seconds?function wt(w,y,A){const T=w.getAngle(y);if(y===B.quadrant&&A===j.degrees_minutes_seconds){const U=ge.secondsToDMS(T.extractAngularUnits(j.seconds));return[Z(w.getMeridian(y),"SHORT"),U.m_degrees,U.m_minutes,U.m_seconds,Z(w.getDirection(y),"SHORT")]}if(A===j.degrees_minutes_seconds){const U=ge.secondsToDMS(T.extractAngularUnits(j.seconds));return[U.m_degrees,U.m_minutes,U.m_seconds]}return y===B.quadrant?[Z(w.getMeridian(y),"SHORT"),T.extractAngularUnits(A),Z(w.getDirection(y),"SHORT")]:[T.extractAngularUnits(A)]}(U,K,v):function At(w,y,A){const T=Je(A);if(T&&A!==j.degrees_minutes_seconds)return w.getAngle(y).extractAngularUnits(T);throw new $.D$(null,$.TX.LogicError,null,{reason:"conversion error"})}(U,K,v);case"TEXT":{let ne="";return A.hasField("format")&&(ne=(0,m.j)(A.field("format"))),null!==ne&&""!==ne||(ne=function pe(w,y){let A="";switch(w){case j.decimal_degrees:A=y===B.quadrant?"DD.DD"+ie:"DDD.DD"+ie;break;case j.degrees_minutes_seconds:A=y===B.quadrant?"dd"+ie+" mm' ss\"":"ddd"+ie+" mm' ss.ss\"";break;case j.radians:A="R.RR";break;case j.gradians:A="GGG.GG"+ae;break;default:throw new $.D$(null,$.TX.LogicError,null,{reason:"conversion error"})}return y===B.quadrant&&(A="p "+A+" b"),A}(v,K)),function qe(w,y,A){let T="",U=null,K=null;const v=$e.createFromStringAndBearing(y,w,A),H={D:j.decimal_degrees,d:j.truncated_degrees,m:j.fractional_degree_minutes,s:j.fractional_minute_seconds,R:j.radians,G:j.gradians};for(let ne=0;ne<y.length;ne++){const fe=y[ne];switch(fe){case"[":U=vt(y,ne),T+=U.escaped,ne=U.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":U=xt(y,ne,fe),K=w.getAngle(A),T+=be(K,H[fe],U.padding,U.rounding,v),ne=U.newpos;continue;case"P":case"p":T+=Z(v.fetchMeridian(),"p"===fe?"SHORT":"LONG");continue;case"B":case"b":T+=Z(v.fetchDirection(),"b"===fe?"SHORT":"LONG");continue;default:T+=fe}}return T}(U,ne,K)}default:throw new $.D$(null,$.TX.InvalidParameter,null)}}const et=2654435761,tt=2246822519,we=3266489917,Tt=668265263,ke=374761393;function Ze(w){const y=[];for(let A=0,T=w.length;A<T;A++){let U=w.charCodeAt(A);U<128?y.push(U):U<2048?y.push(192|U>>6,128|63&U):U<55296||U>=57344?y.push(224|U>>12,128|U>>6&63,128|63&U):(A++,U=65536+((1023&U)<<10|1023&w.charCodeAt(A)),y.push(240|U>>18,128|U>>12&63,128|U>>6&63,128|63&U))}return new Uint8Array(y)}class He{constructor(y){this._seed=y,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(y){const A=[];for(const T of y)isNaN(T)?A.push("NaN"):A.push(T===1/0?"Infinity":T===-1/0?"-Infinity":0===T?"0":T.toString(16));this.update(Ze(A.join("")))}updateIntArray(y){const A=Int32Array.from(y);this.update(new Uint8Array(A.buffer))}updateUint8Array(y){this.update(Uint8Array.from(y))}updateWithString(y){return this.update(Ze(y))}update(y){return this._bufs.push(y),this._totallen+=y.length,this}digest(){const y=new Uint8Array(this._totallen);let A=0;for(const T of this._bufs)y.set(T,A),A+=T.length;return this.init(),this._xxHash32(y,this._seed)}_xxHash32(y,A=0){const T=y;let U=A+ke&4294967295,K=0;if(T.length>=16){const H=[A+et+tt&4294967295,A+tt&4294967295,A+0&4294967295,A-et&4294967295],ne=y,fe=ne.length-16;let Ie=0;for(K=0;(4294967280&K)<=fe;K+=4){let le=H[Ie]+((ne[K]+(ne[K+1]<<8))*tt+((ne[K+2]+(ne[K+3]<<8))*tt<<16))&4294967295;le=le<<13|le>>>19,H[Ie]=(65535&le)*et+((le>>>16)*et<<16)&4294967295,Ie=Ie+1&3}U=(H[0]<<1|H[0]>>>31)+(H[1]<<7|H[1]>>>25)+(H[2]<<12|H[2]>>>20)+(H[3]<<18|H[3]>>>14)&4294967295}U=U+y.length&4294967295;const v=y.length-4;for(;K<=v;K+=4)U=U+((T[K]+(T[K+1]<<8))*we+((T[K+2]+(T[K+3]<<8))*we<<16))&4294967295,U=U<<17|U>>>15,U=(65535&U)*Tt+((U>>>16)*Tt<<16)&4294967295;for(;K<T.length;++K)U+=T[K]*ke,U=U<<11|U>>>21,U=(65535&U)*et+((U>>>16)*et<<16)&4294967295;return U^=U>>>15,U=((65535&U)*tt&4294967295)+((U>>>16)*tt<<16),U^=U>>>13,U=((65535&U)*we&4294967295)+((U>>>16)*we<<16),U^=U>>>16,U<0?U+4294967296:U}}var ot=_(45272),it=_(43085),Dt=_(28067),Ct=_(21870),ct=_(1749),Ot=_(55861),nt=_(93615),Nt=_(32034),dt=_(73874);function ft(w,y){if(!w||!y)return w===y;if(w.x===y.x&&w.y===y.y){if(w.hasZ){if(w.z!==y.z)return!1}else if(y.hasZ)return!1;if(w.hasM){if(w.m!==y.m)return!1}else if(y.hasM)return!1;return!0}return!1}function Ge(w,y,A){if(null!==w)if((0,m.o)(w)){if(y.updateUint8Array([61]),A.map.has(w)){const T=A.map.get(w);y.updateIntArray([61237541^T])}else{A.map.set(w,A.currentLength++);for(const T of w)Ge(T,y,A);A.map.delete(w),A.currentLength--}y.updateUint8Array([199])}else if((0,m.q)(w)){if(y.updateUint8Array([61]),A.map.has(w)){const T=A.map.get(w);y.updateIntArray([61237541^T])}else{A.map.set(w,A.currentLength++);for(const T of w.toArray())Ge(T,y,A);A.map.delete(w),A.currentLength--}y.updateUint8Array([199])}else{if((0,m.k)(w))return y.updateIntArray([w.toNumber()]),void y.updateUint8Array([241]);if((0,m.m)(w))return y.updateIntArray([w.toNumber()]),void y.updateIntArray([257]);if((0,m.n)(w))return y.updateIntArray([w.toNumber()]),void y.updateIntArray([263]);if((0,m.c)(w))return y.updateIntArray([w.length]),y.updateWithString(w),void y.updateUint8Array([41]);if((0,m.a)(w))y.updateUint8Array([!0===w?1:0,113]);else{if((0,m.b)(w))return y.updateFloatArray([w]),void y.updateUint8Array([173]);if(w instanceof I.A)throw new $.D$(A.context,$.TX.UnsupportedHashType,A.node);if(w instanceof P.A)throw new $.D$(A.context,$.TX.UnsupportedHashType,A.node);if(!(w instanceof g.A)){if((0,m.r)(w))throw new $.D$(A.context,$.TX.UnsupportedHashType,A.node);if(w instanceof ct.A)return y.updateIntArray([3833836621]),y.updateIntArray([0]),y.updateFloatArray([w.x]),y.updateIntArray([1]),y.updateFloatArray([w.y]),w.hasZ&&(y.updateIntArray([2]),y.updateFloatArray([w.z])),w.hasM&&(y.updateIntArray([3]),y.updateFloatArray([w.m])),y.updateIntArray([3765347959]),void Ge(w.spatialReference.wkid,y,A);if(w instanceof Ot.A){y.updateIntArray([1266616829]);for(let T=0;T<w.rings.length;T++){const U=w.rings[T],K=[];let v=null,H=null;for(let ne=0;ne<U.length;ne++){const fe=w.getPoint(T,ne);if(0===ne)v=fe;else if(ft(H,fe))continue;H=fe,ne===U.length-1&&ft(v,fe)||K.push(fe)}y.updateIntArray([1397116793,K.length]);for(let ne=0;ne<K.length;ne++){const fe=K[ne];y.updateIntArray([3962308117,ne]),Ge(fe,y,A),y.updateIntArray([2716288009])}y.updateIntArray([2278822459])}return y.updateIntArray([3878477243]),void Ge(w.spatialReference.wkid,y,A)}if(w instanceof nt.A){y.updateIntArray([4106883559]);for(let T=0;T<w.paths.length;T++){const U=w.paths[T];y.updateIntArray([1397116793,U.length]);for(let K=0;K<U.length;K++)y.updateIntArray([3962308117,K]),Ge(w.getPoint(T,K),y,A),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}return y.updateIntArray([2568784753]),void Ge(w.spatialReference.wkid,y,A)}if(w instanceof Ct.A){y.updateIntArray([588535921,w.points.length]);for(let T=0;T<w.points.length;T++){const U=w.getPoint(T);y.updateIntArray([T]),Ge(U,y,A)}return y.updateIntArray([1700171621]),void Ge(w.spatialReference.wkid,y,A)}if(w instanceof Dt.A)return y.updateIntArray([3483648373]),y.updateIntArray([0]),y.updateFloatArray([w.xmax]),y.updateIntArray([1]),y.updateFloatArray([w.xmin]),y.updateIntArray([2]),y.updateFloatArray([w.ymax]),y.updateIntArray([3]),y.updateFloatArray([w.ymin]),w.hasZ&&(y.updateIntArray([4]),y.updateFloatArray([w.zmax]),y.updateIntArray([5]),y.updateFloatArray([w.zmin])),w.hasM&&(y.updateIntArray([6]),y.updateFloatArray([w.mmax]),y.updateIntArray([7]),y.updateFloatArray([w.mmin])),y.updateIntArray([3622027469]),void Ge(w.spatialReference.wkid,y,A);if(w instanceof Nt.A)return y.updateIntArray([14]),null!=w.wkid&&y.updateIntArray([w.wkid]),w.wkt&&y.updateWithString(w.wkt),void(w.wkt2&&y.updateWithString(w.wkt2));throw(0,m.i)(w)||(0,m.u)(w)||(0,m.s)(w),new $.D$(A.context,$.TX.UnsupportedHashType,A.node)}if(y.updateUint8Array([223]),A.map.has(w)){const T=A.map.get(w);y.updateIntArray([61237541^T])}else{A.map.set(w,A.currentLength++);for(const T of w.keys())y.updateIntArray([T.length]),y.updateWithString(T),y.updateUint8Array([251]),Ge(w.field(T),y,A),y.updateUint8Array([239]);A.map.delete(w),A.currentLength--}y.updateUint8Array([73])}}else y.updateUint8Array([0,139])}function bt(w,y){w.portal=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,1,1,A,T),new P.A((0,m.j)(v[0]))))},w.typeof=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,1,1,A,T);const H=(0,m.P)(v[0]);if("Unrecognized Type"===H)throw new $.D$(A,$.TX.UnrecognizedType,T);return H})},w.trim=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,1,1,A,T),(0,m.j)(v[0]).trim()))},w.tohex=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,1,1,A,T);const H=(0,m.g)(v[0]);return isNaN(H)?H:H.toString(16)})},w.upper=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,1,1,A,T),(0,m.j)(v[0]).toUpperCase()))},w.proper=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,1,2,A,T);let H=1;2===v.length&&"firstword"===(0,m.j)(v[1]).toLowerCase()&&(H=2);const ne=/\s/,fe=(0,m.j)(v[0]);let Ie="",Be=!0;for(let ut=0;ut<fe.length;ut++){let ce=fe[ut];ne.test(ce)?1===H&&(Be=!0):ce.toUpperCase()!==ce.toLowerCase()&&(Be?(ce=ce.toUpperCase(),Be=!1):ce=ce.toLowerCase()),Ie+=ce}return Ie})},w.lower=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,1,1,A,T),(0,m.j)(v[0]).toLowerCase()))},w.guid=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,0,1,A,T),v.length>0)switch((0,m.j)(v[0]).toLowerCase()){case"digits":return(0,it.lk)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,it.lk)();case"digits-hyphen-braces":return"{"+(0,it.lk)()+"}";case"digits-hyphen-parentheses":return"("+(0,it.lk)()+")"}return"{"+(0,it.lk)()+"}"})},w.standardizeguid=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,2,2,A,T);let H=(0,m.j)(v[0]);if(""===H||null===H)return"";const ne=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(H);if(!ne)return"";const fe=ne.groups;switch(H=fe.partA+"-"+fe.partB+"-"+fe.partC+"-"+fe.partD+"-"+fe.partE,(0,m.j)(v[1]).toLowerCase()){case"digits":return H.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return H;case"digits-hyphen-braces":return"{"+H+"}";case"digits-hyphen-parentheses":return"("+H+")"}return"{"+H+"}"})},w.console=function(A,T){return y(A,T,(U,K,v)=>(0===v.length||A.console((0,m.j)(1===v.length?v[0]:v)),m.B))},w.mid=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,2,3,A,T);let H=(0,m.g)(v[1]);if(isNaN(H))return"";if(H<0&&(H=0),2===v.length)return(0,m.j)(v[0]).substr(H);let ne=(0,m.g)(v[2]);return isNaN(ne)?"":(ne<0&&(ne=0),(0,m.j)(v[0]).substr(H,ne))})},w.find=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,2,3,A,T);let H=0;if(v.length>2){if(H=(0,m.g)((0,m.K)(v[2],0)),isNaN(H))return-1;H<0&&(H=0)}return(0,m.j)(v[1]).indexOf((0,m.j)(v[0]),H)})},w.left=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,2,2,A,T);let H=(0,m.g)(v[1]);return isNaN(H)?"":(H<0&&(H=0),(0,m.j)(v[0]).substr(0,H))})},w.right=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,2,2,A,T);let H=(0,m.g)(v[1]);return isNaN(H)?"":(H<0&&(H=0),(0,m.j)(v[0]).substr(-1*H,H))})},w.split=function(A,T){return y(A,T,(U,K,v)=>{let H;(0,m.H)(v,2,4,A,T);let ne=(0,m.g)((0,m.K)(v[2],-1));const fe=(0,m.h)((0,m.K)(v[3],!1));if(-1===ne||null===ne||!0===fe?H=(0,m.j)(v[0]).split((0,m.j)(v[1])):(isNaN(ne)&&(ne=-1),ne<-1&&(ne=-1),H=(0,m.j)(v[0]).split((0,m.j)(v[1]),ne)),!1===fe)return H;const Ie=[];for(let Be=0;Be<H.length&&!(-1!==ne&&Ie.length>=ne);Be++)""!==H[Be]&&void 0!==H[Be]&&Ie.push(H[Be]);return Ie})},w.text=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,1,2,A,T),(0,m.t)(v[0],v[1])))},w.concatenate=function(A,T){return y(A,T,(U,K,v)=>{const H=[];if(v.length<1)return"";if((0,m.o)(v[0])){const ne=(0,m.K)(v[2],"");for(let fe=0;fe<v[0].length;fe++)H[fe]=(0,m.t)(v[0][fe],ne);return H.join(v.length>1?v[1]:"")}if((0,m.q)(v[0])){const ne=(0,m.K)(v[2],"");for(let fe=0;fe<v[0].length();fe++)H[fe]=(0,m.t)(v[0].get(fe),ne);return H.join(v.length>1?v[1]:"")}for(let ne=0;ne<v.length;ne++)H[ne]=(0,m.t)(v[ne]);return H.join("")})},w.reverse=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),(0,m.o)(v[0])){const H=v[0].slice(0);return H.reverse(),H}if((0,m.q)(v[0])){const H=v[0].toArray().slice(0);return H.reverse(),H}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.replace=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,3,4,A,T);const H=(0,m.j)(v[0]),ne=(0,m.j)(v[1]),fe=(0,m.j)(v[2]);return 4!==v.length||(0,m.h)(v[3])?(0,m.T)(H,ne,fe):H.replace(ne,fe)})},w.schema=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.r)(v[0])){const H=(0,m.U)(v[0]);return H?g.A.convertObjectToArcadeDictionary(H,(0,m.N)(A)):null}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.subtypes=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),(0,m.r)(v[0])){const H=(0,m.V)(v[0]);return H?g.A.convertObjectToArcadeDictionary(H,(0,m.N)(A)):null}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.subtypecode=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),(0,m.r)(v[0])){const H=(0,m.V)(v[0]);if(!H)return null;if(H.subtypeField&&v[0].hasField(H.subtypeField)){const ne=v[0].field(H.subtypeField);for(const fe of H.subtypes)if(fe.code===ne)return fe.code;return null}return null}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.subtypename=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),(0,m.r)(v[0])){const H=(0,m.V)(v[0]);if(!H)return"";if(H.subtypeField&&v[0].hasField(H.subtypeField)){const ne=v[0].field(H.subtypeField);for(const fe of H.subtypes)if(fe.code===ne)return fe.name;return""}return""}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.gdbversion=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),(0,m.r)(v[0]))return v[0].gdbVersion();throw new $.D$(A,$.TX.InvalidParameter,T)})},w.domain=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,2,3,A,T),(0,m.r)(v[0])){const H=(0,m.W)(v[0],(0,m.j)(v[1]),void 0===v[2]?void 0:v[2]);return H&&H.domain?g.A.convertObjectToArcadeDictionary("coded-value"===H.domain.type||"codedValue"===H.domain.type?{type:"codedValue",name:H.domain.name,dataType:a.At[H.field.type],codedValues:H.domain.codedValues.map(ne=>({name:ne.name,code:ne.code}))}:{type:"range",name:H.domain.name,dataType:a.At[H.field.type],min:H.domain.minValue,max:H.domain.maxValue},(0,m.N)(A)):null}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.domainname=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,2,4,A,T),(0,m.r)(v[0]))return(0,m.X)(v[0],(0,m.j)(v[1]),v[2],void 0===v[3]?void 0:v[3]);throw new $.D$(A,$.TX.InvalidParameter,T)})},w.domaincode=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,2,4,A,T),(0,m.r)(v[0]))return(0,m.Y)(v[0],(0,m.j)(v[1]),v[2],void 0===v[3]?void 0:v[3]);throw new $.D$(A,$.TX.InvalidParameter,T)})},w.urlencode=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),null===v[0])return"";if(v[0]instanceof g.A){let H="";for(const ne of v[0].keys()){const fe=v[0].field(ne);""!==H&&(H+="&"),H+=null===fe?encodeURIComponent(ne)+"=":encodeURIComponent(ne)+"="+encodeURIComponent(fe)}return H}return encodeURIComponent((0,m.j)(v[0]))})},w.hash=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,1,1,A,T);const H=new He(0);return Ge(v[0],H,{context:A,node:T,map:new Map,currentLength:0}),H.digest()})},w.convertdirection=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,3,3,A,T),Bt(v[0],v[1],v[2])))},w.fromjson=function(A,T){return y(A,T,(U,K,v)=>{if((0,m.H)(v,1,1,A,T),!1===(0,m.c)(v[0]))throw new $.D$(A,$.TX.InvalidParameter,T);return g.A.convertJsonToArcade(JSON.parse((0,m.j)(v[0])),(0,m.N)(A))})},w.expects=function(A,T){return y(A,T,(U,K,v)=>{if(v.length<1)throw new $.D$(A,$.TX.WrongNumberOfParameters,T);return m.B})},w.tocharcode=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,1,2,A,T);const H=(0,m.g)((0,m.K)(v[1],0)),ne=(0,m.j)(v[0]);if(0===ne.length&&1===v.length)return null;if(ne.length<=H||H<0)throw new $.D$(A,$.TX.OutOfBounds,T);return ne.charCodeAt(H)})},w.tocodepoint=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,1,2,A,T);const H=(0,m.g)((0,m.K)(v[1],0)),ne=(0,m.j)(v[0]);if(0===ne.length&&1===v.length)return null;if(ne.length<=H||H<0)throw new $.D$(A,$.TX.OutOfBounds,T);return ne.codePointAt(H)})},w.fromcharcode=function(A,T){return y(A,T,(U,K,v)=>{if(v.length<1)throw new $.D$(A,$.TX.WrongNumberOfParameters,T);const H=v.map(ne=>Math.trunc((0,m.g)(ne))).filter(ne=>ne>=0&&ne<=65535);return 0===H.length?null:String.fromCharCode.apply(null,H)})},w.fromcodepoint=function(A,T){return y(A,T,(U,K,v)=>{if(v.length<1)throw new $.D$(A,$.TX.WrongNumberOfParameters,T);let H;try{H=v.map(ne=>Math.trunc((0,m.g)(ne))).filter(ne=>ne<=1114111&&ne>>>0===ne)}catch{return null}return 0===H.length?null:String.fromCodePoint.apply(null,H)})},w.getuser=function(A,T){return y(A,T,(U,K,v)=>{(0,m.H)(v,0,2,A,T);let H=(0,m.K)(v[1],"");if(H=!0===H||!1===H?"":(0,m.j)(H),null!==H&&""!==H)return null;if(0===v.length||v[0]instanceof P.A){let ne=null;if(ne=A.services?.portal?A.services.portal:dt.A.getDefault(),v.length>0&&!function St(w,y){return!!w&&(0,ot.ut)(w,y?.restUrl||"")}(v[0].field("url"),ne)||!ne)return null;if(""===H){const fe=function Et(w){return"loaded"===w.loadStatus&&w.user?.sourceJSON?w.user.sourceJSON:null}(ne);if(fe){const Ie=JSON.parse(JSON.stringify(fe));for(const Be of["lastLogin","created","modified"])null!=Ie[Be]&&(Ie[Be]=new Date(Ie[Be]));return g.A.convertObjectToArcadeDictionary(Ie,(0,m.N)(A))}}return null}throw new $.D$(A,$.TX.InvalidParameter,T)})},w.getenvironment=function(A,T){return y(A,T,(U,K,v)=>((0,m.H)(v,0,0,A,T),g.A.convertObjectToArcadeDictionary((0,m.Z)((0,m.N)(A),A.spatialReference),(0,m.N)(A),!0)))}}},63829:(Oe,xe,_)=>{_.d(xe,{$w:()=>q,C0:()=>D,WC:()=>Y,cj:()=>V,cm:()=>ue,jR:()=>J,je:()=>R,qz:()=>ee});const P={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},I={functionDefinitions:new Map,constantDefinitions:new Map},g={functionDefinitions:new Map,constantDefinitions:new Map};for(const l of["pi","infinity"])g.constantDefinitions.set(l,{type:"constant"}),I.constantDefinitions.set(l,{type:"constant"});g.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),I.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const l in P){const p=P[l];g.functionDefinitions.set(l,{overloads:[{type:"function",parametersInfo:{min:p.min,max:p.max}}]}),I.functionDefinitions.set(l,{overloads:[{type:"function",parametersInfo:{min:p.min,max:p.max}}]})}const $=new Set(["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem","getfeaturesetinfo","filterbysubtypecode","knowledgegraphbyportalitem","querygraph"]),m=new Set(["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","nearestvertex","nearestcoordinate","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart","pointtocoordinate","distancetocoordinate","measuretocoordinate"]);function a(l){return"string"==typeof l||l instanceof String}function Y(l,p){const h="sync"===p?I:g;h.functionDefinitions.has(l.name.toLowerCase())?h.functionDefinitions.get(l.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:l.min,max:l.max}}):h.functionDefinitions.set(l.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:l.min,max:l.max}}]})}function k(l,p){if(l)for(const h of l)s(h,p)}function s(l,p){if(l&&!1!==p(l))switch(l.type){case"ImportDeclaration":k(l.specifiers,p),s(l.source,p);break;case"ExportNamedDeclaration":s(l.declaration,p);break;case"ArrayExpression":k(l.elements,p);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":s(l.left,p),s(l.right,p);break;case"BlockStatement":case"Program":k(l.body,p);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":s(l.callee,p),k(l.arguments,p);break;case"ExpressionStatement":s(l.expression,p);break;case"ForInStatement":s(l.left,p),s(l.right,p),s(l.body,p);break;case"ForStatement":s(l.init,p),s(l.test,p),s(l.update,p),s(l.body,p);break;case"WhileStatement":s(l.test,p),s(l.body,p);break;case"FunctionDeclaration":s(l.id,p),k(l.params,p),s(l.body,p);break;case"IfStatement":s(l.test,p),s(l.consequent,p),s(l.alternate,p);break;case"MemberExpression":s(l.object,p),s(l.property,p);break;case"ObjectExpression":k(l.properties,p);break;case"Property":s(l.key,p),s(l.value,p);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":s(l.argument,p);break;case"VariableDeclaration":k(l.declarations,p);break;case"VariableDeclarator":s(l.id,p),s(l.init,p);break;case"TemplateLiteral":k(l.expressions,p),k(l.quasis,p)}}function J(l,p){let h=!1;const o=p.toLowerCase();return s(l,E=>!h&&("Identifier"===E.type&&E.name&&E.name.toLowerCase()===o&&(h=!0),!0)),h}function V(l){const p=[];return s(l,h=>("ImportDeclaration"===h.type&&h.source&&h.source.value&&p.push({libname:h.specifiers[0].local.name.toLowerCase(),source:h.source.value}),!0)),p}function R(l,p){let h=!1;const o=p.toLowerCase();return s(l,E=>!(h||"CallExpression"===E.type&&"Identifier"===E.callee.type&&E.callee.name&&E.callee.name.toLowerCase()===o&&(h=!0,1))),h}function ee(l){const p=[];return s(l,h=>"MemberExpression"!==h.type||"Identifier"!==h.object.type||(!1===h.computed&&h.object&&h.object.name&&h.property&&"Identifier"===h.property.type&&h.property.name?p.push(h.object.name.toLowerCase()+"."+h.property.name.toLowerCase()):h.object&&h.object.name&&h.property&&"Literal"===h.property.type&&"string"==typeof h.property.value&&p.push(h.object.name.toLowerCase()+"."+h.property.value?.toString().toLowerCase()),!1)),p}function ue(l){const p=[];return s(l,h=>{if("CallExpression"===h.type){if("Identifier"===h.callee.type&&"expects"===h.callee.name.toLowerCase()){let o="";for(let E=0;E<(h.arguments||[]).length;E++)0===E?"Identifier"===h.arguments[E].type&&(o=h.arguments[E].name.toLowerCase()):o&&"Literal"===h.arguments[E].type&&a(h.arguments[E].value)&&p.push(o+"."+h.arguments[E].value.toLowerCase());return!1}if("Identifier"===h.callee.type&&["domainname","domaincode","domain","haskey"].includes(h.callee.name.toLowerCase())&&h.arguments.length>=2){let o="";return"Identifier"===h.arguments[0].type&&(o=h.arguments[0].name.toLowerCase()),o&&"Literal"===h.arguments[1].type&&a(h.arguments[1].value)&&p.push(o+"."+h.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==h.type||"Identifier"!==h.object.type||(!1===h.computed&&h.object&&h.object.name&&h.property&&"Identifier"===h.property.type&&h.property.name?p.push(h.object.name.toLowerCase()+"."+h.property.name.toLowerCase()):h.object&&h.object.name&&h.property&&"Literal"===h.property.type&&"string"==typeof h.property.value&&p.push(h.object.name.toLowerCase()+"."+h.property.value?.toString().toLowerCase()),!1)}),p}function q(l){const p=[];return s(l,h=>("CallExpression"===h.type&&"Identifier"===h.callee.type&&p.push(h.callee.name.toLowerCase()),!0)),p}function D(l,p=[]){let h=null;if(void 0===l.usesFeatureSet){null===h&&(h=q(l)),l.usesFeatureSet=!1;for(let o=0;o<h.length;o++)$.has(h[o])&&(l.usesFeatureSet=!0,l.isAsync=!0);if(!1===l.usesFeatureSet&&p&&p.length>0)for(const o of p)if(J(l,o)){l.usesFeatureSet=!0,l.isAsync=!0;break}}if(void 0===l.usesModules&&(l.usesModules=!1,V(l).length>0&&(l.usesModules=!0)),void 0===l.usesGeometry){l.usesGeometry=!1,null===h&&(h=q(l));for(let o=0;o<h.length;o++)m.has(h[o])&&(l.usesGeometry=!0)}}},78464:(Oe,xe,_)=>{_.d(xe,{A:()=>k});var P=_(10467),I=_(59312),g=_(55279),$=_(42970),m=_(42686),a=_(56492);const k=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:function Y(s){function J(f,l,p){if(f instanceof $.A)return f.toArray();if((0,m.o)(f))return f;throw new g.D$(l,g.TX.InvalidParameter,p)}function V(f,l){const p=f.length,h=Math.floor(p/2);return 0===p?[]:1===p?[f[0]]:function R(f,l,p){const h=[];for(;f.length>0||l.length>0;)if(f.length>0&&l.length>0){let o=p(f[0],l[0]);isNaN(o)&&(o=0),o<=0?(h.push(f[0]),f=f.slice(1)):(h.push(l[0]),l=l.slice(1))}else f.length>0?(h.push(f[0]),f=f.slice(1)):l.length>0&&(h.push(l[0]),l=l.slice(1));return h}(V(f.slice(0,h),l),V(f.slice(h,p),l),l)}function ee(f,l){return ue.apply(this,arguments)}function ue(){return(ue=(0,P.A)(function*(f,l){const p=f.length,h=Math.floor(p/2);if(0===p)return[];if(1===p)return[f[0]];const o=[yield ee(f.slice(0,h),l),yield ee(f.slice(h,p),l)];return X(o[0],o[1],l,[])})).apply(this,arguments)}function X(f,l,p,h){return q.apply(this,arguments)}function q(){return(q=(0,P.A)(function*(f,l,p,h){const o=h;if(f.length>0||l.length>0){if(f.length>0&&l.length>0){let E=yield p(f[0],l[0]);return isNaN(E)&&(E=1),E<=0?(o.push(f[0]),f=f.slice(1)):(o.push(l[0]),l=l.slice(1)),X(f,l,p,h)}return f.length>0?(o.push(f[0]),X(f=f.slice(1),l,p,h)):(o.push(l[0]),X(f,l=l.slice(1),p,h))}return h})).apply(this,arguments)}function D(f,l,p,h){(0,m.H)(p,1,2,f,l);let o=p[0];if((0,m.q)(o)&&(o=o.toArray()),!1===(0,m.o)(o))throw new g.D$(f,g.TX.InvalidParameter,l);if(p.length>1){if(!1===(0,m.i)(p[1]))throw new g.D$(f,g.TX.InvalidParameter,l);let O=o;const z=p[1].createFunction(f);return h?ee(O,z):(O=V(O,(ae,ie)=>z(ae,ie)),O)}let E=o;if(0===E.length)return[];const N={};for(let O=0;O<E.length;O++){const z=(0,m.P)(E[O]);""!==z&&(N[z]=!0)}if(!0===N.Array||!0===N.Dictionary||!0===N.Feature||!0===N.Point||!0===N.Polygon||!0===N.Polyline||!0===N.Multipoint||!0===N.Extent||!0===N.Function)return E.slice(0);let x=0,S="";for(const O in N)x++,S=O;return E=x>1||"String"===S?V(E,(O,z)=>{if(null==O||O===m.B)return null==z||z===m.B?0:1;if(null==z||z===m.B)return-1;const ae=(0,m.j)(O),ie=(0,m.j)(z);return ae<ie?-1:ae===ie?0:1}):"Number"===S?V(E,(O,z)=>O-z):"Boolean"===S?V(E,(O,z)=>O===z?0:z?-1:1):"Date"===S?V(E,(O,z)=>z-O):E.slice(0),E}s.functions.array=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,0,2,f,l),0===o.length)return[];if(1===o.length&&null===o[0])return[];if((0,m.o)(o[0])){if(2===o.length&&!1===(0,m.a)(o[1]))throw new g.D$(f,g.TX.InvalidParameter,l);return!0===(0,m.K)(o[1],!1)?(0,I.G)(o[0]):o[0].slice(0)}if((0,m.q)(o[0])){if(2===o.length&&!1===(0,m.a)(o[1]))throw new g.D$(f,g.TX.InvalidParameter,l);return!0===(0,m.K)(o[1],!1)?(0,I.G)(o[0]):o[0].toArray().slice(0)}const E=(0,m.g)(o[0]);if(isNaN(E)||!1===(0,m.O)(E))throw new g.D$(f,g.TX.InvalidParameter,l);const N=(0,m.K)(o[1],null),x=new Array(E);return x.fill(N),x})},s.functions.front=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,1,1,f,l),(0,m.q)(o[0])){if(o[0].length()<=0)throw new g.D$(f,g.TX.OutOfBounds,l);return o[0].get(0)}if((0,m.o)(o[0])){if(o[0].length<=0)throw new g.D$(f,g.TX.OutOfBounds,l);return o[0][0]}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.back=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,1,1,f,l),(0,m.q)(o[0])){if(o[0].length()<=0)throw new g.D$(f,g.TX.OutOfBounds,l);return o[0].get(o[0].length()-1)}if((0,m.o)(o[0])){if(o[0].length<=0)throw new g.D$(f,g.TX.OutOfBounds,l);return o[0][o[0].length-1]}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.push=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,1,2,f,l),(0,m.o)(o[0]))return o[0][o[0].length]=o[1],o[0].length;throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.pop=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,1,1,f,l),(0,m.o)(o[0])){if(o[0].length<=0)throw new g.D$(f,g.TX.OutOfBounds,l);const E=o[0][o[0].length-1];return o[0].length=o[0].length-1,E}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.erase=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,2,2,f,l),(0,m.o)(o[0])){let E=(0,m.g)(o[1]);if(isNaN(E)||!1===(0,m.O)(E))throw new g.D$(f,g.TX.InvalidParameter,l);const N=o[0];if(N.length<=0)throw new g.D$(f,g.TX.OutOfBounds,l);if(E<0&&(E=N.length+E),E<0)throw new g.D$(f,g.TX.OutOfBounds,l);if(E>=N.length)throw new g.D$(f,g.TX.OutOfBounds,l);return N.splice(E,1),m.B}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.insert=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,3,3,f,l),(0,m.o)(o[0])){const E=(0,m.g)(o[1]);if(isNaN(E)||!1===(0,m.O)(E))throw new g.D$(f,g.TX.InvalidParameter,l);const N=o[2],x=o[0];if(E>x.length)throw new g.D$(f,g.TX.OutOfBounds,l);if(E<0&&E<-1*x.length)throw new g.D$(f,g.TX.OutOfBounds,l);return E===x.length?(x[E]=N,m.B):(x.splice(E,0,N),m.B)}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.resize=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,2,3,f,l),(0,m.o)(o[0])){const E=(0,m.g)(o[1]);if(isNaN(E)||!1===(0,m.O)(E))throw new g.D$(f,g.TX.InvalidParameter,l);if(E<0)throw new g.D$(f,g.TX.InvalidParameter,l);const N=(0,m.K)(o[2],null),x=o[0];if(x.length>=E)return x.length=E,m.B;const S=x.length;x.length=E;for(let O=S;O<x.length;O++)x[O]=N;return m.B}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.includes=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,2,2,f,l),(0,m.o)(o[0])){const E=o[1];return o[0].findIndex(N=>(0,m.F)(N,E))>-1}if((0,m.q)(o[0])){const E=o[1];return o[0].toArray().findIndex(N=>(0,m.F)(N,E))>-1}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.slice=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,1,3,f,l),(0,m.o)(o[0])){const E=(0,m.g)((0,m.K)(o[1],0)),N=(0,m.g)((0,m.K)(o[2],o[0].length));if(isNaN(E)||!1===(0,m.O)(E))throw new g.D$(f,g.TX.InvalidParameter,l);if(isNaN(N)||!1===(0,m.O)(N))throw new g.D$(f,g.TX.InvalidParameter,l);return o[0].slice(E,N)}if((0,m.q)(o[0])){const E=o[0],N=(0,m.g)((0,m.K)(o[1],0)),x=(0,m.g)((0,m.K)(o[2],E.length()));if(isNaN(N)||!1===(0,m.O)(N))throw new g.D$(f,g.TX.InvalidParameter,l);if(isNaN(x)||!1===(0,m.O)(x))throw new g.D$(f,g.TX.InvalidParameter,l);return E.toArray().slice(N,x)}throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.splice=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{const E=[];for(let N=0;N<o.length;N++)(0,m.o)(o[N])?E.push(...o[N]):(0,m.q)(o[N])?E.push(...o[N].toArray()):E.push(o[N]);return E})},s.functions.top=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{if((0,m.H)(o,2,2,f,l),(0,m.o)(o[0]))return(0,m.g)(o[1])>=o[0].length?o[0].slice(0):o[0].slice(0,(0,m.g)(o[1]));if((0,m.q)(o[0]))return(0,m.g)(o[1])>=o[0].length()?o[0].slice(0):o[0].slice(0,(0,m.g)(o[1]));throw new g.D$(f,g.TX.InvalidParameter,l)})},s.functions.first=function(f,l){return s.standardFunction(f,l,(p,h,o)=>((0,m.H)(o,1,1,f,l),(0,m.o)(o[0])?0===o[0].length?null:o[0][0]:(0,m.q)(o[0])?0===o[0].length()?null:o[0].get(0):null))},"sync"===s.mode&&(s.functions.sort=function(f,l){return s.standardFunction(f,l,(p,h,o)=>D(f,h,o,!1))},s.functions.any=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{(0,m.H)(o,2,2,f,h);const E=o[1].createFunction(f),N=J(o[0],f,h);for(const x of N){const S=E(x);if((0,m.a)(S)&&!0===S)return!0}return!1})},s.functions.all=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{(0,m.H)(o,2,2,f,h);const E=o[1].createFunction(f),N=J(o[0],f,h);for(const x of N)if(!0!==E(x))return!1;return!0})},s.functions.none=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{(0,m.H)(o,2,2,f,h);const E=o[1].createFunction(f),N=J(o[0],f,h);for(const x of N)if(!0===E(x))return!1;return!0})},s.functions.reduce=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{(0,m.H)(o,2,3,f,h);const E=o[1].createFunction(f),N=J(o[0],f,h);return 2===o.length?0===N.length?null:N.reduce((x,S)=>{const O=E(x,S);return void 0!==O&&O!==m.B?O:null}):N.reduce((x,S)=>{const O=E(x,S);return void 0!==O&&O!==m.B?O:null},o[2])})},s.functions.map=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{(0,m.H)(o,2,2,f,h);const E=o[1].createFunction(f),N=J(o[0],f,h),x=[];for(const S of N){const O=E(S);x.push(void 0!==O&&O!==m.B?O:null)}return x})},s.functions.filter=function(f,l){return s.standardFunction(f,l,(p,h,o)=>{(0,m.H)(o,2,2,f,h);const E=o[1].createFunction(f),N=J(o[0],f,h),x=[];for(const S of N)!0===E(S)&&x.push(S);return x})}),"async"===s.mode&&(s.functions.sort=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){return D(f,o,E,!0)});return function(h,o,E){return p.apply(this,arguments)}}())},s.functions.any=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){(0,m.H)(E,2,2,f,o);const N=E[1].createFunction(f),x=J(E[0],f,o);for(const S of x){const O=yield N(S);let z=null;if(z=(0,a.$X)(z)?yield O:O,(0,m.a)(z)&&!0===z)return!0}return!1});return function(h,o,E){return p.apply(this,arguments)}}())},s.functions.all=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){(0,m.H)(E,2,2,f,o);const N=E[1].createFunction(f),x=J(E[0],f,o);for(const S of x){const O=yield N(S);let z=null;if(z=(0,a.$X)(z)?yield O:O,!0!==z)return!1}return!0});return function(h,o,E){return p.apply(this,arguments)}}())},s.functions.none=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){(0,m.H)(E,2,2,f,o);const N=E[1].createFunction(f),x=J(E[0],f,o);for(const S of x){const O=yield N(S);let z=null;if(z=(0,a.$X)(z)?yield O:O,!0===z)return!1}return!0});return function(h,o,E){return p.apply(this,arguments)}}())},s.functions.filter=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){(0,m.H)(E,2,2,f,o);const N=E[1].createFunction(f),x=J(E[0],f,o),S=[];for(const O of x){const z=yield N(O);let ae=null;ae=(0,a.$X)(ae)?yield z:z,!0===ae&&S.push(O)}return S});return function(h,o,E){return p.apply(this,arguments)}}())},s.functions.reduce=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){(0,m.H)(E,2,3,f,o);const N=E[1].createFunction(f),x=J(E[0],f,o);let S;if(E.length>2){const O=(0,m.K)(E[2],null);S=x.reduce(function(){var z=(0,P.A)(function*(ae,ie){let me=yield ae;return void 0!==me&&me!==m.B||(me=null),N(me,ie)});return function(ae,ie){return z.apply(this,arguments)}}(),Promise.resolve(O))}else{if(0===x.length)return null;S=x.reduce(function(){var O=(0,P.A)(function*(z,ae,ie){if(ie<=1)return N(z,ae);let me=yield z;return void 0!==me&&me!==m.B||(me=null),N(me,ae)});return function(z,ae,ie){return O.apply(this,arguments)}}())}return S.then(O=>void 0!==O&&O!==m.B?O:null)});return function(h,o,E){return p.apply(this,arguments)}}())},s.functions.map=function(f,l){return s.standardFunctionAsync(f,l,function(){var p=(0,P.A)(function*(h,o,E){(0,m.H)(E,2,2,f,o);const N=E[1].createFunction(f),x=J(E[0],f,o),S=[];for(const O of x){const z=yield N(O);let ae=null;ae=(0,a.$X)(ae)?yield z:z,S.push(void 0!==ae&&ae!==m.B?ae:null)}return S});return function(h,o,E){return p.apply(this,arguments)}}())})}},Symbol.toStringTag,{value:"Module"}))},42686:(Oe,xe,_)=>{_.d(xe,{$:()=>ne,A:()=>z,B:()=>ie,C:()=>me,D:()=>Ne,E:()=>xt,F:()=>vt,G:()=>y,H:()=>yt,I:()=>Nt,J:()=>Et,K:()=>B,L:()=>St,M:()=>ft,N:()=>Mt,O:()=>Se,P:()=>se,Q:()=>wt,R:()=>It,S:()=>it,T:()=>G,U:()=>le,V:()=>Be,W:()=>Ie,X:()=>ut,Y:()=>ce,Z:()=>Pt,_:()=>Bt,a:()=>he,a0:()=>w,a1:()=>Ge,a2:()=>ct,a3:()=>Dt,a4:()=>Ct,a5:()=>Qe,b:()=>Ce,c:()=>Z,d:()=>A,e:()=>K,f:()=>j,g:()=>we,h:()=>Ze,i:()=>W,j:()=>qe,k:()=>be,l:()=>Tt,m:()=>Me,n:()=>Pe,o:()=>ge,p:()=>Ke,q:()=>$e,r:()=>Le,s:()=>Re,t:()=>et,u:()=>ve,v:()=>st,w:()=>Je,x:()=>ot,y:()=>Zt,z:()=>ae});var P=_(10467),I=_(23098),g=_(77469),$=_(61299),m=_(50279),a=_(55279),Y=_(61552),k=_(42970),s=_(61223),J=_(40056),V=_(7981),R=_(85775),ee=_(87257),ue=_(29752),X=_(28067),q=_(68643),D=_(21870),f=_(1749),l=_(55861),p=_(93615),h=_(32034),o=_(15268),E=_(61320),N=_(88996),x=_(44549);class S{constructor(C){this.value=C}}class O{constructor(C){this.value=C}}const z=O,ae=S,ie={type:"VOID"},me={type:"BREAK"},Ne={type:"CONTINUE"};function G(c,C,M){return""===C||null==C||C===M||C===M?c:c=c.split(C).join(M)}function W(c){return c instanceof Y.fF}function Q(c){return c instanceof m.x}function j(c){return!!(Z(c)||Ce(c)||be(c)||Me(c)||Pe(c)||he(c)||null===c||c===ie||"number"==typeof c)}function B(c,C){return void 0===c?C:c}function se(c){return null==c?"":ge(c)||$e(c)?"Array":be(c)?"Date":Pe(c)?"Time":Me(c)?"DateOnly":Z(c)?"String":he(c)?"Boolean":Ce(c)?"Number":"esri.arcade.Attachment"===c?.declaredClass?"Attachment":"esri.arcade.Portal"===c?.declaredClass?"Portal":"esri.arcade.Dictionary"===c?.declaredClass?"Dictionary":Je(c)?"KnowledgeGraph":c instanceof m.x?"Module":Le(c)?"Feature":c instanceof f.A?"Point":c instanceof l.A?"Polygon":c instanceof p.A?"Polyline":c instanceof D.A?"Multipoint":c instanceof X.A?"Extent":W(c)?"Function":ve(c)?"FeatureSet":Re(c)?"FeatureSetCollection":c===ie?"":"number"==typeof c&&isNaN(c)?"Number":"Unrecognized Type"}function Z(c){return"string"==typeof c||c instanceof String}function he(c){return"boolean"==typeof c}function Ce(c){return"number"==typeof c}function Se(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c}function Ke(c){return c instanceof q.A}function ge(c){return Array.isArray(c)}function Le(c){return"esri.arcade.Feature"===c?.arcadeDeclaredClass}function ve(c){return"esri.arcade.featureset.support.FeatureSet"===c?.declaredRootClass}function st(c){return"esri.arcade.Dictionary"===c?.declaredClass}function Re(c){return"esri.arcade.featureSetCollection"===c?.declaredRootClass}function Je(c){return"esri.rest.knowledgeGraph.KnowledgeGraph"===c?.declaredClass}function $e(c){return c instanceof k.A}function be(c){return c instanceof $.lY}function Me(c){return c instanceof ee.n}function Pe(c){return c instanceof ue.k}function Ue(c){return null!=c&&"object"==typeof c}function Qe(c){return c instanceof Date}function yt(c,C,M,oe,re){if(c.length<C||c.length>M)throw new a.D$(oe,a.TX.WrongNumberOfParameters,re)}function It(c){return c<0?-Math.round(-c):Math.round(c)}function Ft(c,C){return isNaN(c)||null==C||""===C?c.toString():(C=G(C,"\u2030",""),C=G(C,"\xa4",""),(0,R.GP)(c,{pattern:C}))}function At(c,C){return null==C||""===C?c.toISOString(!0):c.toFormat(wt(C),{locale:(0,N.JK)(),numberingSystem:"latn"})}function wt(c,C=!1){c=c.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let M="";const oe=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const re of c.match(oe)||[])switch(re){case"D":M+="d";break;case"DD":M+="dd";break;case"DDD":M+="o";break;case"d":M+="c";break;case"ddd":M+="ccc";break;case"dddd":M+="cccc";break;case"M":M+="L";break;case"MM":M+="LL";break;case"MMM":M+="LLL";break;case"MMMM":M+="LLLL";break;case"YY":M+="yy";break;case"Y":case"YYYY":M+="yyyy";break;case"Q":M+="q";break;case"Z":M+="Z";break;case"ZZ":M+="ZZ";break;case"ZZZ":M+="ZZZ";break;case"ZZZZ":M+=C?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":M+=C?"[ZZZZZ]":"ZZZZZ";break;case"S":M+="'S'";break;case"SS":M+="'SS'";break;case"SSS":M+="u";break;case"A":case"a":M+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":M+=re;break;default:re.length>=2&&"["===re.slice(0,1)&&"]"===re.slice(-1)?M+=`'${re.slice(1,-1)}'`:M+=`'${re}'`}return M}function pe(c,C,M){switch(M){case">":return c>C;case"<":return c<C;case">=":return c>=C;case"<=":return c<=C}return!1}function xt(c,C,M){if(null===c){if(null===C||C===ie)return pe(null,null,M);if(Ce(C))return pe(0,C,M);if(Z(C)||he(C))return pe(0,we(C),M);if(be(C))return pe(0,C.toNumber(),M);if(Pe(C)||Me(C))return pe(c,C.toNumber(),M)}if(c===ie){if(null===C||C===ie)return pe(null,null,M);if(Ce(C))return pe(0,C,M);if(Z(C)||he(C))return pe(0,we(C),M);if(be(C))return pe(0,C.toNumber(),M);if(Pe(C)||Me(C))return pe(c,C.toNumber(),M)}else if(Ce(c)){if(Ce(C))return pe(c,C,M);if(he(C))return pe(c,we(C),M);if(null===C||C===ie)return pe(c,0,M);if(Z(C))return pe(c,we(C),M);if(be(C)||Pe(C)||Me(C))return pe(c,C.toNumber(),M)}else if(Z(c)){if(Z(C))return pe(qe(c),qe(C),M);if(be(C)||Pe(C)||Me(C))return pe(we(c),C.toNumber(),M);if(Ce(C))return pe(we(c),C,M);if(null===C||C===ie)return pe(we(c),0,M);if(he(C))return pe(we(c),we(C),M)}else if(be(c)){if(be(C))return c.timeZone!==C.timeZone&&(c.isUnknownTimeZone?c=$.lY.arcadeDateAndZoneToArcadeDate(c,C.timeZone):C.isUnknownTimeZone&&(C=$.lY.arcadeDateAndZoneToArcadeDate(C,c.timeZone))),pe(c.toNumber(),C.toNumber(),M);if(null===C||C===ie)return pe(c.toNumber(),0,M);if(Ce(C))return pe(c.toNumber(),C,M);if(he(C)||Z(C))return pe(c.toNumber(),we(C),M);if(Pe(C))throw new a.D$(null,a.TX.CannotCompareDateAndTime,null);if(Me(C))return pe(c.toNumber(),C.toNumber(),M)}else if(he(c)){if(he(C))return pe(c,C,M);if(Ce(C))return pe(we(c),we(C),M);if(be(C)||Pe(C)||Me(C))return pe(we(c),C.toNumber(),M);if(null===C||C===ie)return pe(we(c),0,M);if(Z(C))return pe(we(c),we(C),M)}else if(Me(c)){if(be(C))return pe(c.toNumber(),C.toNumber(),M);if(null===C||C===ie)return pe(c.toNumber(),0,M);if(Ce(C))return pe(c.toNumber(),C,M);if(he(C)||Z(C))return pe(c.toNumber(),we(C),M);if(Pe(C))throw new a.D$(null,a.TX.CannotCompareDateAndTime,null);if(Me(C))return pe(c.toNumber(),C.toNumber(),M)}else if(Pe(c)){if(be(C))throw new a.D$(null,a.TX.CannotCompareDateAndTime,null);if(null===C||C===ie)return pe(c.toNumber(),0,M);if(Ce(C))return pe(c.toNumber(),C,M);if(he(C)||Z(C))return pe(c.toNumber(),we(C),M);if(Pe(C))return pe(c.toNumber(),C.toNumber(),M);if(Me(C))throw new a.D$(null,a.TX.CannotCompareDateAndTime,null)}return!!vt(c,C)&&("<="===M||">="===M)}function vt(c,C){if(c===C||null===c&&C===ie||null===C&&c===ie)return!0;if(be(c)&&be(C)||Pe(c)&&Pe(C)||Me(c)&&Me(C))return c.equals(C);if(c instanceof s.A||c instanceof J.A)return c.equalityTest(C);if(c instanceof f.A&&C instanceof f.A){const M=c.cache._arcadeCacheId;if(null!=M)return M===C.cache._arcadeCacheId}return!!(Ue(c)&&Ue(C)&&(c._arcadeCacheId===C._arcadeCacheId&&null!=c._arcadeCacheId||c._underlyingGraphic===C._underlyingGraphic&&null!=c._underlyingGraphic))}function qe(c,C){if(Z(c))return c;if(null===c)return"";if(Ce(c))return Ft(c,C);if(he(c))return c.toString();if(be(c))return At(c,C);if(Pe(c)||Me(c))return c.toFormat(C);if(c instanceof q.A)return JSON.stringify(c.toJSON());if(ge(c)){const M=[];for(let oe=0;oe<c.length;oe++)M[oe]=tt(c[oe]);return"["+M.join(",")+"]"}if(c instanceof k.A){const M=[];for(let oe=0;oe<c.length();oe++)M[oe]=tt(c.get(oe));return"["+M.join(",")+"]"}return null!==c&&"object"==typeof c&&void 0!==c.castToText?c.castToText():W(c)?"object, Function":c===ie?"":Q(c)?"object, Module":""}function Bt(c){const C=[];if(!ge(c))return null;if(c instanceof k.A){for(let M=0;M<c.length();M++)C[M]=we(c.get(M));return C}for(let M=0;M<c.length;M++)C[M]=we(c[M]);return C}function et(c,C,M=!1){if(Z(c))return c;if(null===c)return"";if(Ce(c))return Ft(c,C);if(he(c))return c.toString();if(be(c))return At(c,C);if(Pe(c)||Me(c))return c.toFormat(C);if(c instanceof q.A)return c instanceof X.A?'{"xmin":'+c.xmin.toString()+',"ymin":'+c.ymin.toString()+","+(c.hasZ?'"zmin":'+c.zmin.toString()+",":"")+(c.hasM?'"mmin":'+c.mmin.toString()+",":"")+'"xmax":'+c.xmax.toString()+',"ymax":'+c.ymax.toString()+","+(c.hasZ?'"zmax":'+c.zmax.toString()+",":"")+(c.hasM?'"mmax":'+c.mmax.toString()+",":"")+'"spatialReference":'+nt(c.spatialReference)+"}":nt(c.toJSON(),(oe,re)=>oe.key===re.key?0:"spatialReference"===oe.key?1:"spatialReference"===re.key||oe.key<re.key?-1:oe.key>re.key?1:0);if(ge(c)){const oe=[];for(let re=0;re<c.length;re++)oe[re]=tt(c[re],M);return"["+oe.join(",")+"]"}if(c instanceof k.A){const oe=[];for(let re=0;re<c.length();re++)oe[re]=tt(c.get(re),M);return"["+oe.join(",")+"]"}return null!==c&&"object"==typeof c&&void 0!==c.castToText?c.castToText(M):W(c)?"object, Function":c===ie?"":Q(c)?"object, Module":""}function tt(c,C=!1){if(null===c)return"null";if(he(c)||Ce(c)||Z(c))return JSON.stringify(c);if(c instanceof q.A||c instanceof k.A||Array.isArray(c))return et(c,null,C);if(be(c))return JSON.stringify(C?c.getTime():At(c,""));if(Pe(c)||Me(c))return JSON.stringify(c.toString());if(null!==c&&"object"==typeof c){if(void 0!==c.castToText)return c.castToText(C)}else if(c===ie)return"null";return"null"}function we(c,C){return Ce(c)?c:null===c||""===c?0:be(c)||Me(c)||Pe(c)?NaN:he(c)?c?1:0:ge(c)||""===c||void 0===c?NaN:void 0!==C&&Z(c)?(C=G(C,"\u2030",""),C=G(C,"\xa4",""),(0,R.qg)(c,{pattern:C})):c===ie?0:Number(c)}function Tt(c,C){if(be(c))return c;if(Z(c)){const M=function ke(c,C){const M=/ (\d\d)/,oe=(0,$.mT)(C);let re=x.c9.fromISO(c,{zone:oe});return re.isValid||M.test(c)&&(c=c.replace(M,"T$1"),re=x.c9.fromISO(c,{zone:C}),re.isValid)?re:null}(c,C);if(M)return $.lY.dateTimeToArcadeDate(M)}return null}function Ze(c){return he(c)?c:Z(c)?"true"===(c=c.toLowerCase()):!!Ce(c)&&0!==c&&!isNaN(c)}function ot(c,C){return null==c?null:(null!=c.spatialReference||(c.spatialReference=C),c)}function it(c){if(null===c)return null;if(c instanceof f.A)return"NaN"===c.x||null===c.x||isNaN(c.x)?null:c;if(c instanceof l.A){if(0===c.rings.length)return null;for(const C of c.rings)if(C.length>0)return c;return null}if(c instanceof p.A){if(0===c.paths.length)return null;for(const C of c.paths)if(C.length>0)return c;return null}return c instanceof D.A?0===c.points.length?null:c:c instanceof X.A?"NaN"===c.xmin||null===c.xmin||isNaN(c.xmin)?null:c:null}function Dt(c,C){if(!c||!c.domain)return C;let M=null,oe=null;if(be(C))M=C.toNumber();else if(Me(C))M=C.toString();else if(Pe(C))M=C.toStorageString();else if("string"===c.field.type||"esriFieldTypeString"===c.field.type)M=qe(C);else{if(null==C)return null;if(""===C)return C;M=we(C)}for(let re=0;re<c.domain.codedValues.length;re++){const Ee=c.domain.codedValues[re];Ee.code===M&&(oe=Ee)}return null===oe?qe(C):oe.name}function Ct(c,C){if(!c||!c.domain)return C;let M=null;const oe=qe(C);for(let re=0;re<c.domain.codedValues.length;re++){const Ee=c.domain.codedValues[re];Ee.name===oe&&(M=Ee)}return null===M?C:M.code}function ct(c,C,M=null,oe=null){if(!C||!C.fields)return null;let re,Ee,_e=null;for(let je=0;je<C.fields.length;je++){const at=C.fields[je];at.name.toLowerCase()===c.toString().toLowerCase()&&(_e=at)}if(null===_e)throw new a.D$(null,a.TX.FieldNotFound,null,{key:c});let Te=C.typeIdField,Xe="id",ze=C.types;if(C.subtypeField&&(Te=C.subtypeField,Xe="code",ze=C.subtypes??[]),null===oe&&M&&Te)oe=M.hasField(Te)?M.field(Te):null;else if(Te&&null!==oe){let je=!1;for(const at of ze||[])if(oe===at[Xe]){je=!0;break}if(!je)for(const at of ze||[])if(oe===at.name){oe=at[Xe],je=!0;break}je||(oe=null,M&&Te&&(oe=M.hasField(Te)?M.field(Te):null))}return null!=oe&&ze.some(je=>je[Xe]===oe&&(re=je.domains?.[_e.name],re&&"inherited"===re.type&&(re=Ot(_e.name,C),Ee=!0),!0)),Ee||re||(re=Ot(c,C)),{field:_e,domain:re}}function Ot(c,C){let M;return C.fields.some(oe=>(oe.name.toLowerCase()===c.toLowerCase()&&(M=oe.domain),!!M)),M}function nt(c,C){C||(C={}),"function"==typeof C&&(C={cmp:C});const M="boolean"==typeof C.cycles&&C.cycles,oe=C.cmp&&(re=C.cmp,function(_e){return function(Te,Xe){return re({key:Te,value:_e[Te]},{key:Xe,value:_e[Xe]})}});var re;const Ee=[];return function _e(Te){if(Te?.toJSON&&"function"==typeof Te.toJSON&&(Te=Te.toJSON()),void 0===Te)return;if("number"==typeof Te)return isFinite(Te)?""+Te:"null";if("object"!=typeof Te)return JSON.stringify(Te);let Xe,ze;if(Array.isArray(Te)){for(ze="[",Xe=0;Xe<Te.length;Xe++)Xe&&(ze+=","),ze+=_e(Te[Xe])||"null";return ze+"]"}if(null===Te)return"null";if(Ee.includes(Te)){if(M)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const je=Ee.push(Te)-1,at=Object.keys(Te).sort(oe?.(Te));for(ze="",Xe=0;Xe<at.length;Xe++){const Rt=at[Xe],Lt=_e(Te[Rt]);Lt&&(ze&&(ze+=","),ze+=JSON.stringify(Rt)+":"+Lt)}return Ee.splice(je,1),"{"+ze+"}"}(c)}function Nt(c){if(null===c)return null;const C=[];for(const M of c)C.push(M?.arcadeDeclaredClass&&"esri.arcade.Feature"===M.arcadeDeclaredClass?M.geometry():M);return C}function dt(c,C){if(!(C instanceof f.A))throw new a.D$(null,a.TX.InvalidParameter,null);c.push(C.hasZ?C.hasM?[C.x,C.y,C.z,C.m]:[C.x,C.y,C.z]:[C.x,C.y])}function Et(c,C){if(ge(c)||$e(c)){let M=!1,oe=!1,re=[],Ee=C;if(ge(c)){for(const _e of c)dt(re,_e);re.length>0&&(Ee=c[0].spatialReference,M=c[0].hasZ,oe=c[0].hasM)}else if(c instanceof J.A)re=c._elements,re.length>0&&(M=c._hasZ,oe=c._hasM,Ee=c.get(0).spatialReference);else{if(!$e(c))throw new a.D$(null,a.TX.InvalidParameter,null);for(const _e of c.toArray())dt(re,_e);re.length>0&&(Ee=c.get(0).spatialReference,M=!0===c.get(0).hasZ,oe=!0===c.get(0).hasM)}return 0===re.length?null:((0,o.$3)(re)||(re=re.slice(0).reverse()),new l.A({rings:[re],spatialReference:Ee,hasZ:M,hasM:oe}))}return c}function St(c,C){if(ge(c)||$e(c)){let M=!1,oe=!1,re=[],Ee=C;if(ge(c)){for(const _e of c)dt(re,_e);re.length>0&&(Ee=c[0].spatialReference,M=!0===c[0].hasZ,oe=!0===c[0].hasM)}else if(c instanceof J.A)re=c._elements,re.length>0&&(M=c._hasZ,oe=c._hasM,Ee=c.get(0).spatialReference);else if($e(c)){for(const _e of c.toArray())dt(re,_e);re.length>0&&(Ee=c.get(0).spatialReference,M=!0===c.get(0).hasZ,oe=!0===c.get(0).hasM)}return 0===re.length?null:new p.A({paths:[re],spatialReference:Ee,hasZ:M,hasM:oe})}return c}function ft(c,C){if(ge(c)||$e(c)){let M=!1,oe=!1,re=[],Ee=C;if(ge(c)){for(const _e of c)dt(re,_e);re.length>0&&(Ee=c[0].spatialReference,M=!0===c[0].hasZ,oe=!0===c[0].hasM)}else if(c instanceof J.A)re=c._elements,re.length>0&&(M=c._hasZ,oe=c._hasM,Ee=c.get(0).spatialReference);else if($e(c)){for(const _e of c.toArray())dt(re,_e);re.length>0&&(Ee=c.get(0).spatialReference,M=!0===c.get(0).hasZ,oe=!0===c.get(0).hasM)}return 0===re.length?null:new D.A({points:re,spatialReference:Ee,hasZ:M,hasM:oe})}return c}function Ge(c,C=!1){const M=[];if(null===c)return M;if(!0===ge(c)){for(let oe=0;oe<c.length;oe++){const re=qe(c[oe]);""===re&&!0!==C||M.push(re)}return M}if(c instanceof k.A){for(let oe=0;oe<c.length();oe++){const re=qe(c.get(oe));""===re&&!0!==C||M.push(re)}return M}if(j(c)){const oe=qe(c);return""===oe&&!0!==C||M.push(oe),M}return[]}let bt=0;function w(c){return bt++,bt%100==0?(bt=0,new Promise(C=>{setTimeout(()=>{C(c)},0)})):c}function y(c,C,M){switch(M){case"&":return c&C;case"|":return c|C;case"^":return c^C;case"<<":return c<<C;case">>":return c>>C;case">>>":return c>>>C}}function A(c,C=null){return null==c?null:he(c)||Ce(c)||Z(c)?c:c instanceof q.A?!0===C?.keepGeometryType?c:c.toJSON():c instanceof k.A?c.toArray().map(M=>A(M,C)):Array.isArray(c)?c.map(M=>A(M,C)):Qe(c)?c:be(c)?c.toJSDate():Pe(c)?c.toString():Me(c)?c.toJSDate():null!==c&&"object"==typeof c&&void 0!==c.castAsJson?c.castAsJson(C):null}function T(c,C,M,oe,re){return U.apply(this,arguments)}function U(){return(U=(0,P.A)(function*(c,C,M,oe,re){const Ee=yield K(c,C,M);re[oe]=Ee})).apply(this,arguments)}function K(c){return v.apply(this,arguments)}function v(){return(v=(0,P.A)(function*(c,C=null,M=null){if(c instanceof k.A&&(c=c.toArray()),null==c)return null;if(j(c)||c instanceof q.A||Qe(c)||be(c))return A(c,M);if(Array.isArray(c)){const oe=[],re=[];for(const Ee of c)null===Ee||j(Ee)||Ee instanceof q.A||Qe(Ee)||be(Ee)?re.push(A(Ee,M)):(re.push(null),oe.push(T(Ee,C,M,re.length-1,re)));return oe.length>0&&(yield Promise.all(oe)),re}return null!==c&&"object"==typeof c&&void 0!==c.castAsJsonAsync?c.castAsJsonAsync(C,M):null})).apply(this,arguments)}function H(c){return ne(c)?c.parent:c}function ne(c){return c&&"declaredClass"in c&&"esri.layers.support.SubtypeSublayer"===c.declaredClass}function Ie(c,C,M){const oe=H(c.fullSchema());return null!==oe&&oe.fields?ct(C,oe,c,M):null}function Be(c){const C=H(c.fullSchema());return null===C?null:C.fields?C.subtypeField?{subtypeField:C.subtypeField,subtypes:C.subtypes?C.subtypes.map(M=>({name:M.name,code:M.code})):[]}:C.typeIdField?{subtypeField:C.typeIdField,subtypes:C.types?C.types.map(M=>({name:M.name,code:M.id})):[]}:null:null}function ut(c,C,M,oe){const re=H(c.fullSchema());if(null===re||!re.fields)return null;const Ee=ct(C,re,c,oe);if(void 0===M)try{M=c.field(C)}catch{return null}return Dt(Ee,M)}function ce(c,C,M,oe){const re=H(c.fullSchema());if(null===re||!re.fields)return null;if(void 0===M){try{M=c.field(C)}catch{return null}return M}return Ct(ct(C,re,c,oe),M)}function Mt(c){return c?.timeZone??"system"}function le(c){const C=H(c.fullSchema());if(null===C||!C.fields)return null;const M=[];for(const oe of C.fields)M.push((0,V.nE)(oe));return{objectIdField:C.objectIdField,globalIdField:C.globalIdField??"",geometryType:void 0===V.yT[C.geometryType]?"":V.yT[C.geometryType],fields:M}}function Pt(c,C){return"system"===c&&(c=$.lY.systemTimeZoneCanonicalName),{version:ht,engineVersion:g.rE,timeZone:c,spatialReference:C instanceof h.A?C.toJSON():C,application:I.A.applicationName??"",engine:"web",locale:(0,N.JK)()}}const ht="1.24",Zt=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:O,ReturnResultE:S,absRound:It,arcadeVersion:ht,autoCastArrayOfPointsToMultiPoint:ft,autoCastArrayOfPointsToPolygon:Et,autoCastArrayOfPointsToPolyline:St,autoCastFeatureToGeometry:Nt,binaryOperator:y,breakResult:me,castAsJson:A,castAsJsonAsync:K,continueResult:Ne,defaultExecutingContext:Pt,defaultTimeZone:Mt,defaultUndefined:B,equalityTest:vt,featureDomainCodeLookup:ce,featureDomainValueLookup:ut,featureFullDomain:Ie,featureSchema:le,featureSubtypes:Be,fixNullGeometry:it,fixSpatialReference:ot,formatDate:At,formatNumber:Ft,getDomain:ct,getDomainCode:Ct,getDomainValue:Dt,getType:se,greaterThanLessThan:xt,implicitResult:z,isArray:ge,isBoolean:he,isDate:be,isDateOnly:Me,isDictionary:st,isFeature:Le,isFeatureSet:ve,isFeatureSetCollection:Re,isFunctionParameter:W,isGeometry:Ke,isImmutableArray:$e,isInteger:Se,isJsDate:Qe,isKnowledgeGraph:Je,isModule:Q,isNumber:Ce,isObject:Ue,isSimpleType:j,isString:Z,isSubtypeGrouplayer:function fe(c){return c&&"declaredClass"in c&&"esri.layers.SubtypeGroupLayer"===c.declaredClass},isSubtypeSublayer:ne,isTime:Pe,multiReplace:G,parseGeometryFromJson:function He(c,C){const M=JSON.parse(c);return M&&!M.spatialReference&&(M.spatialReference=C),(0,E.rS)(M)},pcCheck:yt,returnResult:ae,stableStringify:nt,standardiseDateFormat:wt,tick:w,toBoolean:Ze,toDate:Tt,toNumber:we,toNumberArray:Bt,toString:qe,toStringArray:Ge,toStringExplicit:et,voidOperation:ie},Symbol.toStringTag,{value:"Module"}))},81842:(Oe,xe,_)=>{_.r(xe),_.d(xe,{Dictionary:()=>m.A,arcade:()=>Or,arcadeFeature:()=>Y.A,convertFeatureLayerToFeatureSet:()=>ei,convertJsonToArcade:()=>ni,convertMapToFeatureSetCollection:()=>ti,convertServiceUrlToWorkspace:()=>qr,createExecContext:()=>Hr,createFeature:()=>Gr,createFunction:()=>jr,createSyntaxTree:()=>Ut,dependsOnView:()=>Vr,enableFeatureSetOperations:()=>ai,enableGeometryOperations:()=>ii,evalSyntaxTree:()=>Kr,executeAsyncFunction:()=>Wr,executeFunction:()=>Zr,extractFieldNames:()=>Jr,getArcadeType:()=>Xr,getViewInfo:()=>Qr,hasGeometryFunctions:()=>ci,hasGeometryOperations:()=>fi,hasVariable:()=>Yr,loadScriptDependencies:()=>ri,updateExecContext:()=>zr}),_(21152);var I=_(10467),g=_(50279),$=_(48504),m=_(53787),a=_(55279),Y=_(63145),k=_(61552),s=_(42686),J=_(63829),V=_(78464),R=_(98745),ee=_(39521),ue=_(77469),X=_(73446),q=_(29417),D=_(55316),f=_(82663),l=_(28067),p=_(68643),h=_(21870),o=_(1749),E=_(55861),N=_(93615),x=_(61320);let S=null;function O(t){return 0===ue.rE.indexOf("4.")?E.A.fromExtent(t):new E.A({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}function ae(t,n){if("polygon"!==t.type&&"polyline"!==t.type&&"extent"!==t.type)return 0;let r=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(r=(0,q.G9)(t.spatialReference)/(0,f.GA)(t.spatialReference));let i=0;if("polyline"===t.type)for(const F of t.paths)for(let b=1;b<F.length;b++)i+=(0,q.BM)(F[b],F[b-1],r);else if("polygon"===t.type)for(const F of t.rings){for(let b=1;b<F.length;b++)i+=(0,q.BM)(F[b],F[b-1],r);(F[0][0]!==F[F.length-1][0]||F[0][1]!==F[F.length-1][1]||void 0!==F[0][2]&&F[0][2]!==F[F.length-1][2])&&(i+=(0,q.BM)(F[0],F[F.length-1],r))}else"extent"===t.type&&(i+=2*(0,q.BM)([t.xmin,t.ymin,0],[t.xmax,t.ymin,0],r),i+=2*(0,q.BM)([t.xmin,t.ymin,0],[t.xmin,t.ymax,0],r),i*=2,i+=4*Math.abs((0,s.K)(t.zmax,0)*r-(0,s.K)(t.zmin,0)*r));const u=new N.A({hasZ:!1,hasM:!1,spatialReference:t.spatialReference,paths:[[0,0],[0,i]]});return S.planarLength(u,n)}function ie(t,n){function r(i,u,F){if((0,s.H)(F,2,2,i,u),!(F[0]instanceof p.A&&F[1]instanceof p.A||F[0]instanceof p.A&&null===F[1]||F[1]instanceof p.A&&null===F[0]||null===F[0]&&null===F[1]))throw new a.D$(i,a.TX.InvalidParameter,u)}t.disjoint=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null===d[0]||null===d[1]||S.disjoint(d[0],d[1])))},t.intersects=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&S.intersects(d[0],d[1])))},t.touches=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&S.touches(d[0],d[1])))},t.crosses=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&S.crosses(d[0],d[1])))},t.within=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&S.within(d[0],d[1])))},t.contains=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&S.contains(d[0],d[1])))},t.overlaps=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&S.overlaps(d[0],d[1])))},t.equals=function(i,u){return n(i,u,(F,b,d)=>((0,s.H)(d,2,2,i,u),d[0]===d[1]||(d[0]instanceof p.A&&d[1]instanceof p.A?S.equals(d[0],d[1]):((0,s.k)(d[0])&&(0,s.k)(d[1])||(0,s.n)(d[0])&&(0,s.n)(d[1])||!(!(0,s.m)(d[0])||!(0,s.m)(d[1])))&&d[0].equals(d[1]))))},t.relate=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,3,3,i,u),d[0]instanceof p.A&&d[1]instanceof p.A)return S.relate(d[0],d[1],(0,s.j)(d[2]));if(d[0]instanceof p.A&&null===d[1]||d[1]instanceof p.A&&null===d[0]||null===d[0]&&null===d[1])return!1;throw new a.D$(i,a.TX.InvalidParameter,u)})},t.intersection=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null===d[0]||null===d[1]?null:S.intersect(d[0],d[1])))},t.union=function(i,u){return n(i,u,(F,b,d)=>{const L=[];if(0===(d=(0,s.I)(d)).length)throw new a.D$(i,a.TX.WrongNumberOfParameters,u);if(1===d.length)if((0,s.o)(d[0])){const te=(0,s.I)(d[0]);for(let De=0;De<te.length;De++)if(null!==te[De]){if(!(te[De]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);L.push(te[De])}}else{if(!(0,s.q)(d[0])){if(d[0]instanceof p.A)return(0,s.x)((0,X.Yq)(d[0]),i.spatialReference);if(null===d[0])return null;throw new a.D$(i,a.TX.InvalidParameter,u)}{const te=(0,s.I)(d[0].toArray());for(let De=0;De<te.length;De++)if(null!==te[De]){if(!(te[De]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);L.push(te[De])}}}else for(let te=0;te<d.length;te++)if(null!==d[te]){if(!(d[te]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);L.push(d[te])}return 0===L.length?null:S.union(L)})},t.difference=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null===d[0]?null:null===d[1]?(0,X.Yq)(d[0]):S.difference(d[0],d[1])))},t.symmetricdifference=function(i,u){return n(i,u,(F,b,d)=>(d=(0,s.I)(d),r(i,u,d),null===d[0]&&null===d[1]?null:null===d[0]?(0,X.Yq)(d[1]):null===d[1]?(0,X.Yq)(d[0]):S.symmetricDifference(d[0],d[1])))},t.clip=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),!(d[1]instanceof l.A)&&null!==d[1])throw new a.D$(i,a.TX.InvalidParameter,u);if(null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return null===d[1]?null:S.clip(d[0],d[1])})},t.cut=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),!(d[1]instanceof N.A)&&null!==d[1])throw new a.D$(i,a.TX.InvalidParameter,u);if(null===d[0])return[];if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return null===d[1]?[(0,X.Yq)(d[0])]:S.cut(d[0],d[1])})},t.area=function(i,u){return n(i,u,(F,b,d)=>{if((0,s.H)(d,1,2,i,u),null===(d=(0,s.I)(d))[0])return 0;if((0,s.o)(d[0])||(0,s.q)(d[0])){const L=(0,s.J)(d[0],i.spatialReference);return null===L?0:S.planarArea(L,(0,X.uf)((0,s.K)(d[1],-1)))}if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.planarArea(d[0],(0,X.uf)((0,s.K)(d[1],-1)))})},t.areageodetic=function(i,u){return n(i,u,(F,b,d)=>{if((0,s.H)(d,1,2,i,u),null===(d=(0,s.I)(d))[0])return 0;if((0,s.o)(d[0])||(0,s.q)(d[0])){const L=(0,s.J)(d[0],i.spatialReference);return null===L?0:S.geodesicArea(L,(0,X.uf)((0,s.K)(d[1],-1)))}if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.geodesicArea(d[0],(0,X.uf)((0,s.K)(d[1],-1)))})},t.length=function(i,u){return n(i,u,(F,b,d)=>{if((0,s.H)(d,1,2,i,u),null===(d=(0,s.I)(d))[0])return 0;if((0,s.o)(d[0])||(0,s.q)(d[0])){const L=(0,s.L)(d[0],i.spatialReference);return null===L?0:S.planarLength(L,(0,X.SQ)((0,s.K)(d[1],-1)))}if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.planarLength(d[0],(0,X.SQ)((0,s.K)(d[1],-1)))})},t.length3d=function(i,u){return n(i,u,(F,b,d)=>{if((0,s.H)(d,1,2,i,u),null===(d=(0,s.I)(d))[0])return 0;if((0,s.o)(d[0])||(0,s.q)(d[0])){const L=(0,s.L)(d[0],i.spatialReference);return null===L?0:!0===L.hasZ?ae(L,(0,X.SQ)((0,s.K)(d[1],-1))):S.planarLength(L,(0,X.SQ)((0,s.K)(d[1],-1)))}if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return!0===d[0].hasZ?ae(d[0],(0,X.SQ)((0,s.K)(d[1],-1))):S.planarLength(d[0],(0,X.SQ)((0,s.K)(d[1],-1)))})},t.lengthgeodetic=function(i,u){return n(i,u,(F,b,d)=>{if((0,s.H)(d,1,2,i,u),null===(d=(0,s.I)(d))[0])return 0;if((0,s.o)(d[0])||(0,s.q)(d[0])){const L=(0,s.L)(d[0],i.spatialReference);return null===L?0:S.geodesicLength(L,(0,X.SQ)((0,s.K)(d[1],-1)))}if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.geodesicLength(d[0],(0,X.SQ)((0,s.K)(d[1],-1)))})},t.distance=function(i,u){return n(i,u,(F,b,d)=>{d=(0,s.I)(d),(0,s.H)(d,2,3,i,u);let L=d[0];((0,s.o)(d[0])||(0,s.q)(d[0]))&&(L=(0,s.M)(d[0],i.spatialReference));let te=d[1];if(((0,s.o)(d[1])||(0,s.q)(d[1]))&&(te=(0,s.M)(d[1],i.spatialReference)),!(L instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(te instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.distance(L,te,(0,X.SQ)((0,s.K)(d[2],-1)))})},t.distancegeodetic=function(i,u){return n(i,u,(F,b,d)=>{d=(0,s.I)(d),(0,s.H)(d,2,3,i,u);const L=d[0],te=d[1];if(!(L instanceof o.A))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(te instanceof o.A))throw new a.D$(i,a.TX.InvalidParameter,u);const De=new N.A({paths:[],spatialReference:L.spatialReference});return De.addPath([L,te]),S.geodesicLength(De,(0,X.SQ)((0,s.K)(d[2],-1)))})},t.densify=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=(0,s.g)(d[1]);if(isNaN(L))throw new a.D$(i,a.TX.InvalidParameter,u);if(L<=0)throw new a.D$(i,a.TX.InvalidParameter,u);return d[0]instanceof E.A||d[0]instanceof N.A?S.densify(d[0],L,(0,X.SQ)((0,s.K)(d[2],-1))):d[0]instanceof l.A?S.densify(O(d[0]),L,(0,X.SQ)((0,s.K)(d[2],-1))):d[0]})},t.densifygeodetic=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=(0,s.g)(d[1]);if(isNaN(L))throw new a.D$(i,a.TX.InvalidParameter,u);if(L<=0)throw new a.D$(i,a.TX.InvalidParameter,u);return d[0]instanceof E.A||d[0]instanceof N.A?S.geodesicDensify(d[0],L,(0,X.SQ)((0,s.K)(d[2],-1))):d[0]instanceof l.A?S.geodesicDensify(O(d[0]),L,(0,X.SQ)((0,s.K)(d[2],-1))):d[0]})},t.generalize=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,4,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=(0,s.g)(d[1]);if(isNaN(L))throw new a.D$(i,a.TX.InvalidParameter,u);return S.generalize(d[0],L,(0,s.h)((0,s.K)(d[2],!0)),(0,X.SQ)((0,s.K)(d[3],-1)))})},t.buffer=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=(0,s.g)(d[1]);if(isNaN(L))throw new a.D$(i,a.TX.InvalidParameter,u);return 0===L?(0,X.Yq)(d[0]):S.buffer(d[0],L,(0,X.SQ)((0,s.K)(d[2],-1)))})},t.buffergeodetic=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=(0,s.g)(d[1]);if(isNaN(L))throw new a.D$(i,a.TX.InvalidParameter,u);return 0===L?(0,X.Yq)(d[0]):S.geodesicBuffer(d[0],L,(0,X.SQ)((0,s.K)(d[2],-1)))})},t.offset=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,6,i,u),null===d[0])return null;if(!(d[0]instanceof E.A||d[0]instanceof N.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=(0,s.g)(d[1]);if(isNaN(L))throw new a.D$(i,a.TX.InvalidParameter,u);const te=(0,s.g)((0,s.K)(d[4],10));if(isNaN(te))throw new a.D$(i,a.TX.InvalidParameter,u);const De=(0,s.g)((0,s.K)(d[5],0));if(isNaN(De))throw new a.D$(i,a.TX.InvalidParameter,u);return S.offset(d[0],L,(0,X.SQ)((0,s.K)(d[2],-1)),(0,s.j)((0,s.K)(d[3],"round")).toLowerCase(),te,De)})},t.rotate=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);const L=d[0]instanceof l.A?E.A.fromExtent(d[0]):d[0],te=(0,s.g)(d[1]);if(isNaN(te))throw new a.D$(i,a.TX.InvalidParameter,u);const De=(0,s.K)(d[2],null);if(null===De)return S.rotate(L,te);if(De instanceof o.A)return S.rotate(L,te,De);throw new a.D$(i,a.TX.InvalidParameter,u)})},t.centroid=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,1,1,i,u),null===d[0])return null;let L=d[0];if(((0,s.o)(d[0])||(0,s.q)(d[0]))&&(L=(0,s.M)(d[0],i.spatialReference)),null===L)return null;if(!(L instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return L instanceof o.A?(0,s.x)((0,X.Yq)(L),i.spatialReference):L instanceof E.A?L.centroid:L instanceof N.A?(0,q.tI)(L):L instanceof h.A?(0,q.e0)(L):L instanceof l.A?L.center:null})},t.measuretocoordinate=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),null===d[0])return null;let L=d[0];if(((0,s.o)(d[0])||(0,s.q)(d[0]))&&(L=(0,s.L)(d[0],i.spatialReference)),null===L)return null;if(!(L instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(L instanceof N.A))throw new a.D$(i,a.TX.InvalidParameter,u);if((0,s.b)(!1===d[1]))throw new a.D$(i,a.TX.InvalidParameter,u);const te=(0,D.EP)(L,d[1]);return te?m.A.convertObjectToArcadeDictionary(te,(0,s.N)(i),!1,!0):null})},t.pointtocoordinate=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),null===d[0])return null;let L=d[0];if(((0,s.o)(d[0])||(0,s.q)(d[0]))&&(L=(0,s.L)(d[0],i.spatialReference)),null===L)return null;if(!(L instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(L instanceof N.A))throw new a.D$(i,a.TX.InvalidParameter,u);const te=d[1];if(null===te)return null;if(!(te instanceof o.A))throw new a.D$(i,a.TX.InvalidParameter,u);if((0,s.b)(!1===d[1]))throw new a.D$(i,a.TX.InvalidParameter,u);const De=(0,D.sO)(L,te);return De?m.A.convertObjectToArcadeDictionary(De,(0,s.N)(i),!1,!0):null})},t.distancetocoordinate=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),null===d[0])return null;let L=d[0];if(((0,s.o)(d[0])||(0,s.q)(d[0]))&&(L=(0,s.L)(d[0],i.spatialReference)),null===L)return null;if(!(L instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(L instanceof N.A))throw new a.D$(i,a.TX.InvalidParameter,u);if((0,s.b)(!1===d[1]))throw new a.D$(i,a.TX.InvalidParameter,u);const te=(0,D.du)(L,d[1]);return te?m.A.convertObjectToArcadeDictionary(te,(0,s.N)(i),!1,!0):null})},t.multiparttosinglepart=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,1,1,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);if(d[0]instanceof o.A)return[(0,s.x)((0,X.Yq)(d[0]),i.spatialReference)];if(d[0]instanceof l.A)return[(0,s.x)((0,X.Yq)(d[0]),i.spatialReference)];const L=S.simplify(d[0]);if(L instanceof E.A){const te=[],De=[];for(let ye=0;ye<L.rings.length;ye++)if(L.isClockwise(L.rings[ye])){const Ae=(0,x.rS)({rings:[L.rings[ye]],hasZ:!0===L.hasZ,hasM:!0===L.hasM,spatialReference:L.spatialReference.toJSON()});te.push(Ae)}else De.push({ring:L.rings[ye],pt:L.getPoint(ye,0)});for(let ye=0;ye<De.length;ye++)for(let Ae=0;Ae<te.length;Ae++)if(te[Ae].contains(De[ye].pt)){te[Ae].addRing(De[ye].ring);break}return te}if(L instanceof N.A){const te=[];for(let De=0;De<L.paths.length;De++){const ye=(0,x.rS)({paths:[L.paths[De]],hasZ:!0===L.hasZ,hasM:!0===L.hasM,spatialReference:L.spatialReference.toJSON()});te.push(ye)}return te}if(d[0]instanceof h.A){const te=[],De=(0,s.x)((0,X.Yq)(d[0]),i.spatialReference);for(let ye=0;ye<De.points.length;ye++)te.push(De.getPoint(ye));return te}return null})},t.issimple=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,1,1,i,u),null===d[0])return!0;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.isSimple(d[0])})},t.simplify=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,1,1,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.simplify(d[0])})},t.convexhull=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,1,1,i,u),null===d[0])return null;if(!(d[0]instanceof p.A))throw new a.D$(i,a.TX.InvalidParameter,u);return S.convexHull(d[0])})},t.nearestcoordinate=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),!(d[0]instanceof p.A||null===d[0]))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(d[1]instanceof o.A||null===d[1]))throw new a.D$(i,a.TX.InvalidParameter,u);if(null===d[0]||null===d[1])return null;const L=S.nearestCoordinate(d[0],d[1]);return null===L||L.isEmpty?null:m.A.convertObjectToArcadeDictionary({coordinate:L.coordinate,distance:L.distance,sideOfLine:0===L.distance?"straddle":L.isRightSide?"right":"left"},(0,s.N)(i),!1,!0)})},t.nearestvertex=function(i,u){return n(i,u,(F,b,d)=>{if(d=(0,s.I)(d),(0,s.H)(d,2,2,i,u),!(d[0]instanceof p.A||null===d[0]))throw new a.D$(i,a.TX.InvalidParameter,u);if(!(d[1]instanceof o.A||null===d[1]))throw new a.D$(i,a.TX.InvalidParameter,u);if(null===d[0]||null===d[1])return null;const L=S.nearestVertex(d[0],d[1]);return null===L||L.isEmpty?null:m.A.convertObjectToArcadeDictionary({coordinate:L.coordinate,distance:L.distance,sideOfLine:0===L.distance?"straddle":L.isRightSide?"right":"left"},(0,s.N)(i),!1,!0)})}}var me=_(82050),Ne=_(35154),G=_(61828),W=_(56492),Q=_(32034);function se(t,n,r){try{return r(t,null,n.arguments)}catch(i){throw i}}function Z(t,n){try{switch(n.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function It(t,n){let r=null===n.init?null:Z(t,n.init);r===s.B&&(r=null);const i=n.id.name.toLowerCase();if(Ue(i),null!==t.localScope){if(void 0!==t.localScope[i])return"lscope['"+i+"']="+r+"; ";if(void 0!==t.localScope._SymbolsMap[i])return"lscope['"+t.localScope._SymbolsMap[i]+"']="+r+"; ";{const F=Ze(t);return t.localScope._SymbolsMap[i]=F,t.mangleMap[i]=F,"lscope['"+F+"']="+r+"; "}}if(void 0!==t.globalScope[i])return"gscope['"+i+"']="+r+"; ";if(void 0!==t.globalScope._SymbolsMap[i])return"gscope['"+t.globalScope._SymbolsMap[i]+"']="+r+"; ";if(t.undeclaredGlobalsInFunctions.has(i)){const F=t.undeclaredGlobalsInFunctions.get(i).manglename;return t.globalScope._SymbolsMap[i]=F,t.mangleMap[i]=F,t.undeclaredGlobalsInFunctions.delete(i),"gscope[lang.setAssig('"+F+"', runtimeCtx)]="+r+"; "}const u=Ze(t);return t.globalScope._SymbolsMap[i]=u,t.mangleMap[i]=u,"gscope['"+u+"']="+r+"; "}(t,n);case"VariableDeclaration":return function yt(t,n){const r=[];for(let i=0;i<n.declarations.length;i++)r.push(Z(t,n.declarations[i]));return r.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(t,n);case"BlockStatement":case"Program":return $e(t,n);case"FunctionDeclaration":return function Qe(t,n){const r=n.id.name.toLowerCase();Ue(r);let i="",u=!1;void 0!==t.globalScope[r]?i=r:void 0!==t.globalScope._SymbolsMap[r]?i=t.globalScope._SymbolsMap[r]:t.undeclaredGlobalsInFunctions.has(r)?(i=t.undeclaredGlobalsInFunctions.get(r).manglename,t.globalScope._SymbolsMap[r]=i,t.mangleMap[r]=i,t.undeclaredGlobalsInFunctions.delete(r),u=!0):(i=Ze(t),t.globalScope._SymbolsMap[r]=i,t.mangleMap[r]=i);const F={isAsync:t.isAsync,console:t.console,exports:t.exports,undeclaredGlobalsInFunctions:t.undeclaredGlobalsInFunctions,customfunctions:t.customfunctions,moduleFactory:t.moduleFactory,moduleFactoryMap:t.moduleFactoryMap,libraryResolver:t.libraryResolver,lrucache:t.lrucache,interceptor:t.interceptor,services:t.services,symbols:t.symbols,mangleMap:t.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:t.depthCounter,globalScope:t.globalScope};let b="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let d=0;d<n.params.length;d++){const L=n.params[d].name.toLowerCase();Ue(L);const te=Ze(t);F.localScope._SymbolsMap[L]=te,F.mangleMap[L]=te,b+="lscope['"+te+"']=arguments["+d.toString()+"];\n"}return!0===t.isAsync?(b+="return lang.__awaiter(this, void 0, void 0, function* () {\n",b+=$e(F,n.body)+"\n return lastStatement; ",b+="});  }",b+=", runtimeCtx),"+n.params.length+")",b+="\n lastStatement = lc.voidOperation; \n"):(b+=$e(F,n.body)+"\n return lastStatement; }, runtimeCtx),"+n.params.length+")",b+="\n lastStatement = lc.voidOperation; \n"),u?"gscope[lang.setAssig('"+i+"', runtimeCtx)]="+b:"gscope['"+i+"']="+b}(t,n);case"ImportDeclaration":return function Me(t,n){const r=n.specifiers[0].local.name.toLowerCase();Ue(r);const i=t.libraryResolver?.loadLibrary(r),u=Ze(t);void 0===t.moduleFactory[i.uri]&&(t.moduleFactory[i.uri]=function A(t,n,r=!1){const i={isAsync:r,moduleFactory:n.moduleFactory,moduleFactoryMap:{},libraryResolver:new $.a(null,t.loadedModules),globalScope:Ct(n.vars,r?ot:ke,n.customfunctions),customfunctions:n.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:ft,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor,services:n.services,symbols:{symbolCounter:0}};let u=Z(i,t);""===u&&(u="lc.voidOperation; ");let F="";F=r?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+u+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+u+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";const b=i.moduleFactory,d=i.moduleFactoryMap,L=i.exports,te={};for(const ye in L)te[ye]=void 0!==i.mangleMap[ye]?i.mangleMap[ye]:ye;const De={lc:s.y,lang:St,mangles:i.mangleMap,prepareModule:ye=>new y(ye),prepare(ye,Ae){let Ye=ye.spatialReference;null==Ye&&(Ye=new Q.A({wkid:102100}));const pt=ct(ye.vars,ye.customfunctions,Ae,ye.timeZone);return{localStack:[],isAsync:Ae,exports:L,exportmangle:te,gdefs:{},moduleFactory:b,moduleFactoryMap:d,moduleSingletons:ye.moduleSingletons,mangleMap:this.mangles,spatialReference:Ye,globalScope:pt,abortSignal:null==ye.abortSignal?{aborted:!1}:ye.abortSignal,localScope:null,services:ye.services,console:ye.console??ft,lrucache:ye.lrucache,timeZone:ye.timeZone??null,interceptor:ye.interceptor,symbols:{symbolCounter:0},depthCounter:ye.depthCounter}}};return new Function("context","spatialReference",F).bind(De)}(i.syntax,{interceptor:t.interceptor,services:t.services,moduleFactory:t.moduleFactory,lrucache:t.lrucache,timeZone:t.timeZone??null,libraryResolver:t.libraryResolver,customfunctions:t.customfunctions,vars:{}},t.isAsync)),t.moduleFactoryMap[u]=i.uri;let F="";if(F=t.isAsync?"(yield lang.loadModule('"+u+"', runtimeCtx) ); ":"lang.loadModule('"+u+"', runtimeCtx); ",void 0!==t.globalScope[r])return"gscope['"+r+"']="+F;if(void 0!==t.globalScope._SymbolsMap[r])return"gscope['"+t.globalScope._SymbolsMap[r]+"']="+F;let b="";return t.undeclaredGlobalsInFunctions.has(r)?(b=t.undeclaredGlobalsInFunctions.get(r).manglename,t.undeclaredGlobalsInFunctions.delete(r)):b=Ze(t),t.globalScope._SymbolsMap[r]=b,t.mangleMap[r]=b,"gscope[lang.setAssig('"+b+"', runtimeCtx)]="+F}(t,n);case"ExportNamedDeclaration":return function Pe(t,n){const r=Z(t,n.declaration);if("FunctionDeclaration"===n.declaration.type)t.exports[n.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===n.declaration.type)for(const i of n.declaration.declarations)t.exports[i.id.name.toLowerCase()]="variable";return r}(t,n);case"ReturnStatement":return function be(t,n){return null===n.argument?"return lc.voidOperation":"return "+Z(t,n.argument)}(t,n);case"IfStatement":return Je(t,n);case"ExpressionStatement":return function st(t,n){return"AssignmentExpression"===n.expression.type?"lastStatement = lc.voidOperation; "+Z(t,n.expression)+"; \n ":"lastStatement = "+Z(t,n.expression)+"; "}(t,n);case"AssignmentExpression":return function ve(t,n){const r=Z(t,n.right);let i=null,u="";if("MemberExpression"===n.left.type)return i=Z(t,n.left.object),!0===n.left.computed?u=Z(t,n.left.property):(u="'"+n.left.property.name+"'",Ue(n.left.property.name)),"lang.assignmember("+i+","+u+",'"+n.operator+"',"+r+")";if(i=n.left.name.toLowerCase(),Ue(i),null!==t.localScope){if(void 0!==t.localScope[i])return"lscope['"+i+"']=lang.assign("+r+",'"+n.operator+"', lscope['"+i+"'])";if(void 0!==t.localScope._SymbolsMap[i])return"lscope['"+t.localScope._SymbolsMap[i]+"']=lang.assign("+r+",'"+n.operator+"', lscope['"+t.localScope._SymbolsMap[i]+"'])"}if(void 0!==t.globalScope[i])return"gscope['"+i+"']=lang.assign("+r+",'"+n.operator+"', gscope['"+i+"'])";if(void 0!==t.globalScope._SymbolsMap[i])return"gscope['"+t.globalScope._SymbolsMap[i]+"']=lang.assign("+r+",'"+n.operator+"', gscope['"+t.globalScope._SymbolsMap[i]+"'])";if(null!==t.localScope){if(t.undeclaredGlobalsInFunctions.has(i))return"gscope[lang.chkAssig('"+t.undeclaredGlobalsInFunctions.get(i).manglename+"',runtimeCtx)]=lang.assign("+r+",'"+n.operator+"', gscope['"+t.undeclaredGlobalsInFunctions.get(i).manglename+"'])";const F={manglename:Ze(t),node:n.argument};return t.undeclaredGlobalsInFunctions.set(i,F),"gscope[lang.chkAssig('"+F.manglename+"',runtimeCtx)]=lang.assign("+r+",'"+n.operator+"', gscope['"+F.manglename+"'])"}throw new a.D$(t,a.TX.InvalidIdentifier,n)}(t,n);case"UpdateExpression":return function ge(t,n){let r=null,i="";if("MemberExpression"===n.argument.type)return r=Z(t,n.argument.object),!0===n.argument.computed?i=Z(t,n.argument.property):(i="'"+n.argument.property.name+"'",Ue(n.argument.property.name)),"lang.memberupdate("+r+","+i+",'"+n.operator+"',"+n.prefix+")";if(r=n.argument.name.toLowerCase(),Ue(r),null!==t.localScope){if(void 0!==t.localScope[r])return"lang.update(lscope, '"+r+"','"+n.operator+"',"+n.prefix+")";if(void 0!==t.localScope._SymbolsMap[r])return"lang.update(lscope, '"+t.localScope._SymbolsMap[r]+"','"+n.operator+"',"+n.prefix+")"}if(void 0!==t.globalScope[r])return"lang.update(gscope, '"+r+"','"+n.operator+"',"+n.prefix+")";if(void 0!==t.globalScope._SymbolsMap[r])return"lang.update(gscope, '"+t.globalScope._SymbolsMap[r]+"','"+n.operator+"',"+n.prefix+")";if(null!==t.localScope){if(t.undeclaredGlobalsInFunctions.has(r))return"lang.update(gscope,lang.chkAssig( '"+t.undeclaredGlobalsInFunctions.get(r).manglename+"',runtimeCtx),'"+n.operator+"',"+n.prefix+")";const u={manglename:Ze(t),node:n.argument};return t.undeclaredGlobalsInFunctions.set(r,u),"lang.update(gscope, lang.chkAssig('"+u.manglename+"',runtimeCtx),'"+n.operator+"',"+n.prefix+")"}throw new a.D$(t,a.TX.InvalidIdentifier,n)}(t,n);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function pe(t,n){try{const r=[];let i=0;for(const u of n.quasis)r.push(u.value?JSON.stringify(u.value.cooked):JSON.stringify("")),!1===u.tail&&(r.push(n.expressions[i]?"lang.castString(lang.aCheck("+Z(t,n.expressions[i])+", 'TemplateLiteral'))":""),i++);return"(["+r.join(",")+"]).join('')"}catch(r){throw r}}(t,n);case"TemplateElement":return JSON.stringify(n.value?n.value.cooked:"");case"ForStatement":return function Ke(t,n){let r="lastStatement = lc.voidOperation; \n";null!==n.init&&(r+=Z(t,n.init)+"; ");const i=He(t),u=He(t);return r+="var "+i+" = true; ",r+="\n do { ",null!==n.update&&(r+=" if ("+i+"===false) {\n "+Z(t,n.update)+"  \n}\n "+i+"=false; \n"),null!==n.test&&(r+="var "+u+" = "+Z(t,n.test)+"; ",r+="if ("+u+"===false) { break; } else if ("+u+"!==true) { lang.error('"+a.TX.BooleanConditionRequired+"');   }\n"),r+=Z(t,n.body),null!==n.update&&(r+="\n "+Z(t,n.update)),r+="\n"+i+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",r}(t,n);case"ForInStatement":return function Se(t,n){const r=He(t),i=He(t),u=He(t);let F="var "+r+" = "+Z(t,n.right)+";\n";"VariableDeclaration"===n.left.type&&(F+=Z(t,n.left));let b="VariableDeclaration"===n.left.type?n.left.declarations[0].id.name:n.left.name;b=b.toLowerCase(),Ue(b);let d="";null!==t.localScope&&(void 0!==t.localScope[b]?d="lscope['"+b+"']":void 0!==t.localScope._SymbolsMap[b]&&(d="lscope['"+t.localScope._SymbolsMap[b]+"']"));let L="";if(""===d)if(void 0!==t.globalScope[b])d="gscope['"+b+"']";else if(void 0!==t.globalScope._SymbolsMap[b])d="gscope['"+t.globalScope._SymbolsMap[b]+"']";else if(null!==t.localScope)if(t.undeclaredGlobalsInFunctions.has(b))d="gscope['"+t.undeclaredGlobalsInFunctions.get(b).manglename+"']",L=t.undeclaredGlobalsInFunctions.get(b).manglename;else{const te={manglename:Ze(t),node:n.left};t.undeclaredGlobalsInFunctions.set(b,te),d="gscope['"+te.manglename+"']",L=te.manglename}return L&&(F+="lang.chkAssig('"+L+"',runtimeCtx); \n"),F+="if ("+r+"===null) {  lastStatement = lc.voidOperation; }\n ",F+="else if (lc.isArray("+r+") || lc.isString("+r+")) {",F+="var "+i+"="+r+".length; \n",F+="for(var "+u+"=0; "+u+"<"+i+"; "+u+"++) {\n",F+=d+"="+u+";\n",F+=Z(t,n.body),F+="\n}\n",F+=" lastStatement = lc.voidOperation; \n",F+=" \n}\n",F+="else if (lc.isImmutableArray("+r+")) {",F+="var "+i+"="+r+".length(); \n",F+="for(var "+u+"=0; "+u+"<"+i+"; "+u+"++) {\n",F+=d+"="+u+";\n",F+=Z(t,n.body),F+="\n}\n",F+=" lastStatement = lc.voidOperation; \n",F+=" \n}\n",F+="else if (( "+r+" instanceof lang.Dictionary) || ( "+r+" instanceof lang.Feature)) {",F+="var "+i+"="+r+".keys(); \n",F+="for(var "+u+"=0; "+u+"<"+i+".length; "+u+"++) {\n",F+=d+"="+i+"["+u+"];\n",F+=Z(t,n.body),F+="\n}\n",F+=" lastStatement = lc.voidOperation; \n",F+=" \n}\n",t.isAsync&&(F+="else if (lc.isFeatureSet("+r+")) {",F+="var "+i+"="+r+".iterator(runtimeCtx.abortSignal); \n",F+="for(var "+u+"=lang. graphicToFeature( yield "+i+".next(),"+r+", runtimeCtx); "+u+"!=null; "+u+"=lang. graphicToFeature( yield "+i+".next(),"+r+", runtimeCtx)) {\n",F+=d+"="+u+";\n",F+=Z(t,n.body),F+="\n}\n",F+=" lastStatement = lc.voidOperation; \n",F+=" \n}\n"),F+="else { lastStatement = lc.voidOperation; } \n",F}(t,n);case"WhileStatement":return function Le(t,n){let r="lastStatement = lc.voidOperation; \n";const i=He(t);return r+=`\n  var ${i} = true;\n    do {\n      ${i} = ${Z(t,n.test)};\n      if (${i}==false) {\n        break;\n      }\n      if (${i}!==true) {\n        lang.error('${a.TX.BooleanConditionRequired}');\n      }\n      ${Z(t,n.body)}\n    }\n    while (${i} !== false);\n    lastStatement = lc.voidOperation;\n  `,r}(t,n);case"Identifier":return function qe(t,n){try{const r=n.name.toLowerCase();if(Ue(r),null!==t.localScope){if(void 0!==t.localScope[r])return"lscope['"+r+"']";if(void 0!==t.localScope._SymbolsMap[r])return"lscope['"+t.localScope._SymbolsMap[r]+"']"}if(void 0!==t.globalScope[r])return"gscope['"+r+"']";if(void 0!==t.globalScope._SymbolsMap[r])return"gscope['"+t.globalScope._SymbolsMap[r]+"']";if(null!==t.localScope){if(t.undeclaredGlobalsInFunctions.has(r))return"gscope[lang.chkAssig('"+t.undeclaredGlobalsInFunctions.get(r).manglename+"',runtimeCtx)]";const i={manglename:Ze(t),node:n.argument};return t.undeclaredGlobalsInFunctions.set(r,i),"gscope[lang.chkAssig('"+i.manglename+"',runtimeCtx)]"}throw new a.mT(t,a.TX.InvalidIdentifier,n)}catch(r){throw r}}(t,n);case"MemberExpression":return function Ft(t,n){try{let r;return!0===n.computed?r=Z(t,n.property):(r="'"+n.property.name+"'",Ue(n.property.name)),"lang.member("+Z(t,n.object)+","+r+")"}catch(r){throw r}}(t,n);case"Literal":return null==n.value?"null":JSON.stringify(n.value);case"CallExpression":return function Bt(t,n){try{if("MemberExpression"===n.callee.type){let u;!0===n.callee.computed?u=Z(t,n.callee.property):(u="'"+n.callee.property.name+"'",Ue(n.callee.property.name));let F="[";for(let b=0;b<n.arguments.length;b++)b>0&&(F+=", "),F+=Z(t,n.arguments[b]);return F+="]",t.isAsync?"(yield lang.callModuleFunction("+Z(t,n.callee.object)+","+F+","+u+",runtimeCtx))":"lang.callModuleFunction("+Z(t,n.callee.object)+","+F+","+u+",runtimeCtx)"}if("Identifier"!==n.callee.type)throw new a.mT(t,a.TX.FunctionNotFound,n);const r=n.callee.name.toLowerCase();if("iif"===r)return function et(t,n){try{if(3!==n.arguments.length)throw new a.mT(t,a.TX.WrongNumberOfParameters,n);const r=He(t);return`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${r} = ${Z(t,n.arguments[0])};\n\n        if (${r} === true) {\n          return  ${Z(t,n.arguments[1])};\n        }\n        else if (${r} === false) {\n          return ${Z(t,n.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);if("when"===r)return function we(t,n){try{if(n.arguments.length<3)throw new a.mT(t,a.TX.WrongNumberOfParameters,n);if(n.arguments.length%2==0)throw new a.mT(t,a.TX.WrongNumberOfParameters,n);const r=He(t);let i="var ";for(let u=0;u<n.arguments.length-1;u+=2)i+=`${r} = lang.mustBoolean(${Z(t,n.arguments[u])}, runtimeCtx);\n      if (${r} === true ) {\n        return ${Z(t,n.arguments[u+1])}\n      }\n`;return`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${i}\n        return ${Z(t,n.arguments[n.arguments.length-1])}\n        ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);if("defaultvalue"===r)return function tt(t,n){try{if(n.arguments.length<2||n.arguments.length>3)throw new a.mT(t,a.TX.WrongNumberOfParameters,n);const r=He(t),i=He(t),u=He(t),F=He(t);return 3===n.arguments.length?`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${r} = ${Z(t,n.arguments[0])};\n      var ${i} = ${Z(t,n.arguments[1])};\n      var ${u} = [];\n      if (lang.isImmutableArray(${i})) {\n        ${u} = ${i}.toArray();\n      } else if (lang.isArray(${i})) {\n        ${u} = ${i};\n      } else {\n        lang.error('${a.TX.InvalidParameter}');\n      }\n      if (${r} === null) {\n        return ${Z(t,n.arguments[2])};\n      }\n      for (var ${F} of ${u}) {\n        if (lang.isFeature(${r})) {\n          if (lang.isString(${F}) === false) {\n            return ${Z(t,n.arguments[2])};\n          }\n          if (!${r}.hasField(${F})) {\n            return ${Z(t,n.arguments[2])};\n          }\n          ${r} = ${r}.field(${F});\n        } else if (lang.isDictionary(${r})) {\n          if (lang.isString(${F}) === false) {\n            return  ${Z(t,n.arguments[2])};\n          }\n          if (!${r}.hasField(${F})) {\n            return  ${Z(t,n.arguments[2])};\n          }\n          ${r} = ${r}.field(${F});\n        } else if (lang.isGeometry(${r})) {\n          if (lang.isString(${F}) === false) {\n            return ${Z(t,n.arguments[2])};\n          }\n          ${r} = lang.geometryMember(${r}, ${F}, null, null, 2);\n          if (${r} === null) {\n            return  ${Z(t,n.arguments[2])};\n          }\n          if (${r} && ${r}.keystate === "notfound") {\n            return  ${Z(t,n.arguments[2])};\n          }\n        } else if (lang.isArray(${r})) {\n          if (lang.isNumber(${F}) === false) {\n            return  ${Z(t,n.arguments[2])};\n          }\n          ${r} = ${r}[${F}];\n          if (${r} === null || ${r} === undefined) {\n            return ${Z(t,n.arguments[2])};\n          }\n        } else if (lang.isImmutableArray(${r})) {\n          if (lang.isNumber(${F}) === false) {\n            return  ${Z(t,n.arguments[2])};\n          }\n          ${r} = ${r}.get(${F});\n          if (${r} === null || ${r} === undefined) {\n            return  ${Z(t,n.arguments[2])};\n          }\n        } else {\n          return  ${Z(t,n.arguments[2])};\n        }\n      }\n      return ${r};\n      ${t.isAsync?"})}()))":"}()"}`:`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${r} = ${Z(t,n.arguments[0])};\n        if (${r} === null) {\n          return  ${Z(t,n.arguments[1])};\n        }\n        if (${r} === "") {\n          return  ${Z(t,n.arguments[1])};\n        }\n        if (${r} === undefined) {\n          return  ${Z(t,n.arguments[1])};\n        }\n        return ${r};\n      ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);if("decode"===r)return function Tt(t,n){try{if(n.arguments.length<2)throw new a.mT(t,a.TX.WrongNumberOfParameters,n);if(2===n.arguments.length)return`(${Z(t,n.arguments[1])})`;if((n.arguments.length-1)%2==0)throw new a.mT(t,a.TX.WrongNumberOfParameters,n);const r=He(t),i=He(t);let u="var ";for(let F=1;F<n.arguments.length-1;F+=2)u+=`${i} = ${Z(t,n.arguments[F])};\n      if (lang.binary(${i}, ${r}, "==") === true ) {\n        return ${Z(t,n.arguments[F+1])}\n      }\n`;return`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${r} = ${Z(t,n.arguments[0])};\n        ${u}\n        return ${Z(t,n.arguments[n.arguments.length-1])}\n        ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);let i="";if(null!==t.localScope&&(void 0!==t.localScope[r]?i="lscope['"+r+"']":void 0!==t.localScope._SymbolsMap[r]&&(i="lscope['"+t.localScope._SymbolsMap[r]+"']")),""===i)if(void 0!==t.globalScope[r])i="gscope['"+r+"']";else if(void 0!==t.globalScope._SymbolsMap[r])i="gscope['"+t.globalScope._SymbolsMap[r]+"']";else if(null!==t.localScope)if(t.undeclaredGlobalsInFunctions.has(r))i="gscope[lang.chkAssig('"+t.undeclaredGlobalsInFunctions.get(r).manglename+"',runtimeCtx)]";else{const u={manglename:Ze(t),node:n.argument};t.undeclaredGlobalsInFunctions.set(r,u),i="gscope[lang.chkAssig('"+u.manglename+"',runtimeCtx)]"}if(""!==i){let u="[";for(let F=0;F<n.arguments.length;F++)F>0&&(u+=", "),u+=Z(t,n.arguments[F]);return u+="]",t.isAsync?"(yield lang.callfunc("+i+","+u+",runtimeCtx) )":"lang.callfunc("+i+","+u+",runtimeCtx)"}throw new a.mT(t,a.TX.FunctionNotFound,n)}catch(r){throw r}}(t,n);case"UnaryExpression":return function At(t,n){try{return"lang.unary("+Z(t,n.argument)+",'"+n.operator+"')"}catch(r){throw r}}(t,n);case"BinaryExpression":return function xt(t,n){try{return"lang.binary("+Z(t,n.left)+","+Z(t,n.right)+",'"+n.operator+"')"}catch(r){throw r}}(t,n);case"LogicalExpression":return function vt(t,n){try{if("AssignmentExpression"===n.left.type||"UpdateExpression"===n.left.type)throw new a.mT(t,a.TX.LogicalExpressionOnlyBoolean,n);if("AssignmentExpression"===n.right.type||"UpdateExpression"===n.right.type)throw new a.mT(t,a.TX.LogicalExpressionOnlyBoolean,n);if("&&"===n.operator||"||"===n.operator)return"(lang.logicalCheck("+Z(t,n.left)+") "+n.operator+" lang.logicalCheck("+Z(t,n.right)+"))";throw new a.mT(null,a.TX.LogicExpressionOrAnd,null)}catch(r){throw r}}(t,n);case"ArrayExpression":return function wt(t,n){try{const r=[];for(let i=0;i<n.elements.length;i++)r.push("Literal"===n.elements[i].type?Z(t,n.elements[i]):"lang.aCheck("+Z(t,n.elements[i])+",'ArrayExpression')");return"["+r.join(",")+"]"}catch(r){throw r}}(t,n);case"ObjectExpression":return function he(t,n){let r="lang.dictionary([";for(let i=0;i<n.properties.length;i++){const u=n.properties[i];Ue(u.key.name),i>0&&(r+=","),r+="lang.strCheck("+("Identifier"===u.key.type?"'"+u.key.name+"'":Z(t,u.key))+",'ObjectExpression'),lang.aCheck("+Z(t,u.value)+", 'ObjectExpression')"}return r+="])",r}(t,n);case"Property":return function Ce(t,n){throw new a.mT(t,a.TX.NeverReach,n)}(t,n);case"Array":throw new a.mT(t,a.TX.NeverReach,n);default:throw new a.mT(t,a.TX.Unrecognized,n)}}catch(r){throw r}}function Re(t,n){return"BlockStatement"===n.type?Z(t,n):"ReturnStatement"===n.type||"BreakStatement"===n.type||"ContinueStatement"===n.type?Z(t,n)+"; ":"UpdateExpression"===n.type?"lastStatement = "+Z(t,n)+"; ":"ExpressionStatement"===n.type?Z(t,n):"ObjectExpression"===n.type?"lastStatement = "+Z(t,n)+"; ":Z(t,n)+"; "}function Je(t,n){if("AssignmentExpression"===n.test.type||"UpdateExpression"===n.test.type)throw new a.mT(t,a.TX.BooleanConditionRequired,n);return`if (lang.mustBoolean(${Z(t,n.test)}, runtimeCtx) === true) {\n    ${Re(t,n.consequent)}\n  } `+(null!==n.alternate?"IfStatement"===n.alternate.type?" else "+Je(t,n.alternate):` else {\n      ${Re(t,n.alternate)}\n    }\n`:" else {\n      lastStatement = lc.voidOperation;\n    }\n")}function $e(t,n){let r="";for(let i=0;i<n.body.length;i++)"EmptyStatement"!==n.body[i].type&&(r+="ReturnStatement"===n.body[i].type||"BreakStatement"===n.body[i].type||"ContinueStatement"===n.body[i].type?Z(t,n.body[i])+"; \n":"UpdateExpression"===n.body[i].type||"ObjectExpression"===n.body[i].type?"lastStatement = "+Z(t,n.body[i])+"; \n":Z(t,n.body[i])+" \n");return r}function Ue(t){if("iif"===t)throw new a.O$;if("decode"===t)throw new a.O$;if("when"===t)throw new a.O$;if("defaultvalue"===t)throw new a.O$}const ke={};function Ze(t){return t.symbols.symbolCounter++,"_T"+t.symbols.symbolCounter.toString()}function He(t){return t.symbols.symbolCounter++,"_Tvar"+t.symbols.symbolCounter.toString()}(0,R.d)(ke,se),(0,G.d)(ke,se),(0,me.d)(ke,se),(0,ee.d)(ke,se),(0,Ne.d)(ke,se),ke.iif=function(t,n){try{return se(t,n,(r,i,u)=>{throw new a.D$(t,a.TX.Unrecognized,n)})}catch(r){throw r}},ke.decode=function(t,n){try{return se(t,n,(r,i,u)=>{throw new a.D$(t,a.TX.Unrecognized,n)})}catch(r){throw r}},ke.when=function(t,n){try{return se(t,n,(r,i,u)=>{throw new a.D$(t,a.TX.Unrecognized,n)})}catch(r){throw r}},ke.defaultvalue=function(t,n){try{return se(t,n,(r,i,u)=>{throw new a.D$(t,a.TX.Unrecognized,n)})}catch(r){throw r}};const ot={};for(const t in ke)ot[t]=new k.UQ(ke[t]);ie(ke,se);for(const t in ke)ke[t]=new k.UQ(ke[t]);const it=function(){};it.prototype=ke;const Dt=function(){};function Ct(t,n,r){const i={};t||(t={}),r||(r={}),i._SymbolsMap={},i.textformatting=1,i.infinity=1,i.pi=1;for(const u in n)i[u]=1;for(const u in r)i[u]=1;for(const u in t)i[u]=1;return i}function ct(t,n,r,i){const u=r?new Dt:new it;t||(t={}),n||(n={});const F=new m.A({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});F.immutable=!1,u._SymbolsMap={textformatting:1,infinity:1,pi:1},u.textformatting=F,u.infinity=Number.POSITIVE_INFINITY,u.pi=Math.PI;for(const b in n)u[b]=n[b],u._SymbolsMap[b]=1;for(const b in t)u._SymbolsMap[b]=1,u[b]=t[b]&&"esri.Graphic"===t[b].declaredClass?Y.A.createFromGraphic(t[b],i??null):t[b];return u}function nt(t,n){const r={mode:n,compiled:!0,functions:{},signatures:[],standardFunction:se,standardFunctionAsync:se,evaluateIdentifier:dt};for(let i=0;i<t.length;i++)t[i].registerFunctions(r);if("sync"===n){for(const i in r.functions)ke[i]=new k.UQ(r.functions[i]),it.prototype[i]=ke[i];for(let i=0;i<r.signatures.length;i++)(0,J.WC)(r.signatures[i],"sync")}else{for(const i in r.functions)ot[i]=new k.UQ(r.functions[i]),Dt.prototype[i]=ot[i];for(let i=0;i<r.signatures.length;i++)(0,J.WC)(r.signatures[i],"async")}}function dt(t,n){const r=n.name;if("_SymbolsMap"===r)throw new a.D$(t,a.TX.InvalidIdentifier,null);if(t.localStack.length>0){if("_t"!==r.substr(0,2).toLowerCase()&&void 0!==t.localStack[t.localStack.length-1][r])return t.localStack[t.localStack.length-1][r];const u=t.mangleMap[r];if(void 0!==u&&void 0!==t.localStack[t.localStack.length-1][u])return t.localStack[t.localStack.length-1][u]}if("_t"!==r.substr(0,2).toLowerCase()&&void 0!==t.globalScope[r]||1===t.globalScope._SymbolsMap[r])return t.globalScope[r];const i=t.mangleMap[r];return void 0!==i?t.globalScope[i]:void 0}Dt.prototype=ot,nt([V.A],"sync"),nt([V.A],"async");let Et=0;const St={isNumber:t=>(0,s.b)(t),isArray:t=>(0,s.o)(t),isImmutableArray:t=>(0,s.q)(t),isFeature:t=>(0,s.r)(t),isString:t=>(0,s.c)(t),isDictionary:t=>(0,s.v)(t),isGeometry:t=>(0,s.p)(t),geometryMember:(t,n,r,i,u=1)=>(0,ee.B)(t,n,r,i,u),error(t){throw new a.D$(null,t,null)},__awaiter:(t,n,r,i)=>new Promise((u,F)=>{function b(te){try{L(i.next(te))}catch(De){F(De)}}function d(te){try{L(i.throw(te))}catch(De){F(De)}}function L(te){te.done?u(te.value):te.value?.then?te.value.then(b,d):(Et++,Et%100==0?setTimeout(()=>{Et=0,b(te.value)},0):b(te.value))}L((i=i.apply(t,n||[])).next())}),functionDepthchecker:(t,n)=>function(){if(n.depthCounter.depth++,n.localStack.push([]),n.depthCounter.depth>64)throw new a.D$(null,a.TX.MaximumCallDepth,null);const r=t.apply(this,arguments);return(0,W.$X)(r)?r.then(i=>(n.depthCounter.depth--,n.localStack.length=n.localStack.length-1,i)):(n.depthCounter.depth--,n.localStack.length=n.localStack.length-1,r)},chkAssig(t,n){if(void 0===n.gdefs[t])throw new a.D$(n,a.TX.InvalidIdentifier,null);return t},mustBoolean(t,n){if(!0===t||!1===t)return t;throw new a.D$(n,a.TX.BooleanConditionRequired,null)},setAssig:(t,n)=>(n.gdefs[t]=1,t),castString:t=>(0,s.j)(t),aCheck(t,n){if((0,s.i)(t))throw new a.D$(null,"ArrayExpression"===n?a.TX.NoFunctionInArray:"ObjectExpression"===n?a.TX.NoFunctionInDictionary:a.TX.NoFunctionInTemplateLiteral,null);return t===s.B?null:t},Dictionary:m.A,Feature:Y.A,UserDefinedCompiledFunction:class j extends k.fF{constructor(n,r){super(),this.paramCount=r,this.fn=n}createFunction(n){return(...r)=>{if(r.length!==this.paramCount)throw new a.D$(n,a.TX.WrongNumberOfParameters,null);return this.fn(...r)}}call(n,r){return this.fn(...r.arguments)}marshalledCall(n,r,i,u){return u(n,r,(F,b,d)=>{d=d.map(te=>!(0,s.i)(te)||te instanceof k.CU?te:(0,k.o6)(te,n,u));const L=this.call(i,{arguments:d});return(0,W.$X)(L)?L.then(te=>(0,k.o6)(te,i,u)):L})}},dictionary(t){const n={},r=new Map;for(let u=0;u<t.length;u+=2){if((0,s.i)(t[u+1]))throw new a.D$(null,a.TX.NoFunctionInDictionary,null);if(!1===(0,s.c)(t[u]))throw new a.D$(null,a.TX.KeyMustBeString,null);let F=t[u].toString();const b=F.toLowerCase();r.has(b)?F=r.get(b):r.set(b,F),n[F]=t[u+1]===s.B?null:t[u+1]}const i=new m.A(n);return i.immutable=!1,i},strCheck(t){if(!1===(0,s.c)(t))throw new a.D$(null,a.TX.KeyMustBeString,null);return t},unary(t,n){if((0,s.a)(t)){if("!"===n)return!t;if("-"===n)return-1*(0,s.g)(t);if("+"===n)return 1*(0,s.g)(t);if("~"===n)return~(0,s.g)(t);throw new a.D$(null,a.TX.UnsupportedUnaryOperator,null)}if("-"===n)return-1*(0,s.g)(t);if("+"===n)return 1*(0,s.g)(t);if("~"===n)return~(0,s.g)(t);throw new a.D$(null,a.TX.UnsupportedUnaryOperator,null)},logicalCheck(t){if(!1===(0,s.a)(t))throw new a.D$(null,a.TX.LogicExpressionOrAnd,null);return t},logical(t,n,r){if((0,s.a)(t)&&(0,s.a)(n))switch(r){case"||":return t||n;case"&&":return t&&n;default:throw new a.D$(null,a.TX.LogicExpressionOrAnd,null)}throw new a.D$(null,a.TX.LogicExpressionOrAnd,null)},binary(t,n,r){switch(r){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,s.G)((0,s.g)(t),(0,s.g)(n),r);case"==":case"=":return(0,s.F)(t,n);case"!=":return!(0,s.F)(t,n);case"<":case">":case"<=":case">=":return(0,s.E)(t,n,r);case"+":return(0,s.c)(t)||(0,s.c)(n)?(0,s.j)(t)+(0,s.j)(n):(0,s.g)(t)+(0,s.g)(n);case"-":return(0,s.g)(t)-(0,s.g)(n);case"*":return(0,s.g)(t)*(0,s.g)(n);case"/":return(0,s.g)(t)/(0,s.g)(n);case"%":return(0,s.g)(t)%(0,s.g)(n);default:throw new a.D$(null,a.TX.UnsupportedOperator,null)}},assign(t,n,r){switch(n){case"=":return t===s.B?null:t;case"/=":return(0,s.g)(r)/(0,s.g)(t);case"*=":return(0,s.g)(r)*(0,s.g)(t);case"-=":return(0,s.g)(r)-(0,s.g)(t);case"+=":return(0,s.c)(r)||(0,s.c)(t)?(0,s.j)(r)+(0,s.j)(t):(0,s.g)(r)+(0,s.g)(t);case"%=":return(0,s.g)(r)%(0,s.g)(t);default:throw new a.D$(null,a.TX.UnsupportedOperator,null)}},update(t,n,r,i){const u=(0,s.g)(t[n]);return t[n]="++"===r?u+1:u-1,!1===i?u:"++"===r?u+1:u-1},graphicToFeature:(t,n,r)=>null===t?null:Y.A.createFromGraphicLikeObject(t.geometry,t.attributes,n,r.timeZone),memberupdate(t,n,r,i){let u;if((0,s.o)(t)){if(!(0,s.b)(n))throw new a.D$(null,a.TX.ArrayAccessorMustBeNumber,null);if(n<0&&(n=t.length+n),n<0||n>=t.length)throw new a.D$(null,a.TX.OutOfBounds,null);u=(0,s.g)(t[n]),t[n]="++"===r?u+1:u-1}else if(t instanceof m.A){if(!1===(0,s.c)(n))throw new a.D$(null,a.TX.KeyAccessorMustBeString,null);if(!0!==t.hasField(n))throw new a.D$(null,a.TX.FieldNotFound,null,{key:n});u=(0,s.g)(t.field(n)),t.setField(n,"++"===r?u+1:u-1)}else if((0,s.r)(t)){if(!1===(0,s.c)(n))throw new a.D$(null,a.TX.KeyAccessorMustBeString,null);if(!0!==t.hasField(n))throw new a.D$(null,a.TX.FieldNotFound,null);u=(0,s.g)(t.field(n)),t.setField(n,"++"===r?u+1:u-1)}else{if((0,s.q)(t))throw new a.D$(null,a.TX.Immutable,null);if(!(t instanceof y))throw new a.D$(null,a.TX.InvalidIdentifier,null);if(!1===(0,s.c)(n))throw new a.D$(null,a.TX.ModuleAccessorMustBeString,null);if(!0!==t.hasGlobal(n))throw new a.D$(null,a.TX.ModuleExportNotFound,null);u=(0,s.g)(t.global(n)),t.setGlobal(n,"++"===r?u+1:u-1)}return!1===i?u:"++"===r?u+1:u-1},assignmember(t,n,r,i){if((0,s.o)(t)){if(!(0,s.b)(n))throw new a.D$(null,a.TX.ArrayAccessorMustBeNumber,null);if(n<0&&(n=t.length+n),n<0||n>t.length)throw new a.D$(null,a.TX.OutOfBounds,null);if(n===t.length){if("="!==r)throw new a.D$(null,a.TX.OutOfBounds,null);t[n]=this.assign(i,r,t[n])}else t[n]=this.assign(i,r,t[n])}else if(t instanceof m.A){if(!1===(0,s.c)(n))throw new a.D$(null,a.TX.KeyAccessorMustBeString,null);if(!0===t.hasField(n))t.setField(n,this.assign(i,r,t.field(n)));else{if("="!==r)throw new a.D$(null,a.TX.FieldNotFound,null);t.setField(n,this.assign(i,r,null))}}else if((0,s.r)(t)){if(!1===(0,s.c)(n))throw new a.D$(null,a.TX.KeyAccessorMustBeString,null);if(!0===t.hasField(n))t.setField(n,this.assign(i,r,t.field(n)));else{if("="!==r)throw new a.D$(null,a.TX.FieldNotFound,null);t.setField(n,this.assign(i,r,null))}}else{if((0,s.q)(t))throw new a.D$(null,a.TX.Immutable,null);if(!(t instanceof y))throw new a.D$(null,a.TX.InvalidIdentifier,null);if(!1===(0,s.c)(n))throw new a.D$(null,a.TX.ModuleAccessorMustBeString,null);if(!t.hasGlobal(n))throw new a.D$(null,a.TX.ModuleExportNotFound,null);t.setGlobal(n,this.assign(i,r,t.global(n)))}},member(t,n){if(null===t)throw new a.D$(null,a.TX.MemberOfNull,null);if(t instanceof m.A||(0,s.r)(t)){if((0,s.c)(n))return t.field(n);throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)}if(t instanceof p.A){if((0,s.c)(n))return(0,ee.B)(t,n,null,null);throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)}if((0,s.o)(t)){if((0,s.b)(n)&&isFinite(n)&&Math.floor(n)===n){if(n<0&&(n=t.length+n),n>=t.length||n<0)throw new a.D$(null,a.TX.OutOfBounds,null);return t[n]}throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)}if((0,s.c)(t)){if((0,s.b)(n)&&isFinite(n)&&Math.floor(n)===n){if(n<0&&(n=t.length+n),n>=t.length||n<0)throw new a.D$(null,a.TX.OutOfBounds,null);return t[n]}throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)}if((0,s.q)(t)){if((0,s.b)(n)&&isFinite(n)&&Math.floor(n)===n){if(n<0&&(n=t.length()+n),n>=t.length()||n<0)throw new a.D$(null,a.TX.OutOfBounds,null);return t.get(n)}throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)}if(t instanceof y){if((0,s.c)(n))return t.global(n);throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)}throw new a.D$(null,a.TX.InvalidMemberAccessKey,null)},callfunc:(t,n,r)=>t.call(r,{arguments:n,preparsed:!0}),loadModule(t,n){const r=n.moduleFactoryMap[t];if(n.moduleSingletons[r])return n.moduleSingletons[r];const i=n.moduleFactory[r]({vars:{},moduleSingletons:n.moduleSingletons,depthCounter:n.depthCounter,console:n.console,abortSignal:n.abortSignal,isAsync:n.isAsync,services:n.services,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor},n.spatialReference);return n.moduleSingletons[r]=i,i},callModuleFunction(t,n,r,i){if(!(t instanceof y))throw new a.D$(null,a.TX.FunctionNotFound,null);const u=t.global(r);if(!1===(0,s.i)(u))throw new a.D$(null,a.TX.CallNonFunction,null);return u.call(i,{preparsed:!0,arguments:n})}};function ft(t){console.log(t)}function Ge(t,n,r=!1){null===n&&(n={vars:{},customfunctions:{}});let i=null;t.usesModules&&(i=new $.a(null,t.loadedModules));const u={isAsync:r,globalScope:Ct(n.vars,r?ot:ke,n.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:n.customfunctions,libraryResolver:i,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:ft,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor,services:n.services,symbols:{symbolCounter:0}};let F=Z(u,t);""===F&&(F="lc.voidOperation; "),u.undeclaredGlobalsInFunctions.size>0&&u.undeclaredGlobalsInFunctions.forEach(Ae=>{throw new a.mT(n,a.TX.InvalidIdentifier,Ae.node)});let b="";b=r?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+F+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+F+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const d=u.moduleFactory,L=u.moduleFactoryMap,te=u.exports,De={};for(const Ae in te)De[Ae]=void 0!==u.mangleMap[Ae]?u.mangleMap[Ae]:Ae;const ye={lc:s.y,lang:St,mangles:u.mangleMap,postProcess(Ae){if(Ae instanceof s.z&&(Ae=Ae.value),Ae instanceof s.A&&(Ae=Ae.value),Ae===s.B&&(Ae=null),Ae===s.C)throw new a.D$(null,a.TX.IllegalResult,null);if(Ae===s.D)throw new a.D$(null,a.TX.IllegalResult,null);if((0,s.i)(Ae))throw new a.D$(null,a.TX.IllegalResult,null);return Ae},prepare(Ae,Ye){let pt=Ae.spatialReference;null==pt&&(pt=Q.A.WebMercator);const Kt=ct(Ae.vars,Ae.customfunctions,Ye,Ae.timeZone);return{localStack:[],isAsync:Ye,moduleFactory:d,moduleFactoryMap:L,mangleMap:this.mangles,moduleSingletons:{},exports:te,gdefs:{},exportmangle:De,spatialReference:pt,globalScope:Kt,abortSignal:null==Ae.abortSignal?{aborted:!1}:Ae.abortSignal,localScope:null,services:Ae.services,console:Ae.console??ft,lrucache:Ae.lrucache,timeZone:Ae.timeZone??null,interceptor:Ae.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return new Function("context","spatialReference",b).bind(ye)}function w(){return(w=(0,I.A)(function*(){return nt([yield _.e(1501).then(_.bind(_,61501))],"async"),!0})).apply(this,arguments)}class y extends g.x{constructor(n){super(null),this.moduleContext=n}hasGlobal(n){return void 0===this.moduleContext.exports[n]&&(n=n.toLowerCase()),void 0!==this.moduleContext.exports[n]}setGlobal(n,r){const i=this.moduleContext.globalScope,u=n.toLowerCase();if((0,s.i)(r))throw new a.D$(null,a.TX.AssignModuleFunction,null);i[this.moduleContext.exportmangle[u]]=r}global(n){const r=this.moduleContext.globalScope;n=n.toLowerCase();const i=r[this.moduleContext.exportmangle[n]];if(void 0===i)throw new a.D$(null,a.TX.InvalidIdentifier,null);if((0,s.i)(i)&&!(i instanceof k.CU)){const u=new k.CU;return u.fn=i,u.parameterEvaluator=se,u.context=this.moduleContext,r[this.moduleContext.exportmangle[n]]=u,u}return i}}var T=_(89563),H=["++","--"],ne=["-","+","!","~"],fe=["=","/=","*=","%=","+=","-="],Ie=["||","&&"],ut={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},Mt=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"],le={InvalidModuleUri:"InvalidModuleUri",ForInOfLoopInitializer:"ForInOfLoopInitializer",IdentiferExpected:"IdentiferExpected",InvalidEscapedReservedWord:"InvalidEscapedReservedWord",InvalidExpression:"InvalidExpression",InvalidFunctionIdentifier:"InvalidFunctionIdentifier",InvalidHexEscapeSequence:"InvalidHexEscapeSequence",InvalidLeftHandSideInAssignment:"InvalidLeftHandSideInAssignment",InvalidLeftHandSideInForIn:"InvalidLeftHandSideInForIn",InvalidTemplateHead:"InvalidTemplateHead",InvalidVariableAssignment:"InvalidVariableAssignment",KeyMustBeString:"KeyMustBeString",NoFunctionInsideBlock:"NoFunctionInsideBlock",NoFunctionInsideFunction:"NoFunctionInsideFunction",ModuleExportRootOnly:"ModuleExportRootOnly",ModuleImportRootOnly:"ModuleImportRootOnly",PunctuatorExpected:"PunctuatorExpected",TemplateOctalLiteral:"TemplateOctalLiteral",UnexpectedBoolean:"UnexpectedBoolean",UnexpectedEndOfScript:"UnexpectedEndOfScript",UnexpectedIdentifier:"UnexpectedIdentifier",UnexpectedKeyword:"UnexpectedKeyword",UnexpectedNull:"UnexpectedNull",UnexpectedNumber:"UnexpectedNumber",UnexpectedPunctuator:"UnexpectedPunctuator",UnexpectedString:"UnexpectedString",UnexpectedTemplate:"UnexpectedTemplate",UnexpectedToken:"UnexpectedToken"},Pt={[le.InvalidModuleUri]:"Module uri must be a text literal.",[le.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[le.IdentiferExpected]:"'${value}' is an invalid identifier.",[le.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[le.InvalidExpression]:"Invalid expression.",[le.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[le.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[le.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[le.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[le.InvalidTemplateHead]:"Invalid template structure.",[le.InvalidVariableAssignment]:"Invalid variable assignment.",[le.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[le.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[le.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[le.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[le.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[le.PunctuatorExpected]:"'${value}' expected.",[le.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[le.UnexpectedBoolean]:"Unexpected boolean literal.",[le.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[le.UnexpectedIdentifier]:"Unexpected identifier.",[le.UnexpectedKeyword]:"Unexpected keyword.",[le.UnexpectedNull]:"Unexpected null literal.",[le.UnexpectedNumber]:"Unexpected number.",[le.UnexpectedPunctuator]:"Unexpected ponctuator.",[le.UnexpectedString]:"Unexpected text literal.",[le.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[le.UnexpectedToken]:"Unexpected token '${value}'."},ht=class Zn extends Error{constructor({code:n,index:r,line:i,column:u,len:F=0,description:b,data:d}){super(b??n),this.declaredRootClass="esri.arcade.lib.diagnostic",this.name="ParsingError",this.code=n,this.index=r,this.line=i,this.column=u,this.len=F,this.data=d,this.description=b,this.range={start:{line:i,column:u-1},end:{line:i,column:u+F}},Error.captureStackTrace?.(this,Zn)}};function c(t){return!!t&&"object"==typeof t&&"type"in t&&"BlockStatement"===t.type}function C(t){return!!t&&"object"==typeof t&&"type"in t&&"BlockComment"===t.type}function M(t){return!!t&&"object"==typeof t&&"type"in t&&"EmptyStatement"===t.type}function Ee(t){return!!t&&"object"==typeof t&&"type"in t&&"VariableDeclarator"===t.type}function _e(t,n){return n.loc.end.line===t.loc.start.line&&n.loc.end.column<=t.loc.start.column}function Te(t,n){return t.range[0]>=n.range[0]&&t.range[1]<=n.range[1]}var Xe=class{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(t){if(!c(t)||0!==t.body.length)return;let n=[];for(let r=this._newComments.length-1;r>=0;r--){let i=this._newComments[r];t.range[1]>=i.range[0]&&(n.unshift(i),this._newComments.splice(r,1))}n.length&&(t.innerComments=n)}attachTrailingComments(t){let n=this._nodeStack.at(-1);if(!n)return;if(c(t)&&Te(n,t))for(let i=this._newComments.length-1;i>=0;i--){let u=this._newComments[i];Te(u,t)&&(n.trailingComments=[...n.trailingComments??[],u],this._newComments.splice(i,1))}let r=[];if(this._newComments.length>0)for(let i=this._newComments.length-1;i>=0;i--){let u=this._newComments[i];_e(u,n)?(n.trailingComments=[...n.trailingComments??[],u],this._newComments.splice(i,1)):_e(u,t)&&(r.unshift(u),this._newComments.splice(i,1))}n.trailingComments&&_e(n.trailingComments[0],t)&&(r=[...r,...n.trailingComments],delete n.trailingComments),r.length>0&&(t.trailingComments=r)}attachLeadingComments(t){let n;for(;this._nodeStack.length>0;){let u=this._nodeStack[this._nodeStack.length-1];if(!(t.range[0]<=u.range[0]))break;n=u,this._nodeStack.pop()}let r=[],i=[];if(null!=n){if(!n.leadingComments)return;for(let u=n.leadingComments.length-1;u>=0;u--){let F=n.leadingComments[u];t.range[0]>=F.range[1]?(r.unshift(F),n.leadingComments.splice(u,1)):Ee(t)&&!C(F)&&(i.unshift(F),n.leadingComments.splice(u,1))}return 0===n.leadingComments.length&&delete n.leadingComments,r.length&&(t.leadingComments=r),void(i.length&&(t.trailingComments=[...i,...t.trailingComments??[]]))}for(let u=this._newComments.length-1;u>=0;u--){let F=this._newComments[u];t.range[0]>=F.range[0]&&(r.unshift(F),this._newComments.splice(u,1))}r.length&&(t.leadingComments=r)}attachComments(t){if(function Zt(t){return!!t&&"object"==typeof t&&"type"in t&&"Program"===t.type}(t)&&t.body.length>0){let n=this._nodeStack.at(-1);return n?(n.trailingComments=[...n.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(t.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(t),this.attachLeadingComments(t),this.insertInnerComments(t),this._nodeStack.push(t)}collectComment(t){this.comments.push(t),this._newComments.push(t)}},ze=/\$\{(.*?)\}/gu;function je(t,n){let r=Pt[t];return n?r.replace(ze,(i,u)=>n[u]?.toString()??""):r}var at=class{constructor(t=!1){this.tolerant=t,this.errors=[]}recordError(t){this.errors.push(t)}tolerate(t){if(!this.tolerant)throw t;this.recordError(t)}throwError(t){throw t.description??(t.description=je(t.code,t.data)),new ht(t)}tolerateError(t){t.description??(t.description=je(t.code,t.data));let n=new ht(t);if(!this.tolerant)throw n;this.recordError(n)}};function Rt(t,n){if(!t)throw new Error(`ASSERT: ${n}`)}var Lt={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/u,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/u},Fe={fromCodePoint:t=>t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023)),isWhiteSpace:t=>32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t),isLineTerminator:t=>10===t||13===t||8232===t||8233===t,isIdentifierStart:t=>36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&Lt.NonAsciiIdentifierStart.test(Fe.fromCodePoint(t)),isIdentifierPart:t=>36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&Lt.NonAsciiIdentifierPart.test(Fe.fromCodePoint(t)),isDecimalDigit:t=>t>=48&&t<=57,isHexDigit:t=>t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102,isOctalDigit:t=>t>=48&&t<=55};function pn(t){return"0123456789abcdef".indexOf(t.toLowerCase())}function Wt(t){return"01234567".indexOf(t)}var _t=[[],[],[]];H.forEach(t=>_t[t.length-1]?.push(t)),ne.forEach(t=>_t[t.length-1]?.push(t)),Ie.forEach(t=>_t[t.length-1]?.push(t)),fe.forEach(t=>_t[t.length-1]?.push(t)),["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"].forEach(t=>_t[t.length-1]?.push(t));var Wn=class{constructor(t,n){this.source=t,this.errorHandler=n,this._length=t.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(t){this.index=t.index,this.lineNumber=t.lineNumber,this.lineStart=t.lineStart,this.curlyStack=t.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(t=le.UnexpectedToken){this.errorHandler.throwError({code:t,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1,data:{value:this.source.charAt(this.index)}})}tolerateUnexpectedToken(t=le.UnexpectedToken){this.errorHandler.tolerateError({code:t,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(t){let n=[],r=this.index-t,i={start:{line:this.lineNumber,column:this.index-this.lineStart-t},end:{line:0,column:0}};for(;!this.eof();){let F=this.source.charCodeAt(this.index);if(this.index+=1,Fe.isLineTerminator(F))return i.end={line:this.lineNumber,column:this.index-this.lineStart-1},n.push({multiLine:!1,start:r+t,end:this.index-1,range:[r,this.index-1],loc:i}),13===F&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index,n}return i.end={line:this.lineNumber,column:this.index-this.lineStart},n.push({multiLine:!1,start:r+t,end:this.index,range:[r,this.index],loc:i}),n}skipMultiLineComment(){let t=[],n=this.index-2,r={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){let u=this.source.charCodeAt(this.index);if(Fe.isLineTerminator(u))13===u&&10===this.source.charCodeAt(this.index+1)&&(this.index+=1),this.lineNumber+=1,this.index+=1,this.lineStart=this.index;else if(42===u){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,r.end={line:this.lineNumber,column:this.index-this.lineStart},t.push({multiLine:!0,start:n+2,end:this.index-2,range:[n,this.index],loc:r}),t;this.index+=1}else this.index+=1}return r.end={line:this.lineNumber,column:this.index-this.lineStart},t.push({multiLine:!0,start:n+2,end:this.index,range:[n,this.index],loc:r}),this.tolerateUnexpectedToken(),t}scanComments(){let t=[];for(;!this.eof();){let n=this.source.charCodeAt(this.index);if(Fe.isWhiteSpace(n))this.index+=1;else if(Fe.isLineTerminator(n))this.index+=1,13===n&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index;else{if(47!==n)break;if(n=this.source.charCodeAt(this.index+1),47===n){this.index+=2;let r=this.skipSingleLineComment(2);t=[...t,...r]}else{if(42!==n)break;{this.index+=2;let r=this.skipMultiLineComment();t=[...t,...r]}}}}return t}isKeyword(t){switch((t=t.toLowerCase()).length){case 2:return"if"===t||"in"===t;case 3:return"var"===t||"for"===t;case 4:return"else"===t;case 5:return"break"===t||"while"===t;case 6:return"return"===t||"import"===t||"export"===t;case 8:return"function"===t||"continue"===t;default:return!1}}codePointAt(t){let n=this.source.charCodeAt(t);if(n>=55296&&n<=56319){let r=this.source.charCodeAt(t+1);r>=56320&&r<=57343&&(n=1024*(n-55296)+r-56320+65536)}return n}scanHexEscape(t){let n="u"===t?4:2,r=0;for(let i=0;i<n;i++){if(this.eof()||!Fe.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+pn(this.source[this.index]??""),this.index+=1}return String.fromCharCode(r)}scanUnicodeCodePointEscape(){let t=this.source[this.index],n=0;for("}"===t&&this.throwUnexpectedToken();!this.eof()&&(t=this.source[this.index]??"",this.index+=1,Fe.isHexDigit(t.charCodeAt(0)));)n=16*n+pn(t);return(n>1114111||"}"!==t)&&this.throwUnexpectedToken(),Fe.fromCodePoint(n)}getIdentifier(){let t=this.index;for(this.index+=1;!this.eof();){let n=this.source.charCodeAt(this.index);if(92===n)return this.index=t,this.getComplexIdentifier();if(n>=55296&&n<57343)return this.index=t,this.getComplexIdentifier();if(!Fe.isIdentifierPart(n))break;this.index+=1}return this.source.slice(t,this.index)}getComplexIdentifier(){let t,n=this.codePointAt(this.index),r=Fe.fromCodePoint(n);for(this.index+=r.length,92===n&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,t=this.scanUnicodeCodePointEscape()):(t=this.scanHexEscape("u"),(null===t||"\\"===t||!Fe.isIdentifierStart(t.charCodeAt(0)))&&this.throwUnexpectedToken()),r=t);!this.eof()&&(n=this.codePointAt(this.index),Fe.isIdentifierPart(n));)t=Fe.fromCodePoint(n),r+=t,this.index+=t.length,92===n&&(r=r.substring(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,t=this.scanUnicodeCodePointEscape()):(t=this.scanHexEscape("u"),(null===t||"\\"===t||!Fe.isIdentifierPart(t.charCodeAt(0)))&&this.throwUnexpectedToken()),r+=t);return r}octalToDecimal(t){let n="0"!==t,r=Wt(t);return!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index))&&(n=!0,r=8*r+Wt(this.source[this.index]??""),this.index+=1,"0123".includes(t)&&!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+Wt(this.source[this.index]??""),this.index+=1)),{code:r,octal:n}}scanIdentifier(){let t,n=this.index,r=92===this.source.charCodeAt(n)?this.getComplexIdentifier():this.getIdentifier();if(t=1===r.length?3:this.isKeyword(r)?4:"null"===r.toLowerCase()?5:"true"===r.toLowerCase()||"false"===r.toLowerCase()?1:3,3!==t&&n+r.length!==this.index){let i=this.index;this.index=n,this.tolerateUnexpectedToken(le.InvalidEscapedReservedWord),this.index=i}return{type:t,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}scanPunctuator(){let t=this.index,n=this.source[this.index]??"";switch(n){case"(":case"{":"{"===n&&this.curlyStack.push("{"),this.index+=1;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":this.index+=1;break;case"}":this.index+=1,this.curlyStack.pop();break;default:for(let r=_t.length;r>0;r--)if(n=this.source.substring(this.index,this.index+r),_t[r-1]?.includes(n)){this.index+=r;break}}return this.index===t&&this.throwUnexpectedToken(),{type:7,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanHexLiteral(t){let n="";for(;!this.eof()&&Fe.isHexDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index],this.index+=1;return 0===n.length&&this.throwUnexpectedToken(),Fe.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:Number.parseInt(`0x${n}`,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanBinaryLiteral(t){let n="";for(;!this.eof();){let r=this.source[this.index];if("0"!==r&&"1"!==r)break;n+=this.source[this.index],this.index+=1}if(0===n.length&&this.throwUnexpectedToken(),!this.eof()){let r=this.source.charCodeAt(this.index);(Fe.isIdentifierStart(r)||Fe.isDecimalDigit(r))&&this.throwUnexpectedToken()}return{type:6,value:Number.parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanOctalLiteral(t,n){let r="",i=!1;for(Fe.isOctalDigit(t.charCodeAt(0))&&(i=!0,r=`0${this.source[this.index]}`),this.index+=1;!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;return!i&&0===r.length&&this.throwUnexpectedToken(),(Fe.isIdentifierStart(this.source.charCodeAt(this.index))||Fe.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:Number.parseInt(r,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}scanNumericLiteral(){let t=this.index,n=this.source[t]??"";Rt(Fe.isDecimalDigit(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point");let r="";if("."!==n){if(r=this.source[this.index]??"",this.index+=1,n=this.source[this.index]??"","0"===r){if("x"===n||"X"===n)return this.index+=1,this.scanHexLiteral(t);if("b"===n||"B"===n)return this.index+=1,this.scanBinaryLiteral(t);if("o"===n||"O"===n)return this.scanOctalLiteral(n,t)}for(;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;n=this.source[this.index]??""}if("."===n){for(r+=this.source[this.index],this.index+=1;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;n=this.source[this.index]??""}if("e"===n||"E"===n)if(r+=this.source[this.index],this.index+=1,n=this.source[this.index]??"",("+"===n||"-"===n)&&(r+=this.source[this.index],this.index+=1),Fe.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;else this.throwUnexpectedToken();return Fe.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:Number.parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanStringLiteral(){let t=this.index,n=this.source[t];Rt("'"===n||'"'===n,"String literal must starts with a quote"),this.index+=1;let r=!1,i="";for(;!this.eof();){let u=this.source[this.index]??"";if(this.index+=1,u===n){n="";break}if("\\"===u)if(u=this.source[this.index]??"",this.index+=1,u&&Fe.isLineTerminator(u.charCodeAt(0)))this.lineNumber+=1,"\r"===u&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(u){case"u":if("{"===this.source[this.index])this.index+=1,i+=this.scanUnicodeCodePointEscape();else{let F=this.scanHexEscape(u);null===F&&this.throwUnexpectedToken(),i+=F}break;case"x":{let F=this.scanHexEscape(u);null===F&&this.throwUnexpectedToken(le.InvalidHexEscapeSequence),i+=F;break}case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;case"8":case"9":i+=u,this.tolerateUnexpectedToken();break;default:if(u&&Fe.isOctalDigit(u.charCodeAt(0))){let F=this.octalToDecimal(u);r=F.octal||r,i+=String.fromCharCode(F.code)}else i+=u}else{if(Fe.isLineTerminator(u.charCodeAt(0)))break;i+=u}}return""!==n&&(this.index=t,this.throwUnexpectedToken()),{type:8,value:i,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanTemplate(){let t="",n=!1,r=this.index,i="`"===this.source[r],u=!1,F=2;for(this.index+=1;!this.eof();){let b=this.source[this.index]??"";if(this.index+=1,"`"===b){F=1,u=!0,n=!0;break}if("$"!==b)if("\\"!==b)Fe.isLineTerminator(b.charCodeAt(0))?(this.lineNumber+=1,"\r"===b&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index,t+="\n"):t+=b;else if(b=this.source[this.index]??"",this.index+=1,Fe.isLineTerminator(b.charCodeAt(0)))this.lineNumber+=1,"\r"===b&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(b){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"u":if("{"===this.source[this.index])this.index+=1,t+=this.scanUnicodeCodePointEscape();else{let d=this.index,L=this.scanHexEscape(b);null!==L?t+=L:(this.index=d,t+=b)}break;case"x":{let d=this.scanHexEscape(b);null===d&&this.throwUnexpectedToken(le.InvalidHexEscapeSequence),t+=d;break}case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:"0"===b?(Fe.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(le.TemplateOctalLiteral),t+="\0"):Fe.isOctalDigit(b.charCodeAt(0))?this.throwUnexpectedToken(le.TemplateOctalLiteral):t+=b}else{if("{"===this.source[this.index]){this.curlyStack.push("${"),this.index+=1,n=!0;break}t+=b}}return n||this.throwUnexpectedToken(),i||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-F),cooked:t,head:i,tail:u,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}}lex(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};let t=this.source.charCodeAt(this.index);return Fe.isIdentifierStart(t)?this.scanIdentifier():40===t||41===t||59===t?this.scanPunctuator():39===t||34===t?this.scanStringLiteral():46===t?Fe.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():Fe.isDecimalDigit(t)?this.scanNumericLiteral():96===t||125===t&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():t>=55296&&t<57343&&Fe.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}};function Dn(t,n=0){let r=t.start-t.lineStart,i=t.lineNumber;return r<0&&(r+=n,i-=1),{index:t.start,line:i,column:r}}function gn(t){return[{index:t.range[0],...t.loc.start},{index:t.range[1],...t.loc.end}]}function yn(t){return t in ut?ut[t]:0}var Jn=class{constructor(t,n={},r){this.delegate=r,this.hasLineTerminator=!1,this.options={tokens:"boolean"==typeof n.tokens&&n.tokens,comments:"boolean"==typeof n.comments&&n.comments,tolerant:"boolean"==typeof n.tolerant&&n.tolerant},this.options.comments&&(this.commentHandler=new Xe),this.errorHandler=new at(this.options.tolerant),this.scanner=new Wn(t,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:0,curlyParsingType:0},this.rawToken={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(t,n,{validTypes:r,invalidTypes:i}){r?.some(u=>t.type===u)||i?.some(u=>t.type===u)&&this.throwError(le.InvalidExpression,n)}throwError(t,n,r=this.endMarker){let{index:i,line:u,column:F}=n;this.errorHandler.throwError({code:t,index:i,line:u,column:F+1,len:r.index-i-1})}tolerateError(t,n){throw new Error("######################################### !!!")}unexpectedTokenError(t={}){let n,{rawToken:r}=t,{code:i,data:u}=t;if(r){if(!i)switch(r.type){case 2:i=le.UnexpectedEndOfScript;break;case 3:i=le.UnexpectedIdentifier;break;case 6:i=le.UnexpectedNumber;break;case 8:i=le.UnexpectedString;break;case 10:i=le.UnexpectedTemplate}n=r.value.toString()}else n="ILLEGAL";i??(i=le.UnexpectedToken),u||(u={value:n});let F=je(i,u);if(r)return new ht({code:i,index:r.start,line:r.lineNumber,column:r.start-r.lineStart+1,len:r.end-r.start-1,data:u,description:F});let{index:b,line:d}=this.endMarker;return new ht({code:i,index:b,line:d,column:this.endMarker.column+1,data:u,description:F})}throwUnexpectedToken(t={}){throw t.rawToken??(t.rawToken=this.rawToken),this.unexpectedTokenError(t)}collectComments(t){let{commentHandler:n}=this;!n||!t.length||t.forEach(r=>{let i={type:r.multiLine?"BlockComment":"LineComment",value:this.getSourceValue(r),range:r.range,loc:r.loc};n.collectComment(i)})}peekAhead(t){let r=this.scanner.saveState(),i=t.call(this,()=>(this.scanner.scanComments(),this.scanner.lex()));return this.scanner.restoreState(r),i}getSourceValue(t){return this.scanner.source.slice(t.start,t.end)}convertToToken(t){return{type:Mt[t.type],value:this.getSourceValue(t),range:[t.start,t.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;let t=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=t.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(t){return{range:[t.index,this.endMarker.index],loc:{start:{line:t.line,column:t.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(t){return(this.delegate??this.commentHandler)&&(this.commentHandler?.attachComments(t),this.delegate?.(t)),t}expectPunctuator(t){let n=this.rawToken;this.matchPunctuator(t)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:n,code:le.PunctuatorExpected,data:{value:t}})}expectKeyword(t){4!==this.rawToken.type||this.rawToken.value.toLowerCase()!==t.toString()?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(t){3!==this.rawToken.type||this.rawToken.value.toLowerCase()!==t?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(t){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===t}matchContextualKeyword(t){return 3===this.rawToken.type&&this.rawToken.value===t}matchPunctuator(t){return 7===this.rawToken.type&&this.rawToken.value===t}getMatchingPunctuator(t){if("string"==typeof t&&(t=t.split("")),7===this.rawToken.type&&t.length)return t.find(this.matchPunctuator.bind(this))}isolateCoverGrammar(t){let n=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;let r=t.call(this);return this.context.isAssignmentTarget=n,r}inheritCoverGrammar(t){var n;let r=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;let i=t.call(this);return(n=this.context).isAssignmentTarget&&(n.isAssignmentTarget=r),i}withBlockContext(t,n){let r=this.context.blockContext;this.context.blockContext|=t;let i=this.context.curlyParsingType;this.context.curlyParsingType=1;let u=n.call(this);return this.context.blockContext=r,this.context.curlyParsingType=i,u}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator){if(2===this.rawToken.type||this.matchPunctuator("}"))return this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column);this.throwUnexpectedToken({rawToken:this.rawToken})}}parsePrimaryExpression(){let t=this.captureStartMarker(),n=this.rawToken;switch(n.type){case 3:return this.readNextRawToken(),this.finalize({type:"Identifier",name:n.value,...this.getItemLocation(t)});case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:"Literal",value:n.value,raw:this.getSourceValue(n),isString:"string"==typeof n.value,...this.getItemLocation(t)});case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:"Literal",value:"true"===n.value.toLowerCase(),raw:this.getSourceValue(n),isString:!1,...this.getItemLocation(t)});case 5:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:"Literal",value:null,raw:this.getSourceValue(n),isString:!1,...this.getItemLocation(t)});case 10:return this.parseTemplateLiteral();case 7:switch(n.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression.bind(this));case"[":return this.inheritCoverGrammar(this.parseArrayInitializer.bind(this));case"{":return this.inheritCoverGrammar(this.parseObjectExpression.bind(this));default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){let t=this.captureStartMarker();this.expectPunctuator("[");let n=[];for(;!this.matchPunctuator("]");){let r=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(le.InvalidExpression,r)):(n.push(this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:"ArrayExpression",elements:n,...this.getItemLocation(t)})}parseObjectPropertyKey(){let t=this.captureStartMarker(),n=this.rawToken;switch(n.type){case 8:return this.readNextRawToken(),this.finalize({type:"Literal",value:n.value,raw:this.getSourceValue(n),isString:!0,...this.getItemLocation(t)});case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize({type:"Identifier",name:n.value,...this.getItemLocation(t)});default:this.throwError(le.KeyMustBeString,t)}}parseObjectProperty(){let t=this.rawToken,n=this.captureStartMarker(),r=this.parseObjectPropertyKey(),i=!1,u=null;return this.matchPunctuator(":")?(this.readNextRawToken(),u=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))):3===t.type?(i=!0,u=this.finalize({type:"Identifier",name:t.value,...this.getItemLocation(n)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:"Property",kind:"init",key:r,value:u,shorthand:i,...this.getItemLocation(n)})}parseObjectExpression(){let t=this.captureStartMarker();this.expectPunctuator("{");let n=[];for(;!this.matchPunctuator("}");)n.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:"ObjectExpression",properties:n,...this.getItemLocation(t)})}parseTemplateElement(t=!1){let n=this.rawToken;10!==n.type&&this.throwUnexpectedToken({rawToken:n}),t&&!n.head&&this.throwUnexpectedToken({code:le.InvalidTemplateHead,rawToken:n});let r=this.captureStartMarker();this.readNextRawToken();let{value:i,cooked:u,tail:F}=n,b=this.finalize({type:"TemplateElement",value:{raw:i,cooked:u},tail:F,...this.getItemLocation(r)});return b.loc.start.column+=1,b.loc.end.column-=F?1:2,b}parseTemplateLiteral(){let t=this.captureStartMarker(),n=[],r=[],i=this.parseTemplateElement(!0);for(r.push(i);!i.tail;)n.push(this.parseExpression()),i=this.parseTemplateElement(),r.push(i);return this.finalize({type:"TemplateLiteral",quasis:r,expressions:n,...this.getItemLocation(t)})}parseGroupExpression(){this.expectPunctuator("(");let t=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));return this.expectPunctuator(")"),t}parseArguments(){this.expectPunctuator("(");let t=[];if(!this.matchPunctuator(")"))for(;;){let n=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));if(t.push(n),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),t}parseMemberName(){let t=this.rawToken,n=this.captureStartMarker();return this.readNextRawToken(),5!==t.type&&3!==t.type&&4!==t.type&&1!==t.type&&this.throwUnexpectedToken({rawToken:t}),this.finalize({type:"Identifier",name:t.value,...this.getItemLocation(n)})}parseLeftHandSideExpression(){let t,n=this.captureStartMarker(),r=this.inheritCoverGrammar(this.parsePrimaryExpression.bind(this)),i=this.captureStartMarker();for(;t=this.getMatchingPunctuator("([.");)switch(t){case"(":{this.context.isAssignmentTarget=!1,"Identifier"!==r.type&&"MemberExpression"!==r.type&&this.throwError(le.IdentiferExpected,n,i);let u=this.parseArguments();r=this.finalize({type:"CallExpression",callee:r,arguments:u,...this.getItemLocation(n)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");let u=this.isolateCoverGrammar(()=>this.parseExpression());this.expectPunctuator("]"),r=this.finalize({type:"MemberExpression",computed:!0,object:r,property:u,...this.getItemLocation(n)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");let u=this.parseMemberName();r=this.finalize({type:"MemberExpression",computed:!1,object:r,property:u,...this.getItemLocation(n)});continue}}return r}parseUpdateExpression(){let t=this.captureStartMarker(),n=this.getMatchingPunctuator(H);if(n){this.readNextRawToken();let F=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return"Identifier"!==b.type&&"MemberExpression"!==b.type&&"CallExpression"!==b.type&&this.throwError(le.InvalidExpression,F),this.context.isAssignmentTarget||this.tolerateError(le.InvalidLeftHandSideInAssignment,t),this.context.isAssignmentTarget=!1,this.finalize({type:"UpdateExpression",operator:n,argument:b,prefix:!0,...this.getItemLocation(t)})}let r=this.captureStartMarker(),i=this.inheritCoverGrammar(this.parseLeftHandSideExpression.bind(this)),u=this.captureStartMarker();return this.hasLineTerminator||(n=this.getMatchingPunctuator(H),!n)?i:("Identifier"!==i.type&&"MemberExpression"!==i.type&&this.throwError(le.InvalidExpression,r,u),this.context.isAssignmentTarget||this.tolerateError(le.InvalidLeftHandSideInAssignment,t),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:"UpdateExpression",operator:n,argument:i,prefix:!1,...this.getItemLocation(t)}))}parseUnaryExpression(){let t=this.getMatchingPunctuator(ne);if(t){let n=this.captureStartMarker();this.readNextRawToken();let r=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return this.context.isAssignmentTarget=!1,this.finalize({type:"UnaryExpression",operator:t,argument:r,prefix:!0,...this.getItemLocation(n)})}return this.parseUpdateExpression()}parseBinaryExpression(){let t=this.rawToken,n=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));if(7!==this.rawToken.type)return n;let r=this.rawToken.value,i=yn(r);if(0===i)return n;this.readNextRawToken(),this.context.isAssignmentTarget=!1;let u=[t,this.rawToken],F=n,b=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)),d=[F,r,b],L=[i];for(;7===this.rawToken.type&&(i=yn(this.rawToken.value))>0;){for(;d.length>2&&i<=L[L.length-1];){b=d.pop();let ye=d.pop();L.pop(),F=d.pop(),u.pop();let Ae=u[u.length-1],Ye=Dn(Ae,Ae.lineStart);d.push(this.finalize(this.createBinaryOrLogicalExpression(Ye,ye,F,b)))}d.push(this.rawToken.value),L.push(i),u.push(this.rawToken),this.readNextRawToken(),d.push(this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)))}let te=d.length-1;n=d[te];let De=u.pop();for(;te>1;){let ye=u.pop();if(!ye)break;let Ae=De?.lineStart,Ye=Dn(ye,Ae);n=this.finalize(this.createBinaryOrLogicalExpression(Ye,d[te-1],d[te-2],n)),te-=2,De=ye}return n}createBinaryOrLogicalExpression(t,n,r,i){let u=Ie.includes(n)?"LogicalExpression":"BinaryExpression";return"BinaryExpression"===u||(("AssignmentExpression"===r.type||"UpdateExpression"===r.type)&&this.throwError(le.InvalidExpression,...gn(r)),("AssignmentExpression"===i.type||"UpdateExpression"===i.type)&&this.throwError(le.InvalidExpression,...gn(r))),{type:u,operator:n,left:r,right:i,...this.getItemLocation(t)}}parseAssignmentExpression(){let t=this.captureStartMarker(),n=this.inheritCoverGrammar(this.parseBinaryExpression.bind(this)),r=this.captureStartMarker(),i=this.getMatchingPunctuator(fe);if(!i)return n;"Identifier"!==n.type&&"MemberExpression"!==n.type&&this.throwError(le.InvalidExpression,t,r),this.context.isAssignmentTarget||this.tolerateError(le.InvalidLeftHandSideInAssignment,t),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();let u=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));return this.finalize({type:"AssignmentExpression",left:n,operator:i,right:u,...this.getItemLocation(t)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}parseStatements(t){let n=[];for(;2!==this.rawToken.type&&!this.matchPunctuator(t);){let r=this.parseStatementListItem();M(r)||n.push(r)}return n}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword("function")?this.parseFunctionDeclaration():this.matchKeyword("export")?this.parseExportDeclaration():this.matchKeyword("import")?this.parseImportDeclaration():this.parseStatement()}parseBlock(){let t=this.captureStartMarker();this.expectPunctuator("{");let n=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:"BlockStatement",body:n,...this.getItemLocation(t)})}parseObjectStatement(){let t=this.captureStartMarker(),n=this.parseObjectExpression();return this.finalize({type:"ExpressionStatement",expression:n,...this.getItemLocation(t)})}parseBlockOrObjectStatement(){return 0===this.context.curlyParsingType||this.peekAhead(t=>{let n=t();return!(3!==n.type&&8!==n.type||(n=t(),7!==n.type||":"!==n.value))})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){let t=this.rawToken;if(3!==t.type)return null;let n=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:"Identifier",name:t.value,...this.getItemLocation(n)})}parseVariableDeclarator(){let t=this.captureStartMarker(),n=this.parseIdentifier();n||this.throwUnexpectedToken({code:le.IdentiferExpected});let r=null;if(this.matchPunctuator("=")){this.readNextRawToken();let i=this.rawToken;try{r=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}catch{this.throwUnexpectedToken({rawToken:i,code:le.InvalidVariableAssignment})}}return this.finalize({type:"VariableDeclarator",id:n,init:r,...this.getItemLocation(t)})}parseVariableDeclarationList(){let t=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),t.push(this.parseVariableDeclarator());return t}parseVariableDeclaration(){let t=this.captureStartMarker();this.expectKeyword("var");let n=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:"VariableDeclaration",declarations:n,kind:"var",...this.getItemLocation(t)})}parseEmptyStatement(){let t=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:"EmptyStatement",...this.getItemLocation(t)})}parseExpressionStatement(){let t=this.captureStartMarker(),n=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:"ExpressionStatement",expression:n,...this.getItemLocation(t)})}parseIfClause(){return this.withBlockContext(2,this.parseStatement.bind(this))}parseIfStatement(){let t=this.captureStartMarker();this.expectKeyword("if"),this.expectPunctuator("(");let n=this.captureStartMarker(),r=this.parseExpression(),i=this.captureStartMarker();this.expectPunctuator(")"),("AssignmentExpression"===r.type||"UpdateExpression"===r.type)&&this.throwError(le.InvalidExpression,n,i);let u=this.parseIfClause(),F=null;return this.matchKeyword("else")&&(this.readNextRawToken(),F=this.parseIfClause()),this.finalize({type:"IfStatement",test:r,consequent:u,alternate:F,...this.getItemLocation(t)})}parseWhileStatement(){let t=this.captureStartMarker();this.expectKeyword("while"),this.expectPunctuator("(");let n=this.captureStartMarker(),r=this.parseExpression(),i=this.captureStartMarker();this.expectPunctuator(")"),("AssignmentExpression"===r.type||"UpdateExpression"===r.type)&&this.throwError(le.InvalidExpression,n,i);let u=this.withBlockContext(8,this.parseStatement.bind(this));return this.finalize({type:"WhileStatement",test:r,body:u,...this.getItemLocation(t)})}parseForStatement(){let t=null,n=null,r=null,i=null,u=null,F=this.captureStartMarker();if(this.expectKeyword("for"),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword("var")){let d=this.captureStartMarker();this.readNextRawToken();let L=this.parseVariableDeclarationList();1===L.length&&this.matchKeyword("in")?(L[0].init&&this.throwError(le.ForInOfLoopInitializer,d),i=this.finalize({type:"VariableDeclaration",declarations:L,kind:"var",...this.getItemLocation(d)}),this.readNextRawToken(),u=this.parseExpression()):(this.matchKeyword("in")&&this.throwError(le.InvalidLeftHandSideInForIn,d),t=this.finalize({type:"VariableDeclaration",declarations:L,kind:"var",...this.getItemLocation(d)}),this.expectPunctuator(";"))}else{let d=this.context.isAssignmentTarget,L=this.captureStartMarker();t=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this)),this.matchKeyword("in")?(this.context.isAssignmentTarget||this.tolerateError(le.InvalidLeftHandSideInForIn,L),"Identifier"!==t.type&&this.throwError(le.InvalidLeftHandSideInForIn,L),this.readNextRawToken(),i=t,u=this.parseExpression(),t=null):(this.context.isAssignmentTarget=d,this.expectPunctuator(";"))}i||(this.matchPunctuator(";")||(n=this.isolateCoverGrammar(this.parseExpression.bind(this))),this.expectPunctuator(";"),this.matchPunctuator(")")||(r=this.isolateCoverGrammar(this.parseExpression.bind(this)))),this.expectPunctuator(")");let b=this.withBlockContext(4,()=>this.isolateCoverGrammar(this.parseStatement.bind(this)));return this.finalize(i&&u?{type:"ForInStatement",left:i,right:u,body:b,...this.getItemLocation(F)}:{type:"ForStatement",init:t,test:n,update:r,body:b,...this.getItemLocation(F)})}parseContinueStatement(){let t=this.captureStartMarker();return this.expectKeyword("continue"),this.consumeSemicolon(),this.finalize({type:"ContinueStatement",...this.getItemLocation(t)})}parseBreakStatement(){let t=this.captureStartMarker();return this.expectKeyword("break"),this.consumeSemicolon(),this.finalize({type:"BreakStatement",...this.getItemLocation(t)})}parseReturnStatement(){let t=this.captureStartMarker();this.expectKeyword("return");let n=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:"ReturnStatement",argument:n,...this.getItemLocation(t)})}parseStatement(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case 4:switch(this.rawToken.value.toLowerCase()){case"break":return this.parseBreakStatement();case"continue":return this.parseContinueStatement();case"for":return this.parseForStatement();case"function":return this.parseFunctionDeclaration();case"if":return this.parseIfStatement();case"return":return this.parseReturnStatement();case"var":return this.parseVariableDeclaration();case"while":return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){let t=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){let n=this.parseIdentifier();if(n||this.throwUnexpectedToken({rawToken:this.rawToken,code:le.IdentiferExpected}),t.push(n),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),t}parseFunctionDeclaration(){!(1&~this.context.blockContext)&&this.throwUnexpectedToken({code:le.NoFunctionInsideFunction}),(!(8&~this.context.blockContext)||!(2&~this.context.blockContext))&&this.throwUnexpectedToken({code:le.NoFunctionInsideBlock});let t=this.captureStartMarker();this.expectKeyword("function");let n=this.parseIdentifier();n||this.throwUnexpectedToken({code:le.InvalidFunctionIdentifier});let r=this.parseFormalParameters(),i=this.context.blockContext;this.context.blockContext|=1;let u=this.parseBlock();return this.context.blockContext=i,this.finalize({type:"FunctionDeclaration",id:n,params:r,body:u,...this.getItemLocation(t)})}parseScript(){let t=this.captureStartMarker(),n=this.parseStatements(),r=this.finalize({type:"Program",body:n,...this.getItemLocation(t)});return this.options.tokens&&(r.tokens=this.tokens),this.options.tolerant&&(r.errors=this.errorHandler.errors),r}parseExportDeclaration(){0!==this.context.blockContext&&this.throwUnexpectedToken({code:le.ModuleExportRootOnly});let t=null,n=this.captureStartMarker();return this.expectKeyword("export"),this.matchKeyword("var")?t=this.parseVariableDeclaration():this.matchKeyword("function")?t=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:le.InvalidExpression}),this.finalize({type:"ExportNamedDeclaration",declaration:t,specifiers:[],source:null,...this.getItemLocation(n)})}parseModuleSpecifier(){let t=this.captureStartMarker(),n=this.rawToken;if(8===n.type)return this.readNextRawToken(),this.finalize({type:"Literal",value:n.value,raw:this.getSourceValue(n),isString:!0,...this.getItemLocation(t)});this.throwError(le.InvalidModuleUri,t)}parseDefaultSpecifier(){let t=this.captureStartMarker(),n=this.parseIdentifier();return n||this.throwUnexpectedToken({code:le.IdentiferExpected}),this.finalize({type:"ImportDefaultSpecifier",local:n,...this.getItemLocation(t)})}parseImportDeclaration(){0!==this.context.blockContext&&this.throwUnexpectedToken({code:le.ModuleImportRootOnly});let t=this.captureStartMarker();this.expectKeyword("import");let n=this.parseDefaultSpecifier();this.expectContextualKeyword("from");let r=this.parseModuleSpecifier();return this.finalize({type:"ImportDeclaration",specifiers:[n],source:r,...this.getItemLocation(t)})}};function Xt(t,n=[]){const r=function Vn(t,n,r){return new Jn(t,n,r).parseScript()}(t);if(null==r.body)throw new ht({index:0,line:0,column:0,data:null,description:"",code:le.InvalidExpression});return r.loadedModules={},(0,J.C0)(r,n),r}class jt{constructor(n){const r=this;r._keys=[],r._values=[],r.length=0,n&&n.forEach(i=>{r.set(i[0],i[1])})}entries(){return[].slice.call(this.keys().map((n,r)=>[n,this._values[r]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(n){return this._keys.includes(n)}get(n){const r=this._keys.indexOf(n);return r>-1?this._values[r]:null}deepGet(n){if(!n?.length)return null;const r=(i,u)=>null==i?null:u.length?r(i instanceof jt?i.get(u[0]):i[u[0]],u.slice(1)):i;return r(this.get(n[0]),n.slice(1))}set(n,r){const i=this,u=this._keys.indexOf(n);return u>-1?i._values[u]=r:(i._keys.push(n),i._values.push(r),i.length=i._values.length),this}sortedSet(n,r,i,u){const F=this,b=this._keys.length,d=i||0,L=void 0!==u?u:b-1;if(0===b)return F._keys.push(n),F._values.push(r),F;if(n===this._keys[d])return this._values.splice(d,0,r),this;if(n===this._keys[L])return this._values.splice(L,0,r),this;if(n>this._keys[L])return this._keys.splice(L+1,0,n),this._values.splice(L+1,0,r),this;if(n<this._keys[d])return this._values.splice(d,0,r),this._keys.splice(d,0,n),this;if(d>=L)return this;const te=d+Math.floor((L-d)/2);return n<this._keys[te]?this.sortedSet(n,r,d,te-1):n>this._keys[te]?this.sortedSet(n,r,te+1,L):this}size(){return this.length}clear(){const n=this;return n._keys.length=n.length=n._values.length=0,this}delete(n){const r=this,i=r._keys.indexOf(n);return i>-1&&(r._keys.splice(i,1),r._values.splice(i,1),r.length=r._keys.length,!0)}forEach(n){this._keys.forEach((r,i)=>{n(this._values[i],r,i)})}map(n){return this.keys().map((r,i)=>n(this._values[i],r,i))}filter(n){const r=this;return r._keys.forEach((i,u)=>{!1===n(r._values[u],i,u)&&r.delete(i)}),this}clone(){return new jt(this.entries())}}class An{constructor(n=20){this._maxEntries=n,this._values=new jt}delete(n){this._values.has(n)&&this._values.delete(n)}get(n){let r=null;return this._values.has(n)&&(r=this._values.get(n),this._values.delete(n),this._values.set(n,r)),r}put(n,r){if(this._values.size()>=this._maxEntries){const i=this._values.keys()[0];this._values.delete(i)}this._values.set(n,r)}}var xn=_(73874);class Ve{constructor(n){this.portalUri=n}normalizeModuleUri(n){const r=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([?|/].*)?$/gi,i=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi,u=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,F=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,b=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([?|/].*)?$/gi;if(n.startsWith("portal+")){let d=n.substring(7),L="",te=d,De=!1;for(const Ye of[i,F,u]){const pt=Ye.exec(d);if(null!==pt){const Kt=pt.groups;te=Kt.itemid,L=Kt.portalurl,De=!0;break}}if(!1===De){if(!r.test(d))throw new a.ps(a.B.UnsupportedUriProtocol,{uri:n});te=d,L=this.portalUri}te.includes("/")&&(te=te.split("/")[0]),te.includes("?")&&(te=te.split("?")[0]);let ye="current";const Ae=b.exec(te);if(null!==Ae){const Ye=Ae.groups;te=Ye.itemid,ye=Ye.versionstring}return d=new xn.A({url:L}).restUrl+"/content/items/"+te+"/resources/"+ye+".arc",{url:d,scheme:"portal",uri:"PO:"+d}}if(n.startsWith("mock")){if("mock"===n)return{url:"",scheme:"mock",data:'\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};const d=n.replace("mock:","");if(void 0!==Ve.mocks[d])return{url:"",scheme:"mock",data:Ve.mocks[d],uri:n}}throw new a.ps(a.B.UnrecognizedUri,{uri:n})}fetchModule(n){var r=this;return(0,I.A)(function*(){const i=Ve.cachedModules.getFromCache(n.uri);if(i)return i;const u=r.fetchSource(n);Ve.cachedModules.addToCache(n.uri,u);let F=null;try{F=yield u}catch(b){throw Ve.cachedModules.removeFromCache(n.uri),b}return F})()}fetchSource(n){return(0,I.A)(function*(){if("portal"===n.scheme){const r=yield(0,T.A)(n.url,{responseType:"text",query:{}});if(r.data)return Xt(r.data,[])}if("mock"===n.scheme)return Xt(n.data??"",[]);throw new a.ps(a.B.UnsupportedUriProtocol)})()}static create(n){return new Ve(n)}static getDefault(){return this._default??(Ve._default=Ve._moduleResolverFactory())}static set moduleResolverClass(n){this._moduleResolverFactory=n,this._default=null}}Ve.mocks={},Ve.cachedModules=new class Yn{constructor(n=20){this._maxEntries=n,this._cache=new An(this._maxEntries)}clear(){this._cache=new An(this._maxEntries)}addToCache(n,r){this._cache.put(n,r)}removeFromCache(n){this._cache.delete(n)}getFromCache(n){return this._cache.get(n)}}(30),Ve._default=null,Ve._moduleResolverFactory=()=>{const t=xn.A.getDefault();return new Ve(t.url)};class Qn extends k.fF{constructor(n,r){super(),this.definition=null,this.context=null,this.definition=n,this.context=r}createFunction(n){return(...r)=>{const i={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:n.depthCounter.depth+1},globalScope:this.context.globalScope};if(i.depthCounter.depth>64)throw new a.D$(n,a.TX.MaximumCallDepth,null);return Vt(this.definition,i,r,null)}}call(n,r){return mt(n,r,(i,u,F)=>{const b={spatialReference:n.spatialReference,services:n.services,globalScope:n.globalScope,depthCounter:{depth:n.depthCounter.depth+1},libraryResolver:n.libraryResolver,exports:n.exports,timeZone:n.timeZone??null,console:n.console,lrucache:n.lrucache,interceptor:n.interceptor,localScope:{}};if(b.depthCounter.depth>64)throw new a.D$(n,a.TX.MaximumCallDepth,r);return Vt(this.definition,b,F,r)})}marshalledCall(n,r,i,u){return u(n,r,(F,b,d)=>{const L={spatialReference:n.spatialReference,globalScope:i.globalScope,services:n.services,depthCounter:{depth:n.depthCounter.depth+1},libraryResolver:n.libraryResolver,exports:n.exports,console:n.console,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,localScope:{}};return d=d.map(te=>!(0,s.i)(te)||te instanceof k.CU?te:(0,k.o6)(te,n,u)),(0,k.o6)(Vt(this.definition,L,d,r),i,u)})}}class kt extends g.x{constructor(n){super(n)}global(n){const r=this.executingContext.globalScope[n.toLowerCase()];if(r.valueset||(r.value=de(this.executingContext,r.node),r.valueset=!0),(0,s.i)(r.value)&&!(r.value instanceof k.CU)){const i=new k.CU;i.fn=r.value,i.parameterEvaluator=mt,i.context=this.executingContext,r.value=i}return r.value}setGlobal(n,r){if((0,s.i)(r))throw new a.D$(null,a.TX.AssignModuleFunction,null);this.executingContext.globalScope[n.toLowerCase()]={value:r,valueset:!0,node:null}}hasGlobal(n){return void 0===this.executingContext.exports[n]&&(n=n.toLowerCase()),void 0!==this.executingContext.exports[n]}loadModule(n){let r=n.spatialReference;null==r&&(r=new Q.A({wkid:102100})),this.moduleScope=vn({},n.customfunctions,n.timeZone),this.executingContext={spatialReference:r,globalScope:this.moduleScope,localScope:null,libraryResolver:new $.a(n.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:n.services,console:n.console??Tn,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,depthCounter:{depth:1}},de(this.executingContext,this.source.syntax)}}function mt(t,n,r){try{return!0===n.preparsed?r(t,null,n.arguments):r(t,n,function Cn(t,n){const r=[];for(let i=0;i<n.arguments.length;i++)r.push(de(t,n.arguments[i]));return r}(t,n))}catch(i){throw i}}function de(t,n){try{switch(n?.type){case"EmptyStatement":return s.B;case"VariableDeclarator":return function pr(t,n){let r=null===n.init?null:de(t,n.init);if(r===s.B&&(r=null),"Identifier"!==n.id.type)throw new a.D$(t,a.TX.InvalidIdentifier,n);const i=n.id.name.toLowerCase();return null!=t.localScope?t.localScope[i]={value:r,valueset:!0,node:n.init}:t.globalScope[i]={value:r,valueset:!0,node:n.init},s.B}(t,n);case"VariableDeclaration":return function mr(t,n){for(let r=0;r<n.declarations.length;r++)de(t,n.declarations[r]);return s.B}(t,n);case"ImportDeclaration":return function fr(t,n){const r=n.specifiers[0].local.name.toLowerCase(),i=t.libraryResolver.loadLibrary(r);let u=null;return t.libraryResolver._moduleSingletons?.has(i.uri)?u=t.libraryResolver._moduleSingletons.get(i.uri):(u=new kt(i),u.loadModule(t),t.libraryResolver._moduleSingletons?.set(i.uri,u)),t.globalScope[r]={value:u,valueset:!0,node:n},s.B}(t,n);case"ExportNamedDeclaration":return function hr(t,n){if(de(t,n.declaration),"FunctionDeclaration"===n.declaration.type)t.exports[n.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===n.declaration.type)for(const r of n.declaration.declarations)t.exports[r.id.name.toLowerCase()]="variable";return s.B}(t,n);case"BlockStatement":case"Program":return function lr(t,n){let r=s.B;for(let i=0;i<n.body.length;i++)if(r=de(t,n.body[i]),r instanceof s.z||r===s.C||r===s.D)return r;return r}(t,n);case"FunctionDeclaration":return function dr(t,n){const r=n.id.name.toLowerCase();return t.globalScope[r]={valueset:!0,node:null,value:new Qn(n,t)},s.B}(t,n);case"ReturnStatement":return function cr(t,n){if(null===n.argument)return new s.z(s.B);const r=de(t,n.argument);return new s.z(r)}(t,n);case"IfStatement":return function ur(t,n){const r=de(t,n.test);if(!0===r)return de(t,n.consequent);if(!1===r)return null!==n.alternate?de(t,n.alternate):s.B;throw new a.D$(t,a.TX.BooleanConditionRequired,n)}(t,n);case"ExpressionStatement":return function or(t,n){if("AssignmentExpression"===n.expression.type||"UpdateExpression"===n.expression.type)return de(t,n.expression);if("CallExpression"===n.expression.type){const r=de(t,n.expression);return r===s.B?s.B:new s.A(r)}{const r=de(t,n.expression);return r===s.B?s.B:new s.A(r)}}(t,n);case"AssignmentExpression":return function sr(t,n){let r=null,i="";if("MemberExpression"===n.left.type){if(r=de(t,n.left.object),!0===n.left.computed)i=de(t,n.left.property);else{if("Identifier"!==n.left.property.type)throw new a.D$(t,a.TX.InvalidIdentifier,n);i=n.left.property.name}const F=de(t,n.right);if((0,s.o)(r)){if(!(0,s.b)(i))throw new a.D$(t,a.TX.ArrayAccessorMustBeNumber,n);if(i<0&&(i=r.length+i),i<0||i>r.length)throw new a.D$(t,a.TX.OutOfBounds,n);if(i===r.length){if("="!==n.operator)throw new a.D$(t,a.TX.OutOfBounds,n);r[i]=gt(F,n.operator,r[i],n,t)}else r[i]=gt(F,n.operator,r[i],n,t)}else if(r instanceof m.A){if(!1===(0,s.c)(i))throw new a.D$(t,a.TX.KeyAccessorMustBeString,n);if(!0===r.hasField(i))r.setField(i,gt(F,n.operator,r.field(i),n,t));else{if("="!==n.operator)throw new a.D$(t,a.TX.FieldNotFound,n,{key:i});r.setField(i,gt(F,n.operator,null,n,t))}}else if((0,s.r)(r)){if(!1===(0,s.c)(i))throw new a.D$(t,a.TX.KeyAccessorMustBeString,n);if(!0===r.hasField(i))r.setField(i,gt(F,n.operator,r.field(i),n,t));else{if("="!==n.operator)throw new a.D$(t,a.TX.FieldNotFound,n,{key:i});r.setField(i,gt(F,n.operator,null,n,t))}}else{if((0,s.q)(r))throw new a.D$(t,a.TX.Immutable,n);if(!(r instanceof kt))throw new a.D$(t,a.TX.InvalidIdentifier,n);if(!1===(0,s.c)(i))throw new a.D$(t,a.TX.ModuleAccessorMustBeString,n);if(!0!==r.hasGlobal(i))throw new a.D$(t,a.TX.ModuleExportNotFound,n);r.setGlobal(i,gt(F,n.operator,r.global(i),n,t))}return s.B}r=n.left.name.toLowerCase();const u=de(t,n.right);if(null!=t.localScope&&void 0!==t.localScope[r])return t.localScope[r]={value:gt(u,n.operator,t.localScope[r].value,n,t),valueset:!0,node:n.right},s.B;if(void 0!==t.globalScope[r])return t.globalScope[r]={value:gt(u,n.operator,t.globalScope[r].value,n,t),valueset:!0,node:n.right},s.B;throw new a.D$(t,a.TX.InvalidIdentifier,n)}(t,n);case"UpdateExpression":return function ar(t,n){let r,i=null,u="";if("MemberExpression"===n.argument.type){if(i=de(t,n.argument.object),!0===n.argument.computed?u=de(t,n.argument.property):"Identifier"===n.argument.property.type&&(u=n.argument.property.name),(0,s.o)(i)){if(!(0,s.b)(u))throw new a.D$(t,a.TX.ArrayAccessorMustBeNumber,n);if(u<0&&(u=i.length+u),u<0||u>=i.length)throw new a.D$(t,a.TX.OutOfBounds,n);r=(0,s.g)(i[u]),i[u]="++"===n.operator?r+1:r-1}else if(i instanceof m.A){if(!1===(0,s.c)(u))throw new a.D$(t,a.TX.KeyAccessorMustBeString,n);if(!0!==i.hasField(u))throw new a.D$(t,a.TX.FieldNotFound,n);r=(0,s.g)(i.field(u)),i.setField(u,"++"===n.operator?r+1:r-1)}else if((0,s.r)(i)){if(!1===(0,s.c)(u))throw new a.D$(t,a.TX.KeyAccessorMustBeString,n);if(!0!==i.hasField(u))throw new a.D$(t,a.TX.FieldNotFound,n);r=(0,s.g)(i.field(u)),i.setField(u,"++"===n.operator?r+1:r-1)}else{if((0,s.q)(i))throw new a.D$(t,a.TX.Immutable,n);if(!(i instanceof kt))throw new a.D$(t,a.TX.InvalidParameter,n);if(!1===(0,s.c)(u))throw new a.D$(t,a.TX.ModuleAccessorMustBeString,n);if(!0!==i.hasGlobal(u))throw new a.D$(t,a.TX.ModuleExportNotFound,n);r=(0,s.g)(i.global(u)),i.setGlobal(u,"++"===n.operator?r+1:r-1)}return!1===n.prefix?r:"++"===n.operator?r+1:r-1}if(i="Identifier"===n.argument.type?n.argument.name.toLowerCase():"",!i)throw new a.D$(t,a.TX.InvalidIdentifier,n);if(null!=t.localScope&&void 0!==t.localScope[i])return r=(0,s.g)(t.localScope[i].value),t.localScope[i]={value:"++"===n.operator?r+1:r-1,valueset:!0,node:n},!1===n.prefix?r:"++"===n.operator?r+1:r-1;if(void 0!==t.globalScope[i])return r=(0,s.g)(t.globalScope[i].value),t.globalScope[i]={value:"++"===n.operator?r+1:r-1,valueset:!0,node:n},!1===n.prefix?r:"++"===n.operator?r+1:r-1;throw new a.D$(t,a.TX.InvalidIdentifier,n)}(t,n);case"BreakStatement":return s.C;case"ContinueStatement":return s.D;case"TemplateElement":return function Cr(t,n){return n.value?n.value.cooked:""}(0,n);case"TemplateLiteral":return function Fr(t,n){let r="",i=0;for(const u of n.quasis)r+=u.value?u.value.cooked:"",!1===u.tail&&(r+=n.expressions[i]?(0,s.j)(Er(de(t,n.expressions[i]),t,n)):"",i++);return r}(t,n);case"ForStatement":return function nr(t,n){null!==n.init&&de(t,n.init);const r={testResult:!0,lastAction:s.B};do{ir(t,n,r)}while(!0===r.testResult);return r.lastAction instanceof s.z?r.lastAction:s.B}(t,n);case"ForInStatement":return function tr(t,n){const r=de(t,n.right);"VariableDeclaration"===n.left.type&&de(t,n.left);let i=null,u="";if("VariableDeclaration"===n.left.type){const F=n.left.declarations[0].id;"Identifier"===F.type&&(u=F.name)}else"Identifier"===n.left.type&&(u=n.left.name);if(!u)throw new a.D$(t,a.TX.InvalidIdentifier,n);if(u=u.toLowerCase(),null!=t.localScope&&void 0!==t.localScope[u]&&(i=t.localScope[u]),null===i&&void 0!==t.globalScope[u]&&(i=t.globalScope[u]),null===i)throw new a.D$(t,a.TX.InvalidIdentifier,n);if((0,s.o)(r)||(0,s.c)(r)){const F=r.length;for(let b=0;b<F;b++){i.value=b;const d=de(t,n.body);if(d===s.C)break;if(d instanceof s.z)return d}return s.B}if((0,s.q)(r)){for(let F=0;F<r.length();F++){i.value=F;const b=de(t,n.body);if(b===s.C)break;if(b instanceof s.z)return b}return s.B}if(!(r instanceof m.A||(0,s.r)(r)))return s.B;{const F=r.keys();for(let b=0;b<F.length;b++){i.value=F[b];const d=de(t,n.body);if(d===s.C)break;if(d instanceof s.z)return d}}}(t,n);case"WhileStatement":return function rr(t,n){const r={testResult:!0,lastAction:s.B};if(r.testResult=de(t,n.test),!1===r.testResult)return s.B;if(!0!==r.testResult)throw new a.D$(t,a.TX.BooleanConditionRequired,n);for(;!0===r.testResult&&(r.lastAction=de(t,n.body),r.lastAction!==s.C)&&!(r.lastAction instanceof s.z);)if(r.testResult=de(t,n.test),!0!==r.testResult&&!1!==r.testResult)throw new a.D$(t,a.TX.BooleanConditionRequired,n);return r.lastAction instanceof s.z?r.lastAction:s.B}(t,n);case"Identifier":return En(t,n);case"MemberExpression":return function Dr(t,n){try{const r=de(t,n.object);if(null===r)throw new a.D$(t,a.TX.MemberOfNull,n);if(!1===n.computed){if("Identifier"===n.property.type){if(r instanceof m.A||(0,s.r)(r))return r.field(n.property.name);if(r instanceof p.A)return(0,ee.B)(r,n.property.name,t,n);if(r instanceof kt){if(!r.hasGlobal(n.property.name))throw new a.D$(t,a.TX.InvalidIdentifier,n);return r.global(n.property.name)}}throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}{let i=de(t,n.property);if(r instanceof m.A||(0,s.r)(r)){if((0,s.c)(i))return r.field(i);throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}if(r instanceof kt){if((0,s.c)(i))return r.global(i);throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}if(r instanceof p.A){if((0,s.c)(i))return(0,ee.B)(r,i,t,n);throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}if((0,s.o)(r)){if((0,s.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length+i),i>=r.length||i<0)throw new a.D$(t,a.TX.OutOfBounds,n);return r[i]}throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}if((0,s.c)(r)){if((0,s.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length+i),i>=r.length||i<0)throw new a.D$(t,a.TX.OutOfBounds,n);return r[i]}throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}if((0,s.q)(r)){if((0,s.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length()+i),i>=r.length()||i<0)throw new a.D$(t,a.TX.OutOfBounds,n);return r.get(i)}throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}throw new a.D$(t,a.TX.InvalidMemberAccessKey,n)}}catch(r){throw r}}(t,n);case"Literal":return n.value;case"CallExpression":return function wr(t,n){try{if("MemberExpression"===n.callee.type){const r=de(t,n.callee.object);if(!(r instanceof kt))throw new a.D$(t,a.TX.FunctionNotFound,n);const i=!1===n.callee.computed?n.callee.property.name:de(t,n.callee.property);if(!r.hasGlobal(i))throw new a.D$(t,a.TX.FunctionNotFound,n);const u=r.global(i);if(!(0,s.i)(u))throw new a.D$(t,a.TX.CallNonFunction,n);return u.call(t,n)}if("Identifier"!==n.callee.type)throw new a.D$(t,a.TX.FunctionNotFound,n);if(null!=t.localScope&&void 0!==t.localScope[n.callee.name.toLowerCase()]){const r=t.localScope[n.callee.name.toLowerCase()];if((0,s.i)(r.value))return r.value.call(t,n);throw new a.D$(t,a.TX.CallNonFunction,n)}if(void 0!==t.globalScope[n.callee.name.toLowerCase()]){const r=t.globalScope[n.callee.name.toLowerCase()];if((0,s.i)(r.value))return r.value.call(t,n);throw new a.D$(t,a.TX.CallNonFunction,n)}throw new a.D$(t,a.TX.FunctionNotFound,n)}catch(r){throw r}}(t,n);case"UnaryExpression":return function gr(t,n){try{const r=de(t,n.argument);if((0,s.a)(r)){if("!"===n.operator)return!r;if("-"===n.operator)return-1*(0,s.g)(r);if("+"===n.operator)return 1*(0,s.g)(r);if("~"===n.operator)return~(0,s.g)(r);throw new a.D$(t,a.TX.UnsupportedUnaryOperator,n)}if("~"===n.operator)return~(0,s.g)(r);if("-"===n.operator)return-1*(0,s.g)(r);if("+"===n.operator)return 1*(0,s.g)(r);throw new a.D$(t,a.TX.UnsupportedUnaryOperator,n)}catch(r){throw r}}(t,n);case"BinaryExpression":return function Ar(t,n){try{const r=[de(t,n.left),de(t,n.right)],i=r[0],u=r[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,s.G)((0,s.g)(i),(0,s.g)(u),n.operator);case"==":return(0,s.F)(i,u);case"!=":return!(0,s.F)(i,u);case"<":case">":case"<=":case">=":return(0,s.E)(i,u,n.operator);case"+":return(0,s.c)(i)||(0,s.c)(u)?(0,s.j)(i)+(0,s.j)(u):(0,s.g)(i)+(0,s.g)(u);case"-":return(0,s.g)(i)-(0,s.g)(u);case"*":return(0,s.g)(i)*(0,s.g)(u);case"/":return(0,s.g)(i)/(0,s.g)(u);case"%":return(0,s.g)(i)%(0,s.g)(u);default:throw new a.D$(t,a.TX.UnsupportedOperator,n)}}catch(r){throw r}}(t,n);case"LogicalExpression":return function xr(t,n){try{const r=de(t,n.left);if((0,s.a)(r))switch(n.operator){case"||":if(!0===r)return r;{const i=de(t,n.right);if((0,s.a)(i))return i;throw new a.D$(t,a.TX.LogicExpressionOrAnd,n)}case"&&":if(!1===r)return r;{const i=de(t,n.right);if((0,s.a)(i))return i;throw new a.D$(t,a.TX.LogicExpressionOrAnd,n)}default:throw new a.D$(t,a.TX.LogicExpressionOrAnd,n)}throw new a.D$(t,a.TX.LogicalExpressionOnlyBoolean,n)}catch(r){throw r}}(t,n);case"ArrayExpression":return function yr(t,n){try{const r=[];for(let i=0;i<n.elements.length;i++){const u=de(t,n.elements[i]);if((0,s.i)(u))throw new a.D$(t,a.TX.NoFunctionInArray,n);r.push(u===s.B?null:u)}return r}catch(r){throw r}}(t,n);case"ObjectExpression":return function qn(t,n){const r={},i=new Map;for(let F=0;F<n.properties.length;F++){const b=de(t,n.properties[F]);if((0,s.i)(b.value))throw new a.D$(t,a.TX.NoFunctionInDictionary,n);if(!1===(0,s.c)(b.key))throw new a.D$(t,a.TX.KeyMustBeString,n);let d=b.key.toString();const L=d.toLowerCase();i.has(L)?d=i.get(L):i.set(L,d),r[d]=b.value===s.B?null:b.value}const u=new m.A(r);return u.immutable=!1,u}(t,n);case"Property":return function er(t,n){return{key:"Identifier"===n.key.type?n.key.name:de(t,n.key),value:de(t,n.value)}}(t,n);default:throw new a.D$(t,a.TX.Unrecognized,n)}}catch(r){throw(0,a.Nh)(t,n,r)}}function ir(t,n,r){if(null!==n.test){if(r.testResult=de(t,n.test),!1===r.testResult)return;if(!0!==r.testResult)throw new a.D$(t,a.TX.BooleanConditionRequired,n)}r.lastAction=de(t,n.body),r.lastAction!==s.C?r.lastAction instanceof s.z?r.testResult=!1:null!==n.update&&de(t,n.update):r.testResult=!1}function gt(t,n,r,i,u){switch(n){case"=":return t===s.B?null:t;case"/=":return(0,s.g)(r)/(0,s.g)(t);case"*=":return(0,s.g)(r)*(0,s.g)(t);case"-=":return(0,s.g)(r)-(0,s.g)(t);case"+=":return(0,s.c)(r)||(0,s.c)(t)?(0,s.j)(r)+(0,s.j)(t):(0,s.g)(r)+(0,s.g)(t);case"%=":return(0,s.g)(r)%(0,s.g)(t);default:throw new a.D$(u,a.TX.UnsupportedOperator,i)}}function Er(t,n,r){if((0,s.i)(t))throw new a.D$(n,a.TX.NoFunctionInTemplateLiteral,r);return t}function En(t,n){let r;try{const i=n.name.toLowerCase();if(null!=t.localScope&&void 0!==t.localScope[i])return r=t.localScope[i],!0===r.valueset||(r.value=de(t,r.node),r.valueset=!0),r.value;if(void 0!==t.globalScope[i])return r=t.globalScope[i],!0===r.valueset||(r.value=de(t,r.node),r.valueset=!0),r.value;throw new a.D$(t,a.TX.InvalidIdentifier,n)}catch(i){throw i}}const We={};function Fn(t,n,r,i){try{const u=n.arguments,F=de(t,u[r]);if((0,s.F)(F,i))return de(t,u[r+1]);{const b=u.length-r;return 1===b?de(t,u[r]):2===b?null:3===b?de(t,u[r+2]):Fn(t,n,r+2,i)}}catch(u){throw u}}function wn(t,n,r,i){try{const u=n.arguments;if(!0===i)return de(t,u[r+1]);if(u.length-r==3)return de(t,u[r+2]);{const F=de(t,u[r+2]);if(!1===(0,s.a)(F))throw new a.D$(t,a.TX.BooleanConditionRequired,u[r+2]);return wn(t,n,r+2,F)}}catch(u){throw u}}function Vt(t,n,r,i){try{const u=t.body;if(r.length!==t.params.length)throw new a.D$(n,a.TX.WrongNumberOfParameters,i);if(null!=n.localScope)for(let b=0;b<r.length;b++)n.localScope[t.params[b].name.toLowerCase()]={value:r[b],valueset:!0,node:null};const F=de(n,u);if(F instanceof s.z)return F.value;if(F===s.C)throw new a.D$(n,a.TX.UnexpectedToken,i);if(F===s.D)throw new a.D$(n,a.TX.UnexpectedToken,i);return F instanceof s.A?F.value:F}catch(u){throw u}}(0,R.d)(We,mt),(0,G.d)(We,mt),(0,me.d)(We,mt),(0,ee.d)(We,mt),(0,Ne.d)(We,mt),ie(We,mt),We.iif=function(t,n){try{const r=n.arguments;(0,s.H)(null===r?[]:r,3,3,t,n);const i=de(t,r[0]);if(!1===(0,s.a)(i))throw new a.D$(t,a.TX.BooleanConditionRequired,n);return de(t,!0===i?r[1]:r[2])}catch(r){throw r}},We.defaultvalue=function(t,n){try{const r=n.arguments;(0,s.H)(null===r?[]:r,2,3,t,n);const i=de(t,r[0]);if(3===r.length){const u=de(t,r[1]);let F=[];if((0,s.q)(u))F=u.toArray();else{if(!(0,s.o)(u))throw new a.D$(t,a.TX.InvalidParameter,n);F=u}let b=i;if(null===b)return de(t,r[2]);for(const d of F)if((0,s.r)(b)){if(!1===(0,s.c)(d)||!b.hasField(d))return de(t,r[2]);b=b.field(d)}else if(b instanceof m.A){if(!1===(0,s.c)(d)||!b.hasField(d))return de(t,r[2]);b=b.field(d)}else if(b instanceof p.A){if(!1===(0,s.c)(d)||(b=(0,ee.B)(b,d,null,null,2),null===b)||"notfound"===b?.keystate)return de(t,r[2])}else if((0,s.o)(b)){if(!1===(0,s.b)(d)||(b=b[d],null==b))return de(t,r[2])}else if(!(0,s.q)(b)||!1===(0,s.b)(d)||(b=b.get(d),null==b))return de(t,r[2]);return b}return null===i||""===i||void 0===i?de(t,r[1]):i}catch(r){throw r}},We.decode=function(t,n){try{const r=n.arguments;if(r.length<2)throw new a.D$(t,a.TX.WrongNumberOfParameters,n);if(2===r.length)return de(t,r[1]);if((r.length-1)%2==0)throw new a.D$(t,a.TX.WrongNumberOfParameters,n);return Fn(t,n,1,de(t,r[0]))}catch(r){throw r}},We.when=function(t,n){try{const r=n.arguments;if(r.length<3)throw new a.D$(t,a.TX.WrongNumberOfParameters,n);if(r.length%2==0)throw new a.D$(t,a.TX.WrongNumberOfParameters,n);const i=de(t,r[0]);if(!1===(0,s.a)(i))throw new a.D$(t,a.TX.BooleanConditionRequired,r[0]);return wn(t,n,0,i)}catch(r){throw r}};for(const t in We)We[t]={value:new k.UQ(We[t]),valueset:!0,node:null};const $t=function(){};function vn(t,n,r){const i=new $t;t||(t={}),n||(n={});const u=new m.A({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});u.immutable=!1,i.textformatting={value:u,valueset:!0,node:null};for(const F in n)i[F]={value:new k.UQ(n[F]),native:!0,valueset:!0,node:null};for(const F in t)i[F]=t[F]&&"esri.Graphic"===t[F].declaredClass?{value:Y.A.createFromGraphic(t[F],r),valueset:!0,node:null}:{value:t[F],valueset:!0,node:null};return i}function Tn(t){console.log(t)}function Sn(t){const n={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:mt,evaluateIdentifier:En};for(let r=0;r<t.length;r++)t[r].registerFunctions(n);for(const r in n.functions)We[r]={value:new k.UQ(n.functions[r]),valueset:!0,node:null},$t.prototype[r]=We[r];for(let r=0;r<n.signatures.length;r++)(0,J.WC)(n.signatures[r],"sync")}function Yt(t,n){let r=n.spatialReference;null==r&&(r=new Q.A({wkid:102100}));let i=null;t.usesModules&&(i=new $.a(new Map,t.loadedModules));const u={spatialReference:r,globalScope:vn(n.vars,n.customfunctions,n.timeZone),localScope:null,services:n.services??null,exports:{},libraryResolver:i,console:n.console??Tn,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,depthCounter:{depth:1}};let F=de(u,t);if(F instanceof s.z&&(F=F.value),F instanceof s.A&&(F=F.value),F===s.B&&(F=null),F===s.C)throw new a.D$(u,a.TX.IllegalResult,null);if(F===s.D)throw new a.D$(u,a.TX.IllegalResult,null);if((0,s.i)(F))throw new a.D$(u,a.TX.IllegalResult,null);return F}$t.prototype=We,$t.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},$t.prototype.pi={value:Math.PI,valueset:!0,node:null},Sn([V.A]);var bn=_(3248),vr=_(11432);const Tr=new Set(["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"]);let _n=!1,In=!1,lt=null,Qt=[];function Bn(t,n){if(!0===n.useAsync||!0===t.isAsync)return function Sr(t,n){if(null===lt)throw new a.D$(null,a.TX.AsyncNotEnabled,null);if((0,bn.A)("esri-csp-restrictions"))return function(r){return lt.executeScript(t,r)};try{return Ge(t,n,!0)}catch(r){if("esri.arcade.arcadeuncompilableerror"===r.declaredRootClass)return function(i){return lt.executeScript(t,i)};throw r}}(t,n);if((0,bn.A)("esri-csp-restrictions"))return function(r){return Yt(t,r)};try{return Ge(t,n)}catch(r){if("esri.arcade.arcadeuncompilableerror"===r.declaredRootClass)return function(i){return Yt(t,i)};throw r}}function qt(t,n=[]){return Xt(t,n)}function en(t,n){if(!0===n.useAsync||!0===t.isAsync){if(null===lt)throw new a.D$(null,a.TX.AsyncNotEnabled,null);return lt.executeScript(t,n)}return Yt(t,n)}function Ht(t,n){return(0,J.jR)(t,n)}function Mn(t){return(0,J.cm)(t)}function Gt(t,n=[]){return void 0===t.usesGeometry&&(0,J.C0)(t,n),!0===t.usesGeometry}let tn=null;function nn(){return tn||(tn=Pn(),tn)}function Pn(){return rn.apply(this,arguments)}function rn(){return(rn=(0,I.A)(function*(){const t=yield Promise.all([_.e(3930),_.e(2076),_.e(6041)]).then(_.bind(_,46041));return In=!0,function z(t){S=t}(t),!0})).apply(this,arguments)}let an=null;function sn(){return null!==an||(an=kn()),an}function kn(){return on.apply(this,arguments)}function on(){return on=(0,I.A)(function*(){yield function bt(){return w.apply(this,arguments)}(),lt=yield Promise.all([_.e(1501),_.e(2471)]).then(_.bind(_,82471));for(const t of Qt)lt.extend(t),nt(t,"async");return Qt=null,!0}),on.apply(this,arguments)}function On(){return _n}function Nn(){return!!lt}function Rn(){return In}let un=null;function ln(){return un||(un=Ln(),un)}function Ln(){return cn.apply(this,arguments)}function cn(){return(cn=(0,I.A)(function*(){yield sn();const[t,n,r,i,u,F]=yield Promise.all([Promise.all([_.e(13),_.e(1277),_.e(7120),_.e(2044)]).then(_.bind(_,2044)),Promise.all([_.e(13),_.e(1277),_.e(7120),_.e(2044),_.e(9666)]).then(_.bind(_,69666)),Promise.all([_.e(13),_.e(7120),_.e(3611)]).then(_.bind(_,43611)),Promise.all([_.e(13),_.e(8535)]).then(_.bind(_,30916)),_.e(6798).then(_.bind(_,16798)),_.e(4753).then(_.bind(_,44753))]);return Hn=t,lt.extend([n,r,i,u,F]),nt([n,r,i,u,F],"async"),_n=!0,!0})).apply(this,arguments)}function $n(t,n=[]){return void 0===t.usesFeatureSet&&(0,J.C0)(t,n),!0===t.usesFeatureSet}function Un(t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,I.A)(function*(t,n,r=[],i=!1,u=null){return fn(new Set,t,n,r,i,u)})).apply(this,arguments)}function fn(t,n,r){return hn.apply(this,arguments)}function hn(){return(hn=(0,I.A)(function*(t,n,r,i=[],u=!1,F=null){const b="string"==typeof n?qt(n):n,d=[];return b&&(!1===Rn()&&(Gt(b)||u)&&d.push(nn()),!1===Nn()&&(!0===b.isAsync||r)&&d.push(sn()),!1===On()&&($n(b)||function Pr(t,n){if(n){for(const r of n)if(Ht(t,r))return!0;return!1}return!1}(b,i))&&d.push(ln())),d.length&&(yield Promise.all(d)),yield Xn(t,b,F,r,u),!0})).apply(this,arguments)}function Xn(t,n){return mn.apply(this,arguments)}function mn(){return(mn=(0,I.A)(function*(t,n,r=null,i=!1,u=!1){const F=(0,J.cj)(n);null===r&&F.length>0&&(r=Ve.getDefault()),n.loadedModules={};for(const b of F){(0,vr.Lw)(r);const d=r.normalizeModuleUri(b.source);if(t.has(d.uri))throw new a.D$(null,a.TX.CircularModules,null);t.add(d.uri);const L=yield r.fetchModule(d);yield fn(t,L,i,[],u,r),t.delete(d.uri),L.isAsync&&(n.isAsync=!0),L.usesFeatureSet&&(n.usesFeatureSet=!0),L.usesGeometry&&(n.usesGeometry=!0),n.loadedModules[b.libname]={uri:d.uri,script:L}}})).apply(this,arguments)}function jn(t){if(Gt(t))return!0;const n=(0,J.$w)(t);let r=!1;for(let i=0;i<n.length;i++)if(Tr.has(n[i])){r=!0;break}return r}let Hn=null;function zt(){return Hn}const Or=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:fn,compileScript:Bn,enableAsyncSupport:sn,enableAsyncSupportImpl:kn,enableFeatureSetSupport:ln,enableFeatureSetSupportImpl:Ln,enableGeometrySupport:nn,enableGeometrySupportImpl:Pn,executeScript:en,extend:function br(t){Sn(t),nt(t,"sync"),null===lt?Qt.push(t):(nt(t,"async"),lt.extend(t))},extractExpectedFieldLiterals:Mn,extractFieldLiterals:function Br(t,n=!1){return void 0===n&&(n=!1),(0,J.qz)(t)},featureSetUtils:zt,isAsyncEnabled:Nn,isFeatureSetSupportEnabled:On,isGeometryEnabled:Rn,loadDependentModules:Xn,loadScriptDependencies:Un,parseAndExecuteScript:function _r(t,n,r=[]){return en(Xt(t,r),n)},parseScript:qt,referencesFunction:function Ir(t,n){return(0,J.je)(t,n)},referencesMember:Ht,scriptIsAsync:function Mr(t,n=[]){return void 0===t.isAsync&&(0,J.C0)(t,n),!0===t.isAsync},scriptTouchesGeometry:jn,scriptUsesFeatureSet:$n,scriptUsesGeometryEngine:Gt,scriptUsesModules:function kr(t,n=[]){return void 0===t.usesModules&&(0,J.C0)(t,n),!0===t.usesModules}},Symbol.toStringTag,{value:"Module"}));var Nr=_(77806),Rr=_(87257),Lr=_(29752);const Gn=/^\$(feature|aggregatedFeatures)\./i,$r={vars:{$feature:"any",$view:"any"},spatialReference:null};function Ur(t){return t.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function Xr(t){return null==t?null:(0,s.o)(t)||(0,s.q)(t)?"array":(0,s.k)(t)?"date":(0,s.c)(t)?"text":(0,s.a)(t)?"boolean":(0,s.b)(t)?"number":t instanceof m.A?"dictionary":(0,s.r)(t)?"feature":t instanceof o.A?"point":t instanceof E.A?"polygon":t instanceof N.A?"polyline":t instanceof h.A?"multipoint":t instanceof l.A?"extent":t instanceof Rr.n?"dateOnly":t instanceof Lr.k?"time":(0,s.u)(t)?"featureSet":(0,s.s)(t)?"featureSetCollection":null}function Ut(t){if(!t)return null;try{return qt(t)}catch{}return null}function jr(t,n){const r="string"==typeof t?Ut(t):t;if(!r)return null;try{return Bn(r,n=n||(0,Nr.o8)($r))}catch{}return null}function Hr(t,n,r){return{vars:{$feature:null==t?new Y.A:Y.A.createFromGraphic(t,r),$view:n?.view},spatialReference:n?.sr,timeZone:r??null}}function Gr(t,n,r){return Y.A.createFromGraphicLikeObject(n,t,r,null)}function zr(t,n){null!=t.vars&&(t.vars.$feature=n)}function Kr(t,n){let r;try{r=en(t,n)}catch{r=null}return r}function Zr(t,n){let r;try{r=t?t(n):null}catch{r=null}return r}function Wr(t,n){try{return t?t(n):Promise.resolve(null)}catch{return Promise.resolve(null)}}function Jr(t,n){if(!t)return[];const r="string"==typeof t?Ut(t):t;if(!r)return[];const i=Mn(r);let u=new Array;i.forEach(b=>{Gn.test(b)&&(b=b.replace(Gn,""),u.push(b))});const F=u.filter(b=>b.includes("*"));return u=u.filter(b=>!F.includes(b)),n&&F.forEach(b=>{const d=new RegExp(`^${b.split(/\*+/).map(Ur).join(".*")}$`,"i");n.forEach(L=>d.test(L)?u.push(L):null)}),[...new Set(u.sort())]}function Vr(t){return Ht(t,"$view")}function Yr(t,n){return!!t&&Ht(t,n)}function Qr(t){if(t&&(null!=t.spatialReference||null!=t.scale&&null!=t.viewingMode))return{view:t.viewingMode&&null!=t.scale?new m.A({viewingMode:t.viewingMode,scale:t.scale}):null,sr:t.spatialReference}}function qr({url:t,spatialReference:n,lrucache:r,interceptor:i}){const u=zt();return u?u.createFeatureSetCollectionFromService(t,n,r,i):null}function ei({layer:t,spatialReference:n,outFields:r,returnGeometry:i,lrucache:u,interceptor:F}){if(null===t)return null;const b=zt();return b?b.constructFeatureSet(t,n,r,i??!0,u,F):null}function ti(t){if(null===t?.map)return null;const n=zt();return n?n.createFeatureSetCollectionFromMap(t.map,t.spatialReference,t.lrucache,t.interceptor):null}function ni(t,n){return m.A.convertJsonToArcade(t,n)}function ri(t,n,r=[]){return Un(t,n,r)}function ii(){return nn()}function ai(){return ln()}function zn(t,n){if(!t)return!1;if("string"==typeof t)return n(t);const r=t;if(function si(t){return"simple"===t.type||"class-breaks"===t.type||"unique-value"===t.type||"dot-density"===t.type||"dictionary"===t.type||"pie-chart"===t.type}(r)){if("dot-density"===r.type){const F=r.attributes?.some(b=>n(b.valueExpression));if(F)return F}const i=r.visualVariables,u=!!i&&i.some(F=>{let b=n(F.valueExpression);return"size"===F.type&&(Kn(F.minSize)&&(b=b||n(F.minSize.valueExpression)),Kn(F.maxSize)&&(b=b||n(F.maxSize.valueExpression))),b});return!(!("valueExpression"in r)||!n(r.valueExpression))||u}if(function oi(t){return"esri.layers.support.LabelClass"===t.declaredClass}(r)){const i=r.labelExpressionInfo?.expression;return!(!i||!n(i))||!1}return!!function ui(t){return"esri.PopupTemplate"===t.declaredClass}(r)&&(!!r.expressionInfos&&r.expressionInfos.some(i=>n(i.expression))||Array.isArray(r.content)&&r.content.some(i=>"expression"===i.type&&n(i.expressionInfo?.expression)))}function li(t){const n=Ut(t);return!!n&&jn(n)}function ci(t){return zn(t,li)}function di(t){const n=Ut(t);return!!n&&Gt(n)}function fi(t){return zn(t,di)}function Kn(t){return t&&"esri.renderers.visualVariables.SizeVariable"===t.declaredClass}}}]);