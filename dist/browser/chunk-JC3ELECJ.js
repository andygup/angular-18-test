import{a as m}from"./chunk-XQF54ERT.js";import"./chunk-TMNMAACS.js";import{a as l,b as p,c as f}from"./chunk-TUM5YCRC.js";import"./chunk-2ETW6ZBA.js";import"./chunk-6K7P7RRW.js";import"./chunk-7LRMKXZV.js";import"./chunk-BCREO4Q5.js";import"./chunk-BNUHB4AP.js";import"./chunk-ZGLJFDS6.js";import"./chunk-RSDQHAJX.js";import"./chunk-UHTPPTOJ.js";import"./chunk-LP5GLSKB.js";import"./chunk-LTDZH3EN.js";import"./chunk-3SBMUUA6.js";import"./chunk-X7Z55FTO.js";import"./chunk-B66V4PSA.js";import"./chunk-A4HCVMB4.js";import{_ as u}from"./chunk-AANS6QE5.js";import"./chunk-RMOOROEO.js";import"./chunk-ZP7G4HN4.js";import"./chunk-W3WDPWBE.js";import"./chunk-43GG6PFR.js";import"./chunk-MLSR6YE6.js";import"./chunk-JPDAKIWT.js";import"./chunk-D62JNIRP.js";import"./chunk-3DV77WOO.js";import"./chunk-NJG4JJ4L.js";import{a as n,b as g,g as y}from"./chunk-3T7TAUC2.js";function G(a,e,o){return y(this,null,function*(){let t=p(a),r=e.toJSON();r.traceLocations=JSON.stringify(e.traceLocations),e.resultTypes&&(r.resultTypes=JSON.stringify(e.resultTypes));let s=l(t.query,n({query:f(g(n({},r),{f:"json"}))},o)),c=`${t.path}/trace`;return u(c,s).then(i=>d(i,e.outSpatialReference))})}function N(a,e,o){return y(this,null,function*(){let t=p(a),r=e.toJSON();r.traceLocations=JSON.stringify(e.traceLocations),e.resultTypes&&(r.resultTypes=JSON.stringify(e.resultTypes));let s=l(t.query,n({query:f(g(n({},r),{async:!0,f:"json"}))},o)),c=`${t.path}/trace`,{data:i}=yield u(c,s);return i.statusUrl})}function d(a,e){let{data:o}=a,t=m.fromJSON(o.traceResults);return t.aggregatedGeometry&&e&&(t.aggregatedGeometry.line&&(t.aggregatedGeometry.line.spatialReference=e.clone()),t.aggregatedGeometry.multipoint&&(t.aggregatedGeometry.multipoint.spatialReference=e.clone()),t.aggregatedGeometry.polygon&&(t.aggregatedGeometry.polygon.spatialReference=e.clone())),t}export{N as submitTraceJob,G as trace};
