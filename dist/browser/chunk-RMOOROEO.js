import{A as tt,B as rt,C as st,D as it,E as ot,F as pe,G as me,K as nt,L as at,P as ct,Q as V,R as ge,S as P,a as He,b as _,c as Ve,d as z,e as $e,f as ue,g as d,h as Je,i as fe,j as Ge,k as D,l as u,m as H,n as g,o as We,p as Ye,q as Ke,r as de,z as et}from"./chunk-ZP7G4HN4.js";import{a as le}from"./chunk-W3WDPWBE.js";import{a as p,g as Ze,j as Qe,z as Xe}from"./chunk-43GG6PFR.js";import{b as ze}from"./chunk-MLSR6YE6.js";import{a as he}from"./chunk-D62JNIRP.js";import{b as j,e as R,f as Be,s as N,u as B}from"./chunk-3DV77WOO.js";import{a as A,d as Le,l as je}from"./chunk-NJG4JJ4L.js";import{a as Me,b as qe,j as Fe}from"./chunk-3T7TAUC2.js";var lt=new WeakMap;function Lt(r,e,t=!1){let s=`\u{1F6D1} DEPRECATED - ${e}`;if(!t)return void r.warn(s);let i=lt.get(r);i||(i=new Set,lt.set(r,i)),i.has(e)||(i.add(e),r.warn(s))}function ut(r,e,t={}){if(A("esri-deprecation-warnings")){let{moduleName:s}=t;ft(r,`Function: ${(s?s+"::":"")+e+"()"}`,t)}}function wr(r,e,t={}){if(A("esri-deprecation-warnings")){let{moduleName:s}=t;ft(r,`Property: ${(s?s+"::":"")+e}`,t)}}function ft(r,e,t={}){if(A("esri-deprecation-warnings")){let{replacement:s,version:i,see:o,warnOnce:a}=t,n=e;s&&(n+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),i&&(n+=`
	\u2699\uFE0F Version: ${i}`),o&&(n+=`
	\u{1F517} See ${o} for more details.`),Lt(r,n,a)}}var l;(function(r){r[r.DEFAULTS=0]="DEFAULTS",r[r.COMPUTED=1]="COMPUTED",r[r.SERVICE=2]="SERVICE",r[r.PORTAL_ITEM=3]="PORTAL_ITEM",r[r.WEB_SCENE=4]="WEB_SCENE",r[r.WEB_MAP=5]="WEB_MAP",r[r.LINK_CHART=6]="LINK_CHART",r[r.USER=7]="USER"})(l||(l={}));var Tr=l.USER+1;function $(r){switch(r){case"defaults":return l.DEFAULTS;case"service":return l.SERVICE;case"portal-item":return l.PORTAL_ITEM;case"web-scene":return l.WEB_SCENE;case"web-map":return l.WEB_MAP;case"link-chart":return l.LINK_CHART;case"user":return l.USER;default:return null}}function J(r){switch(r){case l.DEFAULTS:return"defaults";case l.SERVICE:return"service";case l.PORTAL_ITEM:return"portal-item";case l.WEB_SCENE:return"web-scene";case l.WEB_MAP:return"web-map";case l.LINK_CHART:return"link-chart";case l.USER:return"user"}}function dt(r){return J(r)}var U=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,t)=>e-t)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,t)=>e+t,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var _e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},ye=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},ve=0,ht=0,M={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Oe=["prepare","preRender","render","postRender","update","finish"],we=[],b=new he,be=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function jt(){w!=null&&(cancelAnimationFrame(w),w=requestAnimationFrame(Te))}var W={frameTasks:b,willDispatch:!1,clearFrameTasks:Bt,dispatch:gt,executeFrameTasks:zt,reschedule:jt};function pt(r){let e=new ye(r);return we.push(e),W.willDispatch||(W.willDispatch=!0,de(gt)),e}function Rr(r){let e=new _e(r);return b.push(e),w==null&&(ve=performance.now(),w=requestAnimationFrame(Te)),new be(e)}var w=null;function Bt(r=!1){b.forAll(e=>{e.removed=!0}),r&&mt()}function Te(){let r=performance.now();w=null,w=b.length>0?requestAnimationFrame(Te):null,W.executeFrameTasks(r)}function zt(r){let e=r-ve;ve=r;let t=ht>0?ht:1e3/60,s=Math.max(0,e-t);M.time=r,M.frameDuration=t-s;for(let i=0;i<Oe.length;i++){let o=performance.now(),a=Oe[i];b.forAll(n=>{n.paused||n.removed||(i===0&&n.ticks++,n.phases[a]&&(M.elapsedFrameTime=performance.now()-r,M.deltaTime=n.ticks===0?0:e,n.phases[a]?.call(n,M)))}),Ht[i].record(performance.now()-o)}mt(),Vt.record(performance.now()-r)}var G=new he;function mt(){b.forAll(r=>{r.removed&&G.push(r)}),b.removeUnorderedMany(G.data,G.length),G.clear()}function gt(){for(;we.length;){let r=we.shift();r.isActive&&r.callback()}W.willDispatch=!1}function Pr(r=1,e){let t=Xe(),s=()=>{Qe(e)?t.reject(Ze()):r===0?t():(--r,de(()=>s()))};return s(),t.promise}var Ht=Oe.map(r=>new U(r)),Vt=new U("total");var k=class{constructor(e){this._accessed=new Set,this._handles=[],this._observerObject=new Se(e),_t.register(this,new WeakRef(this._observerObject),this)}destroy(){_t.unregister(this._observerObject),this._accessed.clear(),this._observerObject?.destroy(),this.clear()}onObservableAccessed(e){this._accessed.add(e)}onTrackingEnd(){let e=this._handles,t=this._observerObject;this._accessed.forEach(s=>{e.push(s.observe(t))}),this._accessed.clear()}clear(){let e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}},Se=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;let e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=$t}},_t=new FinalizationRegistry(r=>{r.deref()?.destroy()});function $t(){}function Jt(r){r.length=0}var q=class{constructor(e=50,t=50){this._pool=new D(Array,void 0,Jt,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Ee.acquire()}static release(e){return Ee.release(e)}static prune(){Ee.prune()}},Ee=new q(100);var Y=class extends D{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){let t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};function vt(r,e){for(let t of r.entries())if(e(t[0]))return!0;return!1}function yt(r,e){if(!e)return r;for(let t of e)t!=null&&r.add(t);return r}function zr(r,e){return e!=null&&r.add(e),r}function Gt(r,e){let t=new Set;return yt(t,r),yt(t,e),t}function Wt(r,e){let t=new Set;for(let s of e)r.has(s)&&t.add(s);return t}function Hr(r,e){if(!r||!e)return!1;if(r===e)return!0;for(let t of r)if(!e.has(t))return!1;return!0}function Vr(r,e){if(r==null&&e==null)return!0;if(r==null||e==null||r.size!==e.size)return!1;for(let t of r)if(!e.has(t))return!1;return!0}function Yt(r,e){let t=new Set(r);for(let s of e)t.delete(s);return t}function $r(r,e){return Yt(Gt(r,e),Wt(r,e))}var Kt=0;function K(){return++Kt}function Ot(r,e){let t=r[r.length-1]==="?"?r.slice(0,-1):r;if(e.getItemAt!=null||Array.isArray(e)){let i=parseInt(t,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.at(i)}let s=_(e);return Ve(s,t)?s.get(t):e[t]}function wt(r,e,t){if(r==null)return r;let s=Ot(e[t],r);return!s&&t<e.length-1?void 0:t===e.length-1?s:wt(s,e,t+1)}function T(r,e,t=0){return typeof e!="string"||e.includes(".")?wt(r,$e(e),t):Ot(e,r)}function m(r,e){return T(r,e)}function Ae(r,e){return T(e,r)!==void 0}var I=!1,Z=[];function Ne(r,e){let t=new k(o),s=null,i=!1;function o(){if(!t||i)return;if(I)return void bt(o);let n=s;t.clear(),I=!0,i=!0,s=g(t,r),i=!1,I=!1,e(s,n),Tt()}function a(){t&&(t.destroy(),t=null,s=null)}return i=!0,s=g(t,r),i=!1,p(a)}function De(r,e){let t=new k(i),s=null;function i(){e(s,a)}function o(){t&&(t.destroy(),t=null),s=null}function a(){return t?(t.clear(),s=g(t,r),s):null}return a(),p(o)}function Xr(r){let e=new k(s),t=!1;function s(){e&&!t&&(I?bt(s):(e.clear(),I=!0,t=!0,g(e,r),t=!1,I=!1,Tt()))}function i(){e&&(e.destroy(),e=null)}return t=!0,g(e,r),t=!1,p(i)}function bt(r){Z.includes(r)||Z.unshift(r)}function Tt(){for(;Z.length;)Z.pop()()}var F;(function(r){r[r.Untracked=0]="Untracked",r[r.Tracked=1]="Tracked"})(F||(F={}));var S=class{constructor(){this.uid=K(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,s,i,o){return this.pool.acquire(F.Untracked,e,t,s,i,o,R)}static acquireTracked(e,t,s,i){return this.pool.acquire(F.Tracked,e,t,s,null,null,i)}notify(e,t){this.type===F.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,s,i,o,a,n){this.uid=K(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=s,this.getValue=i,this.target=o,this.path=a,this.equals=n}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=K(),this.removed=!0}};S.pool=new Y(S);var Q=new q,y=new Set,X;function ee(r){y.delete(r),y.add(r),X||(X=pt(Qt))}function Zt(r){if(r.removed)return;let e=r.oldValue,t=r.getValue();r.equals(e,t)||(r.oldValue=t,r.notify(t,e))}function St(r){for(let e of y.values())e.target===r&&(e.removed=!0)}function Qt(){let r=10;for(;X&&r--;){X=null;let e=Xt(),t=Q.acquire();for(let s of e){let i=s.uid;Zt(s),i===s.uid&&s.removed&&t.push(s)}for(let s of y)s.removed&&(t.push(s),y.delete(s));for(let s of t)S.pool.release(s);Q.release(t),Q.release(e),ke.forEach(s=>s())}}function Xt(){let r=Q.acquire();r.length=y.size;let e=0;for(let t of y)r[e]=t,++e;return y.clear(),r}var ke=new Set;function ds(r){return ke.add(r),p(()=>ke.delete(r))}function er(r,e,t){let s=ue(r,e,t,(i,o,a)=>{let n,c,f=De(()=>T(i,o),(v,h)=>{i.__accessor__?.lifecycle===d.DESTROYED||n&&n.uid!==c?s.remove():(n||(n=S.acquireUntracked(v,a,h,i,o),c=n.uid),ee(n))});return p(()=>{f.remove(),n&&(n.uid!==c||n.removed||(n.removed=!0,ee(n)),n=null),s=f=null})});return s}function tr(r,e,t){let s=ue(r,e,t,(i,o,a)=>{let n=!1;return Ne(()=>T(i,o),(c,f)=>{i.__accessor__.lifecycle!==d.DESTROYED?n||(n=!0,R(f,c)||a.call(i,c,f,o,i),n=!1):s.remove()})});return s}function Et(r,e,t,s=!1){return r.__accessor__&&r.__accessor__.lifecycle!==d.DESTROYED?s?tr(r,e,t):er(r,e,t):p()}function rr(r,e,t){let s,i,o=De(r,(a,n)=>{s&&s.uid!==i?o.remove():(s||(s=S.acquireTracked(a,e,n,t),i=s.uid),ee(s))});return p(()=>{o.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,ee(s)),s=null),o=null})}function sr(r,e,t){let s=!1;return Ne(r,(i,o)=>{s||(s=!0,t(o,i)||e(i,o),s=!1)})}function hs(r,e,t=!1,s=Be){return t?sr(r,e,s):rr(r,e,s)}function ps(r){return vt(y,e=>e.oldValue===r)}function C(r,e,t){if(r&&e)if(typeof e=="object")for(let s of Object.getOwnPropertyNames(e))C(r,s,e[s]);else{if(e.includes(".")){let i=e.split("."),o=i.splice(-1,1)[0];return void C(m(r,i),o,t)}let s=r.__accessor__;s!=null&&ir(e,s),r[e]=t}}function ir(r,e){if(A("esri-unknown-property-errors")&&!or(r,e))throw new B("set:unknown-property",nr(r,e))}function or(r,e){return e.metadata[r]!=null}function nr(r,e){return"setting unknown property '"+r+"' on instance of "+e.host.declaredClass}function At(r={}){return(e,t)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${t}. Accessor does not support static properties.`);let s=Object.getOwnPropertyDescriptor(e,t),i=fe(e,t);s&&(s.get||s.set?(i.get=s.get||i.get,i.set=s.set||i.set):"value"in s&&("value"in r&&N.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${t}" on "${e.constructor.name}" already defined in the metadata`,r),i.value=r.value=s.value)),r.readOnly!=null&&(i.readOnly=r.readOnly);let o=r.aliasOf;if(o){let c=typeof o=="string"?o:o.source,f=typeof o=="string"?null:o.overridable===!0,v;i.dependsOn=[c],i.get=function(){let h=m(this,c);if(typeof h=="function"){v||(v=c.split(".").slice(0,-1).join("."));let E=m(this,v);E&&(h=h.bind(E))}return h},i.readOnly||(i.set=f?function(h){this._override(t,h)}:function(h){C(this,c,h)})}let a=r.type,n=r.types;i.cast||(a?i.cast=ar(a):n&&(Array.isArray(n)?i.cast=tt(me(n[0])):i.cast=me(n))),Ge(i,r),r.range&&(i.cast=cr(i.cast,r.range))}}function As(r,e,t){let s=fe(r,t);s.json||(s.json={});let i=s.json;return e!==void 0&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function ar(r){let e=0,t=r;if(nt(r))return at(r);for(;Array.isArray(t)&&t.length===1&&typeof t[0]!="string"&&typeof t[0]!="number";)t=t[0],e++;let s=t;if(ot(s))return e===0?pe(s):st(pe(s),e);if(e===1)return rt(s);if(e>1)return it(s,e);let i=r;return i.from?i.from:et(i)}function cr(r,e){return t=>{let s=+r(t);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function Ds(r){let e=[];return function*(){yield*Fe(e);for(let t of r)e.push(t),yield t}}function ks(r,e){for(let t of r)if(t!=null&&e(t))return t}function Ie(r){return r!=null&&typeof r[Symbol.iterator]=="function"}var x=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(Ie(e)){let s=this._getOrCreateGroup(t);for(let i of e)Dt(i)&&s.push(i)}else Dt(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{let s=this._getGroup(e);s&&t&&s.forEach(t)}}has(e){return this._groups.has(te(e))}remove(e){if(typeof e!="string"&&Ie(e)){for(let t of e)this.remove(t);return this}return this.has(e)?(Nt(this._getGroup(e)),this._groups.delete(te(e)),this):this}removeAll(){return this._groups.forEach(Nt),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);let t=[];return this._groups.set(te(e),t),t}_getGroup(e){return this._groups.get(te(e))}};function te(r){return r||"_default_"}function Nt(r){for(let e of r)e instanceof x?e.removeAll():e.remove()}function Dt(r){return r!=null&&(!!r.remove||r instanceof x)}var re=class{constructor(e,t){this._observers=e,this._observer=t}remove(){je(this._observers,this._observer)}};var se=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return lr;this._observers==null&&(this._observers=[]);let t=this._observers,s=!1,i=!1,o=t.length;for(let a=0;a<o;++a){let n=t[a];if(n.destroyed)i=!0;else if(n===e){s=!0;break}}return s||(t.push(e),i&&this._removeDestroyedObservers()),new re(t,e)}_removeDestroyedObservers(){let e=this._observers;if(!e||e.length===0)return;let t=e.length,s=0;for(let i=0;i<t;++i){for(;i+s<t&&e[i+s].destroyed;)++s;if(s>0){if(!(i+s<t))break;e[i]=e[i+s]}}e.length=t-s}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this._observers;if(e!=null){for(let t of e)t.onCommitted();this._observers=null}}},lr=p();var L=class extends se{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this._accessed=null,this._handles=null,this.flags=0,this.flags=u.Dirty|(t.nonNullable?u.NonNullable:0)|(t.hasOwnProperty("value")?u.HasDefaultValue:0)|(t.get===void 0?u.DepTrackingInitialized:0)|(t.dependsOn===void 0?u.AutoTracked:0)}destroy(){this.flags&u.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){H(this);let t=e.store,s=this.propertyName,i=this.flags,o=t.get(s);if(i&u.Computing||~i&u.Dirty&&t.has(s))return o;this.flags|=u.Computing;let a=e.host,n;i&u.AutoTracked?n=g(this,this.metadata.get,a):(Ke(a,this),n=this.metadata.get.call(a)),t.set(s,n,l.COMPUTED);let c=t.get(s);return c===o?this.flags&=~u.Dirty:We(this.commit,this),this.flags&=~u.Computing,c}onObservableAccessed(e){e!==this&&(this._accessed??=new Set,this._accessed.add(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=u.DepTrackingInitialized,this._accessed!=null&&(this._handles??=[],this._accessed.forEach(e=>{this._handles.push(e.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~u.Dirty,this.onCommitted()}_clearObservationHandles(){let e=this._handles;if(e!==null){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}onInvalidated(){~this.flags&u.Overridden&&(this.flags|=u.Dirty);let e=this._observers;if(e&&e.length>0)for(let t of e)t.onInvalidated()}onCommitted(){let e=this._observers;if(e&&e.length>0){let t=e.slice();for(let s of t)s.onCommitted()}}};var ie=class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){let t=new r;return this._values.forEach((s,i)=>{e&&e.has(i)||t.set(i,j(s))}),t}get(e){return this._values.get(e)}originOf(){return l.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function oe(r,e,t){return r!==void 0}function kt(r,e,t,s){return r!==void 0&&(!(t==null&&r.flags&u.NonNullable)||(s.lifecycle,d.INITIALIZING,!1))}var ne=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=d.INITIALIZING,this.store=new ie,this._origin=l.USER;let t=this.host.constructor.__accessorMetadata__;for(let s in t){let i=new L(s,t[s]);this.propertiesByName.set(s,i)}this.metadata=t}initialize(){this.lifecycle=d.CONSTRUCTING}constructed(){this.lifecycle=d.CONSTRUCTED}destroy(){this.lifecycle=d.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==d.INITIALIZING}get(e){let t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);H(t);let s=this.store;return s.has(e)?s.get(e):t.metadata.value}originOf(e){let t=this.store.originOf(e);if(t===void 0){let s=this.propertiesByName.get(e);if(s!==void 0&&s.flags&u.HasDefaultValue)return"defaults"}return J(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){let t=this.propertiesByName.get(e);if(oe(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){let s=this.propertiesByName.get(e);oe(s)&&this._internalSet(s,t)}getDependsInfo(e,t,s){let i=this.propertiesByName.get(t);if(!oe(i))return"";let o=new Set,a=g({onObservableAccessed:c=>o.add(c),onTrackingEnd:()=>{}},()=>i.metadata.get?.call(e)),n=`${s}${e.declaredClass.split(".").pop()}.${t}: ${a}
`;if(o.size===0)return n;s+="  ";for(let c of o)c instanceof L&&(n+=`${s}${c.propertyName}: undefined
`);return n}setAtOrigin(e,t,s){let i=this.propertiesByName.get(e);if(oe(i))return this._setAtOrigin(i,t,s)}isOverridden(e){let t=this.propertiesByName.get(e);return t!==void 0&&!!(t.flags&u.Overridden)}clearOverride(e){let t=this.propertiesByName.get(e);t&&t.flags&u.Overridden&&(t.flags&=~u.Overridden,t.notifyChange())}override(e,t){let s=this.propertiesByName.get(e);if(!kt(s,e,t,this))return;let i=s.metadata.cast;if(i){let o=this._cast(i,t),{valid:a,value:n}=o;if(Ce.release(o),!a)return;t=n}s.flags|=u.Overridden,this._internalSet(s,t)}set(e,t){let s=this.propertiesByName.get(e);if(!kt(s,e,t,this))return;let i=s.metadata.cast;if(i){let a=this._cast(i,t),{valid:n,value:c}=a;if(Ce.release(a),!n)return;t=c}let o=s.metadata.set;o?o.call(this.host,t):this._internalSet(s,t)}setDefaultOrigin(e){this._origin=$(e)}getDefaultOrigin(){return J(this._origin)}notifyChange(e){let t=this.propertiesByName.get(e);t!==void 0&&t.notifyChange()}invalidate(e){let t=this.propertiesByName.get(e);t!==void 0&&t.invalidate()}commit(e){let t=this.propertiesByName.get(e);t!==void 0&&t.commit()}_internalSet(e,t){let s=this.lifecycle!==d.INITIALIZING?this._origin:l.DEFAULTS;this._setAtOrigin(e,t,s)}_setAtOrigin(e,t,s){let i=this.store,o=e.propertyName;i.has(o,s)&&R(t,i.get(o))&&~e.flags&u.Overridden&&s===i.originOf(o)||(e.invalidate(),i.set(o,t,s),e.commit(),Ye(this.host,e))}_cast(e,t){let s=Ce.acquire();return s.valid=!0,s.value=t,e&&(s.value=e.call(this.host,t,s)),s}},xe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}},Ce=new D(xe);var ur;function Re(){return ur}var It;(function(r){r[r.Ignore=0]="Ignore",r[r.Destroy=1]="Destroy",r[r.ThrowError=2]="ThrowError"})(It||(It={}));var Ct,xt;function fr(r){if(r==null)return{value:r};if(Array.isArray(r))return{type:[r[0]],value:null};switch(typeof r){case"object":return r.constructor?.__accessorMetadata__||r instanceof Date?{type:r.constructor,value:r}:r;case"boolean":return{type:Boolean,value:r};case"string":return{type:String,value:r};case"number":return{type:Number,value:r};case"function":return{type:r,value:null};default:return}}var O=Symbol("Accessor-Handles"),Pe=Symbol("Accessor-Initialized"),ae=class r{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");let{properties:t,declaredClass:s,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;let o=this;class a extends o{constructor(...c){super(...c),this.inherited=null,i&&i.apply(this,c)}}Je(a.prototype);for(let n in e){let c=e[n];a.prototype[n]=typeof c=="function"?function(...f){let v=this.inherited,h;this.inherited=function(...E){if(o.prototype[n])return o.prototype[n].apply(this,E)};try{h=c.apply(this,f)}catch(E){throw this.inherited=v,E}return this.inherited=v,h}:e[n]}for(let n in t){let c=fr(t[n]);At(c)(a.prototype,n)}return P(s)(a)}constructor(...e){if(this[Ct]=null,this[xt]=!1,this.constructor===r)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");let t=new ne(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:t}),e.length>0&&(t.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0]),Re()?.onInstanceConstruct(this)}postscript(){let e=this.__accessor__,t=e.ctorArgs;e.initialize(),t&&(this.set(t),e.ctorArgs=null),e.constructed(),this.initialize(),this[Pe]=!0}initialize(){}[He](){this[O]=ze(this[O])}destroy(){this.destroyed||(St(this),this.__accessor__.destroy(),Re()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Pe]}get destroyed(){return this.__accessor__?.lifecycle===d.DESTROYED||!1}commitProperty(e){m(this,e)}get(e){return ut(N.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),m(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return C(this,e,t),this}watch(e,t,s){return Et(this,e,t,s)}addHandles(e,t){if(this.destroyed){let s=Array.isArray(e)?e:[e];for(let i of s)i.remove();return}(this[O]??=new x).add(e,t)}removeHandles(e){this[O]?.remove(e)}removeAllHandles(){this[O]?.removeAll()}removeHandlesReference(e){this[O]?.removeReference(e)}hasHandles(e){return this[O]?.has(e)===!0}_override(e,t){t===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){t==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}};Ct=O,xt=Pe;function dr(r,e,t,s,i){let o={};return e.write?.writer?.call(r,s,o,t,i),o}function Rt(r,e,t,s,i,o){if(!s?.write)return!1;let a=m(r,t);if(!i&&s.write.overridePolicy){let n=s.write.overridePolicy.call(r,a,t,o??void 0);n!==void 0&&(i=n)}if(i||(i=s.write),!i||i.enabled===!1||i.layerContainerTypes&&o?.layerContainerType&&!i.layerContainerTypes.includes(o.layerContainerType))return!1;if((a===null&&!i.allowNull&&!i.writerEnsuresNonNull||a===void 0)&&i.isRequired){let n=new B("web-document-write:property-required",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return n&&o?.messages?o.messages.push(n):n&&!o&&N.getLogger("esri.core.accessorSupport.write").error(n.name,n.message),!1}return!(a===void 0||a===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(t)===l.DEFAULTS)&&hr(r,t,o,s,a)||!i.ignoreOrigin&&o?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(t)<$(o.origin))}function hr(r,e,t,s,i){let o=s.default;if(o===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(i);if(typeof o=="function"){if(Array.isArray(i)){let a=o.call(r,e,t??void 0);return Le(a,i)}return!1}return o===i}function Ni(r,e,t,s){let i=_(r),o=i.metadata,a=ge(o[e],s);return!!a&&Rt(r,i,e,a,t,s)}function Pt(r,e,t){if(r&&typeof r.toJSON=="function"&&(!r.toJSON.isDefaultToJSON||!r.write))return z(e,r.toJSON(t));let s=_(r),i=s.metadata;for(let o in i){let a=ge(i[o],t);if(!Rt(r,s,o,a,void 0,t))continue;let n=m(r,o),c=dr(r,a,a.write&&typeof a.write.target=="string"?a.write.target:o,n,t);Object.keys(c).length>0&&(e=z(e,c),t?.resources?.pendingOperations?.length&&t.resources.pendingOperations.push(Promise.all(t.resources.pendingOperations).then(()=>z(e,c,()=>"replace-arrays"))),t?.writtenProperties&&t.writtenProperties.push({target:r,propName:o,oldOrigin:dt(s.store.originOf(o)),newOrigin:t.origin}))}return e}var ce=class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){let t=new r;return this._values.forEach((s,i)=>{e&&e.has(i)||t.set(i,j(s.value),s.origin)}),t}get(e,t){t=this._normalizeOrigin(t);let s=this._values.get(e);return t==null||s?.origin===t?s?.value:void 0}originOf(e){return this._values.get(e)?.origin??l.USER}keys(e){e=this._normalizeOrigin(e);let t=[...this._values.keys()];return e==null?t:t.filter(s=>this._values.get(s)?.origin===e)}set(e,t,s){if((s=this._normalizeOrigin(s))===l.DEFAULTS){let i=this._values.get(e);if(i?.origin!=null&&i.origin>s)return}this._values.set(e,new Ue(t,s))}delete(e,t){(t=this._normalizeOrigin(t))!=null&&this._values.get(e)?.origin!==t||this._values.delete(e)}has(e,t){return(t=this._normalizeOrigin(t))!=null?this._values.get(e)?.origin===t:this._values.has(e)}forEach(e){this._values.forEach(({value:t},s)=>e(t,s))}_normalizeOrigin(e){if(e!=null)return e===l.DEFAULTS?e:l.USER}},Ue=class{constructor(e,t){this.value=e,this.origin=t}};function Ut(r,e,t){e.keys().forEach(i=>{t.set(i,e.get(i),l.DEFAULTS)});let s=r.metadata;Object.keys(s).forEach(i=>{r.internalGet(i)&&t.set(i,r.internalGet(i),l.DEFAULTS)})}function pr(r,e,t){if(!r?.read||r.read.enabled===!1||!r.read.source)return!1;let s=r.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&Ae(s,t))return!0}else for(let i of s)if(i===e||i.includes(".")&&i.indexOf(e)===0&&Ae(i,t))return!0;return!1}function mr(r){return r&&(!r.read||r.read.enabled!==!1&&!r.read.source)}function gr(r,e,t,s,i){let o=V(e[t],i);mr(o)&&(r[t]=!0);for(let a of Object.getOwnPropertyNames(e))o=V(e[a],i),pr(o,t,s)&&(r[a]=!0)}function _r(r,e,t,s){let i=t.metadata,o=ct(i[e],s),a=o?.default;if(a===void 0)return;let n=typeof a=="function"?a.call(r,e,s):a;n!==void 0&&t.set(e,n)}var Mt={origin:"service"};function qt(r,e,t=Mt){if(!e||typeof e!="object")return;let s=_(r),i=s.metadata,o={};for(let a of Object.getOwnPropertyNames(e))gr(o,i,a,e,t);s.setDefaultOrigin(t.origin);for(let a of Object.getOwnPropertyNames(o)){let n=V(i[a],t).read,c=n?.source,f;f=c&&typeof c=="string"?T(e,c):e[a],n?.reader&&(f=n.reader.call(r,f,e,t)),f!==void 0&&s.set(a,f)}if(!t||!t.ignoreDefaults){s.setDefaultOrigin("defaults");for(let a of Object.getOwnPropertyNames(i))o[a]||_r(r,a,s,t)}s.setDefaultOrigin("user")}function qi(r,e,t,s=Mt){let i=qe(Me({},s),{messages:[]});t(i),i.messages?.forEach(o=>{o.type!=="warning"||r.loaded?s?.messages&&s.messages.push(o):r.loadWarnings.push(o)})}var yr=r=>{let e=class extends r{constructor(...t){super(...t);let s=_(this),i=s.store,o=new ce;s.store=o,Ut(s,i,o)}read(t,s){qt(this,t,s)}write(t,s){return Pt(this,t??{},s)}toJSON(t){return this.write({},t)}static fromJSON(t,s){return vr.call(this,t,s)}};return e=le([P("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function vr(r,e){if(!r)return null;if(r.declaredClass)throw new Error("JSON object is already hydrated");let t=new this;return t.read(r,e),t}function Wi(r){return r&&typeof r=="object"&&"toJSON"in r&&typeof r.toJSON=="function"}var Ft=class extends yr(ae){};Ft=le([P("esri.core.JSONSupport")],Ft);export{ut as a,wr as b,ft as c,Ds as d,ks as e,Ie as f,x as g,m as h,se as i,l as j,Tr as k,$ as l,J as m,q as n,Y as o,U as p,pt as q,Rr as r,Pr as s,yt as t,zr as u,Gt as v,Wt as w,Hr as x,Vr as y,Yt as z,$r as A,K as B,k as C,Xr as D,ds as E,hs as F,ps as G,At as H,As as I,cr as J,ae as K,Ut as L,qt as M,qi as N,Ni as O,Pt as P,yr as Q,Wi as R,Ft as S};
