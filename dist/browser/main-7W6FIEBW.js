import{a as Hc,b as fg,c as mg,d as gg,e as yg}from"./chunk-3SFFKK7B.js";import{a as z,b as Wm,c as tn}from"./chunk-RFDHLPNF.js";import{a as oe,b as $s,c as zs,d as Jm,e as at,g as Xm,h as eg,j as tg,k as ng,l as rg,m as ig,n as og,o as sg,p as ag,q as lg,r as cg,s as Bc,t as ug,v as dg,w as Uc,x as pg,z as hg}from"./chunk-OPA4Y43S.js";import{a as $c}from"./chunk-BKLTKOZS.js";import{b as vg}from"./chunk-XDDEZAK2.js";import{a as qs}from"./chunk-4KGZTO2H.js";import{a as de,b as Zm,c as Qm,d as Ym,e as Bs,f as Km,g as Us,h as Hs}from"./chunk-ONZVVE2M.js";import{a as Gm}from"./chunk-6PWRQRQ5.js";import"./chunk-XQF54ERT.js";import"./chunk-WHG2OP5Q.js";import"./chunk-73WKP6FN.js";import"./chunk-ZCOQCU2F.js";import"./chunk-TMNMAACS.js";import"./chunk-KWYL2RA7.js";import{a as $m}from"./chunk-R4ZRZJFL.js";import"./chunk-L657QK52.js";import{a as Hm,b as Vc,c as jc}from"./chunk-2Q4LUGIF.js";import"./chunk-KOIUWRXN.js";import{a as Vm,b as js,c as jm,d as Bm}from"./chunk-5FFLZKVO.js";import{a as Fm,b as Lm}from"./chunk-VAOQOXJE.js";import{a as tr}from"./chunk-3WO6AXJR.js";import{b as Rm,c as Om}from"./chunk-IGLWZTM3.js";import"./chunk-NRYRRRU5.js";import"./chunk-TM435WPY.js";import"./chunk-ZVQ6WPUX.js";import"./chunk-RZU6EEB3.js";import{a as lo}from"./chunk-WDTJILD4.js";import"./chunk-ZL6WQNKD.js";import{a as oo}from"./chunk-HKVOZBSD.js";import"./chunk-X22ES5JP.js";import"./chunk-3FD7DB74.js";import"./chunk-FMKLQJMC.js";import"./chunk-T6HRX4ZB.js";import"./chunk-QDAWFJTY.js";import"./chunk-DTN5RQPH.js";import"./chunk-TQ3JEA47.js";import"./chunk-WNDRUC36.js";import"./chunk-GBR6VCK5.js";import"./chunk-QVGNQ4QU.js";import"./chunk-FLGQJSPM.js";import"./chunk-PNQOUNPC.js";import"./chunk-XCYLC437.js";import"./chunk-7Q7N656Y.js";import"./chunk-ZSMLWXCC.js";import"./chunk-JOF5BLB6.js";import"./chunk-BDQSEOPW.js";import{a as Nm,b as Pc}from"./chunk-XFWB7ADZ.js";import"./chunk-2PAJT2T6.js";import"./chunk-LFJ4NQ4O.js";import"./chunk-CKBOXNTL.js";import"./chunk-ASQCBKGS.js";import"./chunk-KM4AMTZA.js";import"./chunk-6ZXTJQND.js";import"./chunk-DDNVXGXG.js";import"./chunk-2TKGGTPN.js";import"./chunk-ME7KOLYX.js";import"./chunk-DGXL7ZQL.js";import"./chunk-SYNRDAMR.js";import"./chunk-VSMVTOQ2.js";import{a as Bf}from"./chunk-O3JFLEEW.js";import{a as Fc}from"./chunk-33GJQSM2.js";import{a as Mm}from"./chunk-MJN6ZDZD.js";import"./chunk-7FHIJELF.js";import{a as wm,b as bm}from"./chunk-GA75HNDI.js";import{a as Oc}from"./chunk-OMJZXS5V.js";import{c as Dm,e as Cm,g as Im,j as Em,k as Sm}from"./chunk-AC7AQWXQ.js";import{a as vm}from"./chunk-UNEV5MFA.js";import{b as Rc}from"./chunk-37H4LYIE.js";import"./chunk-INX6WBGG.js";import{a as _m}from"./chunk-DQGTBSQF.js";import"./chunk-PDLAJXIO.js";import"./chunk-FVB5KK7E.js";import{a as Lc}from"./chunk-XHOTVM3O.js";import"./chunk-RDFYI3QE.js";import"./chunk-ALOQFH4M.js";import"./chunk-GKFZCPUK.js";import"./chunk-FOMR7EMA.js";import"./chunk-UAPVW6JM.js";import"./chunk-PVAWONWD.js";import"./chunk-VOMQSOTD.js";import"./chunk-VYW7XM4C.js";import"./chunk-AMCDNN62.js";import"./chunk-B5IFP6FP.js";import"./chunk-LXGJGX5J.js";import{a as Tm}from"./chunk-MNGFITIF.js";import{a as Br}from"./chunk-OVFZVLK3.js";import{a as Pm}from"./chunk-P5F6DDDU.js";import"./chunk-SHSBHV6F.js";import"./chunk-ASFBXFQ5.js";import"./chunk-2XS3ER2F.js";import"./chunk-2E6TO2WI.js";import"./chunk-YRMBB4SJ.js";import"./chunk-LOEAA5XF.js";import"./chunk-37Z33WA5.js";import"./chunk-C46XASX2.js";import{a as xm}from"./chunk-NI2H25WT.js";import"./chunk-67EKH3Q4.js";import{a as Ls,b as Fr}from"./chunk-2FWBXOKU.js";import"./chunk-W4ZGXXVV.js";import{a as Am}from"./chunk-N75S7AVH.js";import{g as km}from"./chunk-QW4FGXMK.js";import"./chunk-M6ZEQBQT.js";import"./chunk-3FUKLVTW.js";import{a as An}from"./chunk-TAD4ATBE.js";import{a as tm,b as nm}from"./chunk-54B74EIH.js";import{d as Nc}from"./chunk-SEBAYBYC.js";import"./chunk-XWAJRRJ4.js";import{a as en}from"./chunk-VI3FHFCE.js";import"./chunk-V2JYXY4D.js";import"./chunk-W2FNMTJT.js";import"./chunk-KLIUUY5R.js";import{b as Kf}from"./chunk-CGEI3ID7.js";import"./chunk-I3S324BU.js";import"./chunk-JVM3RNQL.js";import"./chunk-OUB3GINH.js";import"./chunk-3ZAISB5N.js";import"./chunk-L3CFPONE.js";import"./chunk-AKHHPLWL.js";import"./chunk-LJMIV7GW.js";import"./chunk-WSHEBM2J.js";import"./chunk-3UBRSNPL.js";import{a as Nn}from"./chunk-XDRSKFBJ.js";import"./chunk-WFFOXC2W.js";import"./chunk-MGUWZFOE.js";import"./chunk-JXUTKJIX.js";import{c as um}from"./chunk-MUZSZ4YH.js";import"./chunk-ZOEN7TLV.js";import"./chunk-YF3AUCDJ.js";import"./chunk-TUM5YCRC.js";import{a as Vs}from"./chunk-O5CPPU3T.js";import"./chunk-6KRFVLII.js";import"./chunk-ZGGYJV33.js";import{a as jr}from"./chunk-2EA2KAER.js";import{a as ye}from"./chunk-63TUJPJR.js";import"./chunk-U6WVZEYH.js";import{b as fm,c as mm,g as gm,h as Ac,i as ym}from"./chunk-MJ4RSERD.js";import{b as sm,d as am,f as lm,g as Lr,q as cm}from"./chunk-GDTXLKQK.js";import"./chunk-YNFZN34N.js";import"./chunk-SHSMFEO2.js";import{a as Vr,b as dm,d as pm,f as hm,n as er}from"./chunk-J57HR4DB.js";import{a as As,b as Ns,c as Mc,d as xc,e as Lt,f as ot,g as Be}from"./chunk-2TOKSLT2.js";import{c as Af}from"./chunk-MDSLION2.js";import{b as Tc,g as v}from"./chunk-H5CKPFSK.js";import{f as kf}from"./chunk-K6KBTDPE.js";import"./chunk-V2KSICSA.js";import{a as E,b as it,c as Ft,d as Tn,e as Tf,f as Jt,g as ae,h as je}from"./chunk-6A4M7X3R.js";import"./chunk-YRTOHBUA.js";import{a as rm,b as im,c as om}from"./chunk-Y3PZSOWT.js";import{b as qm}from"./chunk-KLDBOMH5.js";import{a as Um}from"./chunk-USX74UBG.js";import"./chunk-OQ4BFXF7.js";import"./chunk-LDBOA2H7.js";import"./chunk-CXUCQMGY.js";import{a as Rf}from"./chunk-3CS3BPVL.js";import"./chunk-DFTBSFIN.js";import"./chunk-WOZZR3L4.js";import"./chunk-LW5IAFEX.js";import{d as ie}from"./chunk-AQ74ANSJ.js";import{a as Nf}from"./chunk-R2K3CL3U.js";import"./chunk-SAOUSUZE.js";import{a as Yf}from"./chunk-VNBPSOCW.js";import{a as Jf,b as kn,h as Xf,i as em}from"./chunk-F7Q25XKV.js";import"./chunk-CPGZIEVH.js";import{f as Qf}from"./chunk-L2DEVDHE.js";import"./chunk-Z5Q76SB7.js";import{a as Ue}from"./chunk-RU7UW4IO.js";import"./chunk-5QLB7ZJ7.js";import{o as Zf}from"./chunk-2ETW6ZBA.js";import{b as Uf}from"./chunk-6K7P7RRW.js";import{a as ao,g as Gf,h as Wf}from"./chunk-7LRMKXZV.js";import"./chunk-BCREO4Q5.js";import"./chunk-E5R4OI7X.js";import{b as kc,d as so,f as zf,g as qf}from"./chunk-BNUHB4AP.js";import{u as $f}from"./chunk-ZGLJFDS6.js";import{c as Hf}from"./chunk-RSDQHAJX.js";import"./chunk-PSYXGXKI.js";import"./chunk-Q6TYOK45.js";import{a as xn,b as Sf,h as Ec,i as Sc}from"./chunk-QMDBAMTG.js";import{b as B}from"./chunk-RZA5H63B.js";import{a as rt}from"./chunk-Y4PMIX35.js";import{c as xf,e as Pr}from"./chunk-KVCIO4DX.js";import"./chunk-NWBXT4EB.js";import{a as jf}from"./chunk-4R2OFZPD.js";import{c as zm}from"./chunk-WBI2AIMN.js";import{a as io}from"./chunk-FKQYBEPG.js";import"./chunk-ZHAVTBSG.js";import{a as Rs,b as Mf}from"./chunk-SBO2F6VY.js";import"./chunk-MMYIAMQR.js";import{d as Ff,g as Ps,i as Lf,j as ge,k as Fs,m as Vf,t as Vt}from"./chunk-UHTPPTOJ.js";import{a as st}from"./chunk-LP5GLSKB.js";import{a as Ae,b as Xt}from"./chunk-LTDZH3EN.js";import{d as Of,n as Os,o as Pf}from"./chunk-3SBMUUA6.js";import{a as If,c as Ef}from"./chunk-II7TJXWX.js";import{a as We}from"./chunk-X7Z55FTO.js";import{a as Mn}from"./chunk-B66V4PSA.js";import"./chunk-A4HCVMB4.js";import{N as Df,S as Cf,w as bf,z as _f}from"./chunk-AANS6QE5.js";import{A as mf,H as u,K as b,N as wf,S,b as Or,c as bc,e as rf,f as _c,g as Ss,h as Ms,n as ro,q as ff,r as vt}from"./chunk-RMOOROEO.js";import{H as Kt,I as vf,M as Ic,S as m,s as Sn,t as gf,y as yf,z as ks}from"./chunk-ZP7G4HN4.js";import{a as l}from"./chunk-W3WDPWBE.js";import{a as En,c as Pt,e as of,g as Dc,h as nt,j as sf,m as xs,o as af,p as Ts,q as Cc,s as lf,u as cf,v as uf,w as df,y as pf,z as Xn}from"./chunk-43GG6PFR.js";import{b as ue,d as _e,e as no}from"./chunk-MLSR6YE6.js";import{a as hf}from"./chunk-JPDAKIWT.js";import"./chunk-D62JNIRP.js";import"./chunk-VU5W7W6Y.js";import{b as ce,i as Es,s as M,u as k}from"./chunk-3DV77WOO.js";import{a as fe,f as wc,m as yt}from"./chunk-NJG4JJ4L.js";import"./chunk-MDAB6L5Y.js";import"./chunk-NFHPZN57.js";import{a as y,b as x,g as _}from"./chunk-3T7TAUC2.js";var wg=null;var zc=1,bg=Symbol("SIGNAL");function Y(e){let t=wg;return wg=e,t}var _g={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function M0(e){if(!(Wc(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===zc)){if(!e.producerMustRecompute(e)&&!qc(e)){e.dirty=!1,e.lastCleanEpoch=zc;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=zc}}function Dg(e){return e&&(e.nextProducerIndex=0),Y(e)}function Cg(e,t){if(Y(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Wc(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Gc(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function qc(e){Gs(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(M0(n),r!==n.version))return!0}return!1}function Ig(e){if(Gs(e),Wc(e))for(let t=0;t<e.producerNode.length;t++)Gc(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Gc(e,t){if(x0(e),Gs(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Gc(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Gs(i),i.producerIndexOfThis[r]=t}}function Wc(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Gs(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function x0(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function T0(){throw new Error}var k0=T0;function Eg(e){k0=e}function R(e){return typeof e=="function"}function Ur(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ws=Ur(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function co(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ve=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(R(r))try{r()}catch(o){t=o instanceof Ws?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Sg(o)}catch(s){t=t??[],s instanceof Ws?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ws(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Sg(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&co(n,t)}remove(t){let{_finalizers:n}=this;n&&co(n,t),t instanceof e&&t._removeParent(this)}};ve.EMPTY=(()=>{let e=new ve;return e.closed=!0,e})();var Zc=ve.EMPTY;function Zs(e){return e instanceof ve||e&&"closed"in e&&R(e.remove)&&R(e.add)&&R(e.unsubscribe)}function Sg(e){R(e)?e():e.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Hr={setTimeout(e,t,...n){let{delegate:r}=Hr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Hr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Qs(e){Hr.setTimeout(()=>{let{onUnhandledError:t}=wt;if(t)t(e);else throw e})}function uo(){}var Mg=Qc("C",void 0,void 0);function xg(e){return Qc("E",void 0,e)}function Tg(e){return Qc("N",e,void 0)}function Qc(e,t,n){return{kind:e,value:t,error:n}}var nr=null;function $r(e){if(wt.useDeprecatedSynchronousErrorHandling){let t=!nr;if(t&&(nr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=nr;if(nr=null,n)throw r}}else e()}function kg(e){wt.useDeprecatedSynchronousErrorHandling&&nr&&(nr.errorThrown=!0,nr.error=e)}var rr=class extends ve{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Zs(t)&&t.add(this)):this.destination=R0}static create(t,n,r){return new zr(t,n,r)}next(t){this.isStopped?Kc(Tg(t),this):this._next(t)}error(t){this.isStopped?Kc(xg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Kc(Mg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},A0=Function.prototype.bind;function Yc(e,t){return A0.call(e,t)}var Jc=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ys(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ys(r)}else Ys(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ys(n)}}},zr=class extends rr{constructor(t,n,r){super();let i;if(R(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&wt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Yc(t.next,o),error:t.error&&Yc(t.error,o),complete:t.complete&&Yc(t.complete,o)}):i=t}this.destination=new Jc(i)}};function Ys(e){wt.useDeprecatedSynchronousErrorHandling?kg(e):Qs(e)}function N0(e){throw e}function Kc(e,t){let{onStoppedNotification:n}=wt;n&&Hr.setTimeout(()=>n(e,t))}var R0={closed:!0,next:uo,error:N0,complete:uo};var qr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ze(e){return e}function Xc(...e){return eu(e)}function eu(e){return e.length===0?Ze:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var ee=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=P0(n)?n:new zr(n,r,i);return $r(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ag(r),new r((i,o)=>{let s=new zr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[qr](){return this}pipe(...n){return eu(n)(this)}toPromise(n){return n=Ag(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Ag(e){var t;return(t=e??wt.Promise)!==null&&t!==void 0?t:Promise}function O0(e){return e&&R(e.next)&&R(e.error)&&R(e.complete)}function P0(e){return e&&e instanceof rr||O0(e)&&Zs(e)}function tu(e){return R(e?.lift)}function q(e){return t=>{if(tu(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(e,t,n,r,i){return new nu(e,t,n,r,i)}var nu=class extends rr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Gr(){return q((e,t)=>{let n=null;e._refCount++;let r=G(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Wr=class extends ee{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,tu(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ve;let n=this.getSubject();t.add(this.source.subscribe(G(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ve.EMPTY)}return t}refCount(){return Gr()(this)}};var Ng=Ur(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class e extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ks(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ng}next(n){$r(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){$r(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){$r(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zc:(this.currentObservers=null,o.push(n),new ve(()=>{this.currentObservers=null,co(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return e.create=(t,n)=>new Ks(t,n),e})(),Ks=class extends Fe{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Zc}};var xe=class extends Fe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Qe=new ee(e=>e.complete());function Rg(e){return e&&R(e.schedule)}function Og(e){return e[e.length-1]}function Pg(e){return R(Og(e))?e.pop():void 0}function Rn(e){return Rg(Og(e))?e.pop():void 0}function Lg(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function c(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,c)}d((r=r.apply(e,t||[])).next())})}function Fg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ir(e){return this instanceof ir?(this.v=e,this):new ir(e)}function Vg(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(g){return new Promise(function(w,I){o.push([f,g,w,I])>1||a(f,g)})})}function a(f,g){try{c(r[f](g))}catch(w){h(o[0][3],w)}}function c(f){f.value instanceof ir?Promise.resolve(f.value.v).then(d,p):h(o[0][2],f)}function d(f){a("next",f)}function p(f){a("throw",f)}function h(f,g){f(g),o.shift(),o.length&&a(o[0][0],o[0][1])}}function jg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Fg=="function"?Fg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}var Js=e=>e&&typeof e.length=="number"&&typeof e!="function";function Xs(e){return R(e?.then)}function ea(e){return R(e[qr])}function ta(e){return Symbol.asyncIterator&&R(e?.[Symbol.asyncIterator])}function na(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function F0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ra=F0();function ia(e){return R(e?.[ra])}function oa(e){return Vg(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield ir(n.read());if(i)return yield ir(void 0);yield yield ir(r)}}finally{n.releaseLock()}})}function sa(e){return R(e?.getReader)}function Ee(e){if(e instanceof ee)return e;if(e!=null){if(ea(e))return L0(e);if(Js(e))return V0(e);if(Xs(e))return j0(e);if(ta(e))return Bg(e);if(ia(e))return B0(e);if(sa(e))return U0(e)}throw na(e)}function L0(e){return new ee(t=>{let n=e[qr]();if(R(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function V0(e){return new ee(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function j0(e){return new ee(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Qs)})}function B0(e){return new ee(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Bg(e){return new ee(t=>{H0(e,t).catch(n=>t.error(n))})}function U0(e){return Bg(oa(e))}function H0(e,t){var n,r,i,o;return Lg(this,void 0,void 0,function*(){try{for(n=jg(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function He(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function aa(e,t=0){return q((n,r)=>{n.subscribe(G(r,i=>He(r,e,()=>r.next(i),t),()=>He(r,e,()=>r.complete(),t),i=>He(r,e,()=>r.error(i),t)))})}function la(e,t=0){return q((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Ug(e,t){return Ee(e).pipe(la(t),aa(t))}function Hg(e,t){return Ee(e).pipe(la(t),aa(t))}function $g(e,t){return new ee(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function zg(e,t){return new ee(n=>{let r;return He(n,t,()=>{r=e[ra](),He(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>R(r?.return)&&r.return()})}function ca(e,t){if(!e)throw new Error("Iterable cannot be null");return new ee(n=>{He(n,t,()=>{let r=e[Symbol.asyncIterator]();He(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function qg(e,t){return ca(oa(e),t)}function Gg(e,t){if(e!=null){if(ea(e))return Ug(e,t);if(Js(e))return $g(e,t);if(Xs(e))return Hg(e,t);if(ta(e))return ca(e,t);if(ia(e))return zg(e,t);if(sa(e))return qg(e,t)}throw na(e)}function De(e,t){return t?Gg(e,t):Ee(e)}function O(...e){let t=Rn(e);return De(e,t)}function Zr(e,t){let n=R(e)?e:()=>e,r=i=>i.error(n());return new ee(t?i=>t.schedule(r,0,i):r)}function ru(e){return!!e&&(e instanceof ee||R(e.lift)&&R(e.subscribe))}var nn=Ur(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function H(e,t){return q((n,r)=>{let i=0;n.subscribe(G(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:$0}=Array;function z0(e,t){return $0(t)?e(...t):e(t)}function Wg(e){return H(t=>z0(e,t))}var{isArray:q0}=Array,{getPrototypeOf:G0,prototype:W0,keys:Z0}=Object;function Zg(e){if(e.length===1){let t=e[0];if(q0(t))return{args:t,keys:null};if(Q0(t)){let n=Z0(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Q0(e){return e&&typeof e=="object"&&G0(e)===W0}function Qg(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function ua(...e){let t=Rn(e),n=Pg(e),{args:r,keys:i}=Zg(e);if(r.length===0)return De([],t);let o=new ee(Y0(r,t,i?s=>Qg(i,s):Ze));return n?o.pipe(Wg(n)):o}function Y0(e,t,n=Ze){return r=>{Yg(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Yg(t,()=>{let d=De(e[c],t),p=!1;d.subscribe(G(r,h=>{o[c]=h,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Yg(e,t,n){e?He(n,e,t):t()}function Kg(e,t,n,r,i,o,s,a){let c=[],d=0,p=0,h=!1,f=()=>{h&&!c.length&&!d&&t.complete()},g=I=>d<r?w(I):c.push(I),w=I=>{o&&t.next(I),d++;let ne=!1;Ee(n(I,p++)).subscribe(G(t,J=>{i?.(J),o?g(J):t.next(J)},()=>{ne=!0},void 0,()=>{if(ne)try{for(d--;c.length&&d<r;){let J=c.shift();s?He(t,s,()=>w(J)):w(J)}f()}catch(J){t.error(J)}}))};return e.subscribe(G(t,g,()=>{h=!0,f()})),()=>{a?.()}}function Ce(e,t,n=1/0){return R(t)?Ce((r,i)=>H((o,s)=>t(r,o,i,s))(Ee(e(r,i))),n):(typeof t=="number"&&(n=t),q((r,i)=>Kg(r,i,e,n)))}function iu(e=1/0){return Ce(Ze,e)}function Jg(){return iu(1)}function Qr(...e){return Jg()(De(e,Rn(e)))}function da(e){return new ee(t=>{Ee(e()).subscribe(t)})}function bt(e,t){return q((n,r)=>{let i=0;n.subscribe(G(r,o=>e.call(t,o,i++)&&r.next(o)))})}function On(e){return q((t,n)=>{let r=null,i=!1,o;r=t.subscribe(G(n,void 0,void 0,s=>{o=Ee(e(s,On(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Xg(e,t,n,r,i){return(o,s)=>{let a=n,c=t,d=0;o.subscribe(G(s,p=>{let h=d++;c=a?e(c,p,h):(a=!0,p),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yr(e,t){return R(t)?Ce(e,t,1):Ce(e,1)}function Pn(e){return q((t,n)=>{let r=!1;t.subscribe(G(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function rn(e){return e<=0?()=>Qe:q((t,n)=>{let r=0;t.subscribe(G(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function ou(e){return H(()=>e)}function pa(e=K0){return q((t,n)=>{let r=!1;t.subscribe(G(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function K0(){return new nn}function po(e){return q((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function jt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?bt((i,o)=>e(i,o,r)):Ze,rn(1),n?Pn(t):pa(()=>new nn))}function Kr(e){return e<=0?()=>Qe:q((t,n)=>{let r=[];t.subscribe(G(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function su(e,t){let n=arguments.length>=2;return r=>r.pipe(e?bt((i,o)=>e(i,o,r)):Ze,Kr(1),n?Pn(t):pa(()=>new nn))}function au(e,t){return q(Xg(e,t,arguments.length>=2,!0))}function lu(...e){let t=Rn(e);return q((n,r)=>{(t?Qr(e,n,t):Qr(e,n)).subscribe(r)})}function _t(e,t){return q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(G(r,c=>{i?.unsubscribe();let d=0,p=o++;Ee(e(c,p)).subscribe(i=G(r,h=>r.next(t?t(c,h,p,d++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function cu(e){return q((t,n)=>{Ee(e).subscribe(G(n,()=>n.complete(),uo)),!n.closed&&t.subscribe(n)})}function Te(e,t,n){let r=R(e)||t||n?{next:e,error:t,complete:n}:e;return r?q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(G(o,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),o.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Ze}var A=class extends Error{constructor(t,n){super(od(t,n)),this.code=t}};function od(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function sd(e){return{toString:e}.toString()}var bu=globalThis;function re(e){for(let t in e)if(e[t]===re)return t;throw Error("Could not find renamed property on target object.")}function Ye(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Ye).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function ey(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var J0=re({__forward_ref__:re});function Oy(e){return e.__forward_ref__=Oy,e.toString=function(){return Ye(this())},e}function ct(e){return Py(e)?e():e}function Py(e){return typeof e=="function"&&e.hasOwnProperty(J0)&&e.__forward_ref__===Oy}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Pa(e){return ty(e,Ly)||ty(e,Vy)}function Fy(e){return Pa(e)!==null}function ty(e,t){return e.hasOwnProperty(t)?e[t]:null}function X0(e){let t=e&&(e[Ly]||e[Vy]);return t||null}function ny(e){return e&&(e.hasOwnProperty(ry)||e.hasOwnProperty(eC))?e[ry]:null}var Ly=re({\u0275prov:re}),ry=re({\u0275inj:re}),Vy=re({ngInjectableDef:re}),eC=re({ngInjectorDef:re}),j=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jy(e){return e&&!!e.\u0275providers}var tC=re({\u0275cmp:re}),nC=re({\u0275dir:re}),rC=re({\u0275pipe:re}),iC=re({\u0275mod:re}),wa=re({\u0275fac:re}),ho=re({__NG_ELEMENT_ID__:re}),iy=re({__NG_ENV_ID__:re});function oC(e){return typeof e=="string"?e:e==null?"":String(e)}function sC(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():oC(e)}function aC(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new A(-200,e)}function ad(e,t){throw new A(-201,!1)}var L=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(L||{}),_u;function By(){return _u}function lt(e){let t=_u;return _u=e,t}function Uy(e,t,n){let r=Pa(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&L.Optional)return null;if(t!==void 0)return t;ad(e,"Injector")}var lC={},fo=lC,cC="__NG_DI_FLAG__",ba="ngTempTokenPath",uC="ngTokenPath",dC=/\n/gm,pC="\u0275",oy="__source",ti;function hC(){return ti}function Fn(e){let t=ti;return ti=e,t}function fC(e,t=L.Default){if(ti===void 0)throw new A(-203,!1);return ti===null?Uy(e,void 0,t):ti.get(e,t&L.Optional?null:void 0,t)}function $(e,t=L.Default){return(By()||fC)(ct(e),t)}function D(e,t=L.Default){return $(e,Fa(t))}function Fa(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Du(e){let t=[];for(let n=0;n<e.length;n++){let r=ct(e[n]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,o=L.Default;for(let s=0;s<r.length;s++){let a=r[s],c=mC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push($(i,o))}else t.push($(r))}return t}function mC(e){return e[cC]}function gC(e,t,n,r){let i=e[ba];throw t[oy]&&i.unshift(t[oy]),e.message=yC(`
`+e.message,i,n,r),e[uC]=i,e[ba]=null,e}function yC(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==pC?e.slice(2):e;let i=Ye(t);if(Array.isArray(t))i=t.map(Ye).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ye(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(dC,`
  `)}`}function ri(e,t){let n=e.hasOwnProperty(wa);return n?e[wa]:null}function vC(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function wC(e){return e.flat(Number.POSITIVE_INFINITY)}function ld(e,t){e.forEach(n=>Array.isArray(n)?ld(n,t):t(n))}function Hy(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function _a(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var mo={},ii=[],oi=new j(""),$y=new j("",-1),zy=new j(""),Da=class{get(t,n=fo){if(n===fo){let r=new Error(`NullInjectorError: No provider for ${Ye(t)}!`);throw r.name="NullInjectorError",r}return n}},qy=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(qy||{}),Ut=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ut||{}),si=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(si||{});function bC(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Cu(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];DC(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function _C(e){return e===3||e===4||e===6}function DC(e){return e.charCodeAt(0)===64}function cd(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?sy(e,n,i,null,t[++r]):sy(e,n,i,null,null))}}return e}function sy(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var Gy="ng-template";function CC(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&bC(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ud(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ud(e){return e.type===4&&e.value!==Gy}function IC(e,t,n){let r=e.type===4&&!n?Gy:e.value;return t===r}function EC(e,t,n){let r=4,i=e.attrs,o=i!==null?xC(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Dt(r)&&!Dt(c))return!1;if(s&&Dt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!IC(e,c,n)||c===""&&t.length===1){if(Dt(r))return!1;s=!0}}else if(r&8){if(i===null||!CC(e,i,c,n)){if(Dt(r))return!1;s=!0}}else{let d=t[++a],p=SC(c,i,ud(e),n);if(p===-1){if(Dt(r))return!1;s=!0;continue}if(d!==""){let h;if(p>o?h="":h=i[p+1].toLowerCase(),r&2&&d!==h){if(Dt(r))return!1;s=!0}}}}return Dt(r)||s}function Dt(e){return(e&1)===0}function SC(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return TC(t,e)}function MC(e,t,n=!1){for(let r=0;r<t.length;r++)if(EC(e,t[r],n))return!0;return!1}function xC(e){for(let t=0;t<e.length;t++){let n=e[t];if(_C(n))return t}return e.length}function TC(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function ay(e,t){return e?":not("+t.trim()+")":t}function kC(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Dt(s)&&(t+=ay(o,i),i=""),r=s,o=o||!Dt(r);n++}return i!==""&&(t+=ay(o,i)),t}function AC(e){return e.map(kC).join(",")}function NC(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Dt(i))break;i=o}r++}return{attrs:t,classes:n}}function La(e){return sd(()=>{let t=Ky(e),n=x(y({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===qy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ut.Emulated,styles:e.styles||ii,_:null,schemas:e.schemas||null,tView:null,id:""});Jy(n);let r=e.dependencies;return n.directiveDefs=cy(r,!1),n.pipeDefs=cy(r,!0),n.id=PC(n),n})}function RC(e){return lr(e)||Wy(e)}function OC(e){return e!==null}function ly(e,t){if(e==null)return mo;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=si.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==si.None?[r,a]:r,t[o]=s):n[o]=r}return n}function dd(e){return sd(()=>{let t=Ky(e);return Jy(t),t})}function lr(e){return e[tC]||null}function Wy(e){return e[nC]||null}function Zy(e){return e[rC]||null}function Qy(e){let t=lr(e)||Wy(e)||Zy(e);return t!==null?t.standalone:!1}function Yy(e,t){let n=e[iC]||null;if(!n&&t===!0)throw new Error(`Type ${Ye(e)} does not have '\u0275mod' property.`);return n}function Ky(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||mo,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||ii,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ly(e.inputs,t),outputs:ly(e.outputs),debugInfo:null}}function Jy(e){e.features?.forEach(t=>t(e))}function cy(e,t){if(!e)return null;let n=t?Zy:RC;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(OC)}function PC(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Va(e){return{\u0275providers:e}}function FC(...e){return{\u0275providers:Xy(!0,e),\u0275fromNgModule:!0}}function Xy(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return ld(t,s=>{let a=s;Iu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ev(i,o),n}function ev(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];pd(i,o=>{t(o,r)})}}function Iu(e,t,n,r){if(e=ct(e),!e)return!1;let i=null,o=ny(e),s=!o&&lr(e);if(!o&&!s){let c=e.ngModule;if(o=ny(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)Iu(d,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{ld(o.imports,p=>{Iu(p,t,n,r)&&(d||=[],d.push(p))})}finally{}d!==void 0&&ev(d,t)}if(!a){let d=ri(i)||(()=>new i);t({provide:i,useFactory:d,deps:ii},i),t({provide:zy,useValue:i,multi:!0},i),t({provide:oi,useValue:()=>$(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let d=e;pd(c,p=>{t(p,d)})}}else return!1;return i!==e&&e.providers!==void 0}function pd(e,t){for(let n of e)jy(n)&&(n=n.\u0275providers),Array.isArray(n)?pd(n,t):t(n)}var LC=re({provide:String,useValue:re});function tv(e){return e!==null&&typeof e=="object"&&LC in e}function VC(e){return!!(e&&e.useExisting)}function jC(e){return!!(e&&e.useFactory)}function Eu(e){return typeof e=="function"}var ja=new j(""),ha={},BC={},uu;function hd(){return uu===void 0&&(uu=new Da),uu}var ut=class{},go=class extends ut{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mu(t,s=>this.processProvider(s)),this.records.set($y,Jr(void 0,this)),i.has("environment")&&this.records.set(ut,Jr(void 0,this));let o=this.records.get(ja);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zy,ii,L.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Fn(this),r=lt(void 0),i;try{return t()}finally{Fn(n),lt(r)}}get(t,n=fo,r=L.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(iy))return t[iy](this);r=Fa(r);let i,o=Fn(this),s=lt(void 0);try{if(!(r&L.SkipSelf)){let c=this.records.get(t);if(c===void 0){let d=GC(t)&&Pa(t);d&&this.injectableDefInScope(d)?c=Jr(Su(t),ha):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&L.Self?hd():this.parent;return n=r&L.Optional&&n===fo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ba]=a[ba]||[]).unshift(Ye(t)),o)throw a;return gC(a,t,"R3InjectorError",this.source)}else throw a}finally{lt(s),Fn(o)}}resolveInjectorInitializers(){let t=Y(null),n=Fn(this),r=lt(void 0),i;try{let o=this.get(oi,ii,L.Self);for(let s of o)s()}finally{Fn(n),lt(r),Y(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ye(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(t){t=ct(t);let n=Eu(t)?t:ct(t&&t.provide),r=HC(t);if(!Eu(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Jr(void 0,ha,!0),i.factory=()=>Du(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Y(null);try{return n.value===ha&&(n.value=BC,n.value=n.factory()),typeof n.value=="object"&&n.value&&qC(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ct(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Su(e){let t=Pa(e),n=t!==null?t.factory:ri(e);if(n!==null)return n;if(e instanceof j)throw new A(204,!1);if(e instanceof Function)return UC(e);throw new A(204,!1)}function UC(e){if(e.length>0)throw new A(204,!1);let n=X0(e);return n!==null?()=>n.factory(e):()=>new e}function HC(e){if(tv(e))return Jr(void 0,e.useValue);{let t=$C(e);return Jr(t,ha)}}function $C(e,t,n){let r;if(Eu(e)){let i=ct(e);return ri(i)||Su(i)}else if(tv(e))r=()=>ct(e.useValue);else if(jC(e))r=()=>e.useFactory(...Du(e.deps||[]));else if(VC(e))r=()=>$(ct(e.useExisting));else{let i=ct(e&&(e.useClass||e.provide));if(zC(e))r=()=>new i(...Du(e.deps));else return ri(i)||Su(i)}return r}function Jr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function zC(e){return!!e.deps}function qC(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function GC(e){return typeof e=="function"||typeof e=="object"&&e instanceof j}function Mu(e,t){for(let n of e)Array.isArray(n)?Mu(n,t):n&&jy(n)?Mu(n.\u0275providers,t):t(n)}function cn(e,t){e instanceof go&&e.assertNotDestroyed();let n,r=Fn(e),i=lt(void 0);try{return t()}finally{Fn(r),lt(i)}}function WC(){return By()!==void 0||hC()!=null}function ZC(e){return typeof e=="function"}var un=0,V=1,N=2,Re=3,Ct=4,It=5,Ca=6,Ia=7,jn=8,ai=9,on=10,sn=11,yo=12,uy=13,Eo=14,Ht=15,cr=16,Xr=17,an=18,Ba=19,nv=20,Vn=21,du=22,ur=23,li=25,rv=1;var dr=7,Ea=8,ci=9,Ke=10,Sa=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Sa||{});function sr(e){return Array.isArray(e)&&typeof e[rv]=="object"}function dn(e){return Array.isArray(e)&&e[rv]===!0}function iv(e){return(e.flags&4)!==0}function fd(e){return e.componentOffset>-1}function QC(e){return(e.flags&1)===1}function So(e){return!!e.template}function xu(e){return(e[N]&512)!==0}var Tu=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ov(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Ua(){return sv}function sv(e){return e.type.prototype.ngOnChanges&&(e.setInput=KC),YC}Ua.ngInherit=!0;function YC(){let e=lv(this),t=e?.current;if(t){let n=e.previous;if(n===mo)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function KC(e,t,n,r,i){let o=this.declaredInputs[r],s=lv(e)||JC(e,{previous:mo,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new Tu(d&&d.currentValue,n,c===mo),ov(e,t,i,n)}var av="__ngSimpleChanges__";function lv(e){return e[av]||null}function JC(e,t){return e[av]=t}var dy=null;var Ln=function(e,t,n){dy?.(e,t,n)},XC="svg",eI="math";function Bn(e){for(;Array.isArray(e);)e=e[un];return e}function pn(e,t){return Bn(t[e.index])}function tI(e,t){return e.data[t]}function Mo(e,t){let n=t[e];return sr(n)?n:n[un]}function nI(e){return(e[N]&4)===4}function md(e){return(e[N]&128)===128}function rI(e){return dn(e[Re])}function py(e,t){return t==null?null:e[t]}function cv(e){e[Xr]=0}function iI(e){e[N]&1024||(e[N]|=1024,md(e)&&Ha(e))}function vo(e){return!!(e[N]&9216||e[ur]?.dirty)}function ku(e){e[on].changeDetectionScheduler?.notify(7),e[N]&64&&(e[N]|=1024),vo(e)&&Ha(e)}function Ha(e){e[on].changeDetectionScheduler?.notify(0);let t=wo(e);for(;t!==null&&!(t[N]&8192||(t[N]|=8192,!md(t)));)t=wo(t)}function uv(e,t){if((e[N]&256)===256)throw new A(911,!1);e[Vn]===null&&(e[Vn]=[]),e[Vn].push(t)}function oI(e,t){if(e[Vn]===null)return;let n=e[Vn].indexOf(t);n!==-1&&e[Vn].splice(n,1)}function wo(e){let t=e[Re];return dn(t)?t[Re]:t}var K={lFrame:wv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dv=!1;function sI(){return K.lFrame.elementDepthCount}function aI(){K.lFrame.elementDepthCount++}function lI(){K.lFrame.elementDepthCount--}function pv(){return K.bindingsEnabled}function cI(){return K.skipHydrationRootTNode!==null}function uI(e){return K.skipHydrationRootTNode===e}function dI(){K.skipHydrationRootTNode=null}function $e(){return K.lFrame.lView}function $a(){return K.lFrame.tView}function $t(){let e=hv();for(;e!==null&&e.type===64;)e=e.parent;return e}function hv(){return K.lFrame.currentTNode}function pI(){let e=K.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function gd(e,t){let n=K.lFrame;n.currentTNode=e,n.isParent=t}function fv(){return K.lFrame.isParent}function hI(){K.lFrame.isParent=!1}function mv(){return dv}function hy(e){dv=e}function fI(e){return K.lFrame.bindingIndex=e}function mI(){return K.lFrame.inI18n}function gI(e,t){let n=K.lFrame;n.bindingIndex=n.bindingRootIndex=e,Au(t)}function yI(){return K.lFrame.currentDirectiveIndex}function Au(e){K.lFrame.currentDirectiveIndex=e}function gv(){return K.lFrame.currentQueryIndex}function yd(e){K.lFrame.currentQueryIndex=e}function vI(e){let t=e[V];return t.type===2?t.declTNode:t.type===1?e[It]:null}function yv(e,t,n){if(n&L.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&L.Host);)if(i=vI(o),i===null||(o=o[Eo],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=K.lFrame=vv();return r.currentTNode=t,r.lView=e,!0}function vd(e){let t=vv(),n=e[V];K.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function vv(){let e=K.lFrame,t=e===null?null:e.child;return t===null?wv(e):t}function wv(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function bv(){let e=K.lFrame;return K.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var _v=bv;function wd(){let e=bv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wI(){return K.lFrame.selectedIndex}function pr(e){K.lFrame.selectedIndex=e}function bI(){return K.lFrame.currentNamespace}var Dv=!0;function _I(){return Dv}function DI(e){Dv=e}function CI(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=sv(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Cv(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),d&&((e.viewHooks??=[]).push(n,d),(e.viewCheckHooks??=[]).push(n,d)),p!=null&&(e.destroyHooks??=[]).push(n,p)}}function fa(e,t,n){Iv(e,t,3,n)}function ma(e,t,n,r){(e[N]&3)===n&&Iv(e,t,n,r)}function pu(e,t){let n=e[N];(n&3)===t&&(n&=16383,n+=1,e[N]=n)}function Iv(e,t,n,r){let i=r!==void 0?e[Xr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Xr]+=65536),(a<o||o==-1)&&(II(e,n,t,c),e[Xr]=(e[Xr]&4294901760)+c+2),c++}function fy(e,t){Ln(4,e,t);let n=Y(null);try{t.call(e)}finally{Y(n),Ln(5,e,t)}}function II(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[N]>>14<e[Xr]>>16&&(e[N]&3)===t&&(e[N]+=16384,fy(a,o)):fy(a,o)}var ni=-1,bo=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function EI(e){return e instanceof bo}function SI(e){return(e.flags&8)!==0}function MI(e){return(e.flags&16)!==0}function Ev(e){return e!==ni}function Ma(e){return e&32767}function xI(e){return e>>16}function xa(e,t){let n=xI(e),r=t;for(;n>0;)r=r[Eo],n--;return r}var Nu=!0;function my(e){let t=Nu;return Nu=e,t}var TI=256,Sv=TI-1,Mv=5,kI=0,Bt={};function AI(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ho)&&(r=n[ho]),r==null&&(r=n[ho]=kI++);let i=r&Sv,o=1<<i;t.data[e+(i>>Mv)]|=o}function xv(e,t){let n=Tv(e,t);if(n!==-1)return n;let r=t[V];r.firstCreatePass&&(e.injectorIndex=t.length,hu(r.data,e),hu(t,null),hu(r.blueprint,null));let i=bd(e,t),o=e.injectorIndex;if(Ev(i)){let s=Ma(i),a=xa(i,t),c=a[V].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|c[s+d]}return t[o+8]=i,o}function hu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Tv(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function bd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Ov(i),r===null)return ni;if(n++,i=i[Eo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ni}function NI(e,t,n){AI(e,t,n)}function kv(e,t,n){if(n&L.Optional||e!==void 0)return e;ad(t,"NodeInjector")}function Av(e,t,n,r){if(n&L.Optional&&r===void 0&&(r=null),!(n&(L.Self|L.Host))){let i=e[ai],o=lt(void 0);try{return i?i.get(t,r,n&L.Optional):Uy(t,r,n&L.Optional)}finally{lt(o)}}return kv(r,t,n)}function Nv(e,t,n,r=L.Default,i){if(e!==null){if(t[N]&2048&&!(r&L.Self)){let s=FI(e,t,n,r,Bt);if(s!==Bt)return s}let o=Rv(e,t,n,r,Bt);if(o!==Bt)return o}return Av(t,n,r,i)}function Rv(e,t,n,r,i){let o=OI(n);if(typeof o=="function"){if(!yv(t,e,r))return r&L.Host?kv(i,n,r):Av(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&L.Optional))ad(n);else return s}finally{_v()}}else if(typeof o=="number"){let s=null,a=Tv(e,t),c=ni,d=r&L.Host?t[Ht][It]:null;for((a===-1||r&L.SkipSelf)&&(c=a===-1?bd(e,t):t[a+8],c===ni||!yy(r,!1)?a=-1:(s=t[V],a=Ma(c),t=xa(c,t)));a!==-1;){let p=t[V];if(gy(o,a,p.data)){let h=RI(a,t,n,s,r,d);if(h!==Bt)return h}c=t[a+8],c!==ni&&yy(r,t[V].data[a+8]===d)&&gy(o,a,t)?(s=p,a=Ma(c),t=xa(c,t)):a=-1}}return i}function RI(e,t,n,r,i,o){let s=t[V],a=s.data[e+8],c=r==null?fd(a)&&Nu:r!=s&&(a.type&3)!==0,d=i&L.Host&&o===a,p=ga(a,s,n,c,d);return p!==null?ui(t,s,p,a):Bt}function ga(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,d=e.directiveEnd,p=o>>20,h=r?a:a+p,f=i?a+p:d;for(let g=h;g<f;g++){let w=s[g];if(g<c&&n===w||g>=c&&w.type===n)return g}if(i){let g=s[c];if(g&&So(g)&&g.type===n)return c}return null}function ui(e,t,n,r){let i=e[n],o=t.data;if(EI(i)){let s=i;s.resolving&&aC(sC(o[n]));let a=my(s.canSeeViewProviders);s.resolving=!0;let c,d=s.injectImpl?lt(s.injectImpl):null,p=yv(e,r,L.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&CI(n,o[n],t)}finally{d!==null&&lt(d),my(a),s.resolving=!1,_v()}}return i}function OI(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ho)?e[ho]:void 0;return typeof t=="number"?t>=0?t&Sv:PI:t}function gy(e,t,n){let r=1<<e;return!!(n[t+(e>>Mv)]&r)}function yy(e,t){return!(e&L.Self)&&!(e&L.Host&&t)}var ar=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Nv(this._tNode,this._lView,t,Fa(r),n)}};function PI(){return new ar($t(),$e())}function _d(e){return sd(()=>{let t=e.prototype.constructor,n=t[wa]||Ru(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[wa]||Ru(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ru(e){return Py(e)?()=>{let t=Ru(ct(e));return t&&t()}:ri(e)}function FI(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[N]&2048&&!(s[N]&512);){let a=Rv(o,s,n,r|L.Self,Bt);if(a!==Bt)return a;let c=o.parent;if(!c){let d=s[nv];if(d){let p=d.get(n,Bt,r);if(p!==Bt)return p}c=Ov(s),s=s[Eo]}o=c}return i}function Ov(e){let t=e[V],n=t.type;return n===2?t.declTNode:n===1?e[It]:null}function vy(e,t=null,n=null,r){let i=Pv(e,t,n,r);return i.resolveInjectorInitializers(),i}function Pv(e,t=null,n=null,r,i=new Set){let o=[n||ii,FC(e)];return r=r||(typeof e=="object"?void 0:Ye(e)),new go(o,t||hd(),r||null,i)}var or=class or{static create(t,n){if(Array.isArray(t))return vy({name:""},n,t,"");{let r=t.name??"";return vy({name:r},t.parent,t.providers,r)}}};or.THROW_IF_NOT_FOUND=fo,or.NULL=new Da,or.\u0275prov=P({token:or,providedIn:"any",factory:()=>$($y)}),or.__NG_ELEMENT_ID__=-1;var hr=or;var LI=new j("");LI.__NG_ELEMENT_ID__=e=>{let t=$t();if(t===null)throw new A(204,!1);if(t.type&2)return t.value;if(e&L.Optional)return null;throw new A(204,!1)};var VI="ngOriginalError";function fu(e){return e[VI]}var ln=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&fu(t);for(;n&&fu(n);)n=fu(n);return n||null}},Fv=new j("",{providedIn:"root",factory:()=>D(ln).handleError.bind(void 0)}),Lv=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=jI,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),Ou=class extends Lv{constructor(t){super(),this._lView=t}onDestroy(t){return uv(this._lView,t),()=>oI(this._lView,t)}};function jI(){return new Ou($e())}function BI(){return fi($t(),$e())}function fi(e,t){return new mr(pn(e,t))}var mr=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=BI;let e=t;return e})();function UI(e){return e instanceof mr?e.nativeElement:e}var Pu=class extends Fe{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,WC()&&(this.destroyRef=D(Lv,{optional:!0})??void 0)}emit(t){let n=Y(null);try{super.next(t)}finally{Y(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=mu(o),i&&(i=mu(i)),s&&(s=mu(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ve&&t.add(a),a}};function mu(e){return t=>{setTimeout(e,void 0,t)}}var Ne=Pu;function HI(){return this._results[Symbol.iterator]()}var Fu=class e{get changes(){return this._changes??=new Ne}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=HI)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=wC(t);(this._changesDetected=!vC(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Vv(e){return(e.flags&128)===128}var jv=new Map,$I=0;function zI(){return $I++}function qI(e){jv.set(e[Ba],e)}function GI(e){jv.delete(e[Ba])}var wy="__ngContext__";function di(e,t){sr(t)?(e[wy]=t[Ba],qI(t)):e[wy]=t}function Bv(e){return Hv(e[yo])}function Uv(e){return Hv(e[Ct])}function Hv(e){for(;e!==null&&!dn(e);)e=e[Ct];return e}var Lu;function $v(e){Lu=e}function WI(){if(Lu!==void 0)return Lu;if(typeof document<"u")return document;throw new A(210,!1)}var Dd=new j("",{providedIn:"root",factory:()=>ZI}),ZI="ng",Cd=new j(""),mi=new j("",{providedIn:"platform",factory:()=>"unknown"});var Id=new j("",{providedIn:"root",factory:()=>WI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QI="h",YI="b";var KI=()=>null;function Ed(e,t,n=!1){return KI(e,t,n)}var zv=!1,JI=new j("",{providedIn:"root",factory:()=>zv});function qv(e){return e instanceof Function?e():e}var gr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(gr||{}),XI;function Sd(e,t){return XI(e,t)}function ei(e,t,n,r,i){if(r!=null){let o,s=!1;dn(r)?o=r:sr(r)&&(s=!0,r=r[un]);let a=Bn(r);e===0&&n!==null?i==null?Yv(t,n,a):Ta(t,n,a,i||null,!0):e===1&&n!==null?Ta(t,n,a,i||null,!0):e===2?fE(t,a,s):e===3&&t.destroyNode(a),o!=null&&gE(t,e,o,n,i)}}function Gv(e,t,n){return e.createElement(t,n)}function eE(e,t){Wv(e,t),t[un]=null,t[It]=null}function tE(e,t,n,r,i,o){r[un]=i,r[It]=t,za(e,r,n,1,i,o)}function Wv(e,t){t[on].changeDetectionScheduler?.notify(8),za(e,t,t[sn],2,null,null)}function nE(e){let t=e[yo];if(!t)return gu(e[V],e);for(;t;){let n=null;if(sr(t))n=t[yo];else{let r=t[Ke];r&&(n=r)}if(!n){for(;t&&!t[Ct]&&t!==e;)sr(t)&&gu(t[V],t),t=t[Re];t===null&&(t=e),sr(t)&&gu(t[V],t),n=t&&t[Ct]}t=n}}function rE(e,t,n,r){let i=Ke+r,o=n.length;r>0&&(n[i-1][Ct]=t),r<o-Ke?(t[Ct]=n[i],Hy(n,Ke+r,t)):(n.push(t),t[Ct]=null),t[Re]=n;let s=t[cr];s!==null&&n!==s&&Zv(s,t);let a=t[an];a!==null&&a.insertView(e),ku(t),t[N]|=128}function Zv(e,t){let n=e[ci],r=t[Re];if(sr(r))e[N]|=Sa.HasTransplantedViews;else{let i=r[Re][Ht];t[Ht]!==i&&(e[N]|=Sa.HasTransplantedViews)}n===null?e[ci]=[t]:n.push(t)}function Md(e,t){let n=e[ci],r=n.indexOf(t);n.splice(r,1)}function Vu(e,t){if(e.length<=Ke)return;let n=Ke+t,r=e[n];if(r){let i=r[cr];i!==null&&i!==e&&Md(i,r),t>0&&(e[n-1][Ct]=r[Ct]);let o=_a(e,Ke+t);eE(r[V],r);let s=o[an];s!==null&&s.detachView(o[V]),r[Re]=null,r[Ct]=null,r[N]&=-129}return r}function Qv(e,t){if(!(t[N]&256)){let n=t[sn];n.destroyNode&&za(e,t,n,3,null,null),nE(t)}}function gu(e,t){if(t[N]&256)return;let n=Y(null);try{t[N]&=-129,t[N]|=256,t[ur]&&Ig(t[ur]),oE(e,t),iE(e,t),t[V].type===1&&t[sn].destroy();let r=t[cr];if(r!==null&&dn(t[Re])){r!==t[Re]&&Md(r,t);let i=t[an];i!==null&&i.detachView(e)}GI(t)}finally{Y(n)}}function iE(e,t){let n=e.cleanup,r=t[Ia];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[Ia]=null);let i=t[Vn];if(i!==null){t[Vn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function oE(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof bo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ln(4,a,c);try{c.call(a)}finally{Ln(5,a,c)}}else{Ln(4,i,o);try{o.call(i)}finally{Ln(5,i,o)}}}}}function sE(e,t,n){return aE(e,t.parent,n)}function aE(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[un];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Ut.None||o===Ut.Emulated)return null}return pn(r,n)}}function Ta(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Yv(e,t,n){e.appendChild(t,n)}function by(e,t,n,r,i){r!==null?Ta(e,t,n,r,i):Yv(e,t,n)}function lE(e,t,n,r){e.removeChild(t,n,r)}function xd(e,t){return e.parentNode(t)}function cE(e,t){return e.nextSibling(t)}function uE(e,t,n){return pE(e,t,n)}function dE(e,t,n){return e.type&40?pn(e,n):null}var pE=dE,_y;function hE(e,t,n,r){let i=sE(e,r,t),o=t[sn],s=r.parent||t[It],a=uE(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)by(o,i,n[c],a,!1);else by(o,i,n,a,!1);_y!==void 0&&_y(o,r,t,n,i)}function ya(e,t){if(t!==null){let n=t.type;if(n&3)return pn(t,e);if(n&4)return ju(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return ya(e,r);{let i=e[t.index];return dn(i)?ju(-1,i):Bn(i)}}else{if(n&32)return Sd(t,e)()||Bn(e[t.index]);{let r=Kv(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=wo(e[Ht]);return ya(i,r)}else return ya(e,t.next)}}}return null}function Kv(e,t){if(t!==null){let r=e[Ht][It],i=t.projection;return r.projection[i]}return null}function ju(e,t){let n=Ke+e+1;if(n<t.length){let r=t[n],i=r[V].firstChild;if(i!==null)return ya(r,i)}return t[dr]}function fE(e,t,n){let r=xd(e,t);r&&lE(e,r,t,n)}function Td(e,t,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&t===0&&(a&&di(Bn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Td(e,t,n.child,r,i,o,!1),ei(t,e,i,a,o);else if(c&32){let d=Sd(n,r),p;for(;p=d();)ei(t,e,i,p,o);ei(t,e,i,a,o)}else c&16?mE(e,t,r,n,i,o):ei(t,e,i,a,o);n=s?n.projectionNext:n.next}}function za(e,t,n,r,i,o){Td(n,r,e.firstChild,t,i,o,!1)}function mE(e,t,n,r,i,o){let s=n[Ht],c=s[It].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let p=c[d];ei(t,e,i,p,o)}else{let d=c,p=s[Re];Vv(r)&&(d.flags|=128),Td(e,t,d,p,i,o,!0)}}function gE(e,t,n,r,i){let o=n[dr],s=Bn(n);o!==s&&ei(t,e,r,o,i);for(let a=Ke;a<n.length;a++){let c=n[a];za(c[V],c,e,t,r,o)}}function yE(e,t,n){e.setAttribute(t,"style",n)}function Jv(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Xv(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Cu(e,t,r),i!==null&&Jv(e,t,i),o!==null&&yE(e,t,o)}var ew={};function vE(e,t,n,r){if(!r)if((t[N]&3)===3){let o=e.preOrderCheckHooks;o!==null&&fa(t,o,n)}else{let o=e.preOrderHooks;o!==null&&ma(t,o,0,n)}pr(n)}function kd(e,t=L.Default){let n=$e();if(n===null)return $(e,t);let r=$t();return Nv(r,n,ct(e),t)}function tw(e,t,n,r,i,o){let s=Y(null);try{let a=null;i&si.SignalBased&&(a=t[r][bg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&si.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):ov(t,a,r,o)}finally{Y(s)}}function wE(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pr(~i);else{let o=i,s=n[++r],a=n[++r];gI(s,o);let c=t[o];a(2,c)}}}finally{pr(-1)}}function qa(e,t,n,r,i,o,s,a,c,d,p){let h=t.blueprint.slice();return h[un]=i,h[N]=r|4|128|8|64,(d!==null||e&&e[N]&2048)&&(h[N]|=2048),cv(h),h[Re]=h[Eo]=e,h[jn]=n,h[on]=s||e&&e[on],h[sn]=a||e&&e[sn],h[ai]=c||e&&e[ai]||null,h[It]=o,h[Ba]=zI(),h[Ca]=p,h[nv]=d,h[Ht]=t.type==2?e[Ht]:h,h}function nw(e,t,n,r,i){let o=e.data[t];if(o===null)o=bE(e,t,n,r,i),mI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=pI();o.injectorIndex=s===null?-1:s.injectorIndex}return gd(o,!0),o}function bE(e,t,n,r,i){let o=hv(),s=fv(),a=s?o:o&&o.parent,c=e.data[t]=xE(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function rw(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function iw(e,t,n,r,i){let o=wI(),s=r&2;try{pr(-1),s&&t.length>li&&vE(e,t,li,!1),Ln(s?2:0,i),n(r,i)}finally{pr(o),Ln(s?3:1,i)}}function ow(e,t,n){if(iv(t)){let r=Y(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Y(r)}}}function _E(e,t,n){pv()&&(RE(e,t,n,pn(n,t)),(n.flags&64)===64&&cw(e,t,n))}function DE(e,t,n=pn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function sw(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=aw(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function aw(e,t,n,r,i,o,s,a,c,d,p){let h=li+r,f=h+i,g=CE(h,f),w=typeof d=="function"?d():d;return g[V]={type:e,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:p}}function CE(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:ew);return n}function IE(e,t,n,r){let o=r.get(JI,zv)||n===Ut.ShadowDom,s=e.selectRootElement(t,o);return EE(s),s}function EE(e){SE(e)}var SE=()=>null;function ME(e,t,n,r){let i=zE(t);i.push(n),e.firstCreatePass&&qE(e).push(r,i.length-1)}function xE(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return cI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Dy(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=si.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let d=o;if(i!==null){if(!i.hasOwnProperty(o))continue;d=i[o]}e===0?Cy(r,n,d,a,c):Cy(r,n,d,a)}return r}function Cy(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function TE(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,d=null;for(let p=r;p<i;p++){let h=o[p],f=n?n.get(h):null,g=f?f.inputs:null,w=f?f.outputs:null;c=Dy(0,h.inputs,p,c,g),d=Dy(1,h.outputs,p,d,w);let I=c!==null&&s!==null&&!ud(t)?HE(c,p,s):null;a.push(I)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=d}function kE(e,t,n,r){if(pv()){let i=r===null?null:{"":-1},o=PE(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&lw(e,t,n,s,i,a),i&&FE(n,r,i)}n.mergedAttrs=cd(n.mergedAttrs,n.attrs)}function lw(e,t,n,r,i,o){for(let d=0;d<r.length;d++)NI(xv(n,t),e,r[d].type);VE(n,e.data.length,r.length);for(let d=0;d<r.length;d++){let p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,c=rw(e,t,r.length,null);for(let d=0;d<r.length;d++){let p=r[d];n.mergedAttrs=cd(n.mergedAttrs,p.hostAttrs),jE(e,n,t,c,p),LE(c,p,i),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let h=p.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}TE(e,n,o)}function AE(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;NE(s)!=a&&s.push(a),s.push(n,r,o)}}function NE(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function RE(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;fd(n)&&BE(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||xv(n,t),di(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],d=ui(t,e,a,n);if(di(d,t),s!==null&&UE(t,a-i,d,c,n,s),So(c)){let p=Mo(n.index,t);p[jn]=ui(t,e,a,n)}}}function cw(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=yI();try{pr(o);for(let a=r;a<i;a++){let c=e.data[a],d=t[a];Au(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&OE(c,d)}}finally{pr(-1),Au(s)}}function OE(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function PE(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(MC(t,s.selectors,!1))if(r||(r=[]),So(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Bu(e,t,c)}else r.unshift(s),Bu(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Bu(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function FE(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new A(-301,!1);r.push(t[i],o)}}}function LE(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;So(t)&&(n[""]=e)}}function VE(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function jE(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=ri(i.type,!0)),s=new bo(o,So(i),kd);e.blueprint[r]=s,n[r]=s,AE(e,t,r,rw(e,n,i.hostVars,ew),i)}function BE(e,t,n){let r=pn(t,e),i=sw(n),o=e[on].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Ad(e,qa(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function UE(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],d=s[a++],p=s[a++],h=s[a++];tw(r,n,c,d,p,h)}}function HE(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function $E(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function uw(e,t){let n=e.contentQueries;if(n!==null){let r=Y(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];yd(o),a.contentQueries(2,t[s],s)}}}finally{Y(r)}}}function Ad(e,t){return e[yo]?e[uy][Ct]=t:e[yo]=t,e[uy]=t,t}function Uu(e,t,n){yd(0);let r=Y(null);try{t(e,n)}finally{Y(r)}}function zE(e){return e[Ia]||(e[Ia]=[])}function qE(e){return e.cleanup||(e.cleanup=[])}function GE(e,t){let n=e[ai],r=n?n.get(ln,null):null;r&&r.handleError(t)}function dw(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],d=t[s],p=e.data[s];tw(p,d,r,a,c,i)}}function WE(e,t){let n=Mo(t,e),r=n[V];ZE(r,n);let i=n[un];i!==null&&n[Ca]===null&&(n[Ca]=Ed(i,n[ai])),Nd(r,n,n[jn])}function ZE(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Nd(e,t,n){vd(t);try{let r=e.viewQuery;r!==null&&Uu(1,r,n);let i=e.template;i!==null&&iw(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[an]?.finishViewCreation(e),e.staticContentQueries&&uw(e,t),e.staticViewQueries&&Uu(2,e.viewQuery,n);let o=e.components;o!==null&&QE(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[N]&=-5,wd()}}function QE(e,t){for(let n=0;n<t.length;n++)WE(e,t[n])}function YE(e,t,n,r){let i=Y(null);try{let o=t.tView,a=e[N]&4096?4096:16,c=qa(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=e[t.index];c[cr]=d;let p=e[an];return p!==null&&(c[an]=p.createEmbeddedView(o)),Nd(o,c,n),c}finally{Y(i)}}function Iy(e,t){return!t||t.firstChild===null||Vv(e)}function KE(e,t,n,r=!0){let i=t[V];if(rE(i,t,e,n),r){let s=ju(n,e),a=t[sn],c=xd(a,e[dr]);c!==null&&tE(i,e[It],a,t,c,s)}let o=t[Ca];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ka(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(Bn(o)),dn(o)&&JE(o,r);let s=n.type;if(s&8)ka(e,t,n.child,r);else if(s&32){let a=Sd(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Kv(t,n);if(Array.isArray(a))r.push(...a);else{let c=wo(t[Ht]);ka(c[V],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function JE(e,t){for(let n=Ke;n<e.length;n++){let r=e[n],i=r[V].firstChild;i!==null&&ka(r[V],r,i,t)}e[dr]!==e[un]&&t.push(e[dr])}var pw=[];function XE(e){return e[ur]??eS(e)}function eS(e){let t=pw.pop()??Object.create(nS);return t.lView=e,t}function tS(e){e.lView[ur]!==e&&(e.lView=null,pw.push(e))}var nS=x(y({},_g),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ha(e.lView)},consumerOnSignalRead(){this.lView[ur]=this}}),rS=100;function hw(e,t=!0,n=0){let r=e[on],i=r.rendererFactory,o=!1;o||i.begin?.();try{iS(e,n)}catch(s){throw t&&GE(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function iS(e,t){let n=mv();try{hy(!0),Hu(e,t);let r=0;for(;vo(e);){if(r===rS)throw new A(103,!1);r++,Hu(e,1)}}finally{hy(n)}}function oS(e,t,n,r){let i=t[N];if((i&256)===256)return;let o=!1,s=!1;!o&&t[on].inlineEffectRunner?.flush(),vd(t);let a=null,c=null;!o&&sS(e)&&(c=XE(t),a=Dg(c));try{cv(t),fI(e.bindingStartIndex),n!==null&&iw(e,t,n,2,r);let d=(i&3)===3;if(!o)if(d){let f=e.preOrderCheckHooks;f!==null&&fa(t,f,null)}else{let f=e.preOrderHooks;f!==null&&ma(t,f,0,null),pu(t,0)}if(s||aS(t),fw(t,0),e.contentQueries!==null&&uw(e,t),!o)if(d){let f=e.contentCheckHooks;f!==null&&fa(t,f)}else{let f=e.contentHooks;f!==null&&ma(t,f,1),pu(t,1)}wE(e,t);let p=e.components;p!==null&&gw(t,p,0);let h=e.viewQuery;if(h!==null&&Uu(2,h,r),!o)if(d){let f=e.viewCheckHooks;f!==null&&fa(t,f)}else{let f=e.viewHooks;f!==null&&ma(t,f,2),pu(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[du]){for(let f of t[du])f();t[du]=null}o||(t[N]&=-73)}catch(d){throw o||Ha(t),d}finally{c!==null&&(Cg(c,a),tS(c)),wd()}}function sS(e){return e.type!==2}function fw(e,t){for(let n=Bv(e);n!==null;n=Uv(n))for(let r=Ke;r<n.length;r++){let i=n[r];mw(i,t)}}function aS(e){for(let t=Bv(e);t!==null;t=Uv(t)){if(!(t[N]&Sa.HasTransplantedViews))continue;let n=t[ci];for(let r=0;r<n.length;r++){let i=n[r];iI(i)}}}function lS(e,t,n){let r=Mo(t,e);mw(r,n)}function mw(e,t){md(e)&&Hu(e,t)}function Hu(e,t){let r=e[V],i=e[N],o=e[ur],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&qc(o)),s||=!1,o&&(o.dirty=!1),e[N]&=-9217,s)oS(r,e,r.template,e[jn]);else if(i&8192){fw(e,1);let a=r.components;a!==null&&gw(e,a,1)}}function gw(e,t,n){for(let r=0;r<t.length;r++)lS(e,t[r],n)}function yw(e,t){let n=mv()?64:1088;for(e[on].changeDetectionScheduler?.notify(t);e;){e[N]|=n;let r=wo(e);if(xu(e)&&!r)return e;e=r}return null}var fr=class{get rootNodes(){let t=this._lView,n=t[V];return ka(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(t){this._lView[jn]=t}get destroyed(){return(this._lView[N]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Re];if(dn(t)){let n=t[Ea],r=n?n.indexOf(this):-1;r>-1&&(Vu(t,r),_a(n,r))}this._attachedToViewContainer=!1}Qv(this._lView[V],this._lView)}onDestroy(t){uv(this._lView,t)}markForCheck(){yw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[N]&=-129}reattach(){ku(this._lView),this._lView[N]|=128}detectChanges(){this._lView[N]|=1024,hw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=xu(this._lView),n=this._lView[cr];n!==null&&!t&&Md(n,this._lView),Wv(this._lView[V],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=t;let n=xu(this._lView),r=this._lView[cr];r!==null&&!n&&Zv(r,this._lView),ku(this._lView)}},_o=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=dS;let e=t;return e})(),cS=_o,uS=class extends cS{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=YE(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new fr(i)}};function dS(){return Rd($t(),$e())}function Rd(e,t){return e.type&4?new uS(t,e,fi(e,t)):null}var Y1=new RegExp(`^(\\d+)*(${YI}|${QI})*(.*)`);var pS=()=>null;function Ey(e,t){return pS(e,t)}var Do=class{},Od=new j("",{providedIn:"root",factory:()=>!1});var vw=new j(""),$u=class{},Aa=class{};function hS(e){let t=Error(`No component factory found for ${Ye(e)}.`);return t[fS]=e,t}var fS="ngComponent";var zu=class{resolveComponentFactory(t){throw hS(t)}},zd=class zd{};zd.NULL=new zu;var pi=zd,hi=class{};var mS=(()=>{let t=class t{};t.\u0275prov=P({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),yu={};var Sy=new Set;function Pd(e){Sy.has(e)||(Sy.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function ww(e){let t=!0;return setTimeout(()=>{t&&(t=!1,e())}),typeof bu.requestAnimationFrame=="function"&&bu.requestAnimationFrame(()=>{t&&(t=!1,e())}),()=>{t=!1}}function My(e){let t=!0;return queueMicrotask(()=>{t&&e()}),()=>{t=!1}}function xy(...e){}var we=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ne(!1),this.onMicrotaskEmpty=new Ne(!1),this.onStable=new Ne(!1),this.onError=new Ne(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,vS(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new A(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,gS,xy,xy);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},gS={};function Fd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function yS(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{ww(()=>{e.callbackScheduled=!1,qu(e),e.isCheckStableRunning=!0,Fd(e),e.isCheckStableRunning=!1})}),qu(e))}function vS(e){let t=()=>{yS(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(wS(a))return n.invokeTask(i,o,s,a);try{return Ty(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),ky(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Ty(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!bS(a)&&t(),ky(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,qu(e),Fd(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function qu(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Ty(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ky(e){e._nesting--,Fd(e)}var Gu=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ne,this.onMicrotaskEmpty=new Ne,this.onStable=new Ne,this.onError=new Ne}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function wS(e){return bw(e,"__ignore_ng_zone__")}function bS(e){return bw(e,"__scheduler_tick__")}function bw(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var _w=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=P({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Wu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=ey(i,a);else if(o==2){let c=a,d=t[++s];r=ey(r,c+": "+d+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Na=class extends pi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=lr(t);return new Co(n,this.ngModule)}};function Ay(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function _S(e){let t=e.toLowerCase();return t==="svg"?XC:t==="math"?eI:null}var Zu=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Fa(r);let i=this.injector.get(t,yu,r);return i!==yu||n===yu?i:this.parentInjector.get(t,n,r)}},Co=class extends Aa{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Ay(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ay(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=AC(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=Y(null);try{i=i||this.ngModule;let s=i instanceof ut?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Zu(t,s):t,c=a.get(hi,null);if(c===null)throw new A(407,!1);let d=a.get(mS,null),p=a.get(_w,null),h=a.get(Do,null),f={rendererFactory:c,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:h},g=c.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",I=r?IE(g,r,this.componentDef.encapsulation,a):Gv(g,w,_S(w)),ne=512;this.componentDef.signals?ne|=4096:this.componentDef.onPush||(ne|=16);let J=null;I!==null&&(J=Ed(I,a,!0));let Se=aw(0,null,null,1,0,null,null,null,null,null,null),U=qa(null,Se,null,ne,null,null,f,g,a,null,J);vd(U);let X,Me;try{let be=this.componentDef,Ge,vc=null;be.findHostDirectiveDefs?(Ge=[],vc=new Map,be.findHostDirectiveDefs(be,Ge,vc),Ge.push(be)):Ge=[be];let E0=DS(U,I),S0=CS(E0,I,be,Ge,U,f,g);Me=tI(Se,li),I&&SS(g,be,I,r),n!==void 0&&MS(Me,this.ngContentSelectors,n),X=ES(S0,be,Ge,vc,U,[xS]),Nd(Se,U,null)}finally{wd()}return new Qu(this.componentType,X,fi(Me,U),U,Me)}finally{Y(o)}}},Qu=class extends $u{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;dw(o[V],o,i,t,n),this.previousInputValues.set(t,n);let s=Mo(this._tNode.index,o);yw(s,1)}}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function DS(e,t){let n=e[V],r=li;return e[r]=t,nw(n,r,2,"#host",null)}function CS(e,t,n,r,i,o,s){let a=i[V];IS(r,e,t,s);let c=null;t!==null&&(c=Ed(t,i[ai]));let d=o.rendererFactory.createRenderer(t,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let h=qa(i,sw(n),null,p,i[e.index],e,o,d,null,null,c);return a.firstCreatePass&&Bu(a,e,r.length-1),Ad(i,h),i[e.index]=h}function IS(e,t,n,r){for(let i of e)t.mergedAttrs=cd(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Wu(t,t.mergedAttrs,!0),n!==null&&Xv(r,n,t))}function ES(e,t,n,r,i,o){let s=$t(),a=i[V],c=pn(s,i);lw(a,i,s,n,null,r);for(let p=0;p<n.length;p++){let h=s.directiveStart+p,f=ui(i,a,h,s);di(f,i)}cw(a,i,s),c&&di(c,i);let d=ui(i,a,s.directiveStart+s.componentOffset,s);if(e[jn]=i[jn]=d,o!==null)for(let p of o)p(d,t);return ow(a,s,i),d}function SS(e,t,n,r){if(r)Cu(e,n,["ng-version","18.0.0"]);else{let{attrs:i,classes:o}=NC(t.selectors[0]);i&&Cu(e,n,i),o&&o.length>0&&Jv(e,n,o.join(" "))}}function MS(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function xS(){let e=$t();Cv($e()[V],e)}var gi=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=TS;let e=t;return e})();function TS(){let e=$t();return Cw(e,$e())}var kS=gi,Dw=class extends kS{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return fi(this._hostTNode,this._hostLView)}get injector(){return new ar(this._hostTNode,this._hostLView)}get parentInjector(){let t=bd(this._hostTNode,this._hostLView);if(Ev(t)){let n=xa(t,this._hostLView),r=Ma(t),i=n[V].data[r+8];return new ar(i,n)}else return new ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ny(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ey(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Iy(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!ZC(t),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?t:new Co(lr(t)),d=r||this.parentInjector;if(!o&&c.ngModule==null){let I=(s?d:this.parentInjector).get(ut,null);I&&(o=I)}let p=lr(c.componentType??{}),h=Ey(this._lContainer,p?.id??null),f=h?.firstChild??null,g=c.create(d,i,f,o);return this.insertImpl(g.hostView,a,Iy(this._hostTNode,h)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(rI(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Re],d=new Dw(c,c[It],c[Re]);d.detach(d.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return KE(s,i,o,r),t.attachToViewContainerRef(),Hy(vu(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ny(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Vu(this._lContainer,n);r&&(_a(vu(this._lContainer),n),Qv(r[V],r))}detach(t){let n=this._adjustIndex(t,-1),r=Vu(this._lContainer,n);return r&&_a(vu(this._lContainer),n)!=null?new fr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ny(e){return e[Ea]}function vu(e){return e[Ea]||(e[Ea]=[])}function Cw(e,t){let n,r=t[e.index];return dn(r)?n=r:(n=$E(r,t,null,e),t[e.index]=n,Ad(t,n)),NS(n,t,e,r),new Dw(n,e,t)}function AS(e,t){let n=e[sn],r=n.createComment(""),i=pn(t,e),o=xd(n,i);return Ta(n,o,r,cE(n,i),!1),r}var NS=RS;function RS(e,t,n,r){if(e[dr])return;let i;n.type&8?i=Bn(r):i=AS(t,n),e[dr]=i}var Yu=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Ku=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Ld(t,n).matches!==null&&this.queries[n].setDirty()}},Ju=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=US(t):this.predicate=t}},Xu=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},ed=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,OS(n,o)),this.matchTNodeWithReadOption(t,n,ga(n,t,o,!1,!1))}else r===_o?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ga(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===mr||i===gi||i===_o&&n.type&4)this.addMatch(n.index,-2);else{let o=ga(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function OS(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function PS(e,t){return e.type&11?fi(e,t):e.type&4?Rd(e,t):null}function FS(e,t,n,r){return n===-1?PS(t,e):n===-2?LS(e,t,r):ui(e,e[V],n,t)}function LS(e,t,n){if(n===mr)return fi(t,e);if(n===_o)return Rd(t,e);if(n===gi)return Cw(t,e)}function Iw(e,t,n,r){let i=t[an].queries[r];if(i.matches===null){let o=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let d=s[c];if(d<0)a.push(null);else{let p=o[d];a.push(FS(t,p,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function td(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Iw(e,t,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let d=o[a+1],p=t[-c];for(let h=Ke;h<p.length;h++){let f=p[h];f[cr]===f[Re]&&td(f[V],f,d,r)}if(p[ci]!==null){let h=p[ci];for(let f=0;f<h.length;f++){let g=h[f];td(g[V],g,d,r)}}}}}return r}function VS(e,t){return e[an].queries[t].queryList}function jS(e,t,n){let r=new Fu((n&4)===4);return ME(e,t,r,r.destroy),(t[an]??=new Ku).queries.push(new Yu(r))-1}function BS(e,t,n){let r=$a();return r.firstCreatePass&&(HS(r,new Ju(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),jS(r,$e(),t)}function US(e){return e.split(",").map(t=>t.trim())}function HS(e,t,n){e.queries===null&&(e.queries=new Xu),e.queries.track(new ed(t,n))}function Ld(e,t){return e.queries.getByIndex(t)}function $S(e,t){let n=e[V],r=Ld(n,t);return r.crossesNgTemplate?td(n,e,t,[]):Iw(n,e,r,t)}var Un=class{},Io=class{};var nd=class extends Un{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Na(this);let i=Yy(t);this._bootstrapComponents=qv(i.bootstrap),this._r3Injector=Pv(t,n,[{provide:Un,useValue:this},{provide:pi,useValue:this.componentFactoryResolver},...r],Ye(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},rd=class extends Io{constructor(t){super(),this.moduleType=t}create(t){return new nd(this.moduleType,t,[])}};var Ra=class extends Un{constructor(t){super(),this.componentFactoryResolver=new Na(this),this.instance=null;let n=new go([...t.providers,{provide:Un,useValue:this},{provide:pi,useValue:this.componentFactoryResolver}],t.parent||hd(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Vd(e,t,n=null){return new Ra({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var xo=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function zS(e){return(e.flags&32)===32}function Ry(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";dw(e,n,o[s],s,r)}function qS(e,t,n,r,i,o){let s=t.consts,a=py(s,i),c=nw(t,e,2,r,a);return kE(t,n,c,py(s,o)),c.attrs!==null&&Wu(c,c.attrs,!1),c.mergedAttrs!==null&&Wu(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Ew(e,t,n,r){let i=$e(),o=$a(),s=li+e,a=i[sn],c=o.firstCreatePass?qS(s,o,i,t,n,r):o.data[s],d=GS(o,i,c,a,t,e);i[s]=d;let p=QC(c);return gd(c,!0),Xv(a,d,c),!zS(c)&&_I()&&hE(o,i,d,c),sI()===0&&di(d,i),aI(),p&&(_E(o,i,c),ow(o,c,i)),r!==null&&DE(i,c),Ew}function Sw(){let e=$t();fv()?hI():(e=e.parent,gd(e,!1));let t=e;uI(t)&&dI(),lI();let n=$a();return n.firstCreatePass&&(Cv(n,e),iv(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&SI(t)&&Ry(n,t,$e(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&MI(t)&&Ry(n,t,$e(),t.stylesWithoutHost,!1),Sw}function To(e,t,n,r){return Ew(e,t,n,r),Sw(),To}var GS=(e,t,n,r,i,o)=>(DI(!0),Gv(r,i,bI()));var Oa="en-US";var WS=Oa;function ZS(e){typeof e=="string"&&(WS=e.toLowerCase().replace(/_/g,"-"))}function Mw(e,t,n){BS(e,t,n)}function jd(e){let t=$e(),n=$a(),r=gv();yd(r+1);let i=Ld(n,r);if(e.dirty&&nI(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=$S(t,r);e.reset(o,UI),e.notifyOnChanges()}return!0}return!1}function Bd(){return VS($e(),gv())}var QS=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Xy(!1,r.type),o=i.length>0?Vd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=P({token:t,providedIn:"environment",factory:()=>new t($(ut))});let e=t;return e})();function Ga(e){Pd("NgStandalone"),e.getStandaloneInjector=t=>t.get(QS).getOrCreateStandaloneInjector(e)}var Wa=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var xw=new j("");function ko(e){return!!e&&typeof e.then=="function"}function Tw(e){return!!e&&typeof e.subscribe=="function"}var kw=new j(""),Aw=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=D(kw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(ko(s))r.push(s);else if(Tw(s)){let a=new Promise((c,d)=>{s.subscribe({complete:c,error:d})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ud=new j("");function YS(){Eg(()=>{throw new A(600,!1)})}function KS(e){return e.isBoundToModule}var JS=10;function XS(e,t,n){try{let r=n();return ko(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var yi=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=D(Fv),this.afterRenderEffectManager=D(_w),this.zonelessEnabled=D(Od),this.externalTestViews=new Set,this.beforeRender=new Fe,this.afterTick=new Fe,this.componentTypes=[],this.components=[],this.isStable=D(xo).hasPendingTasks.pipe(H(r=>!r)),this._injector=D(ut)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Aa;if(!this._injector.get(Aw).done){let g=!o&&Qy(r),w=!1;throw new A(405,w)}let a;o?a=r:a=this._injector.get(pi).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=KS(a)?void 0:this._injector.get(Un),d=i||a.selector,p=a.create(hr.NULL,[],d,c),h=p.location.nativeElement,f=p.injector.get(xw,null);return f?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),wu(this.components,p),f?.unregisterApplication(h)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new A(101,!1);let i=Y(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,Y(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(hi,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<JS;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:d}of this._views)eM(c,d,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>vo(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>vo(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;wu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ud,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>wu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new A(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function wu(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function eM(e,t,n,r){if(!n&&!vo(e))return;hw(e,t,n&&!r?0:1)}var id=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Hd=(()=>{let t=class t{compileModuleSync(r){return new rd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Yy(r),s=qv(o.declarations).reduce((a,c)=>{let d=lr(c);return d&&a.push(new Co(d)),a},[]);return new id(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var tM=!0;var nM=(()=>{let t=class t{constructor(){this.appRef=D(yi),this.taskService=D(xo),this.ngZone=D(we),this.zonelessEnabled=D(Od),this.disableScheduling=D(vw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ve,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Gu||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?My:ww;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&we.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,My(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var rM=(()=>{let t=class t{constructor(){this.zone=D(we),this.changeDetectionScheduler=D(Do,{optional:!0}),this.applicationRef=D(yi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler?.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Nw({ngZoneFactory:e,ignoreChangesOutsideZone:t}){return e??=()=>new we(Ow()),[{provide:we,useFactory:e},{provide:oi,multi:!0,useFactory:()=>{let n=D(rM,{optional:!0});return()=>n.initialize()}},{provide:oi,multi:!0,useFactory:()=>{let n=D(oM);return()=>{n.initialize()}}},{provide:Fv,useFactory:iM},t===!0?{provide:vw,useValue:!0}:[],tM||t===!1?{provide:Do,useExisting:nM}:[]]}function iM(){let e=D(we),t=D(ln);return n=>e.runOutsideAngular(()=>t.handleError(n))}function Rw(e){let t=e?.ignoreChangesOutsideZone,n=Nw({ngZoneFactory:()=>{let r=Ow(e);return r.shouldCoalesceEventChangeDetection&&Pd("NgZone_CoalesceEvent"),new we(r)},ignoreChangesOutsideZone:t});return Va([[],{provide:Od,useValue:!1},n])}function Ow(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var oM=(()=>{let t=class t{constructor(){this.subscription=new ve,this.initialized=!1,this.zone=D(we),this.pendingTasks=D(xo)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function sM(){return typeof $localize<"u"&&$localize.locale||Oa}var $d=new j("",{providedIn:"root",factory:()=>D($d,L.Optional|L.SkipSelf)||sM()});var Pw=new j("");var va=null;function aM(e=[],t){return hr.create({name:t,providers:[{provide:ja,useValue:"platform"},{provide:Pw,useValue:new Set([()=>va=null])},...e]})}function lM(e=[]){if(va)return va;let t=aM(e);return va=t,YS(),cM(t),t}function cM(e){e.get(Cd,null)?.forEach(n=>n())}var Ao=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=uM;let e=t;return e})();function uM(e){return dM($t(),$e(),(e&16)===16)}function dM(e,t,n){if(fd(e)&&!n){let r=Mo(e.index,t);return new fr(r,r)}else if(e.type&47){let r=t[Ht];return new fr(r,t)}return null}function Fw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=lM(r),o=[Nw({}),...n||[]],a=new Ra({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(we);return c.run(()=>{a.resolveInjectorInitializers();let d=a.get(ln,null),p;c.runOutsideAngular(()=>{p=c.onError.subscribe({next:g=>{d.handleError(g)}})});let h=()=>a.destroy(),f=i.get(Pw);return f.add(h),a.onDestroy(()=>{p.unsubscribe(),f.delete(h)}),XS(d,c,()=>{let g=a.get(Aw);return g.runInitializers(),g.donePromise.then(()=>{let w=a.get($d,Oa);ZS(w||Oa);let I=a.get(yi);return t!==void 0&&I.bootstrap(t),I})})})}catch(t){return Promise.reject(t)}}var $w=null;function vi(){return $w}function zw(e){$w??=e}var Qa=class{};var dt=new j(""),qw=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>D(gM),providedIn:"platform"});let e=t;return e})();var gM=(()=>{let t=class t extends qw{constructor(){super(),this._doc=D(dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vi().getBaseHref(this._doc)}onPopState(r){let i=vi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=vi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function Gw(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Lw(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function yr(e){return e&&e[0]!=="?"?"?"+e:e}var Ka=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>D(Ww),providedIn:"root"});let e=t;return e})(),yM=new j(""),Ww=(()=>{let t=class t extends Ka{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Gw(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+yr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+yr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+yr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(i){return new(i||t)($(qw),$(yM,8))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var No=(()=>{let t=class t{constructor(r){this._subject=new Ne,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=bM(Lw(Vw(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+yr(i))}normalize(r){return t.stripTrailingSlash(wM(this._basePath,Vw(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+yr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+yr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};t.normalizeQueryParams=yr,t.joinWithSlash=Gw,t.stripTrailingSlash=Lw,t.\u0275fac=function(i){return new(i||t)($(Ka))},t.\u0275prov=P({token:t,factory:()=>vM(),providedIn:"root"});let e=t;return e})();function vM(){return new No($(Ka))}function wM(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Vw(e){return e.replace(/\/index.html$/,"")}function bM(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Zw(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Qw="browser",_M="server";function qd(e){return e===_M}var Ya=class{};var Zd=class extends Qa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qd=class e extends Zd{static makeCurrent(){zw(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=CM();return n==null?null:IM(n)}resetBaseElement(){Ro=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Zw(document.cookie,t)}},Ro=null;function CM(){return Ro=Ro||document.querySelector("base"),Ro?Ro.getAttribute("href"):null}function IM(e){return new URL(e,document.baseURI).pathname}var EM=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac});let e=t;return e})(),Yd=new j(""),Xw=(()=>{let t=class t{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new A(5101,!1);return this._eventNameToPlugin.set(r,i),i}};t.\u0275fac=function(i){return new(i||t)($(Yd),$(we))},t.\u0275prov=P({token:t,factory:t.\u0275fac});let e=t;return e})(),Ja=class{constructor(t){this._doc=t}},Gd="ng-app-id",eb=(()=>{let t=class t{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qd(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Gd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Gd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Gd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(i){return new(i||t)($(dt),$(Dd),$(Id,8),$(mi))},t.\u0275prov=P({token:t,factory:t.\u0275fac});let e=t;return e})(),Wd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jd=/%COMP%/g,tb="%COMP%",SM=`_nghost-${tb}`,MM=`_ngcontent-${tb}`,xM=!0,TM=new j("",{providedIn:"root",factory:()=>xM});function kM(e){return MM.replace(Jd,e)}function AM(e){return SM.replace(Jd,e)}function nb(e,t){return t.map(n=>n.replace(Jd,e))}var Yw=(()=>{let t=class t{constructor(r,i,o,s,a,c,d,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=qd(c),this.defaultRenderer=new Oo(r,a,d,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ut.ShadowDom&&(i=x(y({},i),{encapsulation:Ut.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Xa?o.applyToHost(r):o instanceof Po&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Ut.Emulated:s=new Xa(d,p,i,this.appId,h,a,c,f);break;case Ut.ShadowDom:return new Kd(d,p,r,i,a,c,this.nonce,f);default:s=new Po(d,p,i,h,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(i){return new(i||t)($(Xw),$(eb),$(Dd),$(TM),$(dt),$(mi),$(we),$(Id))},t.\u0275prov=P({token:t,factory:t.\u0275fac});let e=t;return e})(),Oo=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Wd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Kw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Kw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new A(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Wd[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Wd[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(gr.DashCase|gr.Important)?t.style.setProperty(n,r,i&gr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&gr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=vi().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Kw(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Kd=class extends Oo{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=nb(i.id,i.styles);for(let p of d){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Po=class extends Oo{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?nb(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xa=class extends Po{constructor(t,n,r,i,o,s,a,c){let d=i+"-"+r.id;super(t,n,r,o,s,a,c,d),this.contentAttr=kM(d),this.hostAttr=AM(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},NM=(()=>{let t=class t extends Ja{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};t.\u0275fac=function(i){return new(i||t)($(dt))},t.\u0275prov=P({token:t,factory:t.\u0275fac});let e=t;return e})(),Jw=["alt","control","meta","shift"],RM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OM={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},PM=(()=>{let t=class t extends Ja{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,i,o){let s=t.parseEventName(i),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Jw.forEach(p=>{let h=i.indexOf(p);h>-1&&(i.splice(h,1),a+=p+".")}),a+=s,i.length!=0||s.length===0)return null;let d={};return d.domEventName=o,d.fullKey=a,d}static matchEventFullKeyCode(r,i){let o=RM[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Jw.forEach(a=>{if(a!==o){let c=OM[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{t.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(i){return new(i||t)($(dt))},t.\u0275prov=P({token:t,factory:t.\u0275fac});let e=t;return e})();function rb(e,t){return Fw(y({rootComponent:e},FM(t)))}function FM(e){return{appProviders:[...UM,...e?.providers??[]],platformProviders:BM}}function LM(){Qd.makeCurrent()}function VM(){return new ln}function jM(){return $v(document),document}var BM=[{provide:mi,useValue:Qw},{provide:Cd,useValue:LM,multi:!0},{provide:dt,useFactory:jM,deps:[]}];var UM=[{provide:ja,useValue:"root"},{provide:ln,useFactory:VM,deps:[]},{provide:Yd,useClass:NM,multi:!0,deps:[dt,we,mi]},{provide:Yd,useClass:PM,multi:!0,deps:[dt]},Yw,eb,Xw,{provide:hi,useExisting:Yw},{provide:Ya,useClass:EM,deps:[]},[]];var ib=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(i){return new(i||t)($(dt))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var F="primary",Jo=Symbol("RouteTitle"),rp=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ii(e){return new rp(e)}function $M(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function zM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!zt(e[n],t[n]))return!1;return!0}function zt(e,t){let n=e?ip(e):void 0,r=t?ip(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!pb(e[i],t[i]))return!1;return!0}function ip(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function pb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function hb(e){return e.length>0?e[e.length-1]:null}function $n(e){return ru(e)?e:ko(e)?De(Promise.resolve(e)):O(e)}var qM={exact:mb,subset:gb},fb={exact:GM,subset:WM,ignored:()=>!0};function ob(e,t,n){return qM[n.paths](e.root,t.root,n.matrixParams)&&fb[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function GM(e,t){return zt(e,t)}function mb(e,t,n){if(!wr(e.segments,t.segments)||!nl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!mb(e.children[r],t.children[r],n))return!1;return!0}function WM(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>pb(e[n],t[n]))}function gb(e,t,n){return yb(e,t,t.segments,n)}function yb(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!wr(i,n)||t.hasChildren()||!nl(i,n,r))}else if(e.segments.length===n.length){if(!wr(e.segments,n)||!nl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!gb(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!wr(e.segments,i)||!nl(e.segments,i,r)||!e.children[F]?!1:yb(e.children[F],t,o,r)}}function nl(e,t,n){return t.every((r,i)=>fb[n](e[i].parameters,r.parameters))}var Hn=class{constructor(t=new Z([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ii(this.queryParams),this._queryParamMap}toString(){return YM.serialize(this)}},Z=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rl(this)}},vr=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Ii(this.parameters),this._parameterMap}toString(){return wb(this)}};function ZM(e,t){return wr(e,t)&&e.every((n,r)=>zt(n.parameters,t[r].parameters))}function wr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function QM(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===F&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==F&&(n=n.concat(t(i,r)))}),n}var kp=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>new Ho,providedIn:"root"});let e=t;return e})(),Ho=class{parse(t){let n=new sp(t);return new Hn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Fo(t.root,!0)}`,r=XM(t.queryParams),i=typeof t.fragment=="string"?`#${KM(t.fragment)}`:"";return`${n}${r}${i}`}},YM=new Ho;function rl(e){return e.segments.map(t=>wb(t)).join("/")}function Fo(e,t){if(!e.hasChildren())return rl(e);if(t){let n=e.children[F]?Fo(e.children[F],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==F&&r.push(`${i}:${Fo(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QM(e,(r,i)=>i===F?[Fo(e.children[F],!1)]:[`${i}:${Fo(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[F]!=null?`${rl(e)}/${n[0]}`:`${rl(e)}/(${n.join("//")})`}}function vb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function el(e){return vb(e).replace(/%3B/gi,";")}function KM(e){return encodeURI(e)}function op(e){return vb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function il(e){return decodeURIComponent(e)}function sb(e){return il(e.replace(/\+/g,"%20"))}function wb(e){return`${op(e.path)}${JM(e.parameters)}`}function JM(e){return Object.entries(e).map(([t,n])=>`;${op(t)}=${op(n)}`).join("")}function XM(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${el(n)}=${el(i)}`).join("&"):`${el(n)}=${el(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var ex=/^[^\/()?;#]+/;function Xd(e){let t=e.match(ex);return t?t[0]:""}var tx=/^[^\/()?;=#]+/;function nx(e){let t=e.match(tx);return t?t[0]:""}var rx=/^[^=?&#]+/;function ix(e){let t=e.match(rx);return t?t[0]:""}var ox=/^[^&#]+/;function sx(e){let t=e.match(ox);return t?t[0]:""}var sp=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[F]=new Z(t,n)),r}parseSegment(){let t=Xd(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(t),new vr(il(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=nx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xd(this.remaining);i&&(r=i,this.capture(r))}t[il(n)]=il(r)}parseQueryParam(t){let n=ix(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=sx(this.remaining);s&&(r=s,this.capture(r))}let i=sb(n),o=sb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=F);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[F]:new Z([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new A(4011,!1)}};function bb(e){return e.segments.length>0?new Z([],{[F]:e}):e}function _b(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=_b(i);if(r===F&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Z(e.segments,t);return ax(n)}function ax(e){if(e.numberOfChildren===1&&e.children[F]){let t=e.children[F];return new Z(e.segments.concat(t.segments),t.children)}return e}function $o(e){return e instanceof Hn}function lx(e,t,n=null,r=null){let i=Db(e);return Cb(i,t,n,r)}function Db(e){let t;function n(o){let s={};for(let c of o.children){let d=n(c);s[c.outlet]=d}let a=new Z(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=bb(r);return t??i}function Cb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return ep(i,i,i,n,r);let o=cx(t);if(o.toRoot())return ep(i,i,new Z([],{}),n,r);let s=ux(o,i,e),a=s.processChildren?jo(s.segmentGroup,s.index,o.commands):Eb(s.segmentGroup,s.index,o.commands);return ep(i,s.segmentGroup,a,n,r)}function ol(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function zo(e){return typeof e=="object"&&e!=null&&e.outlets}function ep(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let s;e===t?s=n:s=Ib(e,t,n);let a=bb(_b(s));return new Hn(a,o,i)}function Ib(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Ib(o,t,n)}),new Z(e.segments,r)}var sl=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&ol(r[0]))throw new A(4003,!1);let i=r.find(zo);if(i&&i!==hb(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cx(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new sl(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sl(n,t,r)}var _i=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function ux(e,t,n){if(e.isAbsolute)return new _i(t,!0,0);if(!n)return new _i(t,!1,NaN);if(n.parent===null)return new _i(n,!0,0);let r=ol(e.commands[0])?0:1,i=n.segments.length-1+r;return dx(n,i,e.numberOfDoubleDots)}function dx(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new _i(r,!1,i-o)}function px(e){return zo(e[0])?e[0].outlets:{[F]:e}}function Eb(e,t,n){if(e??=new Z([],{}),e.segments.length===0&&e.hasChildren())return jo(e,t,n);let r=hx(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Z(e.segments.slice(0,r.pathIndex),{});return o.children[F]=new Z(e.segments.slice(r.pathIndex),e.children),jo(o,0,i)}else return r.match&&i.length===0?new Z(e.segments,{}):r.match&&!e.hasChildren()?ap(e,t,n):r.match?jo(e,0,i):ap(e,t,n)}function jo(e,t,n){if(n.length===0)return new Z(e.segments,{});{let r=px(n),i={};if(Object.keys(r).some(o=>o!==F)&&e.children[F]&&e.numberOfChildren===1&&e.children[F].segments.length===0){let o=jo(e.children[F],t,n);return new Z(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Eb(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Z(e.segments,i)}}function hx(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(zo(a))break;let c=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!lb(c,d,s))return o;r+=2}else{if(!lb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ap(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(zo(o)){let c=fx(o.outlets);return new Z(r,c)}if(i===0&&ol(n[0])){let c=e.segments[t];r.push(new vr(c.path,ab(n[0]))),i++;continue}let s=zo(o)?o.outlets[F]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ol(a)?(r.push(new vr(s,ab(a))),i+=2):(r.push(new vr(s,{})),i++)}return new Z(r,{})}function fx(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=ap(new Z([],{}),0,r))}),t}function ab(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function lb(e,t,n){return e==n.path&&zt(t,n.parameters)}var Bo="imperative",ke=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(ke||{}),pt=class{constructor(t,n){this.id=t,this.url=n}},qo=class extends pt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=ke.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},br=class extends pt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xe=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Xe||{}),lp=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(lp||{}),hn=class extends pt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_r=class extends pt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=ke.NavigationSkipped}},Go=class extends pt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},al=class extends pt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cp=class extends pt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},up=class extends pt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dp=class extends pt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pp=class extends pt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class{constructor(t){this.route=t,this.type=ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fp=class{constructor(t){this.route=t,this.type=ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mp=class{constructor(t){this.snapshot=t,this.type=ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gp=class{constructor(t){this.snapshot=t,this.type=ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{constructor(t){this.snapshot=t,this.type=ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{constructor(t){this.snapshot=t,this.type=ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wo=class{},Ei=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};var wp=class{constructor(t){this.injector=t,this.outlet=null,this.route=null,this.children=new fl(this.injector),this.attachRef=null}},fl=(()=>{let t=class t{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new wp(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(i){return new(i||t)($(ut))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ll=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=bp(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=bp(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=_p(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return _p(t,this._root).map(n=>n.value)}};function bp(e,t){if(e===t.value)return t;for(let n of t.children){let r=bp(e,n);if(r)return r}return null}function _p(e,t){if(e===t.value)return[t];for(let n of t.children){let r=_p(e,n);if(r.length)return r.unshift(t),r}return[]}var Je=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function bi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var cl=class extends ll{constructor(t,n){super(t),this.snapshot=n,Ap(this,t)}toString(){return this.snapshot.toString()}};function Sb(e){let t=mx(e),n=new xe([new vr("",{})]),r=new xe({}),i=new xe({}),o=new xe({}),s=new xe(""),a=new Si(n,r,o,s,i,F,e,t.root);return a.snapshot=t.root,new cl(new Je(a,[]),t)}function mx(e){let t={},n={},r={},i="",o=new Di([],t,r,i,n,F,e,null,{});return new dl("",new Je(o,[]))}var Si=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(H(d=>d[Jo]))??O(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(t=>Ii(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(t=>Ii(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ul(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:y(y({},t.params),e.params),data:y(y({},t.data),e.data),resolve:y(y(y(y({},e.data),t.data),i?.data),e._resolvedData)}:r={params:y({},e.params),data:y({},e.data),resolve:y(y({},e.data),e._resolvedData??{})},i&&xb(i)&&(r.resolve[Jo]=i.title),r}var Di=class{get title(){return this.data?.[Jo]}constructor(t,n,r,i,o,s,a,c,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ii(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ii(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},dl=class extends ll{constructor(t,n){super(n),this.url=t,Ap(this,n)}toString(){return Mb(this._root)}};function Ap(e,t){t.value._routerState=e,t.children.forEach(n=>Ap(e,n))}function Mb(e){let t=e.children.length>0?` { ${e.children.map(Mb).join(", ")} } `:"";return`${e.value}${t}`}function tp(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,zt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),zt(t.params,n.params)||e.paramsSubject.next(n.params),zM(t.url,n.url)||e.urlSubject.next(n.url),zt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Dp(e,t){let n=zt(e.params,t.params)&&ZM(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Dp(e.parent,t.parent))}function xb(e){return typeof e.title=="string"||e.title===null}var gx=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=F,this.activateEvents=new Ne,this.deactivateEvents=new Ne,this.attachEvents=new Ne,this.detachEvents=new Ne,this.parentContexts=D(fl),this.location=D(gi),this.changeDetector=D(Ao),this.inputBinder=D(Np,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new Cp(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:d,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=dd({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ua]});let e=t;return e})(),Cp=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Si?this.route:t===fl?this.childContexts:this.parent.get(t,n)}},Np=new j("");function yx(e,t,n){let r=Zo(e,t._root,n?n._root:void 0);return new cl(r,t)}function Zo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=vx(e,t,n);return new Je(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Zo(e,a)),s}}let r=wx(t.value),i=t.children.map(o=>Zo(e,o));return new Je(r,i)}}function vx(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Zo(e,r,i);return Zo(e,r)})}function wx(e){return new Si(new xe(e.url),new xe(e.params),new xe(e.queryParams),new xe(e.fragment),new xe(e.data),e.outlet,e.component,e)}var Qo=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Tb="ngNavigationCancelingError";function pl(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=$o(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=kb(!1,Xe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function kb(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Tb]=!0,n.cancellationCode=t,n}function bx(e){return Ab(e)&&$o(e.url)}function Ab(e){return!!e&&e[Tb]}var _x=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=La({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ga],decls:1,vars:0,template:function(i,o){i&1&&To(0,"router-outlet")},dependencies:[gx],encapsulation:2});let e=t;return e})();function Dx(e,t){return e.providers&&!e._injector&&(e._injector=Vd(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Rp(e){let t=e.children&&e.children.map(Rp),n=t?x(y({},e),{children:t}):y({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==F&&(n.component=_x),n}function Et(e){return e.outlet||F}function Cx(e,t){let n=e.filter(r=>Et(r)===t);return n.push(...e.filter(r=>Et(r)!==t)),n}function Xo(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ix=(e,t,n,r)=>H(i=>(new Ip(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Ip=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),tp(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=bi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=bi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=bi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=bi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vp(o.value.snapshot))}),t.children.length&&this.forwardEvent(new gp(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(tp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tp(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Xo(i.snapshot);s.attachRef=null,s.route=i,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},hl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ci=class{constructor(t,n){this.component=t,this.route=n}};function Ex(e,t,n){let r=e._root,i=t?t._root:null;return Lo(r,i,n,[r.value])}function Sx(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function xi(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Fy(e)?e:t.get(e):r}function Lo(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=bi(t);return e.children.forEach(s=>{Mx(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Uo(a,n.getContext(s),i)),i}function Mx(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=xx(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new hl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Lo(e,t,a?a.children:null,r,i):Lo(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ci(a.outlet.component,s))}else s&&Uo(t,a,i),i.canActivateChecks.push(new hl(r)),o.component?Lo(e,null,a?a.children:null,r,i):Lo(e,null,n,r,i);return i}function xx(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!wr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!wr(e.url,t.url)||!zt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dp(e,t)||!zt(e.queryParams,t.queryParams);case"paramsChange":default:return!Dp(e,t)}}function Uo(e,t,n){let r=bi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Uo(s,t.children.getContext(o),n):Uo(s,null,n):Uo(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ci(t.outlet.component,i)):n.canDeactivateChecks.push(new Ci(null,i)):n.canDeactivateChecks.push(new Ci(null,i))}function es(e){return typeof e=="function"}function Tx(e){return typeof e=="boolean"}function kx(e){return e&&es(e.canLoad)}function Ax(e){return e&&es(e.canActivate)}function Nx(e){return e&&es(e.canActivateChild)}function Rx(e){return e&&es(e.canDeactivate)}function Ox(e){return e&&es(e.canMatch)}function Nb(e){return e instanceof nn||e?.name==="EmptyError"}var tl=Symbol("INITIAL_VALUE");function Mi(){return _t(e=>ua(e.map(t=>t.pipe(rn(1),lu(tl)))).pipe(H(t=>{for(let n of t)if(n!==!0){if(n===tl)return tl;if(n===!1||Px(n))return n}return!0}),bt(t=>t!==tl),rn(1)))}function Px(e){return $o(e)||e instanceof Qo}function Fx(e,t){return Ce(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?O(x(y({},n),{guardsResult:!0})):Lx(s,r,i,e).pipe(Ce(a=>a&&Tx(a)?Vx(r,o,e,t):O(a)),H(a=>x(y({},n),{guardsResult:a})))})}function Lx(e,t,n,r){return De(e).pipe(Ce(i=>$x(i.component,i.route,n,t,r)),jt(i=>i!==!0,!0))}function Vx(e,t,n,r){return De(t).pipe(Yr(i=>Qr(Bx(i.route.parent,r),jx(i.route,r),Hx(e,i.path,n),Ux(e,i.route,n))),jt(i=>i!==!0,!0))}function jx(e,t){return e!==null&&t&&t(new yp(e)),O(!0)}function Bx(e,t){return e!==null&&t&&t(new mp(e)),O(!0)}function Ux(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let i=r.map(o=>da(()=>{let s=Xo(t)??n,a=xi(o,s),c=Ax(a)?a.canActivate(t,e):cn(s,()=>a(t,e));return $n(c).pipe(jt())}));return O(i).pipe(Mi())}function Hx(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Sx(s)).filter(s=>s!==null).map(s=>da(()=>{let a=s.guards.map(c=>{let d=Xo(s.node)??n,p=xi(c,d),h=Nx(p)?p.canActivateChild(r,e):cn(d,()=>p(r,e));return $n(h).pipe(jt())});return O(a).pipe(Mi())}));return O(o).pipe(Mi())}function $x(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return O(!0);let s=o.map(a=>{let c=Xo(t)??i,d=xi(a,c),p=Rx(d)?d.canDeactivate(e,t,n,r):cn(c,()=>d(e,t,n,r));return $n(p).pipe(jt())});return O(s).pipe(Mi())}function zx(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return O(!0);let o=i.map(s=>{let a=xi(s,e),c=kx(a)?a.canLoad(t,n):cn(e,()=>a(t,n));return $n(c)});return O(o).pipe(Mi(),Rb(r))}function Rb(e){return Xc(Te(t=>{if(typeof t!="boolean")throw pl(e,t)}),H(t=>t===!0))}function qx(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return O(!0);let o=i.map(s=>{let a=xi(s,e),c=Ox(a)?a.canMatch(t,n):cn(e,()=>a(t,n));return $n(c)});return O(o).pipe(Mi(),Rb(r))}var Yo=class{constructor(t){this.segmentGroup=t||null}},Ko=class extends Error{constructor(t){super(),this.urlTree=t}};function wi(e){return Zr(new Yo(e))}function Gx(e){return Zr(new A(4e3,!1))}function Wx(e){return Zr(kb(!1,Xe.GuardRejected))}var Ep=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return O(r);if(i.numberOfChildren>1||!i.children[F])return Gx(`${t.redirectTo}`);i=i.children[F]}}applyRedirectCommands(t,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:d,routeConfig:p,url:h,outlet:f,params:g,data:w,title:I}=i,ne=cn(o,()=>a({params:g,data:w,queryParams:c,fragment:d,routeConfig:p,url:h,outlet:f,title:I}));if(ne instanceof Hn)throw new Ko(ne);n=ne}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Ko(s);return s}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Hn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Z(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Sp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zx(e,t,n,r,i){let o=Op(e,t,n);return o.matched?(r=Dx(t,r),qx(r,t,n,i).pipe(H(s=>s===!0?o:y({},Sp)))):O(o)}function Op(e,t,n){if(t.path==="**")return Qx(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?y({},Sp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||$M)(n,e,t);if(!i)return y({},Sp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?y(y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Qx(e){return{matched:!0,parameters:e.length>0?hb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function cb(e,t,n,r){return n.length>0&&Jx(e,n,r)?{segmentGroup:new Z(t,Kx(r,new Z(n,e.children))),slicedSegments:[]}:n.length===0&&Xx(e,n,r)?{segmentGroup:new Z(e.segments,Yx(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Z(e.segments,e.children),slicedSegments:n}}function Yx(e,t,n,r){let i={};for(let o of n)if(ml(e,t,o)&&!r[Et(o)]){let s=new Z([],{});i[Et(o)]=s}return y(y({},r),i)}function Kx(e,t){let n={};n[F]=t;for(let r of e)if(r.path===""&&Et(r)!==F){let i=new Z([],{});n[Et(r)]=i}return n}function Jx(e,t,n){return n.some(r=>ml(e,t,r)&&Et(r)!==F)}function Xx(e,t,n){return n.some(r=>ml(e,t,r))}function ml(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function eT(e,t,n,r){return Et(e)!==r&&(r===F||!ml(t,n,e))?!1:Op(t,e,n).matched}function tT(e,t,n){return t.length===0&&!e.children[n]}var Mp=class{};function nT(e,t,n,r,i,o,s="emptyOnly"){return new xp(e,t,n,r,i,s,o).recognize()}var rT=31,xp=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ep(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new A(4002,`'${t.segmentGroup}'`)}recognize(){let t=cb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(H(({children:n,rootSnapshot:r})=>{let i=new Je(r,n),o=new dl("",i),s=lx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new Di([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),F,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,F,n).pipe(H(r=>({children:r,rootSnapshot:n})),On(r=>{if(r instanceof Ko)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yo?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(H(s=>s instanceof Je?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(Yr(s=>{let a=r.children[s],c=Cx(n,s);return this.processSegmentGroup(t,c,a,s,i)}),au((s,a)=>(s.push(...a),s)),Pn(null),su(),Ce(s=>{if(s===null)return wi(r);let a=Ob(s);return iT(a),O(a)}))}processSegment(t,n,r,i,o,s,a){return De(n).pipe(Yr(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(On(d=>{if(d instanceof Yo)return O(null);throw d}))),jt(c=>!!c),On(c=>{if(Nb(c))return tT(r,i,o)?O(new Mp):wi(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return eT(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):wi(i):wi(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:d,consumedSegments:p,positionalParamSegments:h,remainingSegments:f}=Op(n,i,o);if(!c)return wi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rT&&(this.allowRedirects=!1));let g=new Di(o,d,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,ub(i),Et(i),i.component??i._loadedComponent??null,i,db(i)),w=ul(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(w.params),g.data=Object.freeze(w.data);let I=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,h,g,t);return this.applyRedirects.lineralizeSegments(i,I).pipe(Ce(ne=>this.processSegment(t,r,n,ne.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=Zx(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(_t(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(_t(({routes:d})=>{let p=r._loadedInjector??t,{parameters:h,consumedSegments:f,remainingSegments:g}=c,w=new Di(f,h,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,ub(r),Et(r),r.component??r._loadedComponent??null,r,db(r)),I=ul(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(I.params),w.data=Object.freeze(I.data);let{segmentGroup:ne,slicedSegments:J}=cb(n,f,g,d);if(J.length===0&&ne.hasChildren())return this.processChildren(p,d,ne,w).pipe(H(U=>new Je(w,U)));if(d.length===0&&J.length===0)return O(new Je(w,[]));let Se=Et(r)===o;return this.processSegment(p,d,ne,J,Se?F:o,!0,w).pipe(H(U=>new Je(w,U instanceof Je?[U]:[])))}))):wi(n)))}getChildConfig(t,n,r){return n.children?O({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?O({routes:n._loadedRoutes,injector:n._loadedInjector}):zx(t,n,r,this.urlSerializer).pipe(Ce(i=>i?this.configLoader.loadChildren(t,n).pipe(Te(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Wx(n))):O({routes:[],injector:t})}};function iT(e){e.sort((t,n)=>t.value.outlet===F?-1:n.value.outlet===F?1:t.value.outlet.localeCompare(n.value.outlet))}function oT(e){let t=e.value.routeConfig;return t&&t.path===""}function Ob(e){let t=[],n=new Set;for(let r of e){if(!oT(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Ob(r.children);t.push(new Je(r.value,i))}return t.filter(r=>!n.has(r))}function ub(e){return e.data||{}}function db(e){return e.resolve||{}}function sT(e,t,n,r,i,o){return Ce(s=>nT(e,t,n,r,s.extractedUrl,i,o).pipe(H(({state:a,tree:c})=>x(y({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function aT(e,t){return Ce(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return O(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of Pb(c))s.add(d);let a=0;return De(s).pipe(Yr(c=>o.has(c)?lT(c,r,e,t):(c.data=ul(c,c.parent,e).resolve,O(void 0))),Te(()=>a++),Kr(1),Ce(c=>a===s.size?O(n):Qe))})}function Pb(e){let t=e.children.map(n=>Pb(n)).flat();return[e,...t]}function lT(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!xb(i)&&(o[Jo]=i.title),cT(o,e,t,r).pipe(H(s=>(e._resolvedData=s,e.data=ul(e,e.parent,n).resolve,null)))}function cT(e,t,n,r){let i=ip(e);if(i.length===0)return O({});let o={};return De(i).pipe(Ce(s=>uT(e[s],t,n,r).pipe(jt(),Te(a=>{if(a instanceof Qo)throw pl(new Ho,a);o[s]=a}))),Kr(1),ou(o),On(s=>Nb(s)?Qe:Zr(s)))}function uT(e,t,n,r){let i=Xo(t)??r,o=xi(e,i),s=o.resolve?o.resolve(t,n):cn(i,()=>o(t,n));return $n(s)}function np(e){return _t(t=>{let n=e(t);return n?De(n).pipe(H(()=>t)):O(t)})}var Fb=(()=>{let t=class t{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===F);return i}getResolvedTitleForRoute(r){return r.data[Jo]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>D(dT),providedIn:"root"});let e=t;return e})(),dT=(()=>{let t=class t extends Fb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};t.\u0275fac=function(i){return new(i||t)($(ib))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Pp=new j("",{providedIn:"root",factory:()=>({})}),Fp=new j(""),pT=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(Hd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return O(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=$n(r.loadComponent()).pipe(H(Lb),Te(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),po(()=>{this.componentLoaders.delete(r)})),o=new Wr(i,()=>new Fe).pipe(Gr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return O({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=hT(i,this.compiler,r,this.onLoadEndListener).pipe(po(()=>{this.childrenLoaders.delete(i)})),a=new Wr(s,()=>new Fe).pipe(Gr());return this.childrenLoaders.set(i,a),a}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function hT(e,t,n,r){return $n(e.loadChildren()).pipe(H(Lb),Ce(i=>i instanceof Io||Array.isArray(i)?O(i):De(t.compileModuleAsync(i))),H(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Fp,[],{optional:!0,self:!0}).flat()),{routes:s.map(Rp),injector:o}}))}function fT(e){return e&&typeof e=="object"&&"default"in e}function Lb(e){return fT(e)?e.default:e}var Lp=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>D(mT),providedIn:"root"});let e=t;return e})(),mT=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gT=new j("");var yT=new j(""),vT=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fe,this.transitionAbortSubject=new Fe,this.configLoader=D(pT),this.environmentInjector=D(ut),this.urlSerializer=D(kp),this.rootContexts=D(fl),this.location=D(No),this.inputBindingEnabled=D(Np,{optional:!0})!==null,this.titleStrategy=D(Fb),this.options=D(Pp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(Lp),this.createViewTransition=D(gT,{optional:!0}),this.navigationErrorHandler=D(yT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null;let r=o=>this.events.next(new hp(o)),i=o=>this.events.next(new fp(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(x(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new xe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Bo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bt(s=>s.id!==0),H(s=>x(y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),_t(s=>{let a=!1,c=!1;return O(s).pipe(_t(d=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Xe.SupersededByNewNavigation),Qe;this.currentTransition=s,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?x(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&h!=="reload"){let f="";return this.events.next(new _r(d.id,this.urlSerializer.serialize(d.rawUrl),f,lp.IgnoredSameUrlNavigation)),d.resolve(!1),Qe}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return O(d).pipe(_t(f=>{let g=this.transitions?.getValue();return this.events.next(new qo(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Qe:Promise.resolve(f)}),sT(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=x(y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new al(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:f,extractedUrl:g,source:w,restoredState:I,extras:ne}=d,J=new qo(f,this.urlSerializer.serialize(g),w,I);this.events.next(J);let Se=Sb(this.rootComponentType).snapshot;return this.currentTransition=s=x(y({},d),{targetSnapshot:Se,urlAfterRedirects:g,extras:x(y({},ne),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,O(s)}else{let f="";return this.events.next(new _r(d.id,this.urlSerializer.serialize(d.extractedUrl),f,lp.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Qe}}),Te(d=>{let p=new cp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),H(d=>(this.currentTransition=s=x(y({},d),{guards:Ex(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),s)),Fx(this.environmentInjector,d=>this.events.next(d)),Te(d=>{if(s.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw pl(this.urlSerializer,d.guardsResult);let p=new up(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),bt(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Xe.GuardRejected),!1)),np(d=>{if(d.guards.canActivateChecks.length)return O(d).pipe(Te(p=>{let h=new dp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}),_t(p=>{let h=!1;return O(p).pipe(aT(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(p,"",Xe.NoDataFromResolver)}}))}),Te(p=>{let h=new pp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}))}),np(d=>{let p=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(Te(g=>{h.component=g}),H(()=>{})));for(let g of h.children)f.push(...p(g));return f};return ua(p(d.targetSnapshot.root)).pipe(Pn(null),rn(1))}),np(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:d,targetSnapshot:p}=s,h=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return h?De(h).pipe(H(()=>s)):O(s)}),H(d=>{let p=yx(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=s=x(y({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,s}),Te(()=>{this.events.next(new Wo)}),Ix(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),rn(1),Te({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new br(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),cu(this.transitionAbortSubject.pipe(Te(d=>{throw d}))),po(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Xe.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),On(d=>{if(c=!0,Ab(d))this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),d.message,d.cancellationCode)),bx(d)?this.events.next(new Ei(d.url,d.navigationBehaviorOptions)):s.resolve(!1);else{let p=new Go(s.id,this.urlSerializer.serialize(s.extractedUrl),d,s.targetSnapshot??void 0);try{let h=cn(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(h instanceof Qo){let{message:f,cancellationCode:g}=pl(this.urlSerializer,h);this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Ei(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(p);let f=r.errorHandler(d);s.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Qe}))}))}cancelNavigationTransition(r,i,o){let s=new hn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function wT(e){return e!==Bo}var bT=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>D(_T),providedIn:"root"});let e=t;return e})(),Tp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},_T=(()=>{let t=class t extends Tp{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=_d(t)))(o||t)}})(),t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vb=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:()=>D(DT),providedIn:"root"});let e=t;return e})(),DT=(()=>{let t=class t extends Vb{constructor(){super(...arguments),this.location=D(No),this.urlSerializer=D(kp),this.options=D(Pp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(Lp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof qo)this.stateMemento=this.createStateMemento();else if(r instanceof _r)this.rawUrlTree=i.initialUrl;else if(r instanceof al){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Wo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof hn&&(r.code===Xe.GuardRejected||r.code===Xe.NoDataFromResolver)?this.restoreHistory(i):r instanceof Go?this.restoreHistory(i,!0):r instanceof br&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=_d(t)))(o||t)}})(),t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vo=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Vo||{});function CT(e,t){e.events.pipe(bt(n=>n instanceof br||n instanceof hn||n instanceof Go||n instanceof _r),H(n=>n instanceof br||n instanceof _r?Vo.COMPLETE:(n instanceof hn?n.code===Xe.Redirect||n.code===Xe.SupersededByNewNavigation:!1)?Vo.REDIRECTING:Vo.FAILED),bt(n=>n!==Vo.REDIRECTING),rn(1)).subscribe(()=>{t()})}function IT(e){throw e}var ET={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ST={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jb=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=D(Wa),this.stateManager=D(Vb),this.options=D(Pp,{optional:!0})||{},this.pendingTasks=D(xo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(vT),this.urlSerializer=D(kp),this.location=D(No),this.urlHandlingStrategy=D(Lp),this._events=new Fe,this.errorHandler=this.options.errorHandler||IT,this.navigated=!1,this.routeReuseStrategy=D(bT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(Fp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Np,{optional:!0}),this.eventsSubscription=new ve,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof hn&&i.code!==Xe.Redirect&&i.code!==Xe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof br)this.navigated=!0;else if(i instanceof Ei){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),d=y({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||wT(o.source)},a);this.scheduleNavigation(c,Bo,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}xT(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let d=y({},o);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Rp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=y(y({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=o?o.snapshot:this.routerState.snapshot.root;f=Db(g)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return Cb(f,r,h,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$o(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Bo,null,i)}navigate(r,i={skipLocationChange:!1}){return MT(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=y({},ET):i===!1?o=y({},ST):o=i,$o(r))return ob(this.currentUrlTree,r,o);let s=this.parseUrl(r);return ob(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,d,p;a?(c=a.resolve,d=a.reject,p=a.promise):p=new Promise((f,g)=>{c=f,d=g});let h=this.pendingTasks.add();return CT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(f=>Promise.reject(f))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function MT(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new A(4008,!1)}function xT(e){return!(e instanceof Wo)&&!(e instanceof Ei)}var TT=new j("");function Bb(e,...t){return Va([{provide:Fp,multi:!0,useValue:e},[],{provide:Si,useFactory:kT,deps:[jb]},{provide:Ud,multi:!0,useFactory:AT},t.map(n=>n.\u0275providers)])}function kT(e){return e.routerState.root}function AT(){let e=D(hr);return t=>{let n=e.get(yi);if(t!==n.components[0])return;let r=e.get(jb),i=e.get(NT);e.get(RT)===1&&r.initialNavigation(),e.get(OT,null,L.Optional)?.setUpPreloading(),e.get(TT,null,L.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var NT=new j("",{factory:()=>new Fe}),RT=new j("",{providedIn:"root",factory:()=>1});var OT=new j("");var Ub=[];var Hb={providers:[Rw({eventCoalescing:!0}),Bb(Ub)]};var gl=new WeakMap;function Vp(e){return!e.destroyed&&(gl.has(e)||e.addHandles([E(()=>{let t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||Vp(t))},t=>gl.set(e,t),je),En(()=>gl.delete(e))]),gl.get(e))}function PT(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function $b(e){return!(!PT(e)||!Xf(e)?.operations?.supportsEditing||"editingEnabled"in e&&!em(e)||Vp(e))}var zb={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function qb(e){let t=null;if(typeof e=="string")if(e in zb){let n=zb[e];t=new Br({resourceInfo:{data:{layers:[n]}}})}else M.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ks(Br,e);return t}var St=class extends Bm(jm(rt.EventedMixin(b))){constructor(e){super(e),this.allLayers=new tr({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Vm(this),this.basemap=null,this.editableLayers=new tr({getCollections:()=>[this.allLayers],itemFilterFunction:$b}),this.ground=new Br,this._basemapCache=rm()}destroy(){im(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=ue(this.basemap),ue(this.ground),this._set("ground",null)}castBasemap(e){return om(e,this._basemapCache)}castGround(e){return qb(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([u({readOnly:!0,dependsOn:[]})],St.prototype,"allLayers",void 0),l([u({readOnly:!0})],St.prototype,"allTables",void 0),l([u({type:qm,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],St.prototype,"basemap",void 0),l([We("basemap")],St.prototype,"castBasemap",null),l([u({readOnly:!0})],St.prototype,"editableLayers",void 0),l([u({type:Br,nonNullable:!0})],St.prototype,"ground",void 0),l([We("ground")],St.prototype,"castGround",null),l([u()],St.prototype,"undoRedo",void 0),St=l([m("esri.Map")],St);var yl=St;var zn=class extends S{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([u({type:String,json:{write:!0}})],zn.prototype,"facilityIdField",void 0),l([u({type:String,json:{write:!0}})],zn.prototype,"layerId",void 0),l([u({type:String,json:{write:!0}})],zn.prototype,"nameField",void 0),l([u({type:String,json:{write:!0}})],zn.prototype,"siteIdField",void 0),l([u({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],zn.prototype,"sublayerId",void 0),zn=l([m("esri.layers.support.FacilityLayerInfo")],zn);var Gb=zn;var Mt=class extends S{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([u({type:String,json:{write:!0}})],Mt.prototype,"facilityIdField",void 0),l([u({type:String,json:{write:!0}})],Mt.prototype,"layerId",void 0),l([u({type:String,json:{write:!0}})],Mt.prototype,"levelIdField",void 0),l([u({type:String,json:{write:!0}})],Mt.prototype,"levelNumberField",void 0),l([u({type:String,json:{write:!0}})],Mt.prototype,"longNameField",void 0),l([u({type:String,json:{write:!0}})],Mt.prototype,"shortNameField",void 0),l([u({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Mt.prototype,"sublayerId",void 0),l([u({type:String,json:{write:!0}})],Mt.prototype,"verticalOrderField",void 0),Mt=l([m("esri.layers.support.LevelLayerInfo")],Mt);var Wb=Mt;var Dr=class extends S{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([u({type:String,json:{write:!0}})],Dr.prototype,"layerId",void 0),l([u({type:String,json:{write:!0}})],Dr.prototype,"nameField",void 0),l([u({type:String,json:{write:!0}})],Dr.prototype,"siteIdField",void 0),l([u({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Dr.prototype,"sublayerId",void 0),Dr=l([m("esri.layers.support.SiteLayerInfo")],Dr);var Zb=Dr;var Ti=class extends S{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([u({type:Wb,json:{write:!0}})],Ti.prototype,"levelLayer",void 0),l([u({type:Gb,json:{write:!0}})],Ti.prototype,"facilityLayer",void 0),l([u({type:Zb,json:{write:!0}})],Ti.prototype,"siteLayer",void 0),Ti=l([m("esri.support.MapFloorInfo")],Ti);var Qb=Ti;var ki=class extends ye(S){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};l([u({type:String,json:{write:{isRequired:!0}}})],ki.prototype,"expression",void 0),l([u({type:["number","string"],json:{write:!0}})],ki.prototype,"returnType",void 0),l([u({type:String,json:{write:!0}})],ki.prototype,"title",void 0),ki=l([m("esri.webdoc.geotriggersInfo.ExpressionInfo")],ki);var vl=ki;var wl=new Mn({deviceLocation:"device-location"}),ts=class extends ye(S){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};l([u({type:vl,json:{write:!0}})],ts.prototype,"filterExpression",void 0),l([u({type:wl.apiValues,readOnly:!0,json:{type:wl.jsonValues,read:wl.read,write:wl.write}})],ts.prototype,"type",void 0),ts=l([m("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],ts);var Yb=ts;var ns=class extends ye(S){constructor(e){super(e),this.geometry=null,this.where=null}};l([u({types:Yf,json:{read:Qf,write:!0}})],ns.prototype,"geometry",void 0),l([u({type:String,json:{write:!0}})],ns.prototype,"where",void 0),ns=l([m("esri.webdoc.geotriggersInfo.FeatureFilter")],ns);var Kb=ns;var Ai=class extends ye(S){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([u({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Ai.prototype,"layerId",void 0),l([u({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Ai.prototype,"layerUrl",void 0),l([Ue({featureLayer:"feature-layer"},{readOnly:!0})],Ai.prototype,"type",void 0),Ai=l([m("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Ai);var Jb=Ai;var Cr=class extends ye(S){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([u({type:Jb,json:{write:{isRequired:!0}}})],Cr.prototype,"fenceSource",void 0),l([u({type:Kb,json:{write:!0}})],Cr.prototype,"filter",void 0),l([u({type:Number,json:{write:!0}})],Cr.prototype,"bufferDistance",void 0),l([Ue({features:"features"},{readOnly:!0})],Cr.prototype,"type",void 0),Cr=l([m("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Cr);var Xb=Cr;var bl=class extends ye(S){constructor(e){super(e),this.type="fence"}};l([Ue({fence:"fence"},{readOnly:!0})],bl.prototype,"type",void 0),bl=l([m("esri.webdoc.geotriggersInfo.Geotrigger")],bl);var _l=bl;var rs=class extends ye(S){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};l([u({type:vl,json:{write:!0}})],rs.prototype,"expressionInfo",void 0),l([u({type:[String],json:{write:!0}})],rs.prototype,"requestedActions",void 0),rs=l([m("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],rs);var e_=rs;var t_=new Mn({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),n_=new Mn({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),is=new Mn({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});var xt=class extends _l{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([Ue(t_)],xt.prototype,"enterExitRule",void 0),l([u({type:Yb,json:{write:{isRequired:!0}}})],xt.prototype,"feed",void 0),l([Ue(n_)],xt.prototype,"feedAccuracyMode",void 0),l([u({type:is.apiValues,json:{type:is.jsonValues,read:is.read,write:{writer:is.write,isRequired:!0}}})],xt.prototype,"fenceNotificationRule",void 0),l([u({type:Xb,json:{write:{isRequired:!0}}})],xt.prototype,"fenceParameters",void 0),l([u({type:String,json:{write:!0}})],xt.prototype,"name",void 0),l([u({type:e_,json:{write:!0}})],xt.prototype,"notificationOptions",void 0),l([Ue({fence:"fence"},{readOnly:!0})],xt.prototype,"type",void 0),xt=l([m("esri.webdoc.geotriggersInfo.FenceGeotrigger")],xt);var r_=xt;var i_={base:_l,key:"type",typeMap:{fence:r_}};var Dl=class extends ye(S){constructor(e){super(e),this.geotriggers=null}};l([u({types:[i_],json:{write:{isRequired:!0}}})],Dl.prototype,"geotriggers",void 0),Dl=l([m("esri.webdoc.GeotriggersInfo")],Dl);var o_=Dl;var jp,Ni=jp=class extends S{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new jp(ce({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([u({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Ni.prototype,"activeRange",void 0),l([u({type:[Number],json:{write:!0}})],Ni.prototype,"currentRangeExtent",void 0),l([u({type:[Number],json:{write:!0}})],Ni.prototype,"fullRangeExtent",void 0),Ni=jp=l([m("esri.webdoc.RangeInfo")],Ni);var os=Ni;var Bp,qt=Bp=class extends S{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Bp(ce({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([u({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],qt.prototype,"enabled",void 0),l([u({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],qt.prototype,"longNames",void 0),l([u({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],qt.prototype,"minimized",void 0),l([u({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],qt.prototype,"pinnedLevels",void 0),l([u({type:String,json:{read:{source:"site"},write:{target:"site"}}})],qt.prototype,"site",void 0),l([u({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],qt.prototype,"facility",void 0),l([u({type:String,json:{read:{source:"level"},write:{target:"level"}}})],qt.prototype,"level",void 0),qt=Bp=l([m("esri.webdoc.widgets.FloorFilter")],qt);var s_=qt;var Up,Cl=new Mn({slider:"slider",picker:"picker"}),Ri=Up=class extends S{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Up({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([u({type:Cl.apiValues,nonNullable:!0,json:{type:Cl.jsonValues,default:null,read:{reader:Cl.read},write:{isRequired:!0,writer:Cl.write}}})],Ri.prototype,"interactionMode",void 0),l([u({type:Kt,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){let e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],Ri.prototype,"numStops",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Ri.prototype,"stopInterval",void 0),Ri=Up=l([m("esri.webdoc.widgets.Range")],Ri);var a_=Ri;var Hp,Ie=Hp=class extends S{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;let t=e[0]!=null?new Date(e[0]):null,n=e[1]!=null?new Date(e[1]):null;return new en({start:t,end:n})}writeCurrentTimeExtent(e,t,n){e&&Es(n,[e.start!=null?e.start.getTime():null,e.end!=null?e.end.getTime():null],t)}readFullTimeExtent(e,t){let n=t.properties;if(!n)return;let r=n.endTime!=null?new Date(n.endTime):null,i=n.startTime!=null?new Date(n.startTime):null;return new en({start:i,end:r})}writeFullTimeExtent(e,t){if(!e)return;let n=t.properties=t.properties||{},r=e.end,i=e.start;r&&(n.endTime=r!=null?r.getTime():null),i&&(n.startTime=i!=null?i.getTime():null)}readStopInterval(e,t,n){return e?Pc.fromJSON({value:e.interval,unit:e.units},n):null}writeStopInterval(e,t,n,r){if(!e)return;let i=e.toJSON(r);Es("properties.timeStopInterval",{interval:i.value,units:i.unit},t)}readStops(e){return e?.length?e.map(t=>new Date(t)):null}writeStops(e,t,n){e?.length&&Es(n,e.map(r=>r.getTime()),t)}clone(){return new Hp(ce({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([u({type:en,json:{type:[[Kt,vf]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ie.prototype,"currentTimeExtent",void 0),l([st("currentTimeExtent")],Ie.prototype,"readCurrentTimeExtent",null),l([Ae("currentTimeExtent")],Ie.prototype,"writeCurrentTimeExtent",null),l([u({type:en,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ie.prototype,"fullTimeExtent",void 0),l([st("fullTimeExtent")],Ie.prototype,"readFullTimeExtent",null),l([Ae("fullTimeExtent")],Ie.prototype,"writeFullTimeExtent",null),l([u({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ie.prototype,"loop",void 0),l([u({type:Kt,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){let e=!!this.stopInterval,t=!!this.stops?.length,n=!(e||t);return{enabled:n,isRequired:n}}}}})],Ie.prototype,"numStops",void 0),l([u({type:[1,2],nonNullable:!0,json:{type:Kt,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ie.prototype,"numThumbs",void 0),l([u({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ie.prototype,"stopDelay",void 0),l([u({type:Pc,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:Nm.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){let e=this.numStops!=null,t=!!this.stops?.length;return{enabled:!t,isRequired:!(e||t)}}}}})],Ie.prototype,"stopInterval",void 0),l([st("stopInterval")],Ie.prototype,"readStopInterval",null),l([Ae("stopInterval")],Ie.prototype,"writeStopInterval",null),l([u({type:[Date],json:{type:[Kt],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Ie.prototype,"stops",void 0),l([st("stops")],Ie.prototype,"readStops",null),l([Ae("stops")],Ie.prototype,"writeStops",null),Ie=Hp=l([m("esri.webdoc.widgets.TimeSlider")],Ie);var l_=Ie;var $p,Oi=$p=class extends S{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new $p(ce({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([u({type:a_,json:{write:!0}})],Oi.prototype,"range",void 0),l([u({type:l_,json:{write:!0}})],Oi.prototype,"timeSlider",void 0),l([u({type:s_,json:{write:!0}})],Oi.prototype,"floorFilter",void 0),Oi=$p=l([m("esri.webdoc.Widgets")],Oi);var c_=Oi;var FT={width:600,height:400},Il=1.5;function u_(e,t){t=t||FT;let{width:n,height:r}=t,i=n/r;return i<Il?r=n/Il:i>Il&&(n=r*Il),n>e.width&&(r*=e.width/n,n=e.width),r>e.height&&(n*=e.height/r,r=e.height),{width:Math.round(n),height:Math.round(r)}}function d_(e,t){return t.resourceInfo?p_(t,t.resourceInfo,{origin:e.origin}):t.portalItem?.id?LT(e,t,t.portalItem):Promise.resolve()}function p_(e,t,n){let r={context:x(y({},n),{layerContainerType:"operational-layers"})};return e.portalItem&&(r.context.portal=e.portalItem.portal||zm.getDefault()),import("./chunk-VQXZCW2V.js").then(({populateOperationalLayers:i})=>{let o=[],s=t.operationalLayers;s?.length&&o.push(i(e.layers,s,r));let a=x(y({},r),{context:x(y({},r.context),{layerContainerType:"tables"}),defaultLayerType:"ArcGISFeatureLayer"}),c=t.tables;return c?.length&&o.push(i(e.tables,c,a)),Promise.allSettled(o).then(()=>{})})}function LT(e,t,n){return _(this,null,function*(){if(yield n.load().catch(s=>{throw new k(`${e.name}:load-portal-item`,"Failed to load portal item",{error:s})}),n.type!==e.itemType)throw new k(`${e.name}:invalid-portal-item`,`Invalid portal item type '${n.type}', expected '${e.itemType}'`,{type:n.type});let r=yield n.fetchData();t.resourceInfo=r;let i=Am(n,e.origin);yield VT(e,t,r,i),t.resourceReferences={portalItem:n,paths:i.readResourcePaths};let o=yield BT(t.initialViewProperties,n,M.getLogger(t));if(o){let s=t.initialViewProperties?.clone()??e.createInitialViewProperties();s.viewpoint=o,t.initialViewProperties=s}})}function VT(e,t,n,r){let i=jT(e,n);return t.read(i,r),p_(t,i,r)}function jT(e,t){let n=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(n),t.version=`${n.major}.${n.minor}`,t}function BT(e,t,n){return _(this,null,function*(){if(e?.viewpoint?.targetGeometry)return null;let i=yield UT(e,t,n);return i?new oe({targetGeometry:i}):null})}function UT(e,t,n){return _(this,null,function*(){let r=e?.spatialReference,i=t?.extent;if(!r||!i)return null;if(r.isWGS84)return i.clone();if(r.isWebMercator)return Ps(i);let{getGeometryServiceURL:o}=yield import("./chunk-625T7G5Y.js");try{let s=yield o(t),a=new Fm({geometries:[i],outSpatialReference:r});return(yield Lm(s,a))[0]}catch(s){n.error("Error projecting item's extent:",s)}return null})}function zp(e){return{enabled:!!e?.length}}var qp,Pi=qp=class extends S{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new qp({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([u({type:Boolean,json:{write:!0}})],Pi.prototype,"exactMatch",void 0),l([u({type:String,json:{write:!0}})],Pi.prototype,"name",void 0),l([Ue(Vs)],Pi.prototype,"type",void 0),Pi=qp=l([m("esri.webdoc.applicationProperties.SearchLayerField")],Pi);var h_=Pi;var Gp,Fi=Gp=class extends S{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new Gp(ce({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([u({type:h_,json:{write:{isRequired:!0}}})],Fi.prototype,"field",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Fi.prototype,"id",void 0),l([u({type:Kt,json:{write:!0}})],Fi.prototype,"subLayer",void 0),Fi=Gp=l([m("esri.webdoc.applicationProperties.SearchLayer")],Fi);var f_=Fi;var Wp,Li=Wp=class extends S{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Wp({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([u({type:Boolean,json:{write:!0}})],Li.prototype,"exactMatch",void 0),l([u({type:String,json:{write:!0}})],Li.prototype,"name",void 0),l([Ue(Vs)],Li.prototype,"type",void 0),Li=Wp=l([m("esri.webdoc.applicationProperties.SearchTableField")],Li);var m_=Li;var Zp,ss=Zp=class extends S{constructor(e){super(e),this.field=null,this.id=null}clone(){return new Zp(ce({field:this.field,id:this.id}))}};l([u({type:m_,json:{write:{isRequired:!0}}})],ss.prototype,"field",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],ss.prototype,"id",void 0),ss=Zp=l([m("esri.webdoc.applicationProperties.SearchTable")],ss);var g_=ss;var Qp,y_=B.ofType(f_),v_=B.ofType(g_),Gt=Qp=class extends S{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new y_,this.tables=new v_}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,n){t[n]=!e}clone(){return new Qp(ce({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([u({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Gt.prototype,"addressSearchEnabled",void 0),l([st("addressSearchEnabled")],Gt.prototype,"readAddressSearchEnabled",null),l([Ae("addressSearchEnabled")],Gt.prototype,"writeAddressSearchEnabled",null),l([u({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Gt.prototype,"enabled",void 0),l([u({type:String,json:{write:!0}})],Gt.prototype,"hintText",void 0),l([u({type:y_,json:{write:{overridePolicy:zp},origins:{"web-scene":{write:{isRequired:!0}}}}})],Gt.prototype,"layers",void 0),l([u({type:v_,json:{read:!0,write:{overridePolicy:zp}}})],Gt.prototype,"tables",void 0),Gt=Qp=l([m("esri.webdoc.applicationProperties.Search")],Gt);var w_=Gt;var Yp,El=Yp=class extends S{constructor(e){super(e),this.search=null}clone(){return new Yp(ce({search:this.search}))}};l([u({type:w_,json:{write:!0}})],El.prototype,"search",void 0),El=Yp=l([m("esri.webdoc.applicationProperties.Viewing")],El);var b_=El;var Kp,Vi=Kp=class extends S{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Kp(ce({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([u({json:{write:!0}})],Vi.prototype,"editing",void 0),l([u({json:{write:!0}})],Vi.prototype,"offline",void 0),l([u({type:b_,json:{write:!0}})],Vi.prototype,"viewing",void 0),Vi=Kp=l([m("esri.webmap.ApplicationProperties")],Vi);var __=Vi;var D_="https://.*";function C_(e){return!!e&&/^https:\/\/.*/i.test(e)}function I_(e){return!!e&&/data:([-\w]+\/[-+\w.]+)?(;?\w+=[-\w]+)*(;base64)?,.*/gu.test(e)}var Jp,Oe=Jp=class extends S{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return C_(this.url)}get isDataURI(){return I_(this.url)}clone(){return new Jp({url:this.url})}};l([u({type:String,json:{write:{isRequired:!0}}})],Oe.prototype,"url",void 0),l([u()],Oe.prototype,"isSecureUrl",null),l([u()],Oe.prototype,"isDataURI",null),Oe=Jp=l([m("esri.webdoc.support.SlideThumbnail")],Oe);var Xp,Wt=Xp=class extends Ls(S){constructor(e){super(e),this.name=null,this.thumbnail=new Oe,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Oe({url:e}):ks(Oe,e)}set viewpoint(e){let{targetGeometry:t,scale:n}=e;t!=null&&t.type==="point"&&n==null&&M.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){let{extent:n,viewpoint:r}=t;return oe.fromJSON(r||{targetGeometry:n})}writeViewpoint(e,t,n,r){if(!e)return;let{targetGeometry:i}=e;if(i==null||i.type==="extent")i!=null&&(t.extent=i.toJSON()),t[n]=e.toJSON();else{let o="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r?.messages?r.messages.push(new k("property:unsupported",o)):M.getLogger(this).error(o)}}clone(){return new Xp(ce({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([u({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Wt.prototype,"name",void 0),l([u({type:Oe,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],Wt.prototype,"thumbnail",void 0),l([We("thumbnail")],Wt.prototype,"castThumbnail",null),l([u({type:en,json:{write:!0}})],Wt.prototype,"timeExtent",void 0),l([u({type:oe,nonNullable:!0,json:{write:!0}})],Wt.prototype,"viewpoint",null),l([st("viewpoint",["extent","viewpoint"])],Wt.prototype,"readViewpoint",null),l([Ae("viewpoint")],Wt.prototype,"writeViewpoint",null),Wt=Xp=l([m("esri.webmap.Bookmark")],Wt);var as=Wt;var eh,Sl=eh=class extends S{constructor(e){super(e),this.color=new Nn([0,0,0,1])}clone(){return new eh(ce({color:this.color}))}};l([u({type:Nn,json:{write:!0}})],Sl.prototype,"color",void 0),Sl=eh=l([m("esri.webmap.background.ColorBackground")],Sl);var Ir=Sl;var qn=class extends ye(b){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeZone=xn,this.viewpoint=null}};l([u({type:Ir})],qn.prototype,"background",void 0),l([u({type:os})],qn.prototype,"rangeInfo",void 0),l([u({type:Xt})],qn.prototype,"spatialReference",void 0),l([u({nonNullable:!0})],qn.prototype,"timeZone",void 0),l([u({type:oe})],qn.prototype,"viewpoint",void 0),qn=l([m("esri.webmap.InitialViewProperties")],qn);var ls=qn;var fn=class extends Tm{constructor(t,n){super(t,n,"webmap")}};var cs=new fn(2,31),HT="Web Map",$T="webmap",nh="web-map",E_=B.ofType(as),zT=B.ofType(Gm),qT=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),GT="ArcGIS Pro",WT=km.JSAPI,th={currentVersion:cs,createInitialViewProperties:()=>new ls,parseVersion:fn.parse,itemType:HT,name:$T,origin:nh},W=class extends Bf(io.LoadableMixin(Rs(yl))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new E_,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new ls,this.ipsInfo=null,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this._debouncedSaveOperations=pf((t,n,r)=>_(this,null,function*(){let{save:i,saveAs:o}=yield import("./chunk-R7IO3BZS.js");switch(t){case lo.SAVE:return i(th,this,n);case lo.SAVE_AS:return o(th,this,r,n)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){if(this.portalItem=ue(this.portalItem),this.utilityNetworks){let e=this.utilityNetworks.removeAll();for(let t of e)t.destroy();this.utilityNetworks.destroy()}}initialize(){if(this.when().catch(e=>{M.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=WT}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=Cf}readInitialViewProperties(e,t){let n=new ls;t.background&&(n.background=Ir.fromJSON(t.background));let r=t.initialState?.viewpoint;return r&&(r.rotation&&fn.parse(t.version||"","webmap").lessThan(2,20)&&t.authoringApp===GT&&(r.rotation*=-1),n.viewpoint=oe.fromJSON(r)),t.mapRangeInfo&&(n.rangeInfo=os.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=Xt.fromJSON(t.spatialReference)),t.timeZone&&(n.timeZone=t.timeZone),n}writeInitialViewProperties(e,t,n,r){e&&(e.background?.color&&(t.background=e.background.write({},r)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},r)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(r)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},r)),t.timeZone=e.timeZone)}writeLayers(e,t,n,r){t[n]=this._writeLayers(e,r,"operational-layers")}readSourceVersion(e,t){let[n,r]=t.version.split(".");return new fn(parseInt(n,10),parseInt(r,10))}writeSourceVersion(e,t,n){t[n]=`${cs.major}.${cs.minor}`}writeTables(e,t,n,r){let i=this._writeLayers(e,r,"tables");i.length&&(t[n]=i)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(d_(th,this)),Promise.resolve(this)}loadAll(){return Rf(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,t){t=x(y({},t),{origin:nh});let n=this._getAuthoringPropsState();wf(this,e,r=>super.read(e,r),t),this._restoreAuthoringPropsFromState(n)}write(e,t){if(this.loadStatus!=="loaded"){let n=new k("webmap:not-loaded","Web map must be loaded before it can be serialized");throw M.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),n}return this._removeDanglingLayerRefs(),t=x(y({},t),{origin:nh,restrictedWebMapWriting:!0,webmap:this}),super.write(e,t)}save(e){return _(this,null,function*(){return this._debouncedSaveOperations(lo.SAVE,e)})}saveAs(e,t){return _(this,null,function*(){return this._debouncedSaveOperations(lo.SAVE_AS,t,e)})}updateFrom(e,t){return _(this,null,function*(){let n=this._updateFromInternal(e,t);this._updateFromPromise=n,yield n,n===this._updateFromPromise&&(this._updateFromPromise=null)})}getLayerJSONFromResourceInfo(e){let t=this.resourceInfo;return this._collectAllLayersJSON([...t?.baseMap?.baseMapLayers||[],...t?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(n=>n.id===e.id)}updateItemThumbnail(){return _(this,null,function*(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(yield this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())})}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Df(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((t,n)=>(t.push(n),n.layerType==="GroupLayer"&&(t=t.concat(this._collectAllLayersJSON(n.layers||[]))),t),[])}_writeLayers(e,t,n){return t=x(y({},t),{layerContainerType:n}),e.map(r=>Um(r,n==="tables"?null:this.getLayerJSONFromResourceInfo(r),t)).filter(yt).toArray()}_validateJSON(e){let t=fn.parse(e.version||"","webmap");return cs.validate(t),e.version=`${t.major}.${t.minor}`,e}_removeDanglingLayerRefs(){let e=this.applicationProperties,t=e?.viewing?.search,n=i=>this.allLayers.some(o=>o.id===i);if(t?.layers&&(t.layers=t.layers.filter(i=>n(i.id))),t?.tables&&(t.tables=t.tables.filter(i=>this.tables.some(o=>o.id===i.id))),e){let i=e.editing?.locationTracking;i?.info&&!n(i.info.layerId)&&(e.editing=null)}let r=this.presentation?.slides;r&&r.forEach(i=>{i.visibleLayers&&(i.visibleLayers=i.visibleLayers.filter(o=>n(o.id)))})}_updateFromInternal(e,t){return _(this,null,function*(){if(t??={},yield Tn(()=>e.ready),this._updateInitialViewProperties(e,t),e.map===this)for(let n of e.allLayerViews)"visible"in n&&"visible"in n.layer&&n._isOverridden("visible")&&(n.layer.visible=n.visible),"featureEffect"in n&&"featureEffect"in n.layer&&n._isOverridden("featureEffect")&&(n.layer.featureEffect=n.featureEffect);yield this._updateThumbnailUrl(e,t)})}_updateInitialViewProperties(e,t){if(t.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,t.viewpointExcluded||(this.initialViewProperties.viewpoint=new oe({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(let n of e.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(e){let t=e.center.clone().normalize(),n=e.extent.clone(),r=n.width/2;return n.xmin=t.x-r,n.xmax=t.x+r,n}_updateThumbnailUrl(e,t){return _(this,null,function*(){if(t.thumbnailExcluded)return;let n=u_(e,t.thumbnailSize),r=yield e.takeScreenshot({format:"png",width:n.width,height:n.height});this._setAutoGeneratedThumbnail(r.dataUrl)})}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(bf(e)){let t=_f(e),n=t?.mediaType,r=n&&qT.get(n.toLowerCase())||null,i=`thumbnail${Date.now()}`;return r?`${i}.${r}`:i}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){let t=e;if(!t)throw new k("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};W.VERSION=cs,l([u()],W.prototype,"_updateFromPromise",void 0),l([u({type:__,json:{write:!0}})],W.prototype,"applicationProperties",void 0),l([u({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],W.prototype,"authoringApp",null),l([Ae("authoringApp")],W.prototype,"writeAuthoringApp",null),l([u({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],W.prototype,"authoringAppVersion",null),l([Ae("authoringAppVersion")],W.prototype,"writeAuthoringAppVersion",null),l([u({type:E_,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],W.prototype,"bookmarks",void 0),l([u({type:Qb,json:{name:"mapFloorInfo",write:!0}})],W.prototype,"floorInfo",void 0),l([u({type:o_,json:{write:!0}})],W.prototype,"geotriggersInfo",void 0),l([u({type:ls,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:Ir},"initialState.viewpoint":{type:oe},mapRangeInfo:{type:os},spatialReference:{type:Xt},"timeZone:":{type:String}}}}})],W.prototype,"initialViewProperties",void 0),l([st("initialViewProperties")],W.prototype,"readInitialViewProperties",null),l([Ae("initialViewProperties")],W.prototype,"writeInitialViewProperties",null),l([u({json:{write:!0,name:"mapIPSInfo"}})],W.prototype,"ipsInfo",void 0),l([u({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],W.prototype,"layers",void 0),l([Ae("layers")],W.prototype,"writeLayers",null),l([u({type:jf})],W.prototype,"portalItem",void 0),l([u({json:{write:!0}})],W.prototype,"presentation",void 0),l([u()],W.prototype,"resourceInfo",void 0),l([u({readOnly:!0,type:fn,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],W.prototype,"sourceVersion",void 0),l([st("sourceVersion")],W.prototype,"readSourceVersion",null),l([Ae("sourceVersion")],W.prototype,"writeSourceVersion",null),l([u({json:{read:!1,write:{ignoreOrigin:!0}}})],W.prototype,"tables",void 0),l([Ae("tables")],W.prototype,"writeTables",null),l([u()],W.prototype,"thumbnailUrl",null),l([u()],W.prototype,"updatingFromView",null),l([u({type:c_,json:{write:!0}})],W.prototype,"widgets",void 0),l([u({type:zT,json:{read:!0,write:!0}})],W.prototype,"utilityNetworks",void 0),W=l([m("esri.WebMap")],W);var S_=W;var Ml={widthBreakpoint:{getValue(e){let t=e.viewSize[0],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){let t=e.viewSize[1],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){let t=e.viewSize,n=t[0],r=t[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},rh={xsmall:544,small:768,medium:992,large:1200};function ZT(e){let t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function ih(e,t){return t?Ml[e].valueToClassName[t].split(" "):[]}var M_=e=>{let t=class extends e{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=rh}initialize(){this.addHandles(E(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ae))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n!==this._get("breakpoints")){if(!ZT(n)){let r=JSON.stringify(rh,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),n=rh}this._set("breakpoints",y({},n))}}_updateClassNames(){if(!this.container)return;let n=ro.acquire(),r=ro.acquire(),i,o=!1;for(i in Ml){let s=this[i],a=Ml[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});s!==a&&(o=!0,this[i]=a,ih(i,s).forEach(c=>r.push(c)),ih(i,a).forEach(c=>n.push(c)))}o&&(this._applyClassNameChanges(n,r),ro.release(n),ro.release(r))}_applyClassNameChanges(n,r){let i=this.container;i&&(r.forEach(o=>i.classList.remove(o)),n.forEach(o=>i.classList.add(o)))}_removeActiveClassNames(){let n=this.container;if(!n)return;let r;for(r in Ml)ih(r,this[r]).forEach(i=>n.classList.remove(i))}};return l([u()],t.prototype,"breakpoints",null),l([u()],t.prototype,"orientation",void 0),l([u()],t.prototype,"widthBreakpoint",void 0),l([u()],t.prototype,"heightBreakpoint",void 0),t=l([m("esri.views.BreakpointsOwner")],t),t};var Gn=class extends b{constructor(){super(...arguments),this.items=new B,this._watchUpdatingTracking=new An,this._callbacks=new Map,this._projector=Tc(),this._hiddenProjector=Tc()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(let n of t.added){let r=()=>n.render();this._callbacks.set(n,r),this._projector.append(this.surface,r)}for(let n of t.removed){let r=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(r.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){let t=this._hiddenSurface,n=this._hiddenProjector,r,i=()=>(r=e.render(),r);n.append(t,i),n.renderNow();let o={left:0,top:0,right:0,bottom:0};if(r?.domNode){let s=r.domNode.getBoundingClientRect();o.left=s.left,o.top=s.top,o.right=s.right,o.bottom=s.bottom}for(n.detach(i);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){let n=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}prepare(){return _(this,null,function*(){yield document.fonts.load(this._fontString()).catch(()=>{})})}renderCanvas(e,t){let n=!!t?.disableDecorations;if(!this.items.some(i=>i.visible&&!(n&&i.isDecoration)))return;let r=e.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach(i=>{n&&i.isDecoration||(r.save(),i.renderCanvas(r),r.restore())}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([u({readOnly:!0})],Gn.prototype,"surface",void 0),l([u({readOnly:!0})],Gn.prototype,"items",void 0),l([u({readOnly:!0})],Gn.prototype,"needsRender",null),l([u({readOnly:!0})],Gn.prototype,"_watchUpdatingTracking",void 0),l([u({readOnly:!0})],Gn.prototype,"updating",null),Gn=l([m("esri.views.overlay.ViewOverlay")],Gn);var oh=Gn;var sh=[0,0];function QT(e){let t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return sh[0]=n.left+(t?.pageXOffset??0),sh[1]=n.top+(t?.pageYOffset??0),sh}function x_(e){e&&(Ns(e),e.parentNode&&e.parentNode.removeChild(e))}function YT(e){let t=document.createElement("div");return e.appendChild(t),t}var us=16,xl=750,KT=512,JT=2,T_=e=>{let t=class extends e{constructor(...n){super(...n),this._freqInfo={freq:us,time:xl},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([E(()=>this.cursor,r=>{let{surface:i}=this;i&&i.setAttribute("data-cursor",r)}),E(()=>this.navigating,r=>{let{surface:i}=this;i&&i.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([E(()=>this.ui,(n,r)=>this._handleUIChange(n,r),ae),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=ue(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(n){let r=this._get("container"),i=As(n);if(i||typeof n!="string"||M.getLogger(this).error("#container",`element with id '${n}' not found`),r===i)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(x_(this.root),this._set("root",null)),this.userContent&&(xc(this.userContent,r),x_(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");let o=document.createElement("div");o.className="esri-view-user-storage",xc(i,o),i.appendChild(o),this._set("userContent",o);let s=document.createElement("div");s.className="esri-view-root",i.insertBefore(s,i.firstChild),this._set("root",s);let a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,s.appendChild(a),this._set("surface",a);let c=new oh;s.appendChild(c.surface),this._set("overlay",c),this.addHandles(E(()=>c.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=vt({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=_e(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){let n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(n,r,i){let o=this.position;return n-=o?o[0]:0,r-=o?o[1]:0,i?(i[0]=n,i[1]=r):i=[n,r],i}containerToPage(n,r,i){let o=this.position;return n+=o?o[0]:0,r+=o?o[1]:0,i?(i[0]=n,i[1]=r):i=[n,r],i}_handleUIChange(n,r){this.removeHandles("ui"),r&&r!==n&&r.destroy(),n&&(n.view=this,this.addHandles(E(()=>this.root,i=>{n.container=i?YT(i):null},ae),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){let n=this._freqInfo;n.freq=us,n.time=xl,this.addHandles([of(window,"resize",()=>{n.freq=us,n.time=xl}),vt({prepare:r=>{let i=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,i&&(o.freq=us,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;let s=this._position();o.freq=s||i?us:Math.min(xl,o.freq*JT),!i&&o.freq>=KT&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){let n=this.container,r=n?n.clientWidth:0,i=n?n.clientHeight:0;if(r===0||i===0)return this.suspended||this._set("suspended",!0),!1;let o=this.width,s=this.height;return r===o&&i===s?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:s,width:r,height:i}),!0)}_position(){let n=this.container,r=this.position,i=n&&QT(n);return!!i&&(!r||i[0]!==r[0]||i[1]!==r[1])&&(this._set("position",[i[0],i[1]]),!0)}forceDOMReadyCycle(){}};return l([u()],t.prototype,"container",null),l([u({readOnly:!0})],t.prototype,"focused",null),l([u({readOnly:!0})],t.prototype,"height",void 0),l([u()],t.prototype,"messagesCommon",void 0),l([u({type:oh})],t.prototype,"overlay",void 0),l([u({readOnly:!0})],t.prototype,"position",void 0),l([u({readOnly:!0})],t.prototype,"resizing",void 0),l([u({readOnly:!0})],t.prototype,"root",void 0),l([u({value:null,readOnly:!0})],t.prototype,"size",null),l([u({readOnly:!0})],t.prototype,"surface",void 0),l([u({readOnly:!0})],t.prototype,"suspended",void 0),l([u()],t.prototype,"ui",void 0),l([u({readOnly:!0})],t.prototype,"userContent",void 0),l([u({readOnly:!0})],t.prototype,"width",void 0),l([u()],t.prototype,"widthBreakpoint",void 0),t=l([m("esri.views.DOMContainer")],t),t};function mn(e){return e!=null&&"open"in e&&"declaredClass"in e}function k_(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}var A_=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([E(()=>[this.ui,this.popup],([n,r],i)=>{let o="popup",s="manual";if(i){let[a,c]=i;a&&mn(c)&&(c.view=null,k_(c)&&a.remove(c,o))}n&&mn(r)&&(r.view=this,k_(r)&&n.add(r,{key:o,position:s,internal:!0}))},ae),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&(mn(this.popup)?this.popup.viewModel.handleViewClick(n):n.async(()=>_(this,null,function*(){yield this.setupPopup(),mn(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(n)})))},tn.WIDGET)]),Tn(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{import("./chunk-XN7GSU7P.js")})}destroy(){this.destroyed||this.closePopup()}openPopup(n){return _(this,null,function*(){if(mn(this.popup))return this.popup.open(n);try{if(yield this.setupPopup(),!this.popup)return void M.getLogger(this).error(new k("view:null-popup","Popup is null and can't be opened"));this.popup.open(n)}catch{}})}closePopup(){this._popupSetupTask?.abort(),mn(this.popup)&&this.popup.close()}fetchPopupFeatures(n,r){return _(this,null,function*(){return yield this.when(),this._popupHitsToFeatures(yield this._getPopupHits(n,r),r)})}setupPopup(){return _(this,null,function*(){if(this._popupSetupTask?.abort(),this.popup&&!mn(this.popup))return this._popupSetupTask=Pr(n=>_(this,null,function*(){let{default:r}=yield import("./chunk-XN7GSU7P.js");if(nt(n),!this.popup||mn(this.popup))return;let i=this.popup;delete i.open,delete i.close,this.popup=new r(i)})),this._popupSetupTask.promise})}_popupHitsToFeatures(o,s){return _(this,arguments,function*({location:n,hits:r},i){let a=[],c=[],d=!1,p=uf(i,fe("popup-view-fetch-timeout")??XT),h=w=>{let I=new ah(w);return c.push(I),a.push(I.promise),I},f=w=>{let I=c.at(-1);return I&&I.layerView===w&&!d?I:h(w)};for(let w of r)"graphic"in w?(f(w.layerView).graphics.push(w.graphic),d=!1):(a.push(w.layerView.fetchPopupFeaturesAtLocation(w.mapPoint,p)),d=!0);c.map(w=>w.resolve(p));let g=lf(a).then(w=>w.filter(I=>!!I).flat());return{pendingFeatures:a,allGraphicsPromise:g,location:n}})}_getPopupHits(n,r){return _(this,null,function*(){let{hits:i,location:o}=yield this.popupHitTest(n);nt(r);let s=[];for(let a of i)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){let c=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;s.push({graphic:a.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(a.layerView)&&s.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:s,location:o}})}_isValidPopupGraphic(n,r){return n&&!!n.getEffectivePopupTemplate(r?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(n){return!n||(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesFromGraphics"in n}_isValidPopupLocationLayerView(n){return(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesAtLocation"in n}};return l([u({cast(n){return!n||mn(n)||typeof n=="object"&&(n.open=r=>(bc(M.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),n.close=()=>(bc(M.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),n}})],t.prototype,"popup",void 0),l([u()],t.prototype,"popupEnabled",void 0),t=l([m("esri.views.PopupView")],t),t},ah=class{constructor(t){this.layerView=t,this._resolver=Xn(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){let{layerView:n,graphics:r,_resolver:i}=this;if(!n)return i.resolve(r),i.promise;let o;return n.fetchPopupFeaturesFromGraphics(r,t).catch(s=>(o=s,null)).then(s=>{s?i.resolve(s):i.reject(o)}),i.promise}},XT=5e3;var ds=class extends Hm{constructor(e){super(e),this.addHandles(this.on("before-add",t=>{t.item!=null&&t.item.parent===this.owner&&(M.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};ds=l([m("esri.support.AnalysesCollection")],ds);var gn=class extends b{constructor(e){super(e),this.view=null,this.baseLayerViews=new B,this.referenceLayerViews=new B,this._loadingHandle=E(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},ae)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(let e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(let e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;let e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};l([u({constructOnly:!0})],gn.prototype,"view",void 0),l([u({readOnly:!0})],gn.prototype,"baseLayerViews",void 0),l([u({readOnly:!0})],gn.prototype,"referenceLayerViews",void 0),l([u({readOnly:!0})],gn.prototype,"suspended",null),l([u({type:Boolean,readOnly:!0})],gn.prototype,"updating",null),gn=l([m("esri.views.BasemapView")],gn);function ek(e){return"tryRecycleWith"in e}function tk(e){return e!=null&&typeof e=="object"&&"layerViews"in e}var lh=class{constructor(t,n,r){this.layer=t,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Xn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,xs(this._controller.signal,()=>{let i=new k("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(i)})}tryRecycle(t){if(!this.done||!this.layerView||!ek(this.layerView))return null;let n=this.layer.type,r=this._controller.signal;for(let i=0;i<t.length;i++){let o=t[i];if(o.type!==n)continue;let s=this.layerView.tryRecycleWith(o,{signal:r});if(s){t.splice(i,1),this.layer=o;let a=this.layerView,c=a.view;return this.promise=Promise.race([s.then(()=>(nt(this._controller.signal),o.emit("layerview-destroy",{view:c,layerView:a}),c.emit("layerview-destroy",{view:c,layerView:a}),o.emit("layerview-create",{view:c,layerView:a}),c.emit("layerview-create",{view:c,layerView:a}),a)),new Promise((d,p)=>xs(this._controller.signal,()=>p(Dc())))]),this.promise}}return null}destroy(){this._controller.abort();let{layerView:t}=this;if(t){let{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:n,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}start(){return _(this,null,function*(){if(this._started)return;this._started=!0;let{_controller:{signal:t},layer:n,view:r}=this;this._map=r.map;try{let i,o;if(yield n.load({signal:t}),n.prefetchResources&&(yield n.prefetchResources({signal:t})),nk(n))i=yield n.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new k("layer:view-not-supported","No layerview implementation was found");let c=yield this.layerViewImporter.importLayerView(n);nt(t),i="default"in c?new c.default({layer:n,view:r}):new c({layer:n,view:r})}let s=()=>{o=_e(o),i.destroyed||i.destroy(),i.layer=null,i.parent=null,i.view=null,this.done=!0};o=xs(t,s),nt(t);try{yield i.when()}catch(c){throw s(),c}if(!this._map?.allLayers?.includes(n))return s(),void this._deferred.reject(new k("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=i,n.emit("layerview-create",{view:r,layerView:i}),r.emit("layerview-create",{layer:n,layerView:i}),this.done=!0,this._deferred.resolve(i)}catch(i){n.emit("layerview-create-error",{view:r,error:i}),r.emit("layerview-create-error",{layer:n,error:i}),this.done=!0,this._deferred.reject(new k("layerview:create-error","layerview creation failed",{layer:n,error:i}))}})}},ht=class extends b{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new An,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let t=this.view.map?.allLayers;if(t)for(let n of t)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Xn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(ff(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;let t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");let n=new Set,r=[],i=this.view.ready,o=a=>{if(a!=null){for(let c of a)if(c){n.add(c);let d=this._layerLayerViewInfoMap.get(c);d&&i?d.start():d||this._recyclingInfoMap.has(c)||r.push(c),"layers"in c&&c.layers&&o(c.layers)}}};for(let a of this._rootCollectionNames)o(Ms(this,a));for(let[a,c]of this._layerLayerViewInfoMap)if(!n.has(a)){this._layerLayerViewInfoMap.delete(c.layer);let d=c.tryRecycle(r);d?(this.notifyChange("updating"),this._recyclingInfoMap.set(c.layer,c),d.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(c.layer),this._layerLayerViewInfoMap.set(c.layer,c),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(c.layer),c.destroy(),this._reschedule()})):c.destroy()}for(let[a,c]of this._recyclingInfoMap)n.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(c.layer),c.destroy());for(let a of r)this._createLayerView(a);this._refreshCollections();let s=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter(a=>!!a);n.forEach(a=>"layers"in a&&s.push(a.layers)),this.addHandles(s.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Ft(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),E(()=>{let e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),je)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),js(this._recyclingInfoMap),js(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Dc()),this._workPromise=null)}get _layersToLayerViews(){let e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Sn(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(let t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(js(this._layerLayerViewInfoMap),this._refreshCollections())}whenLayerView(e){return _(this,null,function*(){if(yield this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new k("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise})}isCreatingLayerViewsForLayer(e,t){this.commitProperty("updatingRemaining");let n=this._layerLayerViewInfoMap.get(e);if(!n?.done)return!0;let r=n.layerView;return!(!r||!t||r.parent===t)||!!(n.done&&r&&"layers"in e&&e.layers?.length)&&e.layers.some(i=>this.isCreatingLayerViewsForLayer(i,r))}_refreshCollections(){for(let[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(Ms(this,e),Ms(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,n){if(!e||!t)return void(t&&t.removeAll());let r=0;for(let i of e){let o=this._layerLayerViewInfoMap.get(i);if(!o?.layerView)continue;let s=o.layerView;s.layer=i,s.parent=n,t.at(r)!==s&&t.splice(r,0,s),"layers"in i&&tk(s)&&this._populateLayerViewsOwners(i.layers,s.layerViews,s),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);let t=new lh(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),n=>{n&&(Ts(n)||n.name==="cancelled:layerview-create")||M.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([u()],ht.prototype,"_workPromise",void 0),l([u({readOnly:!0})],ht.prototype,"_watchUpdatingTracking",void 0),l([u({readOnly:!0})],ht.prototype,"_layersToLayerViews",null),l([u({readOnly:!0})],ht.prototype,"_rootCollectionNames",null),l([u()],ht.prototype,"layerViewImporter",void 0),l([u()],ht.prototype,"supportsGround",void 0),l([u({readOnly:!0})],ht.prototype,"updating",null),l([u({readOnly:!0})],ht.prototype,"updatingRemaining",null),l([u({constructOnly:!0})],ht.prototype,"view",void 0),ht=l([m("esri.views.LayerViewManager")],ht);var N_=ht;function nk(e){return"createLayerView"in e&&e.createLayerView!=null}var et=class extends b{constructor(e){super(e),this.factor=1.5,this.offset=ie(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([u({type:Number})],et.prototype,"factor",void 0),l([u({nonNullable:!0})],et.prototype,"offset",void 0),l([u()],et.prototype,"position",void 0),l([u({type:Number,range:{min:0}})],et.prototype,"size",void 0),l([u()],et.prototype,"maskUrl",void 0),l([u()],et.prototype,"maskEnabled",void 0),l([u()],et.prototype,"overlayUrl",void 0),l([u()],et.prototype,"overlayEnabled",void 0),l([u({readOnly:!0})],et.prototype,"version",null),l([u({type:Boolean})],et.prototype,"visible",void 0),et=l([m("esri.views.Magnifier")],et);var ch=et;var yn=class extends rt.EventedAccessor{constructor(e){super(e),this._selectionMap=new _m,this._sources=new B,this._trashCan=[],this._layerEditHandles=new B,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([E(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Ft(()=>this.sources,"change",t=>{let n=this._selectionMap;for(let r of t.removed)n.delete(r);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);let e=new B;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(t=>"sublayers"in t&&t.sublayers?t.sublayers:null).forEach(t=>{(Tl(t)&&!Jf(t)||kn(t))&&e.add(t)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(_e)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{let[t,n]=e;return{layer:t,selection:[...n.selection]}})}get count(){let e=0;for(let t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Nf(e,this._sources)}getSelectedFeatures(r){return _(this,arguments,function*(e,t={},n="layerView"){let{view:i,selections:o}=this,s=(e!==void 0?o.filter(a=>e.includes(a.layer)):o).filter(a=>a.selection.length>0).map(a=>_(this,null,function*(){let{layer:c,selection:d}=a,p=kn(c)?c.parent:c;if(p==null||!O_(p))return null;if(n==="layer")return P_(p,d,t);if(R_(p))return null;let h=yield i.whenLayerView(p);return P_(h,d,t)}));return(yield Promise.all(s)).filter(a=>a!==null)})}updateSelection(e){let t=new Map;for(let[i,o]of this._selectionMap)t.set(i,[...o.selection]);let n=!1,r=e.current.concat(e.added);for(let i of r){let o=i.sourceLayer,s=i.getObjectId();if(this.sources.includes(o)&&(Tl(o)||kn(o))&&s!==null){let a=gf(t,o,()=>[]);a.includes(s)||(a.push(s),n=!0)}}for(let i of e.removed){let o=i.sourceLayer,s=i.getObjectId();if(this.sources.includes(o)&&(Tl(o)||kn(o))&&s!==null){let a=t.get(o),c=a?.indexOf(s);c!==void 0&&c>=0&&(a?.splice(c,1),n=!0)}}if(n){let{_selectionMap:i,_trashCan:o}=this,s=[];for(let[a,c]of t){let d=i.get(a);d!==void 0&&o.push(d),i.set(a,{selection:c}),s.push(y({layer:a,selection:c},wc(d!==void 0?d.selection:[],c)))}this._onSelectionChange(s)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,t){let n=this._selectionMap.get(e),r=n!==void 0?[...n.selection]:[];for(let i of t)r.includes(i)||r.push(i);this._setSelection(e,r)}removeFromSelection(e,t){let n=this._selectionMap.get(e);if(!n)return;let r=[];for(let i of n.selection)t.includes(i)||r.push(i);this._setSelection(e,r)}toggleInSelection(e,t){let n=this._selectionMap.get(e);if(!n||n.selection.length===0)return void this._setSelection(e,t);let r=new Set(n.selection),i=new Set(t),o=mf(r,i);this._setSelection(e,Array.from(o))}clear(){let e=this._selectionMap.values();this._trashCan.push(...e);let t=[];for(let[n,r]of this._selectionMap.entries())t.push({layer:n,added:[],removed:[...r.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();let{sources:e,view:t,_selectionMap:n,showHighlight:r}=this,i=this._vizTaskId;for(let o of e){let s=n.get(o),a=kn(o)?o.parent:o;if(a!=null&&O_(a)){if(R_(a))continue;t.whenLayerView(a).then(c=>{s?.highlightHandle?.remove(),s!==void 0&&r&&i===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&s.selection.length>0&&(s.highlightHandle=c.highlight(s.selection,"selection"))})}}}_refreshListeners(){this._layerEditHandles.drain(_e);for(let e of this.sources){let t=kn(e)?e.parent:e;if(t!=null&&Tl(t)){let n=t.on("edits",r=>{this._handleEditChanges(r,e)});this._layerEditHandles.push(n)}}}_handleEditChanges(e,t){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){let n=e.deletedFeatures.filter(r=>r.error==null).map(r=>r.objectId).filter(yt);this.removeFromSelection(t,n)}}_setSelection(e,t){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);let n=this._selectionMap.get(e);if(n===void 0||!ik(n,{selection:t})){n!==void 0&&this._trashCan.push(n),this._selectionMap.set(e,{selection:[...t]});let r=y({layer:e,selection:[...t]},wc(n!==void 0?n.selection:[],t));this._onSelectionChange([r])}}};l([u({readOnly:!0,nonNullable:!0})],yn.prototype,"selections",null),l([u({readOnly:!0,nonNullable:!0})],yn.prototype,"count",null),l([u({constructOnly:!0,nonNullable:!0})],yn.prototype,"view",void 0),l([u({readOnly:!0,nonNullable:!0})],yn.prototype,"hasSelection",null),l([u()],yn.prototype,"showHighlight",void 0),l([u()],yn.prototype,"sources",null),yn=l([m("esri.views.SelectionManager")],yn);var R_=e=>kn(e)?e.parent?.isTable===!0:e.isTable,Tl=e=>e.createQuery!==void 0&&e.on!==void 0,rk=e=>e.layer!==void 0,O_=e=>e?.when!==void 0,ik=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){let n=[...e.selection],r=[...t.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1}return!0},P_=(r,i,...o)=>_(void 0,[r,i,...o],function*(e,t,n={}){let s;if(rk(e)){let a=e;s=a===void 0?null:yield a.queryFeatures(new Nc(x(y({},n),{objectIds:t}))).then(c=>({data:c,layer:e.layer}))}else{let a=e;s=a===void 0?null:yield a.queryFeatures(new Nc(x(y({},n),{objectIds:t}))).then(c=>({data:c,layer:a}))}return s}),F_=yn;var ps=class extends ye(b){constructor(e){super(e),this.accentColor=new Nn([255,127,0]),this.textColor=new Nn([255,255,255])}};l([u({type:Nn,nonNullable:!0})],ps.prototype,"accentColor",void 0),l([u({type:Nn,nonNullable:!0})],ps.prototype,"textColor",void 0),ps=l([m("esri.views.Theme")],ps);var kl=ps;var uh;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(uh||(uh={}));var ph=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],L_={};function V_(e){return!!L_[e]}function ok(e){for(let t of e)if(!V_(t))return!1;return!0}ph.forEach(e=>{L_[e]=!0});var Al=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:n,priority:r},i)=>this.inputManager?.installHandlers(i,[n],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,n,r,i){let o=Array.isArray(t)?t:t.split(",");if(!ok(o))return o.some(V_)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,a;Array.isArray(n)?a=n:(s=n,a=[]),typeof r=="function"?s=r:i=r,i=i??tn.DEFAULT;let c=this._createUniqueGroupName(),d=new dh(this.view,o,a,s);this._handlers.set(c,{handler:d,priority:i});for(let p of o){let h=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,h+1)}return this.inputManager&&this.inputManager.installHandlers(c,[d],i),En(()=>this._removeHandler(c,o))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,n){if(this._handlers.has(t)){this._handlers.delete(t);for(let r of n){let i=this._handlerCounts.get(r);i===void 0||(i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},dh=class extends z{constructor(t,n,r,i){super(!0),this._latestDragStart=void 0,this.view=t;for(let o of n)switch(o){case"click":this.registerIncoming("click",r,s=>i(lk(t,s)));break;case"double-click":this.registerIncoming("double-click",r,s=>i(ck(t,s)));break;case"immediate-click":this.registerIncoming("immediate-click",r,s=>i(uk(t,s)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,s=>i(dk(t,s)));break;case"hold":this.registerIncoming("hold",r,s=>i(pk(t,s)));break;case"drag":this.registerIncoming("drag",r,s=>{let a=this._wrapDrag(s);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,s=>i(hk(s)));break;case"key-up":this.registerIncoming("key-up",r,s=>i(fk(s)));break;case"pointer-down":this.registerIncoming("pointer-down",r,s=>i(hs(s,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,s=>i(hs(s,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,s=>i(hs(s,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,s=>i(mk(s)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,s=>i(gk(s)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,s=>i(hs(s,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,s=>i(hs(s,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,s=>{i(yk(s))});break;case"focus":this.registerIncoming("focus",r,s=>{i(sk(s))});break;case"blur":this.registerIncoming("blur",r,s=>{i(ak(s))})}}_wrapDrag(t){let n=t.data,{x:r,y:i}=n.center,{action:o,pointerType:s,button:a}=n;if(o==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;let c=n.pointer.native,d=n.buttons,{cancelable:p,timestamp:h}=t,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:r,y:i,origin:f,pointerType:s,button:a,buttons:d,radius:n.radius,angle:qf(n.angle),native:c,timestamp:h,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}};function sk(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function ak(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function lk(e,t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:c}=t.data,{cancelable:d,timestamp:p}=t;return{type:"click",pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:p,screenPoint:ie(o,s),mapPoint:fs(e,o,s),eventId:c,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function ck(e,t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:c}=t.data,{cancelable:d,timestamp:p}=t;return{type:"double-click",pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:p,mapPoint:fs(e,o,s),eventId:c,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function uk(e,t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:c}=t.data,d=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-click",pointerId:d,pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:h,mapPoint:fs(e,o,s),eventId:c,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function dk(e,t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a,eventId:c}=t.data,d=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-double-click",pointerId:d,pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:h,mapPoint:fs(e,o,s),eventId:c,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function pk(e,t){let{pointerType:n,button:r,buttons:i,x:o,y:s,native:a}=t.data,{cancelable:c,timestamp:d}=t;return{type:"hold",pointerType:n,button:r,buttons:i,x:o,y:s,native:a,timestamp:d,mapPoint:fs(e,o,s),cancelable:c,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function fs(e,t,n){return e.toMap(ie(t,n),{exclude:[]})}function hk(e){let{key:t,repeat:n,native:r}=e.data,{cancelable:i,timestamp:o}=e;return{type:"key-down",key:t,repeat:n,native:r,timestamp:o,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function fk(e){let{key:t,native:n}=e.data,{cancelable:r,timestamp:i}=e;return{type:"key-up",key:t,native:n,timestamp:i,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function hs(e,t){let{x:n,y:r,button:i,buttons:o,native:s,eventId:a}=e.data,c=s.pointerId,d=s.pointerType,{cancelable:p,timestamp:h}=e;return{type:t,x:n,y:r,pointerId:c,pointerType:d,button:i,buttons:o,native:s,timestamp:h,eventId:a,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}function mk(e){let{x:t,y:n,buttons:r,native:i,eventId:o}=e.data.currentEvent,{button:s}=e.data.startEvent,a=e.data.startEvent.native.pointerId,c=e.data.startEvent.native.pointerType,d=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:h,timestamp:f}=e;return{type:"pointer-drag",x:t,y:n,pointerId:a,pointerType:c,button:s,buttons:r,action:d,origin:p,native:i,timestamp:f,eventId:o,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}function gk(e){let{cancelable:t,data:n,timestamp:r}=e,{x:i,y:o,deltaY:s,native:a}=n;return{type:"mouse-wheel",x:i,y:o,deltaY:s,native:a,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}function yk(e){let{action:t,state:n,device:r}=e.data,{cancelable:i,timestamp:o}=e,{buttons:s,axes:a}=n;return{type:"gamepad",device:r,timestamp:o,action:t,buttons:s,axes:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}var Er,j_,B_;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Er||(Er={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(j_||(j_={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(B_||(B_={}));function U_(e){return[e.on("before-add",t=>{let n=t.item;if(n==null||e.includes(n))return M.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()}),e.on("after-remove",t=>{let n=t.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function ms(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Er.USER)&&e.getEditableFlag(Er.MANAGER)}function Tt(e){return ie(e.x,e.y)}function hh(e,t){let n=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return n?ie(t.clientX-n.left,t.clientY-n.top):ie(0,0)}function Nl(e,t){return t instanceof Event?hh(e,t):Tt(t)}function Rl(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}var Ol=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,n){let r=()=>t.stopPropagation();switch(t.type){case"pointer-move":$_(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!z_(t))break;let i=Tt(t),o=ji(i,t.pointerType,n.forEachTool);if(o==null)break;let s=o.manipulator,a=o.tool;s==null||a==null||!s.interactive||s.grabbable&&s.grabbableForEvent(t)||!s.grabbing||s.dragging||this._releaseManipulatorBeforeDragging(s,t,n),s!=null&&a!=null&&s.interactive&&s.grabbable&&s.grabbableForEvent(t)&&!s.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:s,tool:a,start:i,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(o.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,n);break;case"pointer-drag":{if(!z_(t))break;let i=this._grabbedManipulators.get(t.pointerId),o=i?.manipulator,s=i?.tool;if(o==null||s==null)break;let a=Tt(t);a.x=kc(a.x,0,n.view.width),a.y=kc(a.y,0,n.view.height);let c=i.start,d=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,d?o.events.emit("drag",{action:"update",start:c,screenPoint:a}):o.events.emit("drag",{action:"start",start:c,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:s,manipulator:o,start:c}));break;case"end":o.dragging=!1,d&&o.events.emit("drag",{action:"end",start:c,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,n)}r();break}case"immediate-click":{let i=Tt(t),o=ji(i,t.pointerType,n.forEachTool);if(vk(t)||n.forEachTool(d=>{if((o==null||o.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let p=!1;d.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,p=!0)}),p&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}),o==null)break;let{manipulator:s,tool:a}=o;if(!s.interactive)break;s.selectable&&a.automaticManipulatorSelection&&(s.selected=!s.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());let c=t.native.shiftKey;s.events.emit("immediate-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:c,stopPropagation:r}),fh(s,r);break}case"click":{let i=Tt(t),o=ji(i,t.pointerType,n.forEachTool),s=o?.manipulator;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit(t.type,{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{let i=Tt(t),o=ji(i,t.pointerType,n.forEachTool),s=o!=null?o.manipulator:null;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit("double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),fh(s,r);break}case"immediate-double-click":{let i=Tt(t),o=ji(i,t.pointerType,n.forEachTool),s=o!=null?o.manipulator:null;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),fh(s,r);break}}this._onFocusChange(n.forEachTool)}_releaseManipulatorBeforeDragging(t,n,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:Tt(n)}),this._grabbedManipulators.forEach(({manipulator:i},o)=>{i===t&&this._grabbedManipulators.delete(o)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,n){let r=this._grabbedManipulators.get(t.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Tt(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=H_(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=H_(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){let n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>{n.add(i)}),this._hoveredManipulators.forEach(({tool:i})=>{r.add(i)}),t(i=>{i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);let o=this._grabbedManipulators.values(),s=rf(o,({tool:a})=>a===i);i.firstGrabbedManipulator=s!=null?s.manipulator:null})}clearPointers(t,{forEachTool:n,setActiveTool:r},i=!0,o){let s=(a,c)=>a===t&&(o==null||o===c);this._grabbedManipulators.forEach(({tool:a,manipulator:c,pointerType:d},p)=>{s(a,c)&&(this._grabbedManipulators.delete(p),c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:a,manipulator:c},d)=>{s(a,c)&&(this._draggedManipulators.delete(d),c.dragging=!1,c.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:c},d)=>{s(a,c)&&(this._hoveredManipulators.delete(d),c.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(ie(n.x,n.y),r,n.pointerType,t)})}handleHoverEvent(t,n){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!$_(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Tt(t),t.pointerId,t.pointerType,n)}_updateHoveredStateForPointerAtScreenPosition(t,n,r,i){let o=ji(t,r,i),s=this._hoveredManipulators.get(n)?.manipulator;o==null||o.manipulator.interactive||(o=null),o!=null&&s===o.manipulator||(s!=null&&(s.hovering=!1),o!=null?(o.manipulator.hovering=!0,this._hoveredManipulators.set(n,o)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function H_(e){let t=null;return Sn(e,({manipulator:n})=>!(n==null||!n.interactive)&&(n.grabbing&&n.grabCursor?(t=n.grabCursor,!0):!!n.cursor&&(t=n.cursor,!0))),t}function ji(e,t,n){let r=null;return n(i=>{if(i.manipulators==null||!ms(i))return!1;let o=i.manipulators.intersect(e,t);return o!=null&&(r={tool:i,manipulator:o},!0)}),r}function $_(e){return e==="mouse"}function z_(e){return e.pointerType!=="mouse"||e.button===0}function vk(e){return!!e.native.shiftKey}function fh(e,t){e?.consumesClicks&&t()}var q_="attached",mh="tools",wk=1e3,kt=class extends b{constructor(e){super(e),this._updatingHandles=new An,this._clock=Pt,this._manipulatorState=new Ol,this.tools=new B,this.cursor=null,this._interacting=!1,this._interactingTimeout=wk,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(let n of this.tools.items)if(t(n))return}}initialize(){this.addHandles([this.view.on(ph,e=>{this._handleInputEvent(e)},tn.TOOL),...U_(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void M.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;let t=this.activeTool;this._set("activeTool",e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(let n of this.tools){this._updateToolEditableFlag(n);let r=ms(n);this.activeTool!=null&&r||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=_e(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([E(()=>{let{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],q_):this.addHandles(E(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(q_),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:n})=>e(n,t))})}_handleInputEvent(e){let t=!1,n=x(y({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(n)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(mh),this._forEachTool(e=>{if(e instanceof b){let t=E(()=>[e.cursor,e.visible,e.editable],()=>{ms(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,mh)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],mh)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Er.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(t=>!(t.cursor==null||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}get test(){}};l([u({constructOnly:!0,nonNullable:!0})],kt.prototype,"view",void 0),l([u({value:null})],kt.prototype,"activeTool",null),l([u({readOnly:!0,type:B})],kt.prototype,"tools",void 0),l([u({readOnly:!0})],kt.prototype,"cursor",void 0),l([u({readOnly:!0})],kt.prototype,"updating",null),l([u()],kt.prototype,"_interacting",void 0),l([u({readOnly:!0})],kt.prototype,"interacting",null),kt=l([m("esri.views.ToolViewManager")],kt);var Bi=class extends b{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":bk.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){let e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return _k[this.deviceType]}};l([u({nonNullable:!0,readOnly:!0})],Bi.prototype,"nativeIndex",void 0),l([u({type:String,readOnly:!0})],Bi.prototype,"deviceType",null),l([u({type:Number,readOnly:!0})],Bi.prototype,"axisThreshold",null),Bi=l([m("esri.views.input.gamepad.GamepadInputDevice")],Bi);var Ui=Bi,bk=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),_k={standard:.15,spacemouse:.025,unknown:0};var gs=class extends b{constructor(...e){super(...e),this.devices=new B,this.enabledFocusMode="document"}};l([u({type:B.ofType(Ui),readOnly:!0})],gs.prototype,"devices",void 0),l([u({type:["document","view","none"]})],gs.prototype,"enabledFocusMode",void 0),gs=l([m("esri.views.input.gamepad.GamepadSettings")],gs);var G_=gs;var Pl=class extends b{constructor(){super(...arguments),this.gamepad=new G_}};l([u({readOnly:!0})],Pl.prototype,"gamepad",void 0),Pl=l([m("esri.views.input.Input")],Pl);var W_=Pl;var Wn=class extends b{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([u({type:Boolean,nonNullable:!0})],Wn.prototype,"enabled",void 0),l([u({type:Ui})],Wn.prototype,"device",void 0),l([u({type:["pan","zoom"],nonNullable:!0})],Wn.prototype,"mode",void 0),l([u({type:["forward-down","forward-up"],nonNullable:!0})],Wn.prototype,"tiltDirection",void 0),l([u({type:Number,nonNullable:!0})],Wn.prototype,"velocityFactor",void 0),Wn=l([m("esri.views.navigation.gamepad.GamepadSettings")],Wn);var gh=Wn;var Sr=class extends b{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new gh,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Us()}};l([u({type:Boolean})],Sr.prototype,"browserTouchPanEnabled",void 0),l([u({type:gh,nonNullable:!0})],Sr.prototype,"gamepad",void 0),l([u({type:Boolean})],Sr.prototype,"momentumEnabled",void 0),l([u({type:Boolean})],Sr.prototype,"mouseWheelZoomEnabled",void 0),Sr=l([m("esri.views.navigation.Navigation")],Sr);var yh=Sr;var Z_;function Q_(e){if(e.type==="integrated-mesh-3dtiles")return null;let t=e.url?Kf(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&Y_(e)&&e.heightModelInfo?e.heightModelInfo:Dk(e)?oo.deriveUnitFromSR(Ck,e.spatialReference):null}function Y_(e){return"heightModelInfo"in e}function K_(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Dk(e){return K_(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):X_(e)}function J_(e){return e.layers!=null||X_(e)||K_(e)||Y_(e)}function X_(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Z_||(Z_={}));var Ck=new oo({heightModel:"gravity-related-height"});var wh,vh=null;function Ik(e){return _(this,null,function*(){vh||(vh=import("./chunk-625T7G5Y.js").then(t=>wh=t)),yield vh,nt(e)})}function bh(e,t,n,r){return _(this,null,function*(){if(!e)return null;let i=e.spatialReference;return sm()||cm(i,t)?Lr(e,t):wh?wh.projectGeometry(e,t,n,r):(yield Promise.race([Ik(r),lm(r)]),bh(e,t,n,r))})}var Q=class extends b{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=no(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){let e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers,n=null;for(let i of e){let o=this._getSupportedSpatialReferences(i);if(o.length>0){let s=this._narrowDownSpatialReferenceCandidates(n,o);s!=null&&(n=s)}if(n!=null&&n.length===1)break}if(t&&(n==null||n.length!==1))return{updating:!0};let r=this._pickSpatialReferenceCandidate(n);return{spatialReference:r?.spatialReference??null,viewingMode:r?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){let n=e[0].tileInfo;return{tileInfo:n?.spatialReference.equals(this.spatialReference)?n:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers;for(let n of e)if(J_(n)){let r=Q_(n);if(r)return{heightModelInfo:r,vcsWkid:n.spatialReference?.vcsWkid,latestVcsWkid:n.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let e=this._allLayers,t=e.updating,n=[];for(let r of e.layers){let i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:i[0],s=i.find(a=>a.spatialReference.equals(this.spatialReference))??o;if(s)return{candidates:[{extent:s,layer:r}],updating:!1};if(this._getSupportedSpatialReferences(r).length>0)for(let a of i)n.push({extent:a,layer:r})}return{candidates:n,updating:t}}get _extentTask(){let{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let n=this._pickExtentCandidate(e),r=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=no(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:r.clone(),task:Pr(i=>_(this,null,function*(){try{let o=yield bh(n.extent,r,"portalItem"in n.layer?n.layer.portalItem:void 0,i);this._projectExtentTask=x(y({},this._projectExtentTask),{task:null,output:o})}catch{if(sf(i))return;this._projectExtentTask=x(y({},this._projectExtentTask),{task:null})}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;let n=new Array;for(let r of e)for(let i of t){if(!r.spatialReference.equals(i.spatialReference))continue;let o=Ek(r.viewingMode,i.viewingMode);if(o!==!1){n.push({spatialReference:r.spatialReference,viewingMode:o});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){let t=this.defaultSpatialReference;return e==null||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(t))&&(e=e.filter(({spatialReference:n})=>n.equals(t))),e.length>1&&e.some(({viewingMode:n})=>n!==Lc.Local)&&(e=e.filter(({viewingMode:n})=>n!==Lc.Local)),e[0])}_getSupportedSpatialReferences(e){let t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];let n=[];for(let r of t){let i=this.getSpatialReferenceSupport(r,e);if(i!=null){let o=i.constraints??[{spatialReference:r,viewingMode:null}];for(let{spatialReference:s,viewingMode:a}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!s.equals(this.userSpatialReference)||n.push({spatialReference:s,viewingMode:a})}}return n}_pickExtentCandidate(e){let t=this.spatialReference;return e.find(({extent:n})=>t.equals(n.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};let t=new _h;for(let n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(let n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(t=>{Ts(t)||console.log(t)}),"loading"):e.loadStatus:"loaded"}};l([u()],Q.prototype,"required",void 0),l([u({constructOnly:!0})],Q.prototype,"map",void 0),l([u({constructOnly:!0})],Q.prototype,"getSpatialReferenceSupport",void 0),l([u()],Q.prototype,"defaultSpatialReference",void 0),l([u()],Q.prototype,"userSpatialReference",void 0),l([u()],Q.prototype,"sourcePreloadCount",void 0),l([u()],Q.prototype,"priorityCollection",void 0),l([u()],Q.prototype,"requiresExtentInSpatialReference",void 0),l([u()],Q.prototype,"suspended",void 0),l([u({readOnly:!0})],Q.prototype,"ready",null),l([u({readOnly:!0})],Q.prototype,"heightModelInfoReady",null),l([u({readOnly:!0})],Q.prototype,"spatialReference",null),l([u({readOnly:!0})],Q.prototype,"extent",null),l([u({readOnly:!0})],Q.prototype,"heightModelInfo",null),l([u({readOnly:!0})],Q.prototype,"vcsWkid",null),l([u({readOnly:!0})],Q.prototype,"latestVcsWkid",null),l([u({readOnly:!0})],Q.prototype,"viewingMode",null),l([u({readOnly:!0})],Q.prototype,"tileInfo",null),l([u({readOnly:!0})],Q.prototype,"mapCollections",null),l([u({readOnly:!0})],Q.prototype,"_allLayers",null),l([u({readOnly:!0})],Q.prototype,"_spatialReferenceTask",null),l([u({readOnly:!0})],Q.prototype,"_tileInfoTask",null),l([u({readOnly:!0})],Q.prototype,"_heightModelInfoTask",null),l([u({readOnly:!0})],Q.prototype,"_extentCandidatesTask",null),l([u()],Q.prototype,"_extentTask",null),l([u()],Q.prototype,"_projectExtentTask",void 0),Q=l([m("esri.views.support.DefaultsFromMap")],Q);var _h=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function Ek(e,t){return e!=null?t!=null?e===t&&e:e:t}var ys,C=ys=class extends rt.EventedMixin(Rs(b)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Ss,this.updatingHandles=new An,this.allLayerViews=new tr({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:Sk}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new jc,this.analyses=new ds,this.typeSpecificPreconditionsReady=!0,this.layerViews=new B,this.magnifier=new ch,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new W_,this.navigation=new yh,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Al(this),this.persistableViewModels=new B,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(E(()=>this.preconditionsReady,t=>{let n=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,ys.views.add(this)):(this._lockedSpatialReference=null,ys.views.remove(this)),this.notifyChange("spatialReference"),!t&&n)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!n){try{this._startup()}catch(r){return void queueMicrotask(()=>{this.fatalError=new k("startup-error",null,r)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Jt))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Tn(()=>this.ready)))),this.basemapView=new gn({view:this}),this.layerViewManager=new N_({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new kt({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new F_({view:this}),this.addHandles([E(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=x(y({},this.defaultsFromMap.required),{extent:e}),je),E(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Jt),E(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},je)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([E(()=>this.defaultsFromMap?.ready,t=>{let n=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&n){if(e!=null)return;let r=En(()=>e=no(e));e=Pr(i=>_(this,null,function*(){try{yield cf(this.spatialReferenceWarningDelay,null,i)}catch{return}finally{e=null}M.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.addHandles(r,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(ys.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ue(this.graphics),this.analyses=ue(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ue(this.analysisViewManager),this.toolViewManager=ue(this.toolViewManager),this.layerViewManager=ue(this.layerViewManager),this.selectionManager=ue(this.selectionManager),this.basemapView=ue(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=ue(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return M.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Q(y({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||io.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(M.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),io.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){let t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){let t=!Os(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??xn}set timeZone(e){let t=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));this._userTimeZone=e,e===xn||e===Sf||t.has(e.toLowerCase())||n.has(e.toLowerCase())||M.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new kl}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new k("importLayerView() not implemented")}hasLayerViewModule(e){return!1}validate(){return _(this,null,function*(){})}loadAsyncDependencies(){return _(this,null,function*(){})}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&M.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(it(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};C.views=new B,l([u()],C.prototype,"_userSpatialReference",void 0),l([u()],C.prototype,"activeTool",null),l([u({readOnly:!0})],C.prototype,"allLayerViews",void 0),l([u()],C.prototype,"groundView",void 0),l([u()],C.prototype,"animation",null),l([u()],C.prototype,"basemapView",void 0),l([u()],C.prototype,"center",null),l([u({readOnly:!0})],C.prototype,"_defaultsFromMapSettings",null),l([u()],C.prototype,"defaultsFromMap",null),l([u()],C.prototype,"fatalError",void 0),l([u({type:Vt})],C.prototype,"extent",null),l([u(Vc(jc,"graphics"))],C.prototype,"graphics",void 0),l([u(Vc(ds,"analyses"))],C.prototype,"analyses",void 0),l([u({readOnly:!0,type:oo})],C.prototype,"heightModelInfo",null),l([u({readOnly:!0})],C.prototype,"interacting",null),l([u({readOnly:!0})],C.prototype,"navigating",null),l([u({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],C.prototype,"preconditionsReady",null),l([u({readOnly:!0})],C.prototype,"typeSpecificPreconditionsReady",void 0),l([u({type:B,readOnly:!0})],C.prototype,"layerViews",void 0),l([u()],C.prototype,"resolution",null),l([u({type:ch})],C.prototype,"magnifier",void 0),l([u({value:null,type:yl})],C.prototype,"map",null),l([u()],C.prototype,"padding",void 0),l([u({readOnly:!0})],C.prototype,"ready",void 0),l([u({type:Xt})],C.prototype,"spatialReference",null),l([u()],C.prototype,"spatialReferenceWarningDelay",void 0),l([u()],C.prototype,"stationary",null),l([u({readOnly:!0})],C.prototype,"supportsGround",void 0),l([u({type:en})],C.prototype,"timeExtent",void 0),l([u({type:String,nonNullable:!0})],C.prototype,"timeZone",null),l([u()],C.prototype,"tools",null),l([u()],C.prototype,"toolViewManager",void 0),l([u({readOnly:!0})],C.prototype,"type",void 0),l([u({type:Number})],C.prototype,"scale",void 0),l([u({readOnly:!0})],C.prototype,"updating",void 0),l([u({readOnly:!0})],C.prototype,"initialExtentRequired",void 0),l([u({readOnly:!0})],C.prototype,"initialExtent",null),l([u()],C.prototype,"cursor",null),l([u({readOnly:!0})],C.prototype,"input",void 0),l([u({type:yh,nonNullable:!0})],C.prototype,"navigation",void 0),l([u()],C.prototype,"layerViewManager",void 0),l([u()],C.prototype,"analysisViewManager",void 0),l([u()],C.prototype,"selectionManager",void 0),l([u()],C.prototype,"width",void 0),l([u()],C.prototype,"height",void 0),l([u({readOnly:!0})],C.prototype,"resizing",void 0),l([u({value:null,readOnly:!0})],C.prototype,"size",null),l([u({readOnly:!0})],C.prototype,"suspended",void 0),l([u({readOnly:!0})],C.prototype,"viewEvents",void 0),l([u({readOnly:!0})],C.prototype,"persistableViewModels",void 0),l([u()],C.prototype,"_isValid",void 0),l([u()],C.prototype,"_readyCycleForced",void 0),l([u()],C.prototype,"_lockedSpatialReference",void 0),l([u()],C.prototype,"_userTimeZone",void 0),l([u()],C.prototype,"_lockedTimeZone",void 0),l([u({type:kl})],C.prototype,"theme",void 0),l([u({readOnly:!0,type:kl})],C.prototype,"effectiveTheme",null),C=ys=l([m("esri.views.View")],C);var eD=C;function Sk(e){return e.layerViews}var Zn=class extends Mf{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Xn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new k("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=df(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([u({readOnly:!0})],Zn.prototype,"done",null),l([u({readOnly:!0,type:String})],Zn.prototype,"state",void 0),l([u()],Zn.prototype,"target",void 0),Zn=l([m("esri.views.ViewAnimation")],Zn),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Zn||(Zn={}));var vs=Zn;function Mk(e){return e instanceof Float32Array&&e.length>=2}function xk(e){return Array.isArray(e)&&e.length>=2}function Fl(e){return Mk(e)||xk(e)}var Dh,vn=[0,0],Qn=Dh=class extends S{constructor(e){super(e),this._viewpoint2D={center:jr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Vt,this.id=0,this.inverseTransform=$s(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=$s(),this.transformNoRotation=$s(),this.displayMat3=qs(),this.displayViewMat3=qs(),this.viewMat3=qs(),this.viewMat2d=Sm(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){let t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}copy(e){let t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=at(n,e.viewpoint),this._set("size",Vr(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Dh({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,n){return Fl(t)?er(e,t,this.inverseTransform):(vn[0]=t,vn[1]=n,er(e,vn,this.inverseTransform))}toScreen(e,t,n){return Fl(t)?er(e,t,this.transform):(vn[0]=t,vn[1]=n,er(e,vn,this.transform))}toScreenNoRotation(e,t,n){return Fl(t)?er(e,t,this.transformNoRotation):(vn[0]=t,vn[1]=n,er(e,vn,this.transformNoRotation))}wrapMapCoordinate(e,t){Vr(e,t);let[n]=t,[r]=this.center,{extent:i,spatialReference:o}=this,{xmin:s,xmax:a}=i;if(o.isWrappable){let c=sg(o)/2;s=Math.max(s,r-c),a=Math.min(a,r+c)}return(n<s||n>a)&&(e[0]=um(n,r,o)),e}getScreenTransform(e,t){let{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return rg(e,n,i,t,0,r),e}_update(){let{center:e,spatialReference:t,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,o=this._get("size"),s=new oe({targetGeometry:new ge(e[0],e[1],t),scale:n,rotation:r});if(this._set("viewpoint",s),!o||!t||!n)return;this.resolution=tg(s),this.rotation=r,this.scale=n,this.spatialReference=t,Vr(this.center,e);let a=o[0]!==0?2/o[0]:0,c=o[1]!==0?-2/o[1]:0;fm(this.displayMat3,a,0,0,0,c,0,-1,1,1);let d=mm(this.viewMat3),p=Rc(o[0]/2,o[1]/2),h=Rc(-o[0]/2,-o[1]/2),f=Hf(r);Ac(d,d,p),ym(d,d,f),Ac(d,d,h),gm(this.displayViewMat3,this.displayMat3,d);let g=Em(this.viewMat2d,p);return Cm(g,g,f),Im(g,g,h),Xm(this.extent,s,o),ig(this.transform,s,o,i),Dm(this.inverseTransform,this.transform),og(this.transformNoRotation,s,o,i),this.worldScreenWidth=ag(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([u({readOnly:!0})],Qn.prototype,"id",void 0),l([u({value:1,json:{write:!0}})],Qn.prototype,"pixelRatio",null),l([u({json:{write:!0}})],Qn.prototype,"size",null),l([u()],Qn.prototype,"spatialReference",void 0),l([u({type:oe,json:{write:!0}})],Qn.prototype,"viewpoint",null),Qn=Dh=l([m("esri.views.2d.ViewState")],Qn);var Ch=Qn;var Ih,Eh,wn=Ih=class extends b{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Ih({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([u()],wn.prototype,"left",void 0),l([u()],wn.prototype,"top",void 0),l([u()],wn.prototype,"right",void 0),l([u()],wn.prototype,"bottom",void 0),wn=Ih=l([m("esri.views.2d.PaddedViewState.Padding")],wn);var Hi=Eh=class extends Ch{constructor(...e){super(...e),this.paddedViewState=new Ch,this._updateContent=(()=>{let t=jr();return()=>{let n=this._get("size"),r=this._get("padding");if(!n||!r)return;let i=this.paddedViewState;dm(t,r.left+r.right,r.top+r.bottom),pm(t,n,t),Vr(i.size,t);let o=i.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(E(()=>[this.size,this.padding],()=>this._updateContent(),Jt)),this.padding=new wn,this.size=[0,0]}set padding(e){this._set("padding",e||new wn)}set viewpoint(e){if(e){let t=e.clone();this.paddedViewState.viewpoint=e,cg(t,e,this._get("size"),this._get("padding"));let n=this._viewpoint2D,r=t.targetGeometry;n.center[0]=r.x,n.center[1]=r.y,n.rotation=t.rotation,n.scale=t.scale,n.spatialReference=r.spatialReference,this._update()}}clone(){return new Eh({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([u()],Hi.prototype,"paddedViewState",void 0),l([u({type:wn})],Hi.prototype,"padding",null),l([u()],Hi.prototype,"viewpoint",null),Hi=Eh=l([m("esri.views.2d.PaddedViewState")],Hi);var Ll=Hi;var ws=class{constructor(t){this._view=t,this.viewpoint=new oe({targetGeometry:new ge,scale:0,rotation:0})}get view(){return this._view}get size(){let[t,n]=this._view.size;return Math.sqrt(t*t+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return ng(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,n){n.pan=Lf(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);n.rotate=r>=180?360-r:r,n.sourceZoom=this.scale,n.targetZoom=t.scale}interpolate(t,n,r){let{pan:i,rotate:o,zoom:s,zoomOffset:a}=r,{center:c}=this;c.spatialReference=t.center.spatialReference,c.x=so(t.center.x,n.center.x,i),c.y=so(t.center.y,n.center.y,i),this.viewpoint.scale=so(t.scale,n.scale+a,s);let d=t.rotation,p=n.rotation;Math.abs(p-d)>=180&&(d+=360*(d<p?1:-1)),this.viewpoint.rotation=so(d,p,o)}copyFrom(t){at(this.viewpoint,t.viewpoint),this._view=t.view}};var Sh=e=>e*e,tD=e=>1-Sh(1-e);var Tk=e=>2**(10*(e-1)),nD=e=>1-Tk(1-e);function ft(e){let t=2*(e-Math.sqrt((e-1)*e)),n=t/2/e;return r=>r<n?e*r*r:t*r-t+1}function mt(e,t){return(n,r)=>n<t?t*e(n/t,r):1-e((1-n)/(1-t),r)*(1-t)}var KZ=mt(ft(1),1),JZ=mt(ft(1),0),Mh=mt(ft(1),.5),XZ=mt(ft(2),1),e4=mt(ft(2),0),t4=mt(ft(2),.5),n4=mt(ft(3),1),r4=mt(ft(3),0),i4=mt(ft(3),.5),o4=mt(ft(4),1),s4=mt(ft(4),0),a4=mt(ft(4),.5);var Vl=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};var Mr={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Th=x(y({},Mr),{maxDuration:4e3});var jl=class e{constructor(t){this._createCamera=t,this.compared=new Vl,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Mr.desiredScreenFlow},this.source=t(),this.target=t()}clone(){let t=new e(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,n,r){this.source!==t&&this.source.copyFrom(t),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow!=null?r.desiredScreenFlow:Mr.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){let n=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>1e-9}get hasFov(){return Math.abs(this.compared.fov)>1e-9}get hasRotate(){return this.compared.rotate>1e-9}};var Bl=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}};var iD=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,t)=>e+t.time,0)}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;let n=0,r=0,i=this.definition,o=this.segments.reduce((s,a)=>s||a.definition.hasZoom,!1);for(let s=0;s<this.segments.length;s++){let a=this.segments[s],c=a.definition;if(e<=a.time||s===this.segments.length-1){if(this.segmentInterpolateComponentsAt(a,a.time===0?0:e/a.time,t),i.hasPan&&!isNaN(t.pan)&&isFinite(i.compared.pan)?t.pan=(n+c.compared.pan*t.pan)/i.compared.pan:t.pan=1,i.hasRotate&&!isNaN(t.rotate)&&isFinite(i.compared.rotate)?t.rotate=(r+c.compared.rotate*t.rotate)/i.compared.rotate:t.rotate=1,o&&!isNaN(t.zoom)&&isFinite(c.compared.targetZoom)){let{sourceZoom:d,targetZoom:p}=c.compared,h=t.zoom*(p-d)+d,f=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,w=Math.abs(p-f)>Math.abs(d-f)?p:d;t.zoomOffset=w-g,t.zoom=(h-f)/(w-f)}else t.zoom=1;return t}e-=a.time,n+=c.compared.pan,r+=c.compared.rotate}}segmentInterpolateComponentsAt(e,t,n){e.interpolateComponentsAt(t,n)}};var $i=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){let t=this.definition,n=t.compared,r=n.sourceZoom,i=n.targetZoom;this._zoomSign=r>i?1:-1,this._panPixelsAtSource=n.pan*t.source.pixelsPerPanAtZoom(r);let o=(t.source.pixelsPerRotateAtZoom(r)+t.target.pixelsPerRotateAtZoom(i))/2;this._rotatePixels=n.rotate*o}_updatePixelFlow(){let t=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:r,hasPan:i,hasRotate:o}=this.definition,s=0,a=0;r&&(i&&(s=(n/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),o&&(a=this._zoomSign*(Math.log(t/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;let c=this.definition.desiredPixelFlow;if(r&&i&&o){let d=s+a+s*a;this._zoomPixelFlow=s*a/d*c,this._panPixelFlow=a/d*c,this._rotatePixelFlow=s/d*c}else if(r&&i){let d=1+s;this._zoomPixelFlow=s/d*c,this._panPixelFlow=1/d*c}else if(r&&o){let d=1+a;this._zoomPixelFlow=a/d*c,this._rotatePixelFlow=1/d*c}else if(i&&o){let d=this._panPixelsAtSource/this._rotatePixels,p=1+d;this._panPixelFlow=d/p*c,this._rotatePixelFlow=1/p*c}else i?this._panPixelFlow=c:r?this._zoomPixelFlow=c:o&&(this._rotatePixelFlow=c);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/kk:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){let t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=t*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){let n=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(n*(n/r)**-t-n)/(r-n)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){let{segmentStart:n,segmentEnd:r}=this.definition;return console.log(n,r,n+t*(r-n)),n+t*(r-n)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){let n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*t*this._time)-1))/(n*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,n){t=Math.min(Math.max(t,0),1),n.zoom=this._interpolateComponentsZoom(t),n.pan=this._interpolateComponentsPan(t),n.rotate=this._interpolateComponentsRotate(t),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(t)}},kk=zf(90);function oD(e,t,n){let r=t-e.compared.sourceZoom,i=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(n.ascensionFactor*Math.LN2*e.compared.pan+i)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*i)}function sD(e,t,n){let r=1/t,i=Math.log(e.compared.sourceZoom*r),o=1/e.desiredPixelFlow,s=1/Math.LN2,a=t-e.compared.sourceZoom,c=1/a,d=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*o*s*c*d-e.halfWindowSize*i*o*s*c+e.halfWindowSize*i*o*s*d/(a*a)}function aD(e,t,n){let r=t-e.compared.sourceZoom,i=1/r,o=1/t,s=Math.log(e.compared.sourceZoom*o),a=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*o*a+2*i*s+2*o-2*s*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function lD(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function cD(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function uD(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function dD(e,t,n){return-e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function pD(e,t,n){return e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function hD(e,t,n){return-2*e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function fD(e,t,n){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function mD(e,t,n){let r=Math.log(t/e.compared.targetZoom),i=1/e.desiredPixelFlow,o=1/Math.LN2,s=-t+e.compared.targetZoom,a=1/s,c=(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*i*o*a+e.halfWindowSize*r*i*o*c/(s*s)+e.halfWindowSize*i*o*a*c/t}function gD(e,t,n){let r=t-e.compared.targetZoom,i=1/r,o=1/t,s=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+n.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*o*a-2*i*s+2*o+2*s*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function yD(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function vD(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function wD(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function bD(e){let t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));let n=Math.LN2*e.compared.pan,r=t,i=e.halfWindowPanAtZoom(r),o=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*i);return e.compared.sourceZoom<=e.compared.targetZoom?o*(n-i):o*(n+i)}function _D(e,t){let n=Ak(e,t),r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},i=r.ascensionFactor===0,o=r.descensionFactor===0,s=i?lD:oD,a=i?cD:sD,c=i?uD:aD,d=o?yD:fD,p=o?vD:mD,h=o?wD:gD,f=X=>s(e,X,r)+dD(e,X,r)+d(e,X,r),g=X=>a(e,X,r)+pD(e,X,r)+p(e,X,r),w=X=>c(e,X,r)+hD(e,X,r)+h(e,X,r),I=f(n),ne=bD(e),J,Se=t.maximumIterations||20,U=t.maximumDistance!=null?t.maximumDistance:1/0;for(J=0;J<Se;J++){let X=t.desiredSlope??1e-6,Me=g(n);Math.abs(Me)>X&&(Me+=X);let be=Me/w(n);if(isNaN(be)||n>=U&&be<0){if(!isFinite(U))return null;n=U,I=f(n);break}if(n-=be,n<e.compared.sourceZoom||n<e.compared.targetZoom)return null;let Ge=f(n);if(Math.abs(Ge-I)/I<=.005)break;I=Ge}return I>ne*(1-.3)||n<e.compared.sourceZoom||n<e.compared.targetZoom?null:n}function Ak(e,t){let n=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<n?t.maximumDistance!=null?n+(t.maximumDistance-n)/2:1.5*n:t.maximumDistance?Math.min(t.maximumDistance,r):r}var Ul=class extends iD{constructor(t,n){super(),this._preallocSegments=[new $i,new $i,new $i],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,n)}update(t,n){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();let r=n?.apex?_D(t,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,n,r){t.interpolateComponentsAt(n,r),t===this._ascensionSegment?r.zoom=tD(r.zoom):t===this._descensionSegment&&(r.zoom=Sh(r.zoom))}_updateWithApex(t,n){let[r,i,o]=this._preallocSegments,s=n?.ascensionFactor??.5,a=Math.min(1-s,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),c=1-s-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*s,r.definition.compared.rotate=this.definition.compared.rotate*s,r.definition.segmentEnd=s,r.update(),this._ascensionSegment=r,this.segments.push(r),c>0&&(i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.copyFrom(this.definition),i.definition.compared.sourceZoom=t,i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*c,i.definition.compared.rotate=this.definition.compared.rotate*c,i.definition.segmentStart=r.definition.segmentEnd,i.definition.segmentEnd=r.definition.segmentEnd+c,i.update(),this.segments.push(i)),o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.compared.sourceZoom=t,o.definition.compared.pan=this.definition.compared.pan*a,o.definition.compared.rotate=this.definition.compared.rotate*a,o.definition.segmentStart=s+c,o.update(),this._descensionSegment=o,this.segments.push(o)}_updateWithoutApex(){let[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};var Nk=new Bl,DD=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=Mh,this.definition=new jl(e),this.path=new Ul}update(e,t,n){this.definition.update(e,t,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings(hf(isFinite(this.path.time)?this.path.time:0),n),this._easing=n.easing??(this._time>=1e3?Mh:nD)}cameraAt(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);let n=this.path.interpolateComponentsAt(e,Nk);t.interpolate(this.definition.source,this.definition.target,n)}_normalizedEasing(e){let t=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(n-t)}_applyTimeSettings(e,t){let n=t.speedFactor!=null?t.speedFactor:1,r=t.minDuration??Mr.minDuration/n,i=t.maxDuration??Mr.maxDuration/n;return e=t.duration!=null?t.duration:Math.min(Math.max(e/n,r),i)}};var CD=2e3,Rk=64,kh=class{constructor(t){this._view=t,this._animation=new DD(()=>new ws(this._view)),this._current=new ws(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,n,r={}){at(this._current.viewpoint,t),at(this._source.viewpoint,t),at(this._target.viewpoint,n),this._animation.update(this._source,this._target,r)}applyRatio(t,n){this._animation.cameraAt(n,this._current),at(t,this._current.viewpoint)}},zi=class extends b{constructor(e){super(e),this._animation=null,this._destinationViewState=new Ll,this.updateFunction=null,this.easing=Rm.ease,this.viewpoint=new oe({targetGeometry:new ge,scale:0,rotation:0}),this._updateTask=vt({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new kh(e.view)}destroy(){this._updateTask=_e(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,t,n){this.stop();let r=this.viewpoint;at(r,t);let i=(typeof n?.easing=="string"?Om(n.easing):n?.easing)||this.easing,o=e.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(t.scale,o.scale)*Rk,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:n?.duration,maxDuration:n?.animationMode==="auto"?1/0:n?.maxDuration??Th.maxDuration,speedFactor:n?.speedFactor,easing:typeof i=="function"?a=>i(a):void 0}),n?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,Ok(this._transition.animation,n,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));let s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;let n=new vs({target:e.clone()}),r=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){let t=this.animation;if(t&&t.state!==vs.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{let n=performance.now()-this._startTime,r=this._transition.duration,i=r>0?n/r:1,o=i>=1;this._transition.applyRatio(this.viewpoint,i),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Ok(e,t,n,r){if(t?.duration!=null)return!0;let{time:i,isLinear:o}=e,s=t?.speedFactor||1,a=t?.maxDuration??Th.maxDuration/s;if(fe("esri-goto-debug")&&(console.log("speed factor:",s),console.log("adjusted duration:		",i),console.log("adjusted max duration:	",a),console.log("is linear:",o)),i>a)return fe("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(o){let d=jr(),p=ie(...r.toScreen(d,...n.center)),h=ie(...n.toScreen(d,...r.center)),f=h!=null&&h.x>-(1.5-.5)*n.size[0]&&h.x<(1.5+.5)*n.size[0]&&h.y>-(1.5-.5)*n.size[1]&&h.y<(1.5+.5)*n.size[1],g=p!=null&&p.x>-(1.5-.5)*r.size[0]&&p.x<(1.5+.5)*r.size[0]&&p.y>-(1.5-.5)*r.size[1]&&p.y<(1.5+.5)*r.size[1];if(fe("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,f),console.log(`start is within ${1.5} screens at dest view:`,g)),i>CD/s&&!f&&!g)return fe("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${CD/1e3/s}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}l([u()],zi.prototype,"easing",void 0),l([u()],zi.prototype,"view",void 0),l([u()],zi.prototype,"viewpoint",void 0),zi=l([m("esri.views.2d.AnimationManager")],zi);var ID=zi;var Hl=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;let{allLayerViews:n,graphicsView:r,labelManager:i,state:{id:o}}=this.view;n.forEach(this._updateLayerView,this),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;let t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=E(()=>t.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=vt(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();let n=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==n.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=n.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}};var bs=class extends b{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}goTo(e,t){return _(this,null,function*(){if(!e)return void M.getLogger(this).error("#goTo()","target cannot be null or undefined");let n=new vs;this.view.animation=n,yield Tn(()=>this.view.ready,t);let r=x(y({},t),{animate:t?.animate??!Us(),animationMode:t?.animationMode??"auto"}),{extent:i,spatialReference:o,size:s,viewpoint:a,constraints:c,padding:d,allLayerViews:p}=this.view,h=Jm(e,{extent:i,spatialReference:o,size:s,viewpoint:a,constraints:c,padding:d,allLayerViews:p,pickClosestTarget:t?.pickClosestTarget??!0});return n?.update(h),this._gotoTask={},r.animate?this._gotoAnimated(h,r):this._gotoImmediate(h,r)})}_gotoImmediate(e,t){let n=this._gotoTask,r=this.view.animation,i=e.then(o=>{if(nt(t),n!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(n,r,i,t)}_gotoAnimated(e,t){let n=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();let i=e.then(o=>{if(nt(t),n!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");return r.update(o),this.view.animationManager.animate(r,this.view.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,r,i,t)}_cancellableGoTo(e,t,n,r){let i=()=>e===this._gotoTask;return af(n,r).finally(()=>{i()&&(t.done||t.stop())})}};l([u({constructOnly:!0})],bs.prototype,"view",void 0),bs=l([m("esri.views.2d.GoToManager")],bs);function se(){return Promise.all([import("./chunk-GXOB6CHJ.js"),import("./chunk-FHU7GLJR.js")])}var _s=()=>se().then(()=>import("./chunk-WFXYRLSB.js")),qi=()=>se().then(()=>import("./chunk-N3RVFHPD.js")),ED={"base-dynamic":()=>se().then(()=>import("./chunk-AXOSIZMI.js")),"base-tile":_s,"bing-maps":_s,catalog:()=>se().then(()=>import("./chunk-G3SB2TE6.js")),"catalog-dynamic-group":()=>se().then(()=>import("./chunk-ZMP4SLRB.js")),"catalog-footprint":()=>se().then(()=>import("./chunk-2Q3HOSTB.js")),csv:qi,"geo-rss":()=>se().then(()=>import("./chunk-MTDGQT76.js")),feature:qi,geojson:qi,graphics:()=>se().then(()=>import("./chunk-WBYHT7SH.js")),group:()=>se().then(()=>import("./chunk-CYFN54RH.js")),imagery:()=>se().then(()=>import("./chunk-XWE4DPGT.js")),"imagery-tile":()=>se().then(()=>import("./chunk-B3WVX3DG.js")),kml:()=>se().then(()=>import("./chunk-KEH63BZO.js")),"knowledge-graph":()=>se().then(()=>import("./chunk-TE43Q2Z6.js")),"link-chart":()=>se().then(()=>import("./chunk-TE43Q2Z6.js")),"knowledge-graph-sublayer":qi,"map-image":()=>se().then(()=>import("./chunk-DDEG4CDE.js")),"map-notes":()=>se().then(()=>import("./chunk-25TMVSQF.js")),media:()=>se().then(()=>import("./chunk-MCUO5LNA.js")),"ogc-feature":()=>se().then(()=>import("./chunk-3K6CKET6.js")),"open-street-map":_s,"oriented-imagery":qi,route:()=>se().then(()=>import("./chunk-ZPWN6FYM.js")),stream:()=>se().then(()=>import("./chunk-FT7SWIMC.js")),"subtype-group":()=>se().then(()=>import("./chunk-GF6XSHAS.js")),tile:_s,"vector-tile":()=>se().then(()=>import("./chunk-5ZMBYUWP.js")),video:()=>se().then(()=>import("./chunk-7ACD7LAN.js")),wcs:()=>se().then(()=>import("./chunk-B3WVX3DG.js")),"web-tile":_s,wfs:qi,wms:()=>se().then(()=>import("./chunk-LRA25XZI.js")),wmts:()=>se().then(()=>import("./chunk-4UKNON6P.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Pk(e){let t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new k(`${n}:view-not-supported`,`${t} is not supported in 2D`)}var Ah={hasLayerViewModule:e=>ED[e.type]!=null,importLayerView:e=>{let t=ED[e.type];if(t==null)throw Pk(e);return t(e)}};function SD(e,t){let{spatialReference:n}=t,r=[t.x,t.y],i=Number.POSITIVE_INFINITY,o=0,s=0,a=[0,0],c=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(let d of c)for(let p=0;p<d.length-1;p++){Uf(a,r,d,p);let h=hm(r,a);h<i&&(i=h,o=a[0],s=a[1])}return{coordinate:new ge({x:o,y:s,spatialReference:n}),distance:i}}var Nh,Yn=Nh=class extends Fr(b){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Lr(this.geometry,this.spatialReference)}catch(e){return M.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;let n=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Fs(this.normalizedGeometry,n):Vf(this.normalizedGeometry,n))return e;let{coordinate:r}=SD(this.normalizedGeometry,n);return r&&(e.targetGeometry=r),e}clone(){return new Nh({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};l([u({constructOnly:!0})],Yn.prototype,"geometry",void 0),l([u({readOnly:!0})],Yn.prototype,"normalizedGeometry",null),l([u({constructOnly:!0})],Yn.prototype,"spatialReference",void 0),Yn=Nh=l([m("esri.views.2d.constraints.GeometryConstraint")],Yn);var Rh,Ds=Rh=class extends Fr(b){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Rh({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([u()],Ds.prototype,"enabled",void 0),l([u()],Ds.prototype,"rotationEnabled",void 0),Ds=Rh=l([m("esri.views.2d.constraints.RotationConstraint")],Ds);var Oh=Ds;var Ph,ze=Ph=class extends Fr(b){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:n,maxScale:r,minZoom:i,maxZoom:o}=this,s=-1,a=-1,c=!1,d=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!t?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);t=t.map(p=>p.clone()),t.sort((p,h)=>h.scale-p.scale),t.forEach((p,h)=>p.level=h);for(let p of t)!c&&n>0&&n>=p.scale&&(s=p.level,c=!0),!d&&r>0&&r>=p.scale&&(a=e?e.level:-1,d=!0),e=p;i===-1&&(i=n===0?0:s),o===-1&&(o=r===0?t.length-1:a),i=Math.max(i,0),i=Math.min(i,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),i>o&&([i,o]=[o,i]),n=t[i].scale,r=t[o].scale,t.splice(0,i),t.splice(o-i+1,t.length),t.forEach((p,h)=>{this._lodByScale[p.scale]=p,this._scales[h]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;let n=this.effectiveMinScale,r=this.effectiveMaxScale,i=e.targetGeometry,o=t&&t.targetGeometry,s=r!==0&&e.scale<r,a=n!==0&&e.scale>n;if(s||a){let c=a?n:r;if(t&&o){let d=(c-t.scale)/(e.scale-t.scale);i.x=o.x+(i.x-o.x)*d,i.y=o.y+(i.y-o.y)*d}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);let t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);let t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];let n=Math.floor(e),r=Math.ceil(e);return t[n]+(e-n)*(t[r]-t[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;let t=this._scales,n,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(n=t[i],r=t[i+1],r===e)return i+this.effectiveMinZoom+1;if(n>e&&r<e)return i+this.effectiveMinZoom+1-(e-r)/(n-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;let t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}clone(){return new Ph({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,n)=>Math.abs(n-e)<=Math.abs(t-e)?n:t,this._scales[0])),this._lodByScale[e].scale}};l([u({readOnly:!0})],ze.prototype,"effectiveLODs",void 0),l([u({readOnly:!0})],ze.prototype,"effectiveMinZoom",void 0),l([u({readOnly:!0})],ze.prototype,"effectiveMaxZoom",void 0),l([u({readOnly:!0})],ze.prototype,"effectiveMinScale",void 0),l([u({readOnly:!0})],ze.prototype,"effectiveMaxScale",void 0),l([u()],ze.prototype,"lods",void 0),l([u()],ze.prototype,"minZoom",void 0),l([u()],ze.prototype,"maxZoom",void 0),l([u()],ze.prototype,"minScale",void 0),l([u()],ze.prototype,"maxScale",void 0),l([u()],ze.prototype,"snapToZoom",void 0),ze=Ph=l([m("esri.views.2d.constraints.ZoomConstraint")],ze);var Fh=ze;var Fk={base:null,key:"type",typeMap:{extent:Vt,polygon:Zf}},pe=class extends b{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new B}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){let e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Yn({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Oh({rotationEnabled:this.rotationEnabled})}get _zoom(){let e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,n=this.minZoom,r=this.maxZoom,i=this.minScale,o=this.maxScale,s=this.snapToZoom;return e&&e.lods===t&&e.minZoom===n&&e.maxZoom===r&&e.minScale===i&&e.maxScale===o&&e.snapToZoom===s?e:new Fh({lods:t,minZoom:n,maxZoom:r,minScale:i,maxScale:o,snapToZoom:s})}canZoomInTo(e){let t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){let t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(n=>n.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([u({readOnly:!0})],pe.prototype,"effectiveLODs",null),l([u({readOnly:!0})],pe.prototype,"effectiveMinScale",null),l([u({readOnly:!0})],pe.prototype,"effectiveMaxScale",null),l([u({readOnly:!0})],pe.prototype,"effectiveMinZoom",null),l([u({readOnly:!0})],pe.prototype,"effectiveMaxZoom",null),l([u({types:Fk,value:null})],pe.prototype,"geometry",null),l([u({type:[tm]})],pe.prototype,"lods",void 0),l([u()],pe.prototype,"minScale",void 0),l([u()],pe.prototype,"maxScale",void 0),l([u()],pe.prototype,"minZoom",void 0),l([u()],pe.prototype,"maxZoom",void 0),l([u()],pe.prototype,"rotationEnabled",void 0),l([u()],pe.prototype,"snapToZoom",void 0),l([u({type:B})],pe.prototype,"customConstraints",void 0),l([u()],pe.prototype,"view",void 0),l([u({readOnly:!0})],pe.prototype,"version",null),l([u({type:Yn,readOnly:!0})],pe.prototype,"_geometry",null),l([u({type:Oh})],pe.prototype,"_rotation",null),l([u({readOnly:!0,type:Fh})],pe.prototype,"_zoom",null),pe=l([m("esri.views.2d.MapViewConstraints")],pe);var Lh=pe;var Pe=class extends b{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([E(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Jt)])}get center(){if(!this.ready)return this._get("center");let{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new ge({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(r){return void M.getLogger(this).error(new k("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}let n=this.viewpoint;Bc(n,n,t),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void M.getLogger(this).error(new k("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(r){return void M.getLogger(this).error(new k("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}let n=this.viewpoint;eg(n,n,t,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);let t=this.viewpoint;dg(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);let n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}let t=this.viewpoint;Uc(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,n;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new k("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new k("mapview:invalid-viewpoint","geometry not defined"))}catch(i){n=new k("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:i})}if(n)return void M.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;let r=new oe({targetGeometry:new ge,scale:0,rotation:0});at(r,t),this.constraints?.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);let r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}let t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);let n=this.viewpoint;Uc(n,n,t),this.viewpoint=n,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};let{padding:t,constraints:n}=this,r=this._get("center"),i=this._get("extent"),o=this._get("scale"),s=this._get("rotation"),a=this._get("viewpoint"),c=this._get("zoom"),d=c!=null&&n!=null&&n.zoomToScale(c)||void 0,p,h,f,g=a?.rotation,w=a?.targetGeometry;w?.type==="extent"?p=w:w?.type==="point"&&(h=w,f=a?.scale);let I=i??p;return{center:r??h??I?.center,rotation:s??g,scale:(o??d??f??(I&&zs(I,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,n,r){let i=e.targetGeometry;try{this._project(e,n)}catch(o){M.getLogger(this).warn(new Ic("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:n,error:o})),e.targetGeometry=r||new ge({x:0,y:0,spatialReference:n})}this.constraints?.fit(e),this._set("state",new Ll({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);let{center:[e,t],spatialReference:n,rotation:r,scale:i}=this.state.paddedViewState,o=new ge({x:e,y:t,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",i),this._set("state",null)}changeSpatialReference(e){let t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{let a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}let n=t.clone(),[r,i]=t.center,o=null;try{o=this._project(new ge({x:r,y:i,spatialReference:t.spatialReference}),e)}catch(a){Of()||M.getLogger(this).warn(new Ic("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:a}))}o||(o=new ge({x:0,y:0,spatialReference:e}));let s=Bc(new oe({targetGeometry:new ge,scale:0,rotation:0}),t.viewpoint,o);n.viewpoint=s;try{let c=[t.size[0]/2,t.size[1]/2],d=[c[0]+20,c[1]],p=t.toMap([0,0],d),{x:h,y:f}=this._project(new ge({x:p[0],y:p[1],spatialReference:t.spatialReference}),e);p[0]=h,p[1]=f,n.toScreen(p,p);let g=lg(c,p,d),w=Math.hypot(p[0]-c[0],p[1]-c[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(s.rotation=0,s.targetGeometry=new ge({x:0,y:0,spatialReference:e})):(s.scale*=w,s.scale>fe("mapview-srswitch-adjust-rotation-scale-threshold")?s.rotation=0:s.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(s,void 0),this._get("state").viewpoint=s}resize(e,t){if(!this.ready)return;let n=this.state,r=this.state.paddedViewState.viewpoint,i=this.state.paddedViewState.size.concat();n.size=[e,t],ug(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints?.constrain(r,void 0)??r,this.state.viewpoint=r}toMap(e){if(!this.ready)return null;let t=[0,0],[n,r]=this.state.toMap(t,[e.x,e.y]),i=this.state.spatialReference;return new ge({x:n,y:r,spatialReference:i})}toScreen(e,t){if(!this.ready)return null;let n=this._project(e,this.state.spatialReference),r=[n.x,n.y];return t?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(r,r),this.state.toScreen(r,r),ie(r[0],r[1])}_project(e,t){let n=e?.targetGeometry||e;if(!t)return e;if(!n)return null;if(t.imageCoordinateSystem||n.spatialReference?.imageCoordinateSystem||Os(t,n.spatialReference))return e;let r=Lr(n,t);if(!r)throw new k("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:t});return Lk(e)?(e.targetGeometry=r,e):r}};function Lk(e){return e?.declaredClass==="esri.Viewpoint"}l([u({type:ge})],Pe.prototype,"center",null),l([u()],Pe.prototype,"constraints",void 0),l([u({type:Vt})],Pe.prototype,"extent",null),l([u({value:{top:0,right:0,bottom:0,left:0},cast:e=>y({top:0,right:0,bottom:0,left:0},e)})],Pe.prototype,"padding",null),l([u()],Pe.prototype,"ready",void 0),l([u()],Pe.prototype,"resizeAlign",void 0),l([u({readOnly:!0})],Pe.prototype,"resolution",null),l([u({type:Number})],Pe.prototype,"rotation",null),l([u({type:Number})],Pe.prototype,"scale",null),l([u({readOnly:!0})],Pe.prototype,"state",void 0),l([u({type:oe})],Pe.prototype,"viewpoint",null),l([u()],Pe.prototype,"zoom",null),Pe=l([m("esri.views.2d.ViewStateManager")],Pe);function Gi(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}var Cs=class extends z{constructor(t,n){super(!0),this._view=t,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(t,n){Gi(t.data,"primary")&&(t.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}};var $l=class extends z{constructor(t,n,r){super(!0),this.view=t,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(t){let{data:n}=t,{pointerType:r}=n;if(r!==this.pointerType)return;t.stopPropagation();let{action:i,delta:o}=n,{view:s}=this,{mapViewNavigation:a}=s;switch(i){case"begin":{let{scale:c}=s;this._startScale=c,this._currentScale=c,this._previousDelta=o,a.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;let c=1.015**o.y,d=this._startScale*c,p=d/this._currentScale;a.setViewpointImmediate(p),this._currentScale=d;break}case"end":{let{constraints:c}=s,{effectiveLODs:d,snapToZoom:p}=c;if(!p||!d)return void a.end();let h=c.snapScale(this._currentScale),f=(o.y>0?Math.max(h,c.snapToPreviousScale(this._startScale)):Math.min(h,c.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}};var Zt=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){let n=t.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}};var zl=class extends z{constructor(t,n,r){super(!0),this.view=t,this.pointerAction=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new Zt({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&Gi(r.data,this.pointerAction)})}_handleDrag(t){let n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}};var ql=class extends z{constructor(t,n,r){super(!0),this._view=t,this.pointerAction=n;let i=this._view.mapViewNavigation;this._dragEventSeparator=new Zt({start:(o,s)=>{i.rotate.begin(this._view,s.data),s.stopPropagation()},update:(o,s)=>{i.rotate.update(this._view,s.data),s.stopPropagation()},end:(o,s)=>{i.rotate.end(),s.stopPropagation()},condition:(o,s)=>o===1&&Gi(s.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this._dragEventSeparator.handle(o))}};function At(e){let t=e*e;return e<0&&(t*=-1),t}function MD(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function xD(e,t,n){let r=n,i=e.state,o=e.device,s=t.tiltDirection==="forward-down"?1:-1,a=1;return o.deviceType==="standard"?(r.translation[0]=At(i.axes[0]),r.translation[1]=At(i.axes[1]),r.translation[2]=At(i.buttons[7])-At(i.buttons[6]),r.heading=At(i.axes[2]),r.tilt=At(i.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*At(i.axes[0]),r.translation[1]=1.2*At(i.axes[1]),r.translation[2]=2*-At(i.axes[2]),r.heading=1.2*At(i.axes[5]),r.tilt=1.2*At(i.axes[3])),r.tilt*=s,$f(r.translation,r.translation,a),r}function TD(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}var Gl=class extends z{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Ss,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([E(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=vt({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},ae)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){let n=this._view.navigation.gamepad.device;n&&t.data.device!==n||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,MD(this._transformation)):(this._currentDevice=t.data.device,xD(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){let n=this._transformation;if(TD(n))return;let r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,o=jk*i*t;hg(r,r,[n.translation[0]*o,-n.translation[1]*o]);let s=1+n.translation[2]*Bk*t,a=this._view.constraints.rotationEnabled?-n.heading*Vk*t:0,c=this._view.size,d=[c[0]/2,c[1]];pg(r,r,s,a,d,c);let p=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=p}},Vk=.06,jk=.7,Bk=6e-4;function Wl(e){let t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),{remove:()=>document.addEventListener("visibilitychange",t)}}var Zl=class extends z{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{let o=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(o==null)return;i.stopPropagation(),i.preventDefault();let s=i.type==="key-down";if(this._pressedKeys[s?"add":"delete"](o),s){if(this._direction===o)return;this._direction=o,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{let a=this._timeout===void 0,c=this._pressedKeys.size>0;a||c?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Wl(i=>i?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){let n=this._currentDirection!=null;if(t!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}};var Ql=class extends z{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Wl(i=>i?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,n){let r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;let i=this._keyToDirection[t.data.key];if(this._pressed=i!=null,this._pressed){if(t.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Wi;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Wi||(Wi={}));var Yl=class extends z{constructor(t,n,r){super(!0),this.view=t,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=Wi.IN),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=Wi.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){let n=t.modifiers;if(n.size>0&&!n.has("Shift"))return;let{key:r}=t.data;if(!(r in this._keysToZoomAction))return;let i=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view,s=null;switch(i){case Wi.IN:s=o.zoomIn();break;case Wi.OUT:s=o.zoomOut();break;default:return}o.begin(),s.then(()=>o.end()),t.stopPropagation()}};var Uk=.6,Kl=class extends z{constructor(t,n){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;let n=this._view.mapViewNavigation,{x:r,y:i,deltaY:o}=t.data,s=1/Uk**(1/60*o),a=n.zoom(s,[r,i]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}};var Jl=class extends z{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());let n=this.view.mapViewNavigation;this._dragEventSeparator=new Zt({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Vh(e){let t=e.native;return t?{buttons:t.buttons.map(n=>n.pressed?n.value||1:0),axes:t.axes.map(n=>Hk(n,e.axisThreshold))}:{buttons:[],axes:[]}}function kD(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(let n=0;n<e.buttons.length;n++)if(e.buttons[n]!==t.buttons[n])return!1;return!0}function AD(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Hk(e,t){let n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}var Xl=class{constructor(t,n){this._element=t,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{let s=o.gamepad,a=s.index,c=this._inputDevices[a];c&&(this._emitGamepadEvent(s,Vh(c),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;let r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(ND(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){let n=new Ui(t);n.deviceType!=="unknown"&&(this._inputDevices[t.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=vt({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){let t=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!n;ND(i=>{let o=this._inputDevices[i.index];if(!o)return;let s=this._latestUpdate[i.index],a=Vh(o),c=r||AD(a);s&&(s.timestamp===i.timestamp||!s.active&&c||kD(s.state,a))||this._emitGamepadEvent(i,a,!c)})}_emitGamepadEvent(t,n,r){let i=this._latestUpdate[t.index],o=i&&i.active;if(!o&&!r)return;let s=!o&&r?"start":o&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:n,action:s})}};function $k(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function ND(e){let t=window.navigator.getGamepads();for(let n=0;n<t.length;n++){let r=t[n];$k(r)&&e(r)}}var RD=fe("edge"),zk=fe("chrome"),qk=fe("ff"),Gk=fe("safari"),OD="esri-view-surface",Zi={touchNone:`${OD}--touch-none`,touchPan:`${OD}--touch-pan`},PD=(()=>{class e{constructor(n,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=n,n.getAttribute("tabindex")||n.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Xl(n,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(n=>{this._releasePointerCaptureSafe(n)}),this._gamepadSource=ue(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(n){this._browserTouchPanningEnabled=n,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(n){this._callback=n}set activeEvents(n){for(let r in this._active)if(!n||!n.has(r)){let i=this._active[r];this._element.removeEventListener(jh[r],i),delete this._active[r]}n&&n.forEach(r=>{if(!this._active[r]&&jh[r]){let i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(jh[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=n?.has("gamepad")??!1}setPointerCapture(n,r){r?this._setPointerCatpureSafe(n.pointerId):(this._releasePointerCaptureSafe(n.pointerId),this._activePointerCaptures.delete(n.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Zi.touchNone:Zi.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Zi.touchPan:Zi.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Zi.touchNone),this._element.classList.remove(Zi.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(n){try{this._element.setPointerCapture(n),this._activePointerCaptures.add(n)}catch{}}_releasePointerCaptureSafe(n){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(n))return;this._element.releasePointerCapture(n)}catch{}}_updateNormalizedPointerLikeEvent(n,r){let i=hh(this._element,n);return e.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(n,r){let{key:i}=r;i&&n==="key-up"&&this._keyDownState.delete(i);let o={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&n==="key-down"&&this._keyDownState.add(o.key),this._callback(n,o)}_handlePointer(n,r){let i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(n,i)}_handlePointerPreventDefault(n,r){let i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(n,i)}_handleMouseWheel(n,r){let i=r.deltaY;switch(r.deltaMode){case 0:RD&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}RD?i*=.7:zk||Gk?i*=.6:qk&&(i*=1.375);let o=100,s=Math.abs(i);s>o&&(i=i/s*200/(1+Math.exp(-.02*(s-o))));let a=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(n,a)}_handlePointerCaptureLost(n,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(n,r)}_handleDefault(n,r){let i={native:r};r.preventDefault(),this._callback(n,i)}_preventAltKeyDefault(n){n.key==="Alt"&&n.preventDefault()}_preventMultiTouchPanning(n){n.touches.length>1&&n.preventDefault()}}return e.test={disableSubpixelCoordinates:!1},e})(),jh={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};var ec=class extends z{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};var me={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function xr(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function FD(e,t){let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function LD(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:ie()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){let[U,X]=e,[Me,be]=[X.x-U.x,X.y-U.y];return t.radius=Math.sqrt(Me*Me+be*be)/2,t.center.x=(U.x+X.x)/2,t.center.y=(U.y+X.y)/2,t}let n=0,r=0;for(let U=0;U<e.length;U++)n+=e[U].x,r+=e[U].y;n/=e.length,r/=e.length;let i=e.map(U=>U.x-n),o=e.map(U=>U.y-r),s=0,a=0,c=0,d=0,p=0,h=0,f=0;for(let U=0;U<i.length;U++){let X=i[U],Me=o[U],be=X*X,Ge=Me*Me;s+=be,a+=Ge,c+=X*Me,d+=be*X,p+=Ge*Me,h+=X*Ge,f+=Me*be}let g=.5*(d+h),w=.5*(p+f),I=s*a-c*c,ne=(g*a-w*c)/I,J=(s*w-c*g)/I,Se=ie(ne+n,J+r);return{radius:Math.sqrt(ne*ne+J*J+(s+a)/e.length),center:Se}}function Qt(e){let{native:t}=e,{pointerId:n,button:r,pointerType:i}=t;return i==="mouse"?`${n}:${r}`:`${i}`}var tc=class extends z{constructor(t=me.maximumDoubleClickDelay,n=me.maximumDoubleClickDistance,r=me.maximumDoubleTouchDelay,i=me.maximumDoubleTouchDistance,o=Pt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=ie(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Zt({start:(s,a)=>this._dragStart(s,a),update:(s,a)=>this._dragUpdate(a),end:(s,a)=>this._dragEnd(a)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=_e(t.doubleTapTimeout)})}get hasPendingInputs(){return Sn(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){let n=this._pointerState.get(t);n&&(n.doubleTapTimeout=_e(n.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,n){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:r,modifiers:i}=n,{center:o}=r;this._dragStartCenter=o;let s=Bh("begin",ie(0,0),r);this._doubleTapDrag.emit(s,void 0,i),n.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:r}=t,{center:i}=n,o=Bh("update",ie(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:r}=t,{center:i}=n,o=Bh("end",ie(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){let{data:n}=t,r=Qt(n),i=this._pointerState.get(r),{pointerType:o}=n.native;if(i){let s=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),xr(i.event.data,n)>s?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){let{data:n}=t,{pointerType:r}=n.native,i=Qt(n),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._clearPointerDown(i),o);this._pointerState.set(i,{event:t,doubleTapTimeout:s}),this.refreshHasPendingInputs()}};function Bh(e,t,n){let{button:r,buttons:i,pointer:o,pointers:s,pointerType:a,timestamp:c}=n;return{action:e,delta:t,button:r,buttons:i,pointer:o,pointers:s,pointerType:a,timestamp:c}}var ic=class extends z{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,n,r,i){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:Wk(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){let n=t.native.pointerId,r=nc(this._activePointerMap).angle,i={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);let o=rc(i,jD(this._activePointerMap));i.initialAngle=o,i.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;let n=t.native.pointerId,r=this._activePointerMap.get(n);r?r.event=t:this._addPointer(t)}_removePointer(t){let n=nc(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(n)}_updatePointerAngles(t){let n=nc(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=rc(r,n)-t,r.lastAngle=rc(r,n)-t})}_emitEvent(t,n,r){let i=nc(this._activePointerMap);this._drag.emit(this._createPayload(t,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){let n=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){let n=t.data,r=n.currentEvent,i=t.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function jD(e){let t=[];return e.forEach(n=>{t.push(ie(n.event.x,n.event.y))}),LD(t)}function nc(e){let t=jD(e),n=0;return e.forEach(r=>{let i=rc(r,t),o=i-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;i=r.lastAngle+o,r.lastAngle=i;let s=i-r.initialAngle;n+=s}),n/=e.size||1,{angle:n,radius:t.radius,center:t.center}}function Wk(e){let t=new Map;return e.forEach((n,r)=>t.set(r,n.event)),t}function rc(e,t){let n=e.event,r=n.x-t.center.x,i=n.y-t.center.y;return Math.atan2(i,r)}var VD;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(VD||(VD={}));var oc=class extends z{constructor(t=me.maximumDoubleClickDelay,n=me.maximumDoubleClickDistance,r=me.maximumDoubleTouchDelay,i=me.maximumDoubleTouchDistance,o=Pt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){let n=t.data,r=Qt(n);if(!this._pointerState.has(r)){let i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(t){let n=t.data,r=Qt(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){let o=i.immediateDoubleClick,s=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;o?(o.timeoutHandle.remove(),xr(o,t.data)>s?this._startImmediateDoubleClick(t,i):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(n))):xr(i,t.data)>s?this._removeState(n):this._startImmediateDoubleClick(t,i)}}_startImmediateDoubleClick(t,n){let r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){let n=Qt(t);this._pointerState.delete(n),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};var ac=class extends z{constructor(t=me.maximumClickDelay,n=me.movementUntilMouseDrag,r=me.movementUntilPenDrag,i=me.movementUntilTouchDrag,o=me.holdDelay,s=Pt){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=i,this._holdDelay=o,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=_e(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){let n=t.data,r=n.native.pointerId,i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{let s=this._pointerState.get(r);if(s){if(!s.isDragging){let a=s.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),s.holdEmitted=!0}s.holdTimeout=null}},this._holdDelay));let o={startEvent:n,previousEvent:n,startTimestamp:t.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){let n=t.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(sc("update",i,n),void 0,i.modifiers):FD(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(t),i.previousEvent=n)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){let n=t.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=t.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(sc("start",i,n)):this._pointerDrag.emit(sc("start",i,i.previousEvent),t.timestamp))})}_handlePointerLoss(t,n){let r=t.data,i=r.native.pointerId,o=this._pointerState.get(i);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(sc("end",o,n==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):n==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function sc(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}var lc=class extends z{constructor(t=me.maximumDoubleClickDelay,n=me.maximumDoubleClickDistance,r=me.maximumDoubleTouchDelay,i=me.maximumDoubleTouchDistance,o=Pt){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=i,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=_e(t.doubleClickTimer))}get hasPendingInputs(){return Sn(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,n){let r=this._pointerState.get(t);r&&(r.doubleClickTimer=_e(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){let n=this._pointerState.get(t);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){let n=t.data,{pointerType:r}=n.native,i=Zk(n);if(!this._pointerState.has(i))return void this._startClick(t);let o=this._pointerState.get(i),{data:s,modifiers:a}=o.event,c=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;xr(s,n)>c?(this._clearDoubleClickTimer(i,!0),this._startClick(t)):(this._clearDoubleClickTimer(i,!1),o.pointerDownCount===2&&this._doubleClick.emit(s,void 0,a))}_handlePointerDown(t){let n=Qt(t.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(t){let{data:n}=t,{native:{pointerType:r}}=n,i=Qt(n),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),o);this._pointerState.set(i,{event:t,doubleClickTimer:s,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Zk(e){let{pointerId:t,pointerType:n,button:r}=e.native;return n==="mouse"?`${t}:${r}`:`${n}`}var cc={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}},Tr=class extends b{initialize(){let e=()=>this.view?.ready;this.addHandles([it(()=>!e(),()=>this._disconnect()),it(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=ue(this._inputManager)}_connect(){let e=this.view.surface,t=new PD(e,this.view.input),n=[new oc,new ac,new lc,new ic(this.view.navigation),new tc],r=new Wm({eventSource:t,recognizers:n});r.installHandlers("prevent-context-menu",[new ec],tn.INTERNAL),r.installHandlers("navigation",[new Jl(this.view),new Gl(this.view),new Kl(this.view),new Cs(this.view),new Cs(this.view,[cc.counter]),new zl(this.view,"primary"),new Zl(this.view,cc.pan),new Yl(this.view,cc.zoom),new Ql(this.view,cc.rotate),new ql(this.view,"secondary"),new $l(this.view,"touch")],tn.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,E(()=>this.view?.navigation?.browserTouchPanEnabled,i=>{this._source&&(this._source.browserTouchPanningEnabled=!i)},ae)}get test(){}};l([u()],Tr.prototype,"view",void 0),l([u()],Tr.prototype,"latestPointerType",null),l([u()],Tr.prototype,"latestPointerLocation",null),l([u()],Tr.prototype,"multiTouchActive",null),Tr=l([m("esri.views.2d.input.MapViewInputManager")],Tr);var BD=Tr;var kr={added:[],removed:[]},Uh=new Set,Qk=new vm(0,0,0,0);function Yk(e,t){let n=Pf(t);if(!n)return null;let[r,i]=n.valid;return e[2]>i?[ao([e[0],e[1],i,e[3]]),ao([r,e[1],r+e[2]-i,e[3]])]:e[0]<r?[ao([r,e[1],e[2],e[3]]),ao([i-(r-e[0]),e[1],i,e[3]])]:null}var uc=class extends rt{constructor(t){super(),this._tiles=new Map,this._index=Mm(9,fe("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||Gf(t)===0||Wf(t)===0)return[];let n=Yk(t,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){let n={added:[],removed:[]};for(let r of t.added)if(!this.has(r)){let i=new Fc(this.tileScheme,r);this._tiles.set(r,i),this._index.insert(i),n.added.push(i)}for(let r of t.removed)if(this.has(r)){let i=this.get(r);this._tiles.delete(r),this._index.remove(i),n.removed.push(i)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(t){let n=this.tileScheme.getTileCoverage(t,0);if(!n)return;let{spans:r,lodInfo:i}=n,{level:o}=i;if(r.length>0)for(let{row:s,colFrom:a,colTo:c}of r)for(let d=a;d<=c;d++){let p=Qk.set(o,s,i.normalizeCol(d),i.getWorldForColumn(d)).id;if(Uh.add(p),!this.has(p)){let h=new Fc(this.tileScheme,p);this._tiles.set(p,h),this._index.insert(h),this.tiles.push(h),kr.added.push(h)}}for(let s=this.tiles.length-1;s>=0;s--){let a=this.tiles[s];Uh.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(s,1),this._index.remove(a),kr.removed.push(a))}(kr.added.length||kr.removed.length)&&this.emit("update",kr),wm.pool.release(n),Uh.clear(),kr.added.length=0,kr.removed.length=0}};function $D(e,t,n){return _(this,null,function*(){let r=Rl(t)?Nl(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set,o=new Set,s=!1,a=null,c=null;n?.include?HD(n.include,UD(e,f=>{i.add(f),Hh(f,g=>o.add(g))},(f,g)=>{o.add(f),i.add(g)},f=>{a||(a=new Set),a.add(f)},f=>i.add(f),()=>s=!0)):(s=!0,i=new Set(e.allLayerViews),i.forEach(f=>{Hh(f,g=>o.add(g))})),n?.exclude&&HD(n.exclude,UD(e,f=>{i.delete(f),Hh(f,g=>o.delete(g))},f=>o.delete(f),f=>{c||(c=new Set),c.add(f)}));let d=e.toMap(r),p=e.allLayerViews.filter(f=>!f.suspended&&i.has(f)&&f.clips.every(g=>vg(e,g,r,d))).reverse(),h=[...s?e.graphicsView.hitTest(d).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:d})):[],...yield Promise.all(p.map(f=>f.hitTest(d,r)).toArray())].filter(yt).flat().filter(yt);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||o.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has($h(f.graphic)))),c&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!c?.has($h(f.graphic)))),{screenPoint:r,results:h}})}function UD(e,t,n,r,i,o){return s=>{if(s instanceof xm){if(s.layer===e)o?.();else{let a=e.allLayerViews.find(c=>c.layer===s.layer);a&&i?.(a)}r($h(s))}else if(!("layer"in s&&"element"in s))if(s.type==="subtype-sublayer"){let a=e.allLayerViews.find(c=>c.layer===s.parent);a&&n(s,a)}else{let a=e.allLayerViews.find(c=>c.layer===s);a&&t(a)}}}function HD(e,t){if(e)if(_c(e))for(let n of e)if(_c(n))for(let r of n)t(r);else t(n);else t(e)}function $h(e){let t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function Hh({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(n=>{t(n)})}var zD={flipY:!0,premultipliedAlpha:!0};function qD(e,t){return _(this,null,function*(){let n=yield WD(e,t),{format:r,quality:i}=gg(t?.format,t?.quality);return fg(n,{format:r,quality:i,rotation:0,disableDecorations:!1},zD)})}function GD(e,t){return _(this,null,function*(){let n=yield WD(e,t);return mg(n,zD)})}function WD(e,t){let n=Xk(t||{},Jk(e.stage,e.size),e.size,e.padding),r=Kk(t,e.allLayerViews);return e.stage.takeScreenshot(n,r,e.backgroundColor,t?.rotation)}function Kk(e={},t){if(!e.layers)return;let n=[];return e.layers.forEach(r=>{let i=t.find(o=>o.layer.id===r.id);i?.container&&n.push(i.container)}),n}function Jk(e,t){return Math.min(4,yg(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function Xk(e,t,n,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;e.width!=null&&e.height!=null?i=[e.width,e.height]:e.width==null&&e.height!=null?i=[e.height,e.height]:e.width!=null&&e.height==null?i=[e.width,e.width]:e.width==null&&e.height==null&&(i=null);let o=n[0]-(r.left+r.right),s=n[1]-(r.top+r.bottom),a,c,d=e.area||{x:0,y:0,width:o,height:s};if(i){let p=o/s,h=i[0]/i[1];if(h>p){let f=d.width/h;d={x:d.x,y:Math.round(d.y+(d.height-f)/2),width:d.width,height:Math.round(f)}}else{let f=d.height*h;d={x:Math.round(d.x+(d.width-f)/2),y:d.y,width:Math.round(f),height:d.height}}}else i=[d.width,d.height];return i[0]>d.width?(a=Math.min(i[0]/d.width,t),c=i[0]/d.width/a):(a=1,c=i[0]/d.width),{cropArea:{x:Math.round((d.x+r.left)*a),y:Math.round((d.y+r.top)*a),width:Math.round(d.width*a),height:Math.round(d.height*a)},outputScale:c,resolutionScale:a}}var ZD=160,Qi=class extends b{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=ZD&&this.clear()},ZD))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([u()],Qi.prototype,"_timer",void 0),l([u()],Qi.prototype,"stationary",null),Qi=l([m("esri.views.2d.support.StationaryManager")],Qi);function QD(e){let t=$m();return t.available?e==="3d"&&t.majorPerformanceCaveat?new k("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new k("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new k("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new k("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function eA(e){return e&&"nodeType"in e}function tA(e){return e&&typeof e.render=="function"}var YD={component:"esri-component"},Ar=class extends b{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){let t=this._get("node");e!==t&&(e&&e.classList.add(YD.component),t&&t.classList.remove(YD.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||eA(e)?(this._set("widget",null),As(e)):(tA(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([u()],Ar.prototype,"id",null),l([u()],Ar.prototype,"node",null),l([We("node")],Ar.prototype,"castNode",null),l([u({readOnly:!0})],Ar.prototype,"widget",void 0),Ar=l([m("esri.views.ui.Component")],Ar);var Yi=Ar;var nA={left:0,top:0,bottom:0,right:0},KD={bottom:30,top:15,right:15,left:15},bn="esri-ui",qe={ui:bn,corner:`${bn}-corner`,innerContainer:`${bn}-inner-container`,manualContainer:`${bn}-manual-container`,cornerContainer:`${bn}-corner-container`,topLeft:`${bn}-top-left`,topRight:`${bn}-top-right`,bottomLeft:`${bn}-bottom-left`,bottomRight:`${bn}-bottom-right`};function rA(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function dc(e){return e===0?"0":`${e}px`}function zh(e){let t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function qh(e,{top:t,bottom:n,left:r,right:i}){e.style.top=t,e.style.bottom=n,e.style.left=r,e.style.right=i}var Yt=class extends rt.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=If(),this.view=null,this._applyViewPadding=()=>{let t=this.container;t&&qh(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let t=this._innerContainer;t&&qh(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([E(()=>[this.view?.padding,this.container],this._applyViewPadding,ae),E(()=>this.padding,this._applyUIPadding,ae),E(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},ae),Ef(e=>{this._locale=e})])}destroy(){this.container=null;for(let e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){let t=this._get("container");e!==t&&(e&&(e.classList.add(qe.ui),Af(e),this._attachContainers(e)),t&&(t.classList.remove(qe.ui),qh(t,{top:"",bottom:"",left:"",right:""}),Ns(t)),this._set("container",e))}get height(){let e=this.view?.height??0;if(e===0)return e;let t=this._getViewPadding(),{top:n,bottom:r}=t;return Math.max(e-n-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:y(y({},KD),e)}get width(){let e=this.view?.width??0;if(e===0)return e;let t=this._getViewPadding(),{left:n,right:r}=t;return Math.max(e-n-r,0)}add(e,t){let n,r,i;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));let o=zh(e);o&&({index:n,position:t,component:e,key:r}=o),t&&typeof t=="object"&&({index:n,key:r,position:t,internal:i}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n,r,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));let n=this._find(e);if(n){if(this._componentMap.has(n)&&this._componentMap.get(n)?.key!==t)return;let r=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),n.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(r,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(let i of e)this.empty(i,t);return}let n=this._positionNameToContainerLookup[e??"manual"],r=Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(i=>i==null?!1:!(this._componentMap.get(i)?.internal??!1)||t.removeInternal);for(let i of r)this.remove(i)}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let n,r=zh(e)||zh(t);if(r&&(n=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;let i=this.remove(e);i&&this.add(i,{position:t,index:n})}find(e){if(!e)return null;let t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,t)):this._getComponentsAtPosition(e,t):this._components.filter(n=>t.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:r})=>n??r)}getPosition(e){for(let t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,r,i){e instanceof Yi||(e=new Yi({node:e}));let{widget:o}=e;o!=null&&o instanceof b&&o.addHandles(En(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:r,internal:i})}_find(e){return e?e instanceof Yi?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??nA}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){let e=document.createElement("div");e.classList.add(qe.innerContainer,qe.cornerContainer);let t=document.createElement("div");t.classList.add(qe.innerContainer,qe.manualContainer);let n=document.createElement("div");n.classList.add(qe.topLeft,qe.corner),e.appendChild(n);let r=document.createElement("div");r.classList.add(qe.topRight,qe.corner),e.appendChild(r);let i=document.createElement("div");i.classList.add(qe.bottomLeft,qe.corner),e.appendChild(i);let o=document.createElement("div");o.classList.add(qe.bottomRight,qe.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;let s=kf();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":i,"bottom-right":o,"top-leading":s?r:n,"top-trailing":s?n:r,"bottom-leading":s?o:i,"bottom-trailing":s?i:o},this._positionNameToContainerLookup=y({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){let t=e.position??"manual",{component:n,index:r}=e,i=this._positionNameToContainerLookup[t],o=r!=null&&r>-1;if(rA(n.widget)&&n.widget.startup(),!o)return void i.appendChild(n.node);let s=Array.from(i.children);if(r===0)return void(i.firstChild?Mc(n.node,i.firstChild):i.appendChild(n.node));r>=s.length?i.appendChild(n.node):Mc(n.node,s[r])}_toPixelPosition(e){return{top:dc(e.top),left:dc(e.left),right:dc(e.right),bottom:dc(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){let n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(r=>this._findByNode(r)).filter(yt).filter(r=>t.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}};l([u()],Yt.prototype,"_locale",void 0),l([u()],Yt.prototype,"container",null),l([u()],Yt.prototype,"height",null),l([u({value:KD})],Yt.prototype,"padding",null),l([We("padding")],Yt.prototype,"castPadding",null),l([u()],Yt.prototype,"view",void 0),l([u()],Yt.prototype,"width",null),Yt=l([m("esri.views.ui.UI")],Yt);var JD=Yt;var iA=new Map;function XD(e){return iA.get(e)}function e0(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function oA(e,t){return e.length!==t.length||e.some((n,r)=>n.text!==t[r].text)}function Is(e,t,n){!n||!t||e.find(r=>r.layerView===t&&r.text===n)||e.push({text:n,layerView:t})}function sA(e){return e.type==="bing-maps"}var _n=[],Ki=class extends b{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new B,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");let n=this.view?.allLayerViews;n&&(this.addHandles(n.map(r=>E(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(r=>{r.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(r.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([Ft(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),it(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){let e=this.view,t=e?.allLayerViews;if(_n.length=0,!e||!t)return void this._clear();t.forEach(r=>{if(r.suspended||!r.layer?.attributionVisible)return;let i=r.layer;if(e0(i,"user"))return void Is(_n,r,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(r)){let s=this._fetchedAttributionData.get(r);return void(s?Is(_n,r,this._getDynamicAttribution(s,e,i)):e0(i)&&Is(_n,r,i.copyright))}return void this._fetchAttributionData(r)}let o="portalItem"in i?i.portalItem?.accessInformation:void 0;Is(_n,r,o||i.copyright)});let n=t.find(r=>r.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){let r=XD(this.view);if(r){let i=r.getAttributionText();for(let o=0;o<i.length;++o)Is(_n,n,i[o])}}oA(this.items,_n)&&(this.items.removeAll(),this.items.addMany(_n)),_n.length=0,this.notifyChange("state")}_fetchAttributionData(e){return _(this,null,function*(){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);let t=yield xf(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){let n=t.ok?this._createContributionIndex(t.value,sA(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()})}_createContributionIndex(e,t){let n=e.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){let o=n[i],s=o.coverageAreas;if(!s)return;for(let a of s){let c=a.bbox,d=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),h=new Vt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:Xt.WGS84}),f={extent:Ps(h),attribution:o.attribution||"",score:a.score!=null?a.score:100,id:i};for(let g=d;g<=p;g++)r[g]??=[],r[g].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,n){let{extent:r,scale:i}=t,o=n.tileInfo?.scaleToZoom(i)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!r||o==null||o<=-1)return"";let s=e[o],a=Ff(r.center.clone().normalize(),t.spatialReference),c=new Set;return s?s.filter(d=>{let p=d.id,h=!c.has(p)&&a&&d.extent&&Fs(d.extent,a);return h&&c.add(p),h}).sort((d,p)=>p.score-d.score||d.objectId-p.objectId).map(d=>d.attribution).join(", "):""}};l([u({readOnly:!0,type:B})],Ki.prototype,"items",void 0),l([u({readOnly:!0})],Ki.prototype,"state",null),l([u()],Ki.prototype,"view",void 0),Ki=l([m("esri.widgets.Attribution.AttributionViewModel")],Ki);var Gh=Ki;var Ji="esri-attribution",Xi={base:Ji,poweredBy:`${Ji}__powered-by`,sources:`${Ji}__sources`,open:`${Ji}--open`,sourcesOpen:`${Ji}__sources--open`,link:`${Ji}__link`},Le=class extends ot{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Gh}initialize(){this.addHandles(Ft(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e={[Xi.open]:this._isOpen};return v("div",{bind:this,class:this.classes(Xi.base,de.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return v("div",{class:Xi.poweredBy},"Powered by"," ",v("a",{class:Xi.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){let e=this._isOpen,t=this._isInteractive,n=t?0:void 0,{attributionText:r}=this,i={[Xi.sourcesOpen]:e,[de.interactive]:t};return v("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Xi.sources,i),innerHTML:r,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1,{clientHeight:n,clientWidth:r,scrollWidth:i}=e,o=i>r,s=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,s&&(t=!0),this._isOpen){let a=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([u()],Le.prototype,"_isOpen",void 0),l([u()],Le.prototype,"_isInteractive",null),l([u()],Le.prototype,"_attributionTextOverflowed",void 0),l([u()],Le.prototype,"_prevSourceNodeHeight",void 0),l([u({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Le.prototype,"attributionText",null),l([u()],Le.prototype,"icon",null),l([u()],Le.prototype,"itemDelimiter",void 0),l([u()],Le.prototype,"label",null),l([u(),Be("esri/widgets/Attribution/t9n/Attribution")],Le.prototype,"messages",void 0),l([u()],Le.prototype,"view",null),l([u({type:Gh})],Le.prototype,"viewModel",void 0),l([Qm()],Le.prototype,"_toggleState",null),Le=l([m("esri.widgets.Attribution")],Le);var t0=Le;function n0(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}var Nr=class extends Hs(b){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(E(()=>this.view,this._updateRotationWatcher,ae))}destroy(){this.view=null}get canShowNorth(){return n0(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(!this.view?.ready)return;let e={};this.view?.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;let t=-e.heading;this._set("orientation",{x:0,y:0,z:t})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?E(()=>e?.rotation,this._updateForRotation,ae):E(()=>e?.camera,this._updateForCamera,ae))}};l([u({readOnly:!0})],Nr.prototype,"canShowNorth",null),l([u({readOnly:!0})],Nr.prototype,"orientation",void 0),l([u({readOnly:!0})],Nr.prototype,"state",null),l([u()],Nr.prototype,"view",void 0),Nr=l([m("esri.widgets.Compass.CompassViewModel")],Nr);var Wh=Nr;var r0="esri-compass",Zh={base:r0,iconContainer:`${r0}__icon-container`};var Dn=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Wh,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return Lt({button:()=>import("./chunk-2NXTUNEG.js"),icon:()=>import("./chunk-VQEZLR5A.js")})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){let{orientation:e,state:t}=this.viewModel,{messages:n}=this;return v("div",{class:this.classes(Zh.base,de.widget)},v("calcite-button",{class:de.widgetButton,disabled:t==="disabled",kind:"neutral",label:n.reset,onclick:this._reset,round:!0,scale:"s",title:n.reset},v("div",{"aria-hidden":"true",class:Zh.iconContainer,title:n.reset},v("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};l([u()],Dn.prototype,"goToOverride",null),l([u()],Dn.prototype,"icon",null),l([u()],Dn.prototype,"label",null),l([u(),Be("esri/widgets/Compass/t9n/Compass")],Dn.prototype,"messages",void 0),l([u()],Dn.prototype,"view",null),l([u({type:Wh})],Dn.prototype,"viewModel",void 0),Dn=l([m("esri.widgets.Compass")],Dn);var i0=Dn;var o0="esri-navigation-toggle",Qh={base:o0,isLayoutHorizontal:`${o0}--horizontal`};var eo=class extends b{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.addHandles(it(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){let e=this.view?.inputManager;e&&(e.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate")}};l([u({readOnly:!0})],eo.prototype,"state",null),l([u()],eo.prototype,"navigationMode",void 0),l([u()],eo.prototype,"view",void 0),eo=l([m("esri.widgets.NavigationToggle.NavigationToggleViewModel")],eo);var Yh=eo;var Cn=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Yh,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{(this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton)?.setFocus(),this.toggle()}}loadDependencies(){return Lt({button:()=>import("./chunk-2NXTUNEG.js")})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e=this.viewModel?.state==="disabled",t=this.viewModel?.navigationMode==="pan",n=this.messages.toggle;return v("div",{class:this.classes(Qh.base,de.widget,{[Qh.isLayoutHorizontal]:this.layout==="horizontal"})},v("calcite-button",{afterCreate:r=>{this._panButton=r},appearance:t?"outline-fill":"solid",class:de.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:n,onclick:this._toggle,tabIndex:t?void 0:-1,title:n}),v("calcite-button",{afterCreate:r=>{this._rotateButton=r},appearance:t?"solid":"outline-fill",class:de.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:n,onclick:this._toggle,tabIndex:t?-1:void 0,title:n}))}};l([u()],Cn.prototype,"icon",null),l([u()],Cn.prototype,"label",null),l([u({value:"vertical"})],Cn.prototype,"layout",null),l([u(),Be("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Cn.prototype,"messages",void 0),l([u()],Cn.prototype,"view",null),l([u({type:Yh})],Cn.prototype,"viewModel",void 0),Cn=l([m("esri.widgets.NavigationToggle")],Cn);var s0=Cn;var Rr=class extends b{get canZoomIn(){if(!this.view?.ready)return!1;let t=this.view?.constraints?.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){let{view:e}=this;if(!e?.ready)return!1;let n=e.constraints?.effectiveMinScale;return n===0||this._scale<n}get _scale(){let e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};l([u({readOnly:!0})],Rr.prototype,"canZoomIn",null),l([u({readOnly:!0})],Rr.prototype,"canZoomOut",null),l([u()],Rr.prototype,"view",void 0),l([u()],Rr.prototype,"_scale",null),Rr=l([m("esri.widgets.Zoom.ZoomConditions2D")],Rr);var a0=Rr;var to=class extends b{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([u({readOnly:!0})],to.prototype,"canZoomIn",null),l([u({readOnly:!0})],to.prototype,"canZoomOut",null),l([u()],to.prototype,"view",void 0),to=l([m("esri.widgets.Zoom.ZoomConditions3D")],to);var l0=to;var Kn=class extends b{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new a0({view:e}):e.type==="3d"&&(this._zoomConditions=new l0({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Cc(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Cc(e.goTo({zoomFactor:.5}))}};l([u()],Kn.prototype,"_zoomConditions",void 0),l([u()],Kn.prototype,"canZoomIn",null),l([u()],Kn.prototype,"canZoomOut",null),l([u({readOnly:!0})],Kn.prototype,"state",null),l([u()],Kn.prototype,"view",null),Kn=l([m("esri.widgets.Zoom.ZoomViewModel")],Kn);var Kh=Kn;var c0={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"},In=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Kh,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Lt({button:()=>import("./chunk-2NXTUNEG.js")})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){let e={[c0.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:t,canZoomOut:n}=this.viewModel,{zoomIn:r,zoomOut:i}=this.messages;return v("div",{class:this.classes(c0.base,de.widget,e)},v("calcite-button",{class:de.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:r,onclick:this.zoomIn,title:r}),v("calcite-button",{class:de.widgetButton,disabled:!n,iconStart:"minus",kind:"neutral",label:i,onclick:this.zoomOut,title:i}))}};l([u()],In.prototype,"icon",null),l([u()],In.prototype,"label",null),l([u({value:"vertical"})],In.prototype,"layout",null),l([u(),Be("esri/widgets/Zoom/t9n/Zoom")],In.prototype,"messages",void 0),l([u()],In.prototype,"view",null),l([u({type:Kh})],In.prototype,"viewModel",void 0),In=l([m("esri.widgets.Zoom")],In);var u0=In;function aA(e){return e?.view!==void 0}var pc=class extends JD{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(n=>{let r=this._find(n),i=r?.widget;aA(i)&&(i.view=t)})},this._componentsWatcher=(t,n)=>{this._removeComponents(n),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([E(()=>this.components,this._componentsWatcher,ae),E(()=>this.view,this._updateViewAwareWidgets,ae)])}_add(e,t,n,r,i){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,t,n,r,i)}_removeComponents(e){e.forEach(t=>{let n=this._find(t);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){let{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){let t=this._createWidget(e);return new Yi({id:e,node:t})}_createWidget(e){let t=this.view;switch(e){case"attribution":return new t0({view:t});case"compass":return new i0({view:t});case"navigation-toggle":return new s0({view:t});case"zoom":return new u0({view:t})}}};l([u()],pc.prototype,"components",void 0),pc=l([m("esri.views.ui.DefaultUI")],pc);var hc=pc;var fc=class extends hc{constructor(e){super(e),this.components=["attribution","zoom"]}};l([u()],fc.prototype,"components",void 0),fc=l([m("esri.views.ui.2d.DefaultUI2D")],fc);var Jh=fc;var d0,p0,h0,f0,m0,g0;function lA(){return _(this,null,function*(){let[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,Stage:o}]=yield Promise.all([import("./chunk-GXOB6CHJ.js"),import("./chunk-FHU7GLJR.js")]);p0=e,h0=t,f0=n,m0=r,g0=i,d0=o})}var T=class extends M_(A_(T_(eD))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new tr({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new bs({view:this}),this.graphicsView=null,this.stateManager=new Pe({constraints:new Lh({view:this})}),this.stationaryManager=new Qi,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Hl(this),this.floors=new B,this.highlightOptions=new Oc,this.inputManager=new BD({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Hc,this.type="2d",this.ui=new Jh,this.test={takeScreenshot:t=>_(this,null,function*(){return GD(this._getScreenshotView(t),t)})},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([E(()=>this.viewpoint,()=>this.stationaryManager.flip(),Jt),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),Pm()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=ue(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new uc(this.featuresTilingScheme)}get constraintsInfo(){let e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;let{scale:e,constraints:t,center:n,viewpoint:r,extent:i}=this,o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!i&&(t?.effectiveLODs||(o=-1),(!n||e===0&&o===-1)&&(r?.targetGeometry==null||r.targetGeometry.type!=="extent"&&!r.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){let e=this._getDefaultViewpoint();if(!e)return!1;let t=e.targetGeometry,n=this.spatialReference;return am(t.spatialReference,n)}set animation(e){let t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;let n=()=>{this.destroyed||(e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(n,n)}get background(){return $c(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;let t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){let{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){let e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(n=>!n.destroyed&&!("layerViews"in n)&&n.updating===!0)||e);if(fe("esri-2d-log-updating")){let n=this.allLayerViews.reduce((r,i)=>x(y({},r),{[`${i.layer.id}(${i.layer.type})`]:!i.destroyed&&!("layerViews"in i)&&i.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(n)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}hitTest(e,t){return _(this,null,function*(){return $D(this,e,t)})}takeScreenshot(e){return _(this,null,function*(){return qD(this._getScreenshotView(e),e)})}toMap(e){if(!this.ready)return null;let t=Rl(e)?Nl(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,n,r){return this.inputManager&&this.viewEvents.on(e,t,n,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return $c(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return Ah.hasLayerViewModule(e)}importLayerView(e){return Ah.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(M.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return _(this,null,function*(){let t=this.toMap(e),n=yield this.hitTest(e),r=this.allLayerViews.toArray().reverse(),i=new globalThis.Map(r.map(c=>[c.layer.uid,c])),o=[],s=0,a=0;for(;s<n.results.length||a<r.length;){let c=n.results.at(s);if(c&&c.type!=="graphic"){++s;continue}let d=i.get((c?.layer??c?.graphic.layer)?.uid);if((!c||d)&&a<r.length&&r.at(a)!==d){let p=r.at(a);"fetchPopupFeaturesAtLocation"in p&&o.push({mapPoint:t,layerView:p}),++a}else c&&(o.push({graphic:c.graphic,layerView:d}),++s)}return{hits:o,location:t}})}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){return _(this,null,function*(){let e=QD(this.type);if(fe("safari")&&fe("safari")<9&&(e=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:fe("safari")})),e!=null)throw M.getLogger(this).warn("#validate()",e.message),e})}loadAsyncDependencies(){return lA()}_getDefaultViewpoint(){let{constraints:e,initialExtent:t,map:n,padding:r,size:i}=this;if(!e)return null;let o=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,s=this.stateManager.getUserStartupOptions(this.size),a=o?.viewpoint,c=a?.targetGeometry?.extent??t,d=c?.center,p=a?.rotation??0,h=a?.scale||c&&zs(c,[i[0]-r.left-r.right,i[1]-r.top-r.bottom]),f=s.center??d,g=s.rotation??p,w=s.scale??h;return f&&w?new oe({targetGeometry:f,scale:w,rotation:g}):null}_startup(){this.timeline.begin("MapView Startup");let e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;let t=new d0(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new g0,this._magnifierView.magnifier=this.magnifier;let n=new f0({view:this});this._set("labelManager",n);let r=new ID({view:this});this._set("animationManager",r);let i=new m0({view:this,animationManager:r});this._set("mapViewNavigation",i),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",s=>this.fatalError=s.error),E(()=>this.stationary,s=>t.stationary=s,je),E(()=>this.background,s=>{t.backgroundColor=s?.color,this._magnifierView.backgroundColor=s?.color},je),E(()=>this.magnifier,s=>this._magnifierView.magnifier=s,je),E(()=>this.renderingOptions,s=>t.renderingOptions=s,je),E(()=>this.highlightOptions,s=>t.highlightOptions=s,je),E(()=>this.state.id,()=>t.state=this.state,je)],"map-view"),this._updateStageChildren();let o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(s=>s(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});let e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){let e=new bm(nm.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);let t=new p0({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new h0(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){let e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){let{allLayerViews:t,padding:n,size:r,stage:i}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:n,size:r,stage:i}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(let t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(let t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};T.type="2d",l([u({readOnly:!0})],T.prototype,"animationManager",void 0),l([u({constructOnly:!0})],T.prototype,"deactivatedWebGLExtensions",void 0),l([u({constructOnly:!0})],T.prototype,"debugWebGLExtensions",void 0),l([u({readOnly:!0})],T.prototype,"featuresTilingScheme",void 0),l([u({readOnly:!0})],T.prototype,"fullOpacity",void 0),l([u()],T.prototype,"goToManager",void 0),l([u({readOnly:!0})],T.prototype,"graphicsTileStore",null),l([u()],T.prototype,"graphicsView",void 0),l([u()],T.prototype,"stateManager",void 0),l([u()],T.prototype,"constraintsInfo",null),l([u({readOnly:!0})],T.prototype,"state",null),l([u()],T.prototype,"initialExtentRequired",null),l([u()],T.prototype,"labelManager",void 0),l([u({readOnly:!0})],T.prototype,"mapViewNavigation",void 0),l([u({constructOnly:!0})],T.prototype,"renderCanvas",void 0),l([u()],T.prototype,"renderingOptions",void 0),l([u({constructOnly:!0})],T.prototype,"supersampleScreenshotsEnabled",void 0),l([u({readOnly:!0})],T.prototype,"supportsGround",void 0),l([u()],T.prototype,"_defaultsFromMapSettings",null),l([u({readOnly:!0})],T.prototype,"typeSpecificPreconditionsReady",null),l([u()],T.prototype,"animation",null),l([u({type:Ir})],T.prototype,"background",null),l([u()],T.prototype,"center",null),l([u({type:Lh})],T.prototype,"constraints",null),l([u()],T.prototype,"extent",null),l([u()],T.prototype,"floors",void 0),l([u({type:Oc})],T.prototype,"highlightOptions",void 0),l([u({readOnly:!0})],T.prototype,"inputManager",void 0),l([u()],T.prototype,"map",void 0),l([u()],T.prototype,"padding",null),l([u({readOnly:!0})],T.prototype,"rendering",null),l([u()],T.prototype,"resizeAlign",null),l([u({readOnly:!0})],T.prototype,"resolution",null),l([u()],T.prototype,"rotation",null),l([u()],T.prototype,"scale",null),l([u({constructOnly:!0})],T.prototype,"spatialReferenceLocked",void 0),l([u()],T.prototype,"stationary",null),l([u({readOnly:!0})],T.prototype,"tileInfo",null),l([u({type:Hc,readOnly:!0})],T.prototype,"timeline",void 0),l([u({readOnly:!0})],T.prototype,"type",void 0),l([u({readOnly:!0})],T.prototype,"updating",null),l([u()],T.prototype,"viewpoint",null),l([u()],T.prototype,"zoom",null),l([u({readOnly:!0})],T.prototype,"navigating",null),l([u(),We(e=>e instanceof hc?e:yf(Jh,e))],T.prototype,"ui",void 0),T=l([m("esri.views.MapView")],T);var y0=T;var Nt=class extends b{constructor(e){super(e)}get editedBookmark(){let{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get customUrl(){return this.editedBookmark?.thumbnail?.isSecureUrl?this.editedBookmark?.thumbnail?.url:null}set customUrl(e){this._override("customUrl",e)}get screenshotUrl(){return this.editedBookmark?.thumbnail?.isDataURI?this.editedBookmark?.thumbnail?.url:null}set screenshotUrl(e){this._override("screenshotUrl",e)}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}get thumbnailState(){return this.editedBookmark?.thumbnail?.url?this.editedBookmark?.thumbnail?.isSecureUrl?"url":"screenshot":"none"}set thumbnailState(e){this._overrideIfSome("thumbnailState",e)}};l([u()],Nt.prototype,"bookmark",void 0),l([u({readOnly:!0})],Nt.prototype,"editedBookmark",null),l([u()],Nt.prototype,"customUrl",null),l([u()],Nt.prototype,"screenshotUrl",null),l([u()],Nt.prototype,"state",null),l([u()],Nt.prototype,"thumbnailState",null),l([u()],Nt.prototype,"validationState",void 0),l([u()],Nt.prototype,"loading",void 0),Nt=l([m("esri.widgets.Bookmarks.BookmarksUserState")],Nt);var mc=Nt;var w0=B.ofType(as),cA={width:128,height:128,format:"png"},gc={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},v0={time:!0},Rt=class extends Hs(rt.EventedAccessor){constructor(e){super(e),this.capabilities=y({},v0),this.activeBookmark=null,this.view=null}destroy(){this.view=null,this._set("activeBookmark",null)}castCapabilities(e){return y(y({},v0),e)}get bookmarks(){return this.view?.map?.bookmarks??new w0}set bookmarks(e){this._overrideIfSome("bookmarks",e)}set defaultCreateOptions(e){this._set("defaultCreateOptions",y(y({},gc),e))}get defaultCreateOptions(){return gc}set defaultEditOptions(e){this._set("defaultEditOptions",y(y({},gc),e))}get defaultEditOptions(){return gc}get state(){let{view:e}=this;return e&&!e.ready?"loading":"ready"}createBookmark(e){return _(this,null,function*(){let{view:t,defaultCreateOptions:n,capabilities:r}=this;if(!t)throw new k("create-bookmark:invalid-view","Cannot create a bookmark without a view.");let{takeScreenshot:i,screenshotSettings:o,captureViewpoint:s,captureRotation:a,captureScale:c,captureTimeExtent:d}=y(y({},n),e),p=i?yield this._createThumbnail(o):void 0,h=r.time&&d&&t.timeExtent!=null?t.timeExtent.clone():void 0;return new as(y(y(y({},p&&{thumbnail:p}),d&&{timeExtent:h}),s&&{viewpoint:this._createViewpoint({view:t,captureScale:c,captureRotation:a})}))})}editBookmark(e,t){return _(this,null,function*(){if(!e)return e;let{view:n,defaultEditOptions:r}=this;if(!n)throw new k("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");let{takeScreenshot:i,screenshotSettings:o,captureViewpoint:s,captureRotation:a,captureScale:c,captureTimeExtent:d}=y(y({},r),t),p=i?yield this._createThumbnail(o):void 0;return p&&(e.thumbnail=p),s&&(e.viewpoint=this._createViewpoint({view:n,captureScale:c,captureRotation:a})),d&&n.timeExtent!=null&&(e.timeExtent=n.timeExtent.clone()),this.emit("bookmark-edit",{bookmark:e}),e})}goTo(e){let{capabilities:t,view:n}=this;if(!n)throw new k("go-to:invalid-view","Cannot go to a bookmark without a view");let r=e?.viewpoint;if(!r)throw new k("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});this._set("activeBookmark",e);let i={target:r},o=this.callGoTo(i),s=e?.timeExtent;return t.time&&s&&(n.timeExtent=s),this.emit("bookmark-select",{bookmark:e}),o.catch(()=>{}).then(()=>this._set("activeBookmark",null)),o}_createThumbnail(e){return _(this,null,function*(){let{view:t}=this;if(!t)throw new k("bookmark:invalid-view","Cannot create slide thumbnail without a view");let n=yield t.takeScreenshot(y(y({},cA),e));return new Oe({url:n.dataUrl})})}_createViewpoint({view:e,captureRotation:t,captureScale:n}){let r=e.viewpoint?.clone();return new oe({targetGeometry:e.extent?.clone(),rotation:(t?r?.rotation:null)??0,scale:(n?r?.scale:null)??0})}};l([u()],Rt.prototype,"capabilities",void 0),l([We("capabilities")],Rt.prototype,"castCapabilities",null),l([u({readOnly:!0})],Rt.prototype,"activeBookmark",void 0),l([u({type:w0})],Rt.prototype,"bookmarks",null),l([u()],Rt.prototype,"defaultCreateOptions",null),l([u()],Rt.prototype,"defaultEditOptions",null),l([u({readOnly:!0})],Rt.prototype,"state",null),l([u()],Rt.prototype,"view",void 0),Rt=l([m("esri.widgets.Bookmarks.BookmarksViewModel")],Rt);var Xh=Rt;var tt=class extends b{constructor(){super(...arguments),this.addBookmarkButton=!1,this.closeButton=!1,this.collapseButton=!1,this.editBookmarkButton=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.thumbnail=!0,this.time=!0}get addBookmark(){return Or(M.getLogger(this),"addBookmark",{replacement:"addBookmarkButton",version:"4.29",warnOnce:!0}),this.addBookmarkButton}set addBookmark(e){Or(M.getLogger(this),"addBookmark",{replacement:"addBookmarkButton",version:"4.29",warnOnce:!0}),this.addBookmarkButton=e}};l([u({type:Boolean,nonNullable:!0})],tt.prototype,"addBookmark",null),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"addBookmarkButton",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"closeButton",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"collapseButton",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"editBookmarkButton",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"filter",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"flow",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"heading",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"thumbnail",void 0),l([u({type:Boolean,nonNullable:!0})],tt.prototype,"time",void 0),tt=l([m("esri.widgets.Bookmarks.BookmarksVisibleElements")],tt);var yc=tt;var Ve="esri-bookmarks",ef=`${Ve}__authoring`,tf=`${Ve}__bookmark`,he={base:Ve,noBookmarksHeader:`${Ve}__no-bookmarks-heading`,noBookmarksDescription:`${Ve}__no-bookmarks-description`,form:`${Ve}__form`,list:`${Ve}__list`,loader:`${Ve}__loader`,filterNoResults:`${Ve}__filter-no-results`,formContent:`${Ve}__form-content`,addBookmarkButton:`${Ve}__add-bookmark-button`,editBookmarkInput:`${Ve}__edit-bookmark-input`,addBookmarkInput:`${Ve}__add-bookmark-input`,dragEnabled:`${Ve}--drag-enabled`,bookmarkImage:`${Ve}__image`,bookmarkImageContainer:`${tf}-image-container`,bookmarkContent:`${tf}-content`,bookmarkContentLabel:`${tf}-content-label`,authoring:ef,authoringImageContainer:`${ef}-image-container`,authoringRefreshThumbnailButton:`${ef}-refresh-thumbnail-button`};var te=class extends Ls(ot){constructor(e,t){super(e,t),this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._lastDragDetail=null,this._selectedDragBookmarkUid=null,this._editIncludeTimeExtent=void 0,this._userState=null,this._focusRootFlowItem=!1,this._focusAddFlowItem=!1,this._focusEditFlowItem=!1,this.disabled=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.viewModel=new Xh,this.visibleElements=new yc,this._onCalciteListOrderChange=n=>{let{_lastDragDetail:r,bookmarks:i}=this,{toEl:o,fromEl:s,dragEl:a,newIndex:c}=n;if(!i.length||!s||!o||r?.newIndex===c&&r?.dragEl===a&&r?.toEl===o&&r?.fromEl===s)return;this._lastDragDetail=n;let d=Array.from(s.children).filter(p=>p?.matches("calcite-list-item")).map(p=>p.value);i.sort((p,h)=>{let f=d.indexOf(p.uid),g=d.indexOf(h.uid);return f>g?1:f<g?-1:0})}}normalizeCtorArgs(e){return e?.editingEnabled!=null&&e.visibleElements!=null?x(y({},e),{visibleElements:new yc(x(y({},e.visibleElements),{addBookmarkButton:e.editingEnabled,editBookmarkButton:e.editingEnabled}))}):e}loadDependencies(){return Lt({action:()=>import("./chunk-B3LYN5YS.js"),button:()=>import("./chunk-2NXTUNEG.js"),"chip-group":()=>import("./chunk-5GOQV6FN.js"),chip:()=>import("./chunk-N4VGPBXF.js"),fab:()=>import("./chunk-P7BRABUB.js"),flow:()=>import("./chunk-NIMWGK3C.js"),"flow-item":()=>import("./chunk-R2TUY7C4.js"),icon:()=>import("./chunk-VQEZLR5A.js"),input:()=>import("./chunk-CO3HGEPQ.js"),"input-message":()=>import("./chunk-HYZFSHPC.js"),label:()=>import("./chunk-HRUUUGMF.js"),list:()=>import("./chunk-VMNMFMZ2.js"),"list-item":()=>import("./chunk-FAB5FTUK.js"),loader:()=>import("./chunk-N5ULBSCQ.js"),notice:()=>import("./chunk-QOT2HPNH.js"),scrim:()=>import("./chunk-JPPNJZYB.js"),switch:()=>import("./chunk-KDEYB67D.js"),table:()=>import("./chunk-377LZUHM.js"),"table-cell":()=>import("./chunk-LSVYWFKS.js"),"table-header":()=>import("./chunk-J2KWU3XX.js"),"table-row":()=>import("./chunk-WDX2CXQH.js")})}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultEditOptions(){return this.viewModel.defaultEditOptions}set defaultEditOptions(e){this.viewModel.defaultEditOptions=e}get bookmarks(){return this.viewModel.bookmarks}set bookmarks(e){this.viewModel.bookmarks=e}get editingEnabled(){return Or(M.getLogger(this),"editingEnabled",{replacement:"dragEnabled, visibleElements.editBookmarkButton, visibleElements.addBookmarkButton",version:"4.29",warnOnce:!0}),this.dragEnabled&&this.visibleElements.editBookmarkButton&&this.visibleElements.addBookmarkButton}set editingEnabled(e){Or(M.getLogger(this),"editingEnabled",{replacement:"dragEnabled, visibleElements.editBookmarkButton, visibleElements.addBookmarkButton",version:"4.29",warnOnce:!0}),this.dragEnabled=e,this.visibleElements.editBookmarkButton=e,this.visibleElements.addBookmarkButton=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"bookmark"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){return v("div",{class:this.classes(he.base,de.widget,de.panel)},this._renderBookmarksContainer())}startAddBookmark(){this._userState=new mc({state:"add"}),this._focusAddFlowItem=!0}_renderNoBookmarksContainer(e){let{messages:t,viewModel:{state:n}}=this;return e.length||n==="loading"?null:v("div",{class:de.empty,key:"no-bookmarks"},v("calcite-icon",{icon:"bookmark",scale:"l"}),v(Zm,{class:this.classes(de.heading,he.noBookmarksHeader),level:this.headingLevel},t?.noBookmarksHeading),v("p",{class:he.noBookmarksDescription},t.noBookmarksDescription))}_renderEditBookmarkFlowItems(){let{_userState:e}=this,t=e?.editedBookmark;return t&&e?.state==="edit"?this._renderEditingBookmark(t):[]}_renderBookmarkItems(e){return e?e.toArray().map(t=>this._renderBookmark(t)):[]}_handleCalciteListDragEnd(e){let{fromEl:t,dragEl:n,oldIndex:r}=e;t.insertBefore(n,t.children[r])}_renderBookmarksContainer(){let{viewModel:{state:e,bookmarks:t},dragEnabled:n,messages:r,disabled:i,filterPlaceholder:o,filterText:s,visible:a,headingLevel:c,visibleElements:{closeButton:d,collapseButton:p,filter:h,heading:f,flow:g},uid:w}=this,I=t.filter(yt),ne=I.length?v("calcite-list",{class:he.list,dragEnabled:n,filterEnabled:h,filterPlaceholder:o,filterText:s,group:`bookmarks-${w}`,key:"bookmark-list",label:r.widgetLabel,selectionAppearance:"border",selectionMode:"none",onCalciteListDragEnd:Se=>this._handleCalciteListDragEnd(Se.detail),onCalciteListFilter:Se=>this.filterText=Se.target?.filterText??"",onCalciteListOrderChange:Se=>this._onCalciteListOrderChange(Se.detail)},this._renderBookmarkItems(I),h?v("div",{class:he.filterNoResults,slot:"filter-no-results"},v("calcite-notice",{kind:"info",open:!0,width:"full"},v("div",{slot:"message"},r.noBookmarksHeading),";")):null):null,J=[v("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:d,closed:!a,collapsible:p,disabled:i,heading:f?r.widgetLabel:void 0,headingLevel:c,loading:e==="loading",onCalciteFlowItemClose:()=>this.visible=!1},this._renderNoBookmarksContainer(I),ne,this._renderAddBookmarkButton()),this._renderAddingBookmark(),this._renderEditBookmarkFlowItems()];return a?g?v("calcite-flow",{key:"root-flow"},J):J:null}_renderAddBookmarkButton(){let{messages:e,_userState:t,disabled:n,viewModel:{view:r,state:i},visibleElements:{addBookmarkButton:o}}=this,s=t?.loading??!1;return r&&i!=="loading"&&o?v("calcite-fab",{appearance:"outline-fill",bind:this,class:he.addBookmarkButton,disabled:n||s,icon:"plus",key:"add-bookmark-item",kind:"neutral",loading:s,onclick:this.startAddBookmark,slot:"fab",text:e.addBookmark,textEnabled:!0,title:e.addBookmark,type:"button"}):null}_renderEditContainer(e){let{messagesCommon:t,visibleElements:{editBookmarkButton:n}}=this,r=`${t.edit} ${this._getBookmarkTitle(e)}`;return n?v("calcite-action",{appearance:"transparent",icon:"pencil",key:"edit-action",onclick:()=>this._showEditBookmarkForm(e),slot:"actions-end",text:r,title:r}):null}_renderBookmarkImage(e,t){return t?v("img",{alt:"",class:he.bookmarkImage,key:"bookmark-image",src:e.thumbnail?.url}):null}_renderBookmarkTimeSwitch(e){let{messages:t,viewModel:{view:n}}=this,{timeExtent:r}=e;return n?.timeExtent??r?v("calcite-label",{layout:"inline-space-between"},t.includeTimeExtent,v("calcite-switch",{checked:!!r,onCalciteSwitchChange:i=>{this._editIncludeTimeExtent=!!i.target.checked}})):null}_renderEditBookmarkTimeExtent(e){return this._editIncludeTimeExtent?this._renderBookmarkTimeExtent(e):null}_getTimeExtentStrings(e){let{visibleElements:t}=this,{timeExtent:n}=e;if(!n)return{};let{start:r,end:i}=n,o=i!=null&&(r==null||r.getTime()!==i.getTime()),s=r?this._formatDate(r):"",a=r&&t.time?this._formatTime(r):"";return o?{startDate:s,startTime:a,endDate:this._formatDate(i),endTime:t.time?this._formatTime(i):""}:{startDate:s,startTime:a}}_renderTimeExtentDescription(e){let{startDate:t,startTime:n,endDate:r,endTime:i}=this._getTimeExtentStrings(e);if(!t)return"";let o=`${t} ${n}`;return r?`${o} - ${`${r} ${i}`}`:o}_renderBookmarkTimeExtent(e,t=!1){let{messages:n}=this,{startDate:r,startTime:i,endDate:o,endTime:s}=this._getTimeExtentStrings(e),a=t?null:v("calcite-table-row",{slot:"table-header"},v("calcite-table-header",{heading:n.startDate}),o?v("calcite-table-header",{heading:n.endDate}):null);return r?v("calcite-table",{caption:n.timeExtent,scale:"s"},a,v("calcite-table-row",null,v("calcite-table-cell",null,r," ",i?[v("br",null),i]:null),o?v("calcite-table-cell",null,o,s?[v("br",null),s]:null):null)):null}_renderBookmarkActiveScrim(e,t){return this.viewModel.activeBookmark===e&&t?v("calcite-scrim",{key:"bookmark-active-scrim",loading:!0}):null}_renderBookmarkActiveLoader(e,t){return this.viewModel.activeBookmark!==e||t?null:v("calcite-loader",{class:he.loader,inline:!0,key:"bookmark-active-loader",label:this.messagesCommon.loading})}_renderBookmarkImageIcon(e,t){return this.viewModel.activeBookmark===e||t?null:v("calcite-icon",{icon:"bookmark",key:"bookmark-icon",scale:"s"})}_renderBookmarkThumbnail(e){let t=this.visibleElements.thumbnail&&!!e.thumbnail?.url;return v("div",{class:he.bookmarkImageContainer,slot:"content-start"},this._renderBookmarkActiveScrim(e,t),this._renderBookmarkImage(e,t),this._renderBookmarkActiveLoader(e,t),this._renderBookmarkImageIcon(e,t))}_focusSelectedDragEl(e,t){this._selectedDragBookmarkUid===t.uid&&requestAnimationFrame(()=>e?.setFocus())}_handleCalciteListItemDragHandleChange(e,t){e.stopPropagation();let n=e.target.dragSelected;this._selectedDragBookmarkUid=n?t.uid:null}_renderBookmark(e){return v("calcite-list-item",{afterCreate:t=>this._focusSelectedDragEl(t,e),afterUpdate:t=>this._focusSelectedDragEl(t,e),class:this.classes({[he.dragEnabled]:this.dragEnabled}),description:this._renderTimeExtentDescription(e),dragSelected:e.uid===this._selectedDragBookmarkUid,key:e.uid,label:this._getBookmarkTitle(e),value:e.uid,onCalciteListItemDragHandleChange:t=>this._handleCalciteListItemDragHandleChange(t,e),onCalciteListItemSelect:()=>this._goToBookmark(e)},this._renderBookmarkThumbnail(e),this._renderBookmarkContent(e),this._renderEditContainer(e))}_renderBookmarkContent(e){return v("div",{class:he.bookmarkContent,slot:"content"},v("span",{class:he.bookmarkContentLabel},this._getBookmarkTitle(e)),this._renderBookmarkTimeExtent(e,!0))}_renderEditingBookmarkName(e){let{messages:t,_userState:n}=this,r=n?.validationState==="name-required";return v("calcite-label",null,t.title,v("calcite-input",{afterCreate:this._storeEditInput,bind:this,class:he.editBookmarkInput,name:"bookmark-name",placeholder:t.titlePlaceholder,required:!0,type:"text",value:e.name}),r?v("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},t.invalidTitle):null)}_renderEditingBookmarkActions(){let{messagesCommon:e,_userState:t}=this,n=t?.bookmark;return[v("calcite-button",{appearance:"transparent",kind:"danger",onclick:()=>this._deleteBookmark(n),slot:"footer",type:"button",width:"full"},e.delete),v("calcite-button",{appearance:"outline",bind:this,onclick:this._closeEditBookmarkForm,slot:"footer",type:"button",width:"full"},e.cancel),v("calcite-button",{slot:"footer",type:"submit",width:"full"},e.save)]}_handleUrlEditInputChange(){let{_userState:e,_urlEditInputNode:t}=this,n=t?.value;if(!e?.editedBookmark||!n)return;e.validationState=void 0,e.editedBookmark.thumbnail?.isDataURI&&(e.screenshotUrl=e.editedBookmark.thumbnail?.url);let r=new Oe({url:n});r.isSecureUrl&&(e.customUrl=n,e.editedBookmark.thumbnail=r)}_renderEditingTimeExtent(e){let{capabilities:t,view:n}=this.viewModel,{timeExtent:r}=e;return t.time&&(n?.timeExtent??r)?v("div",{key:"edit-bookmark-time-container"},this._renderBookmarkTimeSwitch(e),this._renderEditBookmarkTimeExtent(e)):null}_renderEditingBookmarkImage(e){let{_userState:t}=this,n=t?.thumbnailState,r=e.thumbnail?.isSecureUrl?n==="url":e.thumbnail?.isDataURI?n==="screenshot":null;if(r)return this._renderBookmarkImage(e,r)}_renderEditingThumbnail(e){let{_userState:t,visibleElements:n}=this,r=t?.thumbnailState;return n.thumbnail&&r!=="none"?v("div",{class:he.authoringImageContainer},this._renderEditingBookmarkImage(e)):null}_renderUpdateThumbnailButton(){let{visibleElements:e,messages:t,_userState:n}=this,r=n?.thumbnailState;return e.thumbnail&&r==="screenshot"?v("calcite-button",{appearance:"outline",class:he.authoringRefreshThumbnailButton,iconStart:"refresh",key:"update-thumbnail",kind:"neutral",onclick:()=>{this._updateThumbnail()},width:"half"},t.updateThumbnail):null}_renderEditingBookmarkUrlInput(e){let{messages:t,_userState:n}=this,r=e.thumbnail?.url,i=e.thumbnail?.isSecureUrl?r:void 0,o=r&&n?.validationState==="absolute-url-required";return n?.thumbnailState==="url"?v("calcite-label",{key:"thumbnail-url-input"},v("calcite-input",{afterCreate:this._storeUrlEditInput,bind:this,name:"bookmark-thumbnail-url",pattern:D_,placeholder:t?`https://<${t.imageUrlPlaceholder}>`:void 0,required:!0,title:t.imageUrlTooltip,type:"text",value:i,onCalciteInputChange:this._handleUrlEditInputChange,onCalciteInputInput:this._handleUrlEditInputChange}),o?v("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},t.invalidImageUrl):null):null}_renderThumbnailSelector(){let{visibleElements:e,messages:t,_userState:n}=this,r=n?.thumbnailState;return e.thumbnail?v("calcite-label",{key:"thumbnail-chip-group"},t.thumbnail,v("calcite-chip-group",{label:t.thumbnail,selectionMode:"single-persist",onCalciteChipGroupSelect:i=>this._handleThumbnailTypeSelect(i.target.selectedItems[0].value)},v("calcite-chip",{selected:r==="screenshot",value:"screenshot"},t.screenshot),v("calcite-chip",{selected:r==="url",value:"url"},t.url),v("calcite-chip",{selected:r==="none",value:"none"},t.none))):null}_renderEditingBookmark(e){let{disabled:t,messagesCommon:n,headingLevel:r}=this;return e?v("form",{bind:this,class:he.form,disabled:this.disabled,onsubmit:this._editBookmarkSubmit},v("calcite-flow-item",{afterCreate:this._focusEditFlowItemNode,afterUpdate:this._focusEditFlowItemNode,bind:this,disabled:t,heading:n.edit,headingLevel:r,key:"edit-bookmark-form",onCalciteFlowItemBack:i=>{i.preventDefault(),this._closeEditBookmarkForm()}},v("div",{class:he.formContent},v("div",{class:he.authoring},this._renderEditingBookmarkName(e),this._renderThumbnailSelector(),this._renderEditingThumbnail(e),this._renderEditingBookmarkUrlInput(e),this._renderUpdateThumbnailButton(),this._renderEditingTimeExtent(e))),this._renderEditingBookmarkActions())):null}_renderAddingBookmarkName(){let{_userState:e,messages:t}=this,n=e?.validationState==="name-required";return v("calcite-label",null,t.title,v("calcite-input",{afterCreate:this._storeAddInput,bind:this,class:he.addBookmarkInput,name:"bookmark-name",placeholder:t.titlePlaceholder,required:!0,type:"text",value:""}),n?v("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},t.invalidTitle):null)}_renderAddingBookmarkActions(){let{messagesCommon:e}=this;return[v("calcite-button",{appearance:"outline",bind:this,onclick:this._endAddBookmark,slot:"footer",type:"button",width:"half"},e.cancel),v("calcite-button",{slot:"footer",type:"submit",width:"half"},e.add)]}_renderAddingBookmark(){let{disabled:e,messages:t,headingLevel:n,_userState:r}=this;return r?.state==="add"?v("form",{bind:this,class:he.form,disabled:e,onsubmit:this._addBookmarkSubmitClick},v("calcite-flow-item",{afterCreate:this._focusAddFlowItemNode,afterUpdate:this._focusAddFlowItemNode,bind:this,disabled:e,heading:t.addBookmark,headingLevel:n,key:"add-bookmark-form",onCalciteFlowItemBack:i=>{i.preventDefault(),this._endAddBookmark()}},v("div",{class:he.formContent},this._renderAddingBookmarkName()),this._renderAddingBookmarkActions())):null}_getBookmarkTitle(e){return e?.name||this.messagesCommon.untitled}_formatDate(e){return e?Sc(e,x(y({},Ec("short-date")),{timeZone:this.viewModel.view?.timeZone??xn})):""}_formatTime(e){return e?Sc(e,x(y({},Ec("long-time")),{timeZone:this.viewModel.view?.timeZone??xn})):""}_endAddBookmark(){this.endAddBookmark(),this._focusRootFlowItem=!0}_showEditBookmarkForm(e){e&&(this._editIncludeTimeExtent=!!e.timeExtent,this._userState=new mc({bookmark:e,state:"edit"}),this._focusEditFlowItem=!0,this.viewModel.goTo(e))}_createNewScreenshotUrl(){return _(this,null,function*(){return(yield this.viewModel.createBookmark()).thumbnail?.url??null})}_storeCurrentUrl(){let{_userState:e}=this,t=e?.editedBookmark?.thumbnail?.url;t&&(e?.editedBookmark?.thumbnail?.isSecureUrl?e.customUrl=t:e?.editedBookmark?.thumbnail?.isDataURI&&(e.screenshotUrl=t))}_handleThumbnailTypeSelect(e){return _(this,null,function*(){let{_userState:t}=this;if(!t)return;let{screenshotUrl:n,customUrl:r,editedBookmark:i}=t,o=e==="screenshot"?n??(yield this._createNewScreenshotUrl()):e==="url"&&r?r:null;this._storeCurrentUrl(),i&&o&&(i.thumbnail=new Oe({url:o})),t.validationState=void 0,t.thumbnailState=e})}_closeEditBookmarkForm(){this._userState=null,this._focusRootFlowItem=!0}_addBookmarkSubmitClick(e){e.preventDefault(),this._addBookmarkSubmit()}_addBookmarkSubmit(){return _(this,null,function*(){let{_addInputNode:e,_userState:t,viewModel:n,viewModel:{bookmarks:r}}=this;if(!t)return;let i=e?e.value.trim():null;if(!i)return void(t.validationState="name-required");t.loading=!0;let o=yield n.createBookmark();o.name=i,r.add(o),this._endAddBookmark()})}_editBookmarkAndClose(e,t){return _(this,null,function*(){let{viewModel:n,viewModel:{defaultEditOptions:r}}=this;yield n.editBookmark(e,y(y({},r),t)),this._closeEditBookmarkForm()})}_editBookmarkSubmit(e){e.preventDefault();let{_editInputNode:t,_userState:n,_editIncludeTimeExtent:r,_urlEditInputNode:i}=this;if(!n?.bookmark||!n.editedBookmark)return;n.validationState=void 0,n.customUrl=void 0,n.screenshotUrl=void 0;let o=t?.value.trim();if(!o)return void(n.validationState="name-required");n.bookmark.name=o,n.bookmark.thumbnail=n.editedBookmark.thumbnail,r||(n.bookmark.timeExtent=null);let s=n.thumbnailState;if(s==="url"&&i){let a=i.value,c=new Oe({url:a});if(!c.isSecureUrl)return void(n.validationState="absolute-url-required");n.bookmark.thumbnail=c}else s==="none"&&(n.bookmark.thumbnail=null);this._editBookmarkAndClose(n.bookmark,{takeScreenshot:!1,captureTimeExtent:r})}_storeEditInput(e){this._editInputNode=e}_storeAddInput(e){this._addInputNode=e}_storeUrlEditInput(e){this._urlEditInputNode=e}_deleteBookmark(e){this._closeEditBookmarkForm(),e&&(this.viewModel.bookmarks.remove(e),e.destroy())}_goToBookmark(e){e&&(this.endAddBookmark(),this.viewModel.goTo(e))}_updateThumbnail(){return _(this,null,function*(){let{_userState:e,viewModel:t}=this;e&&(e.validationState=void 0,yield t.editBookmark(e.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}))})}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,requestAnimationFrame(()=>e?.setFocus()))}_focusEditFlowItemNode(e){this._focusEditFlowItem&&(this._focusEditFlowItem=!1,requestAnimationFrame(()=>e?.setFocus()))}_focusAddFlowItemNode(e){this._focusAddFlowItem&&(this._focusAddFlowItem=!1,requestAnimationFrame(()=>e?.setFocus()))}};l([u()],te.prototype,"_editIncludeTimeExtent",void 0),l([u({type:mc})],te.prototype,"_userState",void 0),l([u()],te.prototype,"_focusRootFlowItem",void 0),l([u()],te.prototype,"_focusAddFlowItem",void 0),l([u()],te.prototype,"_focusEditFlowItem",void 0),l([u()],te.prototype,"defaultCreateOptions",null),l([u()],te.prototype,"defaultEditOptions",null),l([u()],te.prototype,"bookmarks",null),l([u()],te.prototype,"disabled",void 0),l([u()],te.prototype,"dragEnabled",void 0),l([u()],te.prototype,"editingEnabled",null),l([u()],te.prototype,"filterPlaceholder",void 0),l([u()],te.prototype,"filterText",void 0),l([u()],te.prototype,"headingLevel",void 0),l([u()],te.prototype,"goToOverride",null),l([u()],te.prototype,"icon",null),l([u()],te.prototype,"label",null),l([u(),Be("esri/widgets/Bookmarks/t9n/Bookmarks")],te.prototype,"messages",void 0),l([u(),Be("esri/t9n/common")],te.prototype,"messagesCommon",void 0),l([u()],te.prototype,"uiStrings",void 0),l([u()],te.prototype,"view",null),l([u({type:Xh}),Ym(["select-bookmark","bookmark-edit","bookmark-select"])],te.prototype,"viewModel",void 0),l([u({type:yc,nonNullable:!0})],te.prototype,"visibleElements",void 0),l([u()],te.prototype,"endAddBookmark",null),l([u()],te.prototype,"startAddBookmark",null),te=l([m("esri.widgets.Bookmarks")],te);var b0=te;var Jn=class extends b{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Ft(()=>this.view?.ui,"expand",e=>{let{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){let t=!!e;this._set("expanded",t);let n=this.view?.ui;n&&n.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.view?.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&it(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?it(()=>this.view?.stationary,()=>this._viewpointHandle?.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){let e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;let{autoCollapse:t,view:n}=this;if(!n||!t)return;let r=Tf(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this.addHandles(r,e),this._viewpointHandle=r}_collapse(){this.expanded=!1}};l([u({value:!1})],Jn.prototype,"autoCollapse",null),l([u({value:!1})],Jn.prototype,"expanded",null),l([u()],Jn.prototype,"group",void 0),l([u({readOnly:!0})],Jn.prototype,"state",null),l([u({value:null})],Jn.prototype,"view",null),Jn=l([m("esri.widgets.Expand.ExpandViewModel")],Jn);var nf=Jn;var Ot="esri-expand",gt={base:Ot,toggle:`${Ot}__toggle`,popoverContent:`${Ot}__popover-content`,panelContent:`${Ot}__panel-content`,sheet:`${Ot}__sheet`,panelIconNumber:`${Ot}__panel-icon-number`,contentContainer:`${Ot}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Ot}__icon--expanded`,iconNumber:`${Ot}__icon-number`,content:`${Ot}__content`,contentExpanded:`${Ot}__content--expanded`},_0="chevrons-left",D0="chevrons-right",le=class extends ot{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new nf,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=n=>{n.target===this._popoverEl&&(this.viewModel.expanded=n.target.open)},this._handleSheetClose=n=>{this.viewModel.expanded=n.target.open},this._handlePanelClose=n=>{this.viewModel.expanded=!n.target.closed},this._handleKeyDown=n=>{this.viewModel.expanded&&n.key==="Escape"&&!this._willCloseOnEsc(n)&&n.preventDefault()},this._storeToggleButtonEl=n=>{this._toggleButtonEl=n},this._storePopoverEl=n=>{this._popoverEl=n}}loadDependencies(){return Lt({button:()=>import("./chunk-2NXTUNEG.js"),icon:()=>import("./chunk-VQEZLR5A.js"),panel:()=>import("./chunk-KEBWMDLF.js"),popover:()=>import("./chunk-D23TR7WI.js"),sheet:()=>import("./chunk-S3NLW32C.js")})}get expandTitle(){let{expanded:e,messagesCommon:t,collapseTooltip:n,expandTooltip:r}=this;return(e?n||t?.collapse:r||t?.expand)??""}get _displaySheet(){switch(this.mode){case"drawer":return!0;case"auto":return this.viewModel.view?.widthBreakpoint==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return D0}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return Bs(this.content)?this.content.icon:_0}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){return(Bs(this.content)?this.content.label:null)??this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){let{_displaySheet:e,_toggleButtonEl:t,viewModel:{expanded:n},label:r,placement:i}=this;return v("div",{class:this.classes(gt.base,de.widget)},this._renderToggle(),e?v("calcite-sheet",{class:gt.sheet,heightScale:"l",label:r,onkeydown:this._handleKeyDown,open:n,position:"block-end",onCalciteSheetClose:this._handleSheetClose},v("calcite-panel",{closable:!0,closed:!n,heading:r,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},v("div",{class:gt.panelContent},this._renderContent()))):t?v("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,label:r,onkeydown:this._handleKeyDown,open:n,overlayPositioning:"fixed",placement:i??this._getPlacement(),referenceElement:t,onCalcitePopoverClose:this._handlePopoverClose},v("div",{class:gt.popoverContent},this._renderContent())):null)}_getPlacement(){let{container:e,view:t}=this,n=e&&t?t.ui.getPosition(e):null;if(!n||n==="manual")return"auto";let[r,i]=n.split("-");return`${i==="right"?"left":"right"}-${r==="bottom"?"end":"start"}`}_willCloseOnEsc(e){let{closeOnEsc:t}=this;return typeof t=="function"?t(e):t}_renderBadgeNumber(){let{expanded:e,iconNumber:t}=this;return t&&!e?v("span",{class:gt.iconNumber,key:"expand__icon-number"},t):null}_renderToggleButton(){let{expanded:e,expandTitle:t,expandIcon:n,collapseIcon:r}=this,i=e?r:n,o=i===_0||i===D0;return v("calcite-button",{afterCreate:this._storeToggleButtonEl,afterUpdate:this._storeToggleButtonEl,class:de.widgetButton,kind:"neutral",label:t,onclick:this.toggle,scale:"s",title:t},i?v("calcite-icon",{class:this.classes(gt.icon,o&&gt.iconFlip),icon:i,scale:"s"}):null)}_renderToggle(){return v("div",{class:gt.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){let{content:e}=this;return typeof e=="string"?v("div",{class:gt.contentContainer,innerHTML:e,key:"content__string"}):Bs(e)?v("div",{class:gt.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?v("div",{afterCreate:this._attachToNode,bind:e,class:gt.contentContainer,key:"content__html-element"}):Km(e)?v("div",{afterCreate:this._attachToNode,bind:e.domNode,class:gt.contentContainer,key:"content__node"}):null}_attachToNode(e){let t=this;e.appendChild(t)}};l([u({readOnly:!0})],le.prototype,"expandTitle",null),l([u()],le.prototype,"_toggleButtonEl",void 0),l([u()],le.prototype,"_displaySheet",null),l([u()],le.prototype,"autoCollapse",null),l([u()],le.prototype,"closeOnEsc",void 0),l([u()],le.prototype,"collapseIcon",null),l([u()],le.prototype,"collapseTooltip",void 0),l([u()],le.prototype,"content",void 0),l([u()],le.prototype,"expanded",null),l([u()],le.prototype,"expandIcon",null),l([u()],le.prototype,"expandTooltip",void 0),l([u()],le.prototype,"group",null),l([u()],le.prototype,"icon",null),l([u()],le.prototype,"iconNumber",void 0),l([u()],le.prototype,"label",null),l([u(),Be("esri/widgets/Expand/t9n/Expand")],le.prototype,"messages",void 0),l([u(),Be("esri/t9n/common")],le.prototype,"messagesCommon",void 0),l([u()],le.prototype,"mode",void 0),l([u()],le.prototype,"placement",void 0),l([u()],le.prototype,"view",null),l([u({type:nf})],le.prototype,"viewModel",void 0),le=l([m("esri.widgets.Expand")],le);var C0=le;var uA=["mapViewNode"],I0=(()=>{let t=class t{constructor(){this.view=null}initializeMap(){let r=this.mapViewEl.nativeElement,i=new S_({portalItem:{id:"aa1d3f80270146208328cf66d022e09c"}});this.view=new y0({container:r,map:i});let o=new b0({view:this.view}),s=new C0({view:this.view,content:o,expanded:!0});return this.view.ui.add(s,"top-right"),i.when(()=>{i.bookmarks&&i.bookmarks.length?console.log("Bookmarks: ",i.bookmarks.length):console.log("No bookmarks in this webmap.")}),this.view.when()}ngOnInit(){this.initializeMap().then(()=>{console.log("The map is ready.")})}ngOnDestroy(){this.view&&this.view.destroy()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=La({type:t,selectors:[["app-root"]],viewQuery:function(i,o){if(i&1&&Mw(uA,7),i&2){let s;jd(s=Bd())&&(o.mapViewEl=s.first)}},standalone:!0,features:[Ga],decls:2,vars:0,consts:[["mapViewNode",""]],template:function(i,o){i&1&&To(0,"div",null,0)},styles:['@import"https://js.arcgis.com/4.30/@arcgis/core/assets/esri/themes/light/main.css";.esri-view[_ngcontent-%COMP%], #mapViewNode[_ngcontent-%COMP%]{padding:0;margin:0;height:100%;width:100%}']});let e=t;return e})();rb(I0,Hb).catch(e=>console.error(e));
