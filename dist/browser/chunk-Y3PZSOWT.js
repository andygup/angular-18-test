import{a as c,b as s}from"./chunk-KLDBOMH5.js";import{d as m,p as d}from"./chunk-AANS6QE5.js";import{z as y}from"./chunk-ZP7G4HN4.js";import{b as p}from"./chunk-MLSR6YE6.js";import{m as u,s as f}from"./chunk-3DV77WOO.js";var b=()=>f.getLogger("esri.support.basemapUtils");function C(){return{}}function D(e){for(let r in e){let a=e[r];p(a),delete e[r]}}function G(e,r){let a;if(typeof e=="string"){let n=e in c,t=!n&&e.includes("/");if(!n&&!t){let i=Object.entries(c).filter(([o,l])=>u.apiKey&&!l.classic||!u.apiKey&&(l.classic||l.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return b().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${i}`),null}r&&(a=r[e]),a||(a=n?s.fromId(e):new s({style:{id:e}}),r&&(r[e]=a))}else a=y(s,e);return a?.destroyed&&(b().warn("The provided basemap is already destroyed",{basemap:a}),a=null),a}function K(e){return!!e?.baseLayers.concat(e.referenceLayers).some(v)}function v(e){if(L(e.url))return!0;if(e.type==="vector-tile")for(let r in e.sourceNameToSource){let a=e.sourceNameToSource[r];if(L(a?.sourceUrl))return!0}return!1}function $(e,r){if(r==null||e==null)return{spatialReference:null,updating:!1};if(r.loadStatus==="not-loaded")return r.load(),{spatialReference:null,updating:!0};if(r.spatialReference)return{spatialReference:r.spatialReference,updating:!1};if(r.baseLayers.length===0)return{spatialReference:null,updating:!1};let a=r.baseLayers.at(0);switch(a.loadStatus){case"not-loaded":a.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}let n=(("supportedSpatialReferences"in a?a.supportedSpatialReferences:null)||["tileInfo"in a?a.tileInfo?.spatialReference:a.spatialReference]).filter(Boolean),t=e.spatialReference;return t?{spatialReference:n.find(i=>t.equals(i))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}}var S=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function L(e){if(!e)return!1;let r=new m(d(e));return!!r.authority&&S.test(r.authority)}export{C as a,D as b,G as c,K as d,v as e,$ as f};
